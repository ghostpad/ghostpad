var aS=Object.defineProperty;var uS=(e,t,n)=>t in e?aS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Bh=(e,t,n)=>(uS(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function io(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dy={exports:{}},za={},Fy={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zl=Symbol.for("react.element"),cS=Symbol.for("react.portal"),dS=Symbol.for("react.fragment"),fS=Symbol.for("react.strict_mode"),pS=Symbol.for("react.profiler"),hS=Symbol.for("react.provider"),mS=Symbol.for("react.context"),gS=Symbol.for("react.forward_ref"),yS=Symbol.for("react.suspense"),vS=Symbol.for("react.memo"),xS=Symbol.for("react.lazy"),Hh=Symbol.iterator;function _S(e){return e===null||typeof e!="object"?null:(e=Hh&&e[Hh]||e["@@iterator"],typeof e=="function"?e:null)}var zy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},By=Object.assign,Hy={};function oo(e,t,n){this.props=e,this.context=t,this.refs=Hy,this.updater=n||zy}oo.prototype.isReactComponent={};oo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};oo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wy(){}Wy.prototype=oo.prototype;function zf(e,t,n){this.props=e,this.context=t,this.refs=Hy,this.updater=n||zy}var Bf=zf.prototype=new Wy;Bf.constructor=zf;By(Bf,oo.prototype);Bf.isPureReactComponent=!0;var Wh=Array.isArray,Uy=Object.prototype.hasOwnProperty,Hf={current:null},Vy={key:!0,ref:!0,__self:!0,__source:!0};function Ky(e,t,n){var r,i={},o=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)Uy.call(t,r)&&!Vy.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),u=0;u<s;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:zl,type:e,key:o,ref:l,props:i,_owner:Hf.current}}function SS(e,t){return{$$typeof:zl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wf(e){return typeof e=="object"&&e!==null&&e.$$typeof===zl}function wS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Uh=/\/+/g;function Yu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wS(""+e.key):t.toString(36)}function ks(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case zl:case cS:l=!0}}if(l)return l=e,i=i(l),e=r===""?"."+Yu(l,0):r,Wh(i)?(n="",e!=null&&(n=e.replace(Uh,"$&/")+"/"),ks(i,t,n,"",function(u){return u})):i!=null&&(Wf(i)&&(i=SS(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Uh,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=r===""?".":r+":",Wh(e))for(var s=0;s<e.length;s++){o=e[s];var a=r+Yu(o,s);l+=ks(o,t,n,a,i)}else if(a=_S(e),typeof a=="function")for(e=a.call(e),s=0;!(o=e.next()).done;)o=o.value,a=r+Yu(o,s++),l+=ks(o,t,n,a,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function is(e,t,n){if(e==null)return e;var r=[],i=0;return ks(e,r,"","",function(o){return t.call(n,o,i++)}),r}function CS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var dt={current:null},Ps={transition:null},NS={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:Ps,ReactCurrentOwner:Hf};Y.Children={map:is,forEach:function(e,t,n){is(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return is(e,function(){t++}),t},toArray:function(e){return is(e,function(t){return t})||[]},only:function(e){if(!Wf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Y.Component=oo;Y.Fragment=dS;Y.Profiler=pS;Y.PureComponent=zf;Y.StrictMode=fS;Y.Suspense=yS;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NS;Y.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=By({},e.props),i=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=Hf.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(a in t)Uy.call(t,a)&&!Vy.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&s!==void 0?s[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){s=Array(a);for(var u=0;u<a;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:zl,type:e.type,key:i,ref:o,props:r,_owner:l}};Y.createContext=function(e){return e={$$typeof:mS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hS,_context:e},e.Consumer=e};Y.createElement=Ky;Y.createFactory=function(e){var t=Ky.bind(null,e);return t.type=e,t};Y.createRef=function(){return{current:null}};Y.forwardRef=function(e){return{$$typeof:gS,render:e}};Y.isValidElement=Wf;Y.lazy=function(e){return{$$typeof:xS,_payload:{_status:-1,_result:e},_init:CS}};Y.memo=function(e,t){return{$$typeof:vS,type:e,compare:t===void 0?null:t}};Y.startTransition=function(e){var t=Ps.transition;Ps.transition={};try{e()}finally{Ps.transition=t}};Y.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Y.useCallback=function(e,t){return dt.current.useCallback(e,t)};Y.useContext=function(e){return dt.current.useContext(e)};Y.useDebugValue=function(){};Y.useDeferredValue=function(e){return dt.current.useDeferredValue(e)};Y.useEffect=function(e,t){return dt.current.useEffect(e,t)};Y.useId=function(){return dt.current.useId()};Y.useImperativeHandle=function(e,t,n){return dt.current.useImperativeHandle(e,t,n)};Y.useInsertionEffect=function(e,t){return dt.current.useInsertionEffect(e,t)};Y.useLayoutEffect=function(e,t){return dt.current.useLayoutEffect(e,t)};Y.useMemo=function(e,t){return dt.current.useMemo(e,t)};Y.useReducer=function(e,t,n){return dt.current.useReducer(e,t,n)};Y.useRef=function(e){return dt.current.useRef(e)};Y.useState=function(e){return dt.current.useState(e)};Y.useSyncExternalStore=function(e,t,n){return dt.current.useSyncExternalStore(e,t,n)};Y.useTransition=function(){return dt.current.useTransition()};Y.version="18.2.0";Fy.exports=Y;var w=Fy.exports;const Vt=io(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES=w,TS=Symbol.for("react.element"),bS=Symbol.for("react.fragment"),OS=Object.prototype.hasOwnProperty,jS=ES.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kS={key:!0,ref:!0,__self:!0,__source:!0};function qy(e,t,n){var r,i={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)OS.call(t,r)&&!kS.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:TS,type:e,key:o,ref:l,props:i,_owner:jS.current}}za.Fragment=bS;za.jsx=qy;za.jsxs=qy;Dy.exports=za;var c=Dy.exports,Jc={},Yy={exports:{}},$t={},Gy={exports:{}},Qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,H){var U=R.length;R.push(H);e:for(;0<U;){var le=U-1>>>1,Ee=R[le];if(0<i(Ee,H))R[le]=H,R[U]=Ee,U=le;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var H=R[0],U=R.pop();if(U!==H){R[0]=U;e:for(var le=0,Ee=R.length,dn=Ee>>>1;le<dn;){var Mt=2*(le+1)-1,Lr=R[Mt],Tn=Mt+1,Kn=R[Tn];if(0>i(Lr,U))Tn<Ee&&0>i(Kn,Lr)?(R[le]=Kn,R[Tn]=U,le=Tn):(R[le]=Lr,R[Mt]=U,le=Mt);else if(Tn<Ee&&0>i(Kn,U))R[le]=Kn,R[Tn]=U,le=Tn;else break e}}return H}function i(R,H){var U=R.sortIndex-H.sortIndex;return U!==0?U:R.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,s=l.now();e.unstable_now=function(){return l.now()-s}}var a=[],u=[],d=1,h=null,f=3,p=!1,m=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=R)r(u),H.sortIndex=H.expirationTime,t(a,H);else break;H=n(u)}}function S(R){if(y=!1,x(R),!m)if(n(a)!==null)m=!0,ui(C);else{var H=n(u);H!==null&&ci(S,H.startTime-R)}}function C(R,H){m=!1,y&&(y=!1,g(b),b=-1),p=!0;var U=f;try{for(x(H),h=n(a);h!==null&&(!(h.expirationTime>H)||R&&!K());){var le=h.callback;if(typeof le=="function"){h.callback=null,f=h.priorityLevel;var Ee=le(h.expirationTime<=H);H=e.unstable_now(),typeof Ee=="function"?h.callback=Ee:h===n(a)&&r(a),x(H)}else r(a);h=n(a)}if(h!==null)var dn=!0;else{var Mt=n(u);Mt!==null&&ci(S,Mt.startTime-H),dn=!1}return dn}finally{h=null,f=U,p=!1}}var N=!1,T=null,b=-1,A=5,M=-1;function K(){return!(e.unstable_now()-M<A)}function $e(){if(T!==null){var R=e.unstable_now();M=R;var H=!0;try{H=T(!0,R)}finally{H?_t():(N=!1,T=null)}}else N=!1}var _t;if(typeof v=="function")_t=function(){v($e)};else if(typeof MessageChannel<"u"){var Vn=new MessageChannel,Vu=Vn.port2;Vn.port1.onmessage=$e,_t=function(){Vu.postMessage(null)}}else _t=function(){_($e,0)};function ui(R){T=R,N||(N=!0,_t())}function ci(R,H){b=_(function(){R(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,ui(C))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var U=f;f=H;try{return R()}finally{f=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,H){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var U=f;f=R;try{return H()}finally{f=U}},e.unstable_scheduleCallback=function(R,H,U){var le=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?le+U:le):U=le,R){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=U+Ee,R={id:d++,callback:H,priorityLevel:R,startTime:U,expirationTime:Ee,sortIndex:-1},U>le?(R.sortIndex=U,t(u,R),n(a)===null&&R===n(u)&&(y?(g(b),b=-1):y=!0,ci(S,U-le))):(R.sortIndex=Ee,t(a,R),m||p||(m=!0,ui(C))),R},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(R){var H=f;return function(){var U=f;f=H;try{return R.apply(this,arguments)}finally{f=U}}}})(Qy);Gy.exports=Qy;var PS=Gy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy=w,Ot=PS;function j(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xy=new Set,cl={};function li(e,t){qi(e,t),qi(e+"Capture",t)}function qi(e,t){for(cl[e]=t,e=0;e<t.length;e++)Xy.add(t[e])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xc=Object.prototype.hasOwnProperty,$S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vh={},Kh={};function RS(e){return Xc.call(Kh,e)?!0:Xc.call(Vh,e)?!1:$S.test(e)?Kh[e]=!0:(Vh[e]=!0,!1)}function LS(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function MS(e,t,n,r){if(t===null||typeof t>"u"||LS(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ft(e,t,n,r,i,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ke[e]=new ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ke[t]=new ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ke[e]=new ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ke[e]=new ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ke[e]=new ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ke[e]=new ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ke[e]=new ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ke[e]=new ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ke[e]=new ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var Uf=/[\-:]([a-z])/g;function Vf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Uf,Vf);Ke[t]=new ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Uf,Vf);Ke[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Uf,Vf);Ke[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ke[e]=new ft(e,1,!1,e.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ke[e]=new ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function Kf(e,t,n,r){var i=Ke.hasOwnProperty(t)?Ke[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(MS(t,n,i,r)&&(n=null),r||i===null?RS(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Wn=Jy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,os=Symbol.for("react.element"),vi=Symbol.for("react.portal"),xi=Symbol.for("react.fragment"),qf=Symbol.for("react.strict_mode"),Zc=Symbol.for("react.profiler"),Zy=Symbol.for("react.provider"),e0=Symbol.for("react.context"),Yf=Symbol.for("react.forward_ref"),ed=Symbol.for("react.suspense"),td=Symbol.for("react.suspense_list"),Gf=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),t0=Symbol.for("react.offscreen"),qh=Symbol.iterator;function wo(e){return e===null||typeof e!="object"?null:(e=qh&&e[qh]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,Gu;function Ao(e){if(Gu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gu=t&&t[1]||""}return`
`+Gu+e}var Qu=!1;function Ju(e,t){if(!e||Qu)return"";Qu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),l=i.length-1,s=o.length-1;1<=l&&0<=s&&i[l]!==o[s];)s--;for(;1<=l&&0<=s;l--,s--)if(i[l]!==o[s]){if(l!==1||s!==1)do if(l--,s--,0>s||i[l]!==o[s]){var a=`
`+i[l].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=l&&0<=s);break}}}finally{Qu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ao(e):""}function IS(e){switch(e.tag){case 5:return Ao(e.type);case 16:return Ao("Lazy");case 13:return Ao("Suspense");case 19:return Ao("SuspenseList");case 0:case 2:case 15:return e=Ju(e.type,!1),e;case 11:return e=Ju(e.type.render,!1),e;case 1:return e=Ju(e.type,!0),e;default:return""}}function nd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xi:return"Fragment";case vi:return"Portal";case Zc:return"Profiler";case qf:return"StrictMode";case ed:return"Suspense";case td:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case e0:return(e.displayName||"Context")+".Consumer";case Zy:return(e._context.displayName||"Context")+".Provider";case Yf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gf:return t=e.displayName||null,t!==null?t:nd(e.type)||"Memo";case Jn:t=e._payload,e=e._init;try{return nd(e(t))}catch{}}return null}function AS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nd(t);case 8:return t===qf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _r(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function n0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function DS(e){var t=n0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ls(e){e._valueTracker||(e._valueTracker=DS(e))}function r0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=n0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Gs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rd(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Yh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=_r(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function i0(e,t){t=t.checked,t!=null&&Kf(e,"checked",t,!1)}function id(e,t){i0(e,t);var n=_r(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?od(e,t.type,n):t.hasOwnProperty("defaultValue")&&od(e,t.type,_r(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function od(e,t,n){(t!=="number"||Gs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Do=Array.isArray;function $i(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_r(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ld(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(j(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(j(92));if(Do(n)){if(1<n.length)throw Error(j(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:_r(n)}}function o0(e,t){var n=_r(t.value),r=_r(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Jh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function l0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?l0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ss,s0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ss=ss||document.createElement("div"),ss.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ss.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function dl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FS=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(e){FS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ko[t]=Ko[e]})});function a0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ko.hasOwnProperty(e)&&Ko[e]?(""+t).trim():t+"px"}function u0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=a0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var zS=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ad(e,t){if(t){if(zS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(j(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(j(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(j(61))}if(t.style!=null&&typeof t.style!="object")throw Error(j(62))}}function ud(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cd=null;function Qf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var dd=null,Ri=null,Li=null;function Xh(e){if(e=Wl(e)){if(typeof dd!="function")throw Error(j(280));var t=e.stateNode;t&&(t=Va(t),dd(e.stateNode,e.type,t))}}function c0(e){Ri?Li?Li.push(e):Li=[e]:Ri=e}function d0(){if(Ri){var e=Ri,t=Li;if(Li=Ri=null,Xh(e),t)for(e=0;e<t.length;e++)Xh(t[e])}}function f0(e,t){return e(t)}function p0(){}var Xu=!1;function h0(e,t,n){if(Xu)return e(t,n);Xu=!0;try{return f0(e,t,n)}finally{Xu=!1,(Ri!==null||Li!==null)&&(p0(),d0())}}function fl(e,t){var n=e.stateNode;if(n===null)return null;var r=Va(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(j(231,t,typeof n));return n}var fd=!1;if(An)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){fd=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{fd=!1}function BS(e,t,n,r,i,o,l,s,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var qo=!1,Qs=null,Js=!1,pd=null,HS={onError:function(e){qo=!0,Qs=e}};function WS(e,t,n,r,i,o,l,s,a){qo=!1,Qs=null,BS.apply(HS,arguments)}function US(e,t,n,r,i,o,l,s,a){if(WS.apply(this,arguments),qo){if(qo){var u=Qs;qo=!1,Qs=null}else throw Error(j(198));Js||(Js=!0,pd=u)}}function si(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function m0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zh(e){if(si(e)!==e)throw Error(j(188))}function VS(e){var t=e.alternate;if(!t){if(t=si(e),t===null)throw Error(j(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Zh(i),e;if(o===r)return Zh(i),t;o=o.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=o;else{for(var l=!1,s=i.child;s;){if(s===n){l=!0,n=i,r=o;break}if(s===r){l=!0,r=i,n=o;break}s=s.sibling}if(!l){for(s=o.child;s;){if(s===n){l=!0,n=o,r=i;break}if(s===r){l=!0,r=o,n=i;break}s=s.sibling}if(!l)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?e:t}function g0(e){return e=VS(e),e!==null?y0(e):null}function y0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=y0(e);if(t!==null)return t;e=e.sibling}return null}var v0=Ot.unstable_scheduleCallback,em=Ot.unstable_cancelCallback,KS=Ot.unstable_shouldYield,qS=Ot.unstable_requestPaint,be=Ot.unstable_now,YS=Ot.unstable_getCurrentPriorityLevel,Jf=Ot.unstable_ImmediatePriority,x0=Ot.unstable_UserBlockingPriority,Xs=Ot.unstable_NormalPriority,GS=Ot.unstable_LowPriority,_0=Ot.unstable_IdlePriority,Ba=null,gn=null;function QS(e){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Ba,e,void 0,(e.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:ZS,JS=Math.log,XS=Math.LN2;function ZS(e){return e>>>=0,e===0?32:31-(JS(e)/XS|0)|0}var as=64,us=4194304;function Fo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var s=l&~i;s!==0?r=Fo(s):(o&=l,o!==0&&(r=Fo(o)))}else l=n&~i,l!==0?r=Fo(l):o!==0&&(r=Fo(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ln(t),i=1<<n,r|=e[n],t&=~i;return r}function ew(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tw(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-ln(o),s=1<<l,a=i[l];a===-1?(!(s&n)||s&r)&&(i[l]=ew(s,t)):a<=t&&(e.expiredLanes|=s),o&=~s}}function hd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function S0(){var e=as;return as<<=1,!(as&4194240)&&(as=64),e}function Zu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ln(t),e[t]=n}function nw(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ln(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function Xf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ln(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Z=0;function w0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var C0,Zf,N0,E0,T0,md=!1,cs=[],ar=null,ur=null,cr=null,pl=new Map,hl=new Map,er=[],rw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tm(e,t){switch(e){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":pl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(t.pointerId)}}function No(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Wl(t),t!==null&&Zf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function iw(e,t,n,r,i){switch(t){case"focusin":return ar=No(ar,e,t,n,r,i),!0;case"dragenter":return ur=No(ur,e,t,n,r,i),!0;case"mouseover":return cr=No(cr,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return pl.set(o,No(pl.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,hl.set(o,No(hl.get(o)||null,e,t,n,r,i)),!0}return!1}function b0(e){var t=Br(e.target);if(t!==null){var n=si(t);if(n!==null){if(t=n.tag,t===13){if(t=m0(n),t!==null){e.blockedOn=t,T0(e.priority,function(){N0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $s(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);cd=r,n.target.dispatchEvent(r),cd=null}else return t=Wl(n),t!==null&&Zf(t),e.blockedOn=n,!1;t.shift()}return!0}function nm(e,t,n){$s(e)&&n.delete(t)}function ow(){md=!1,ar!==null&&$s(ar)&&(ar=null),ur!==null&&$s(ur)&&(ur=null),cr!==null&&$s(cr)&&(cr=null),pl.forEach(nm),hl.forEach(nm)}function Eo(e,t){e.blockedOn===t&&(e.blockedOn=null,md||(md=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,ow)))}function ml(e){function t(i){return Eo(i,e)}if(0<cs.length){Eo(cs[0],e);for(var n=1;n<cs.length;n++){var r=cs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ar!==null&&Eo(ar,e),ur!==null&&Eo(ur,e),cr!==null&&Eo(cr,e),pl.forEach(t),hl.forEach(t),n=0;n<er.length;n++)r=er[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<er.length&&(n=er[0],n.blockedOn===null);)b0(n),n.blockedOn===null&&er.shift()}var Mi=Wn.ReactCurrentBatchConfig,ea=!0;function lw(e,t,n,r){var i=Z,o=Mi.transition;Mi.transition=null;try{Z=1,ep(e,t,n,r)}finally{Z=i,Mi.transition=o}}function sw(e,t,n,r){var i=Z,o=Mi.transition;Mi.transition=null;try{Z=4,ep(e,t,n,r)}finally{Z=i,Mi.transition=o}}function ep(e,t,n,r){if(ea){var i=gd(e,t,n,r);if(i===null)uc(e,t,r,ta,n),tm(e,r);else if(iw(i,e,t,n,r))r.stopPropagation();else if(tm(e,r),t&4&&-1<rw.indexOf(e)){for(;i!==null;){var o=Wl(i);if(o!==null&&C0(o),o=gd(e,t,n,r),o===null&&uc(e,t,r,ta,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else uc(e,t,r,null,n)}}var ta=null;function gd(e,t,n,r){if(ta=null,e=Qf(r),e=Br(e),e!==null)if(t=si(e),t===null)e=null;else if(n=t.tag,n===13){if(e=m0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ta=e,null}function O0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YS()){case Jf:return 1;case x0:return 4;case Xs:case GS:return 16;case _0:return 536870912;default:return 16}default:return 16}}var rr=null,tp=null,Rs=null;function j0(){if(Rs)return Rs;var e,t=tp,n=t.length,r,i="value"in rr?rr.value:rr.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===i[o-r];r++);return Rs=i.slice(e,1<r?1-r:void 0)}function Ls(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ds(){return!0}function rm(){return!1}function Rt(e){function t(n,r,i,o,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ds:rm,this.isPropagationStopped=rm,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),t}var lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},np=Rt(lo),Hl=_e({},lo,{view:0,detail:0}),aw=Rt(Hl),ec,tc,To,Ha=_e({},Hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==To&&(To&&e.type==="mousemove"?(ec=e.screenX-To.screenX,tc=e.screenY-To.screenY):tc=ec=0,To=e),ec)},movementY:function(e){return"movementY"in e?e.movementY:tc}}),im=Rt(Ha),uw=_e({},Ha,{dataTransfer:0}),cw=Rt(uw),dw=_e({},Hl,{relatedTarget:0}),nc=Rt(dw),fw=_e({},lo,{animationName:0,elapsedTime:0,pseudoElement:0}),pw=Rt(fw),hw=_e({},lo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mw=Rt(hw),gw=_e({},lo,{data:0}),om=Rt(gw),yw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _w(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xw[e])?!!t[e]:!1}function rp(){return _w}var Sw=_e({},Hl,{key:function(e){if(e.key){var t=yw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ls(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rp,charCode:function(e){return e.type==="keypress"?Ls(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ls(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ww=Rt(Sw),Cw=_e({},Ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lm=Rt(Cw),Nw=_e({},Hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rp}),Ew=Rt(Nw),Tw=_e({},lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),bw=Rt(Tw),Ow=_e({},Ha,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jw=Rt(Ow),kw=[9,13,27,32],ip=An&&"CompositionEvent"in window,Yo=null;An&&"documentMode"in document&&(Yo=document.documentMode);var Pw=An&&"TextEvent"in window&&!Yo,k0=An&&(!ip||Yo&&8<Yo&&11>=Yo),sm=String.fromCharCode(32),am=!1;function P0(e,t){switch(e){case"keyup":return kw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _i=!1;function $w(e,t){switch(e){case"compositionend":return $0(t);case"keypress":return t.which!==32?null:(am=!0,sm);case"textInput":return e=t.data,e===sm&&am?null:e;default:return null}}function Rw(e,t){if(_i)return e==="compositionend"||!ip&&P0(e,t)?(e=j0(),Rs=tp=rr=null,_i=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return k0&&t.locale!=="ko"?null:t.data;default:return null}}var Lw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function um(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Lw[e.type]:t==="textarea"}function R0(e,t,n,r){c0(r),t=na(t,"onChange"),0<t.length&&(n=new np("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Go=null,gl=null;function Mw(e){U0(e,0)}function Wa(e){var t=Ci(e);if(r0(t))return e}function Iw(e,t){if(e==="change")return t}var L0=!1;if(An){var rc;if(An){var ic="oninput"in document;if(!ic){var cm=document.createElement("div");cm.setAttribute("oninput","return;"),ic=typeof cm.oninput=="function"}rc=ic}else rc=!1;L0=rc&&(!document.documentMode||9<document.documentMode)}function dm(){Go&&(Go.detachEvent("onpropertychange",M0),gl=Go=null)}function M0(e){if(e.propertyName==="value"&&Wa(gl)){var t=[];R0(t,gl,e,Qf(e)),h0(Mw,t)}}function Aw(e,t,n){e==="focusin"?(dm(),Go=t,gl=n,Go.attachEvent("onpropertychange",M0)):e==="focusout"&&dm()}function Dw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wa(gl)}function Fw(e,t){if(e==="click")return Wa(t)}function zw(e,t){if(e==="input"||e==="change")return Wa(t)}function Bw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var an=typeof Object.is=="function"?Object.is:Bw;function yl(e,t){if(an(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Xc.call(t,i)||!an(e[i],t[i]))return!1}return!0}function fm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pm(e,t){var n=fm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fm(n)}}function I0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?I0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function A0(){for(var e=window,t=Gs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gs(e.document)}return t}function op(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Hw(e){var t=A0(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&I0(n.ownerDocument.documentElement,n)){if(r!==null&&op(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=pm(n,o);var l=pm(n,r);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ww=An&&"documentMode"in document&&11>=document.documentMode,Si=null,yd=null,Qo=null,vd=!1;function hm(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vd||Si==null||Si!==Gs(r)||(r=Si,"selectionStart"in r&&op(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qo&&yl(Qo,r)||(Qo=r,r=na(yd,"onSelect"),0<r.length&&(t=new np("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Si)))}function fs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionend:fs("Transition","TransitionEnd")},oc={},D0={};An&&(D0=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function Ua(e){if(oc[e])return oc[e];if(!wi[e])return e;var t=wi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in D0)return oc[e]=t[n];return e}var F0=Ua("animationend"),z0=Ua("animationiteration"),B0=Ua("animationstart"),H0=Ua("transitionend"),W0=new Map,mm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){W0.set(e,t),li(t,[e])}for(var lc=0;lc<mm.length;lc++){var sc=mm[lc],Uw=sc.toLowerCase(),Vw=sc[0].toUpperCase()+sc.slice(1);jr(Uw,"on"+Vw)}jr(F0,"onAnimationEnd");jr(z0,"onAnimationIteration");jr(B0,"onAnimationStart");jr("dblclick","onDoubleClick");jr("focusin","onFocus");jr("focusout","onBlur");jr(H0,"onTransitionEnd");qi("onMouseEnter",["mouseout","mouseover"]);qi("onMouseLeave",["mouseout","mouseover"]);qi("onPointerEnter",["pointerout","pointerover"]);qi("onPointerLeave",["pointerout","pointerover"]);li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));li("onBeforeInput",["compositionend","keypress","textInput","paste"]);li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kw=new Set("cancel close invalid load scroll toggle".split(" ").concat(zo));function gm(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,US(r,t,void 0,e),e.currentTarget=null}function U0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var l=r.length-1;0<=l;l--){var s=r[l],a=s.instance,u=s.currentTarget;if(s=s.listener,a!==o&&i.isPropagationStopped())break e;gm(i,s,u),o=a}else for(l=0;l<r.length;l++){if(s=r[l],a=s.instance,u=s.currentTarget,s=s.listener,a!==o&&i.isPropagationStopped())break e;gm(i,s,u),o=a}}}if(Js)throw e=pd,Js=!1,pd=null,e}function se(e,t){var n=t[Cd];n===void 0&&(n=t[Cd]=new Set);var r=e+"__bubble";n.has(r)||(V0(t,e,2,!1),n.add(r))}function ac(e,t,n){var r=0;t&&(r|=4),V0(n,e,r,t)}var ps="_reactListening"+Math.random().toString(36).slice(2);function vl(e){if(!e[ps]){e[ps]=!0,Xy.forEach(function(n){n!=="selectionchange"&&(Kw.has(n)||ac(n,!1,e),ac(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ps]||(t[ps]=!0,ac("selectionchange",!1,t))}}function V0(e,t,n,r){switch(O0(t)){case 1:var i=lw;break;case 4:i=sw;break;default:i=ep}n=i.bind(null,t,n,e),i=void 0,!fd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function uc(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;s!==null;){if(l=Br(s),l===null)return;if(a=l.tag,a===5||a===6){r=o=l;continue e}s=s.parentNode}}r=r.return}h0(function(){var u=o,d=Qf(n),h=[];e:{var f=W0.get(e);if(f!==void 0){var p=np,m=e;switch(e){case"keypress":if(Ls(n)===0)break e;case"keydown":case"keyup":p=ww;break;case"focusin":m="focus",p=nc;break;case"focusout":m="blur",p=nc;break;case"beforeblur":case"afterblur":p=nc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=im;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=cw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Ew;break;case F0:case z0:case B0:p=pw;break;case H0:p=bw;break;case"scroll":p=aw;break;case"wheel":p=jw;break;case"copy":case"cut":case"paste":p=mw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=lm}var y=(t&4)!==0,_=!y&&e==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var v=u,x;v!==null;){x=v;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,g!==null&&(S=fl(v,g),S!=null&&y.push(xl(v,S,x)))),_)break;v=v.return}0<y.length&&(f=new p(f,m,null,n,d),h.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==cd&&(m=n.relatedTarget||n.fromElement)&&(Br(m)||m[Dn]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?Br(m):null,m!==null&&(_=si(m),m!==_||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(y=im,S="onMouseLeave",g="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(y=lm,S="onPointerLeave",g="onPointerEnter",v="pointer"),_=p==null?f:Ci(p),x=m==null?f:Ci(m),f=new y(S,v+"leave",p,n,d),f.target=_,f.relatedTarget=x,S=null,Br(d)===u&&(y=new y(g,v+"enter",m,n,d),y.target=x,y.relatedTarget=_,S=y),_=S,p&&m)t:{for(y=p,g=m,v=0,x=y;x;x=di(x))v++;for(x=0,S=g;S;S=di(S))x++;for(;0<v-x;)y=di(y),v--;for(;0<x-v;)g=di(g),x--;for(;v--;){if(y===g||g!==null&&y===g.alternate)break t;y=di(y),g=di(g)}y=null}else y=null;p!==null&&ym(h,f,p,y,!1),m!==null&&_!==null&&ym(h,_,m,y,!0)}}e:{if(f=u?Ci(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=Iw;else if(um(f))if(L0)C=zw;else{C=Dw;var N=Aw}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Fw);if(C&&(C=C(e,u))){R0(h,C,n,d);break e}N&&N(e,f,u),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&od(f,"number",f.value)}switch(N=u?Ci(u):window,e){case"focusin":(um(N)||N.contentEditable==="true")&&(Si=N,yd=u,Qo=null);break;case"focusout":Qo=yd=Si=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,hm(h,n,d);break;case"selectionchange":if(Ww)break;case"keydown":case"keyup":hm(h,n,d)}var T;if(ip)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else _i?P0(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(k0&&n.locale!=="ko"&&(_i||b!=="onCompositionStart"?b==="onCompositionEnd"&&_i&&(T=j0()):(rr=d,tp="value"in rr?rr.value:rr.textContent,_i=!0)),N=na(u,b),0<N.length&&(b=new om(b,e,null,n,d),h.push({event:b,listeners:N}),T?b.data=T:(T=$0(n),T!==null&&(b.data=T)))),(T=Pw?$w(e,n):Rw(e,n))&&(u=na(u,"onBeforeInput"),0<u.length&&(d=new om("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=T))}U0(h,t)})}function xl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function na(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=fl(e,n),o!=null&&r.unshift(xl(e,o,i)),o=fl(e,t),o!=null&&r.push(xl(e,o,i))),e=e.return}return r}function di(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ym(e,t,n,r,i){for(var o=t._reactName,l=[];n!==null&&n!==r;){var s=n,a=s.alternate,u=s.stateNode;if(a!==null&&a===r)break;s.tag===5&&u!==null&&(s=u,i?(a=fl(n,o),a!=null&&l.unshift(xl(n,a,s))):i||(a=fl(n,o),a!=null&&l.push(xl(n,a,s)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var qw=/\r\n?/g,Yw=/\u0000|\uFFFD/g;function vm(e){return(typeof e=="string"?e:""+e).replace(qw,`
`).replace(Yw,"")}function hs(e,t,n){if(t=vm(t),vm(e)!==t&&n)throw Error(j(425))}function ra(){}var xd=null,_d=null;function Sd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wd=typeof setTimeout=="function"?setTimeout:void 0,Gw=typeof clearTimeout=="function"?clearTimeout:void 0,xm=typeof Promise=="function"?Promise:void 0,Qw=typeof queueMicrotask=="function"?queueMicrotask:typeof xm<"u"?function(e){return xm.resolve(null).then(e).catch(Jw)}:wd;function Jw(e){setTimeout(function(){throw e})}function cc(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ml(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ml(t)}function dr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _m(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var so=Math.random().toString(36).slice(2),mn="__reactFiber$"+so,_l="__reactProps$"+so,Dn="__reactContainer$"+so,Cd="__reactEvents$"+so,Xw="__reactListeners$"+so,Zw="__reactHandles$"+so;function Br(e){var t=e[mn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Dn]||n[mn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_m(e);e!==null;){if(n=e[mn])return n;e=_m(e)}return t}e=n,n=e.parentNode}return null}function Wl(e){return e=e[mn]||e[Dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ci(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(j(33))}function Va(e){return e[_l]||null}var Nd=[],Ni=-1;function kr(e){return{current:e}}function ue(e){0>Ni||(e.current=Nd[Ni],Nd[Ni]=null,Ni--)}function ie(e,t){Ni++,Nd[Ni]=e.current,e.current=t}var Sr={},rt=kr(Sr),gt=kr(!1),Qr=Sr;function Yi(e,t){var n=e.type.contextTypes;if(!n)return Sr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function yt(e){return e=e.childContextTypes,e!=null}function ia(){ue(gt),ue(rt)}function Sm(e,t,n){if(rt.current!==Sr)throw Error(j(168));ie(rt,t),ie(gt,n)}function K0(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(j(108,AS(e)||"Unknown",i));return _e({},n,r)}function oa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sr,Qr=rt.current,ie(rt,e),ie(gt,gt.current),!0}function wm(e,t,n){var r=e.stateNode;if(!r)throw Error(j(169));n?(e=K0(e,t,Qr),r.__reactInternalMemoizedMergedChildContext=e,ue(gt),ue(rt),ie(rt,e)):ue(gt),ie(gt,n)}var kn=null,Ka=!1,dc=!1;function q0(e){kn===null?kn=[e]:kn.push(e)}function eC(e){Ka=!0,q0(e)}function Pr(){if(!dc&&kn!==null){dc=!0;var e=0,t=Z;try{var n=kn;for(Z=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}kn=null,Ka=!1}catch(i){throw kn!==null&&(kn=kn.slice(e+1)),v0(Jf,Pr),i}finally{Z=t,dc=!1}}return null}var Ei=[],Ti=0,la=null,sa=0,Ft=[],zt=0,Jr=null,$n=1,Rn="";function Dr(e,t){Ei[Ti++]=sa,Ei[Ti++]=la,la=e,sa=t}function Y0(e,t,n){Ft[zt++]=$n,Ft[zt++]=Rn,Ft[zt++]=Jr,Jr=e;var r=$n;e=Rn;var i=32-ln(r)-1;r&=~(1<<i),n+=1;var o=32-ln(t)+i;if(30<o){var l=i-i%5;o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,$n=1<<32-ln(t)+i|n<<i|r,Rn=o+e}else $n=1<<o|n<<i|r,Rn=e}function lp(e){e.return!==null&&(Dr(e,1),Y0(e,1,0))}function sp(e){for(;e===la;)la=Ei[--Ti],Ei[Ti]=null,sa=Ei[--Ti],Ei[Ti]=null;for(;e===Jr;)Jr=Ft[--zt],Ft[zt]=null,Rn=Ft[--zt],Ft[zt]=null,$n=Ft[--zt],Ft[zt]=null}var Tt=null,Nt=null,he=!1,nn=null;function G0(e,t){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Cm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tt=e,Nt=dr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tt=e,Nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Jr!==null?{id:$n,overflow:Rn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Tt=e,Nt=null,!0):!1;default:return!1}}function Ed(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Td(e){if(he){var t=Nt;if(t){var n=t;if(!Cm(e,t)){if(Ed(e))throw Error(j(418));t=dr(n.nextSibling);var r=Tt;t&&Cm(e,t)?G0(r,n):(e.flags=e.flags&-4097|2,he=!1,Tt=e)}}else{if(Ed(e))throw Error(j(418));e.flags=e.flags&-4097|2,he=!1,Tt=e}}}function Nm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tt=e}function ms(e){if(e!==Tt)return!1;if(!he)return Nm(e),he=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Sd(e.type,e.memoizedProps)),t&&(t=Nt)){if(Ed(e))throw Q0(),Error(j(418));for(;t;)G0(e,t),t=dr(t.nextSibling)}if(Nm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(j(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Nt=dr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Nt=null}}else Nt=Tt?dr(e.stateNode.nextSibling):null;return!0}function Q0(){for(var e=Nt;e;)e=dr(e.nextSibling)}function Gi(){Nt=Tt=null,he=!1}function ap(e){nn===null?nn=[e]:nn.push(e)}var tC=Wn.ReactCurrentBatchConfig;function Xt(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var aa=kr(null),ua=null,bi=null,up=null;function cp(){up=bi=ua=null}function dp(e){var t=aa.current;ue(aa),e._currentValue=t}function bd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ii(e,t){ua=e,up=bi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mt=!0),e.firstContext=null)}function qt(e){var t=e._currentValue;if(up!==e)if(e={context:e,memoizedValue:t,next:null},bi===null){if(ua===null)throw Error(j(308));bi=e,ua.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Hr=null;function fp(e){Hr===null?Hr=[e]:Hr.push(e)}function J0(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,fp(t)):(n.next=i.next,i.next=n),t.interleaved=n,Fn(e,r)}function Fn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Xn=!1;function pp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Fn(e,n)}return i=r.interleaved,i===null?(t.next=t,fp(r)):(t.next=i.next,i.next=t),r.interleaved=t,Fn(e,n)}function Ms(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xf(e,n)}}function Em(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ca(e,t,n,r){var i=e.updateQueue;Xn=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var a=s,u=a.next;a.next=null,l===null?o=u:l.next=u,l=a;var d=e.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==l&&(s===null?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=a))}if(o!==null){var h=i.baseState;l=0,d=u=a=null,s=o;do{var f=s.lane,p=s.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,y=s;switch(f=t,p=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=_e({},h,f);break e;case 2:Xn=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(u=d=p,a=h):d=d.next=p,l|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(d===null&&(a=h),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Zr|=l,e.lanes=l,e.memoizedState=h}}function Tm(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(j(191,i));i.call(r)}}}var Z0=new Jy.Component().refs;function Od(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return(e=e._reactInternals)?si(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ct(),i=hr(e),o=Mn(r,i);o.payload=t,n!=null&&(o.callback=n),t=fr(e,o,i),t!==null&&(sn(t,e,i,r),Ms(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ct(),i=hr(e),o=Mn(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=fr(e,o,i),t!==null&&(sn(t,e,i,r),Ms(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ct(),r=hr(e),i=Mn(n,r);i.tag=2,t!=null&&(i.callback=t),t=fr(e,i,r),t!==null&&(sn(t,e,r,n),Ms(t,e,r))}};function bm(e,t,n,r,i,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,l):t.prototype&&t.prototype.isPureReactComponent?!yl(n,r)||!yl(i,o):!0}function ev(e,t,n){var r=!1,i=Sr,o=t.contextType;return typeof o=="object"&&o!==null?o=qt(o):(i=yt(t)?Qr:rt.current,r=t.contextTypes,o=(r=r!=null)?Yi(e,i):Sr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Om(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function jd(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Z0,pp(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=qt(o):(o=yt(t)?Qr:rt.current,i.context=Yi(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Od(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),ca(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function bo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var s=i.refs;s===Z0&&(s=i.refs={}),l===null?delete s[o]:s[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,e))}return e}function gs(e,t){throw e=Object.prototype.toString.call(t),Error(j(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jm(e){var t=e._init;return t(e._payload)}function tv(e){function t(g,v){if(e){var x=g.deletions;x===null?(g.deletions=[v],g.flags|=16):x.push(v)}}function n(g,v){if(!e)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=mr(g,v),g.index=0,g.sibling=null,g}function o(g,v,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<v?(g.flags|=2,v):x):(g.flags|=2,v)):(g.flags|=1048576,v)}function l(g){return e&&g.alternate===null&&(g.flags|=2),g}function s(g,v,x,S){return v===null||v.tag!==6?(v=vc(x,g.mode,S),v.return=g,v):(v=i(v,x),v.return=g,v)}function a(g,v,x,S){var C=x.type;return C===xi?d(g,v,x.props.children,S,x.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Jn&&jm(C)===v.type)?(S=i(v,x.props),S.ref=bo(g,v,x),S.return=g,S):(S=Bs(x.type,x.key,x.props,null,g.mode,S),S.ref=bo(g,v,x),S.return=g,S)}function u(g,v,x,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=xc(x,g.mode,S),v.return=g,v):(v=i(v,x.children||[]),v.return=g,v)}function d(g,v,x,S,C){return v===null||v.tag!==7?(v=Kr(x,g.mode,S,C),v.return=g,v):(v=i(v,x),v.return=g,v)}function h(g,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=vc(""+v,g.mode,x),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case os:return x=Bs(v.type,v.key,v.props,null,g.mode,x),x.ref=bo(g,null,v),x.return=g,x;case vi:return v=xc(v,g.mode,x),v.return=g,v;case Jn:var S=v._init;return h(g,S(v._payload),x)}if(Do(v)||wo(v))return v=Kr(v,g.mode,x,null),v.return=g,v;gs(g,v)}return null}function f(g,v,x,S){var C=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:s(g,v,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case os:return x.key===C?a(g,v,x,S):null;case vi:return x.key===C?u(g,v,x,S):null;case Jn:return C=x._init,f(g,v,C(x._payload),S)}if(Do(x)||wo(x))return C!==null?null:d(g,v,x,S,null);gs(g,x)}return null}function p(g,v,x,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(x)||null,s(v,g,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case os:return g=g.get(S.key===null?x:S.key)||null,a(v,g,S,C);case vi:return g=g.get(S.key===null?x:S.key)||null,u(v,g,S,C);case Jn:var N=S._init;return p(g,v,x,N(S._payload),C)}if(Do(S)||wo(S))return g=g.get(x)||null,d(v,g,S,C,null);gs(v,S)}return null}function m(g,v,x,S){for(var C=null,N=null,T=v,b=v=0,A=null;T!==null&&b<x.length;b++){T.index>b?(A=T,T=null):A=T.sibling;var M=f(g,T,x[b],S);if(M===null){T===null&&(T=A);break}e&&T&&M.alternate===null&&t(g,T),v=o(M,v,b),N===null?C=M:N.sibling=M,N=M,T=A}if(b===x.length)return n(g,T),he&&Dr(g,b),C;if(T===null){for(;b<x.length;b++)T=h(g,x[b],S),T!==null&&(v=o(T,v,b),N===null?C=T:N.sibling=T,N=T);return he&&Dr(g,b),C}for(T=r(g,T);b<x.length;b++)A=p(T,g,b,x[b],S),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?b:A.key),v=o(A,v,b),N===null?C=A:N.sibling=A,N=A);return e&&T.forEach(function(K){return t(g,K)}),he&&Dr(g,b),C}function y(g,v,x,S){var C=wo(x);if(typeof C!="function")throw Error(j(150));if(x=C.call(x),x==null)throw Error(j(151));for(var N=C=null,T=v,b=v=0,A=null,M=x.next();T!==null&&!M.done;b++,M=x.next()){T.index>b?(A=T,T=null):A=T.sibling;var K=f(g,T,M.value,S);if(K===null){T===null&&(T=A);break}e&&T&&K.alternate===null&&t(g,T),v=o(K,v,b),N===null?C=K:N.sibling=K,N=K,T=A}if(M.done)return n(g,T),he&&Dr(g,b),C;if(T===null){for(;!M.done;b++,M=x.next())M=h(g,M.value,S),M!==null&&(v=o(M,v,b),N===null?C=M:N.sibling=M,N=M);return he&&Dr(g,b),C}for(T=r(g,T);!M.done;b++,M=x.next())M=p(T,g,b,M.value,S),M!==null&&(e&&M.alternate!==null&&T.delete(M.key===null?b:M.key),v=o(M,v,b),N===null?C=M:N.sibling=M,N=M);return e&&T.forEach(function($e){return t(g,$e)}),he&&Dr(g,b),C}function _(g,v,x,S){if(typeof x=="object"&&x!==null&&x.type===xi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case os:e:{for(var C=x.key,N=v;N!==null;){if(N.key===C){if(C=x.type,C===xi){if(N.tag===7){n(g,N.sibling),v=i(N,x.props.children),v.return=g,g=v;break e}}else if(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Jn&&jm(C)===N.type){n(g,N.sibling),v=i(N,x.props),v.ref=bo(g,N,x),v.return=g,g=v;break e}n(g,N);break}else t(g,N);N=N.sibling}x.type===xi?(v=Kr(x.props.children,g.mode,S,x.key),v.return=g,g=v):(S=Bs(x.type,x.key,x.props,null,g.mode,S),S.ref=bo(g,v,x),S.return=g,g=S)}return l(g);case vi:e:{for(N=x.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(g,v.sibling),v=i(v,x.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else t(g,v);v=v.sibling}v=xc(x,g.mode,S),v.return=g,g=v}return l(g);case Jn:return N=x._init,_(g,v,N(x._payload),S)}if(Do(x))return m(g,v,x,S);if(wo(x))return y(g,v,x,S);gs(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(g,v.sibling),v=i(v,x),v.return=g,g=v):(n(g,v),v=vc(x,g.mode,S),v.return=g,g=v),l(g)):n(g,v)}return _}var Qi=tv(!0),nv=tv(!1),Ul={},yn=kr(Ul),Sl=kr(Ul),wl=kr(Ul);function Wr(e){if(e===Ul)throw Error(j(174));return e}function hp(e,t){switch(ie(wl,t),ie(Sl,e),ie(yn,Ul),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sd(t,e)}ue(yn),ie(yn,t)}function Ji(){ue(yn),ue(Sl),ue(wl)}function rv(e){Wr(wl.current);var t=Wr(yn.current),n=sd(t,e.type);t!==n&&(ie(Sl,e),ie(yn,n))}function mp(e){Sl.current===e&&(ue(yn),ue(Sl))}var ye=kr(0);function da(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fc=[];function gp(){for(var e=0;e<fc.length;e++)fc[e]._workInProgressVersionPrimary=null;fc.length=0}var Is=Wn.ReactCurrentDispatcher,pc=Wn.ReactCurrentBatchConfig,Xr=0,ve=null,Le=null,Ae=null,fa=!1,Jo=!1,Cl=0,nC=0;function Ye(){throw Error(j(321))}function yp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!an(e[n],t[n]))return!1;return!0}function vp(e,t,n,r,i,o){if(Xr=o,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Is.current=e===null||e.memoizedState===null?lC:sC,e=n(r,i),Jo){o=0;do{if(Jo=!1,Cl=0,25<=o)throw Error(j(301));o+=1,Ae=Le=null,t.updateQueue=null,Is.current=aC,e=n(r,i)}while(Jo)}if(Is.current=pa,t=Le!==null&&Le.next!==null,Xr=0,Ae=Le=ve=null,fa=!1,t)throw Error(j(300));return e}function xp(){var e=Cl!==0;return Cl=0,e}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?ve.memoizedState=Ae=e:Ae=Ae.next=e,Ae}function Yt(){if(Le===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=Ae===null?ve.memoizedState:Ae.next;if(t!==null)Ae=t,Le=e;else{if(e===null)throw Error(j(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Ae===null?ve.memoizedState=Ae=e:Ae=Ae.next=e}return Ae}function Nl(e,t){return typeof t=="function"?t(e):t}function hc(e){var t=Yt(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var r=Le,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=l=null,a=null,u=o;do{var d=u.lane;if((Xr&d)===d)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(s=a=h,l=r):a=a.next=h,ve.lanes|=d,Zr|=d}u=u.next}while(u!==null&&u!==o);a===null?l=r:a.next=s,an(r,t.memoizedState)||(mt=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,ve.lanes|=o,Zr|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function mc(e){var t=Yt(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do o=e(o,l.action),l=l.next;while(l!==i);an(o,t.memoizedState)||(mt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function iv(){}function ov(e,t){var n=ve,r=Yt(),i=t(),o=!an(r.memoizedState,i);if(o&&(r.memoizedState=i,mt=!0),r=r.queue,_p(av.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ae!==null&&Ae.memoizedState.tag&1){if(n.flags|=2048,El(9,sv.bind(null,n,r,i,t),void 0,null),ze===null)throw Error(j(349));Xr&30||lv(n,t,i)}return i}function lv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function sv(e,t,n,r){t.value=n,t.getSnapshot=r,uv(t)&&cv(e)}function av(e,t,n){return n(function(){uv(t)&&cv(e)})}function uv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!an(e,n)}catch{return!0}}function cv(e){var t=Fn(e,1);t!==null&&sn(t,e,1,-1)}function km(e){var t=hn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nl,lastRenderedState:e},t.queue=e,e=e.dispatch=oC.bind(null,ve,e),[t.memoizedState,e]}function El(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function dv(){return Yt().memoizedState}function As(e,t,n,r){var i=hn();ve.flags|=e,i.memoizedState=El(1|t,n,void 0,r===void 0?null:r)}function Ya(e,t,n,r){var i=Yt();r=r===void 0?null:r;var o=void 0;if(Le!==null){var l=Le.memoizedState;if(o=l.destroy,r!==null&&yp(r,l.deps)){i.memoizedState=El(t,n,o,r);return}}ve.flags|=e,i.memoizedState=El(1|t,n,o,r)}function Pm(e,t){return As(8390656,8,e,t)}function _p(e,t){return Ya(2048,8,e,t)}function fv(e,t){return Ya(4,2,e,t)}function pv(e,t){return Ya(4,4,e,t)}function hv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mv(e,t,n){return n=n!=null?n.concat([e]):null,Ya(4,4,hv.bind(null,t,e),n)}function Sp(){}function gv(e,t){var n=Yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function yv(e,t){var n=Yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function vv(e,t,n){return Xr&21?(an(n,t)||(n=S0(),ve.lanes|=n,Zr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mt=!0),e.memoizedState=n)}function rC(e,t){var n=Z;Z=n!==0&&4>n?n:4,e(!0);var r=pc.transition;pc.transition={};try{e(!1),t()}finally{Z=n,pc.transition=r}}function xv(){return Yt().memoizedState}function iC(e,t,n){var r=hr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_v(e))Sv(t,n);else if(n=J0(e,t,n,r),n!==null){var i=ct();sn(n,e,r,i),wv(n,t,r)}}function oC(e,t,n){var r=hr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_v(e))Sv(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,s=o(l,n);if(i.hasEagerState=!0,i.eagerState=s,an(s,l)){var a=t.interleaved;a===null?(i.next=i,fp(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=J0(e,t,i,r),n!==null&&(i=ct(),sn(n,e,r,i),wv(n,t,r))}}function _v(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function Sv(e,t){Jo=fa=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wv(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xf(e,n)}}var pa={readContext:qt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},lC={readContext:qt,useCallback:function(e,t){return hn().memoizedState=[e,t===void 0?null:t],e},useContext:qt,useEffect:Pm,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,As(4194308,4,hv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return As(4194308,4,e,t)},useInsertionEffect:function(e,t){return As(4,2,e,t)},useMemo:function(e,t){var n=hn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=hn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=iC.bind(null,ve,e),[r.memoizedState,e]},useRef:function(e){var t=hn();return e={current:e},t.memoizedState=e},useState:km,useDebugValue:Sp,useDeferredValue:function(e){return hn().memoizedState=e},useTransition:function(){var e=km(!1),t=e[0];return e=rC.bind(null,e[1]),hn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ve,i=hn();if(he){if(n===void 0)throw Error(j(407));n=n()}else{if(n=t(),ze===null)throw Error(j(349));Xr&30||lv(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Pm(av.bind(null,r,o,e),[e]),r.flags|=2048,El(9,sv.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=hn(),t=ze.identifierPrefix;if(he){var n=Rn,r=$n;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Cl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=nC++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sC={readContext:qt,useCallback:gv,useContext:qt,useEffect:_p,useImperativeHandle:mv,useInsertionEffect:fv,useLayoutEffect:pv,useMemo:yv,useReducer:hc,useRef:dv,useState:function(){return hc(Nl)},useDebugValue:Sp,useDeferredValue:function(e){var t=Yt();return vv(t,Le.memoizedState,e)},useTransition:function(){var e=hc(Nl)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:iv,useSyncExternalStore:ov,useId:xv,unstable_isNewReconciler:!1},aC={readContext:qt,useCallback:gv,useContext:qt,useEffect:_p,useImperativeHandle:mv,useInsertionEffect:fv,useLayoutEffect:pv,useMemo:yv,useReducer:mc,useRef:dv,useState:function(){return mc(Nl)},useDebugValue:Sp,useDeferredValue:function(e){var t=Yt();return Le===null?t.memoizedState=e:vv(t,Le.memoizedState,e)},useTransition:function(){var e=mc(Nl)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:iv,useSyncExternalStore:ov,useId:xv,unstable_isNewReconciler:!1};function Xi(e,t){try{var n="",r=t;do n+=IS(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function gc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function kd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var uC=typeof WeakMap=="function"?WeakMap:Map;function Cv(e,t,n){n=Mn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ma||(ma=!0,zd=r),kd(e,t)},n}function Nv(e,t,n){n=Mn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){kd(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){kd(e,t),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function $m(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new uC;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=CC.bind(null,e,t,n),t.then(e,e))}function Rm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lm(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Mn(-1,1),t.tag=2,fr(n,t,1))),n.lanes|=1),e)}var cC=Wn.ReactCurrentOwner,mt=!1;function lt(e,t,n,r){t.child=e===null?nv(t,null,n,r):Qi(t,e.child,n,r)}function Mm(e,t,n,r,i){n=n.render;var o=t.ref;return Ii(t,i),r=vp(e,t,n,r,o,i),n=xp(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zn(e,t,i)):(he&&n&&lp(t),t.flags|=1,lt(e,t,r,i),t.child)}function Im(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!jp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Ev(e,t,o,r,i)):(e=Bs(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:yl,n(l,r)&&e.ref===t.ref)return zn(e,t,i)}return t.flags|=1,e=mr(o,r),e.ref=t.ref,e.return=t,t.child=e}function Ev(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(yl(o,r)&&e.ref===t.ref)if(mt=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(mt=!0);else return t.lanes=e.lanes,zn(e,t,i)}return Pd(e,t,n,r,i)}function Tv(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(ji,wt),wt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ie(ji,wt),wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ie(ji,wt),wt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ie(ji,wt),wt|=r;return lt(e,t,i,n),t.child}function bv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pd(e,t,n,r,i){var o=yt(n)?Qr:rt.current;return o=Yi(t,o),Ii(t,i),n=vp(e,t,n,r,o,i),r=xp(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zn(e,t,i)):(he&&r&&lp(t),t.flags|=1,lt(e,t,n,i),t.child)}function Am(e,t,n,r,i){if(yt(n)){var o=!0;oa(t)}else o=!1;if(Ii(t,i),t.stateNode===null)Ds(e,t),ev(t,n,r),jd(t,n,r,i),r=!0;else if(e===null){var l=t.stateNode,s=t.memoizedProps;l.props=s;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=qt(u):(u=yt(n)?Qr:rt.current,u=Yi(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(s!==r||a!==u)&&Om(t,l,r,u),Xn=!1;var f=t.memoizedState;l.state=f,ca(t,r,l,i),a=t.memoizedState,s!==r||f!==a||gt.current||Xn?(typeof d=="function"&&(Od(t,n,d,r),a=t.memoizedState),(s=Xn||bm(t,n,s,r,f,a,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),l.props=r,l.state=a,l.context=u,r=s):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,X0(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Xt(t.type,s),l.props=u,h=t.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=qt(a):(a=yt(n)?Qr:rt.current,a=Yi(t,a));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(s!==h||f!==a)&&Om(t,l,r,a),Xn=!1,f=t.memoizedState,l.state=f,ca(t,r,l,i);var m=t.memoizedState;s!==h||f!==m||gt.current||Xn?(typeof p=="function"&&(Od(t,n,p,r),m=t.memoizedState),(u=Xn||bm(t,n,u,r,f,m,a)||!1)?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,m,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,m,a)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),l.props=r,l.state=m,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return $d(e,t,n,r,o,i)}function $d(e,t,n,r,i,o){bv(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return i&&wm(t,n,!1),zn(e,t,o);r=t.stateNode,cC.current=t;var s=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Qi(t,e.child,null,o),t.child=Qi(t,null,s,o)):lt(e,t,s,o),t.memoizedState=r.state,i&&wm(t,n,!0),t.child}function Ov(e){var t=e.stateNode;t.pendingContext?Sm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sm(e,t.context,!1),hp(e,t.containerInfo)}function Dm(e,t,n,r,i){return Gi(),ap(i),t.flags|=256,lt(e,t,n,r),t.child}var Rd={dehydrated:null,treeContext:null,retryLane:0};function Ld(e){return{baseLanes:e,cachePool:null,transitions:null}}function jv(e,t,n){var r=t.pendingProps,i=ye.current,o=!1,l=(t.flags&128)!==0,s;if((s=l)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ie(ye,i&1),e===null)return Td(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Ja(l,r,0,null),e=Kr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ld(n),t.memoizedState=Rd,e):wp(t,l));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return dC(e,t,l,r,s,i,n);if(o){o=r.fallback,l=t.mode,i=e.child,s=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=mr(i,a),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=mr(s,o):(o=Kr(o,l,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=e.child.memoizedState,l=l===null?Ld(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Rd,r}return o=e.child,e=o.sibling,r=mr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function wp(e,t){return t=Ja({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ys(e,t,n,r){return r!==null&&ap(r),Qi(t,e.child,null,n),e=wp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function dC(e,t,n,r,i,o,l){if(n)return t.flags&256?(t.flags&=-257,r=gc(Error(j(422))),ys(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ja({mode:"visible",children:r.children},i,0,null),o=Kr(o,i,l,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Qi(t,e.child,null,l),t.child.memoizedState=Ld(l),t.memoizedState=Rd,o);if(!(t.mode&1))return ys(e,t,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(j(419)),r=gc(o,r,void 0),ys(e,t,l,r)}if(s=(l&e.childLanes)!==0,mt||s){if(r=ze,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Fn(e,i),sn(r,e,i,-1))}return Op(),r=gc(Error(j(421))),ys(e,t,l,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=NC.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Nt=dr(i.nextSibling),Tt=t,he=!0,nn=null,e!==null&&(Ft[zt++]=$n,Ft[zt++]=Rn,Ft[zt++]=Jr,$n=e.id,Rn=e.overflow,Jr=t),t=wp(t,r.children),t.flags|=4096,t)}function Fm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),bd(e.return,t,n)}function yc(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function kv(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(lt(e,t,r.children,n),r=ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fm(e,n,t);else if(e.tag===19)Fm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ie(ye,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&da(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),yc(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&da(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}yc(t,!0,n,null,o);break;case"together":yc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ds(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Zr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(j(153));if(t.child!==null){for(e=t.child,n=mr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function fC(e,t,n){switch(t.tag){case 3:Ov(t),Gi();break;case 5:rv(t);break;case 1:yt(t.type)&&oa(t);break;case 4:hp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ie(aa,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ie(ye,ye.current&1),t.flags|=128,null):n&t.child.childLanes?jv(e,t,n):(ie(ye,ye.current&1),e=zn(e,t,n),e!==null?e.sibling:null);ie(ye,ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return kv(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ie(ye,ye.current),r)break;return null;case 22:case 23:return t.lanes=0,Tv(e,t,n)}return zn(e,t,n)}var Pv,Md,$v,Rv;Pv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Md=function(){};$v=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Wr(yn.current);var o=null;switch(n){case"input":i=rd(e,i),r=rd(e,r),o=[];break;case"select":i=_e({},i,{value:void 0}),r=_e({},r,{value:void 0}),o=[];break;case"textarea":i=ld(e,i),r=ld(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ra)}ad(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(l in s)s.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(cl.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var a=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==s&&(a!=null||s!=null))if(u==="style")if(s){for(l in s)!s.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&s[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(o||(o=[]),o.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,s=s?s.__html:void 0,a!=null&&s!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(cl.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&se("scroll",e),o||s===a||(o=[])):(o=o||[]).push(u,a))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Rv=function(e,t,n,r){n!==r&&(t.flags|=4)};function Oo(e,t){if(!he)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ge(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pC(e,t,n){var r=t.pendingProps;switch(sp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(t),null;case 1:return yt(t.type)&&ia(),Ge(t),null;case 3:return r=t.stateNode,Ji(),ue(gt),ue(rt),gp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ms(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nn!==null&&(Wd(nn),nn=null))),Md(e,t),Ge(t),null;case 5:mp(t);var i=Wr(wl.current);if(n=t.type,e!==null&&t.stateNode!=null)$v(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(j(166));return Ge(t),null}if(e=Wr(yn.current),ms(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[mn]=t,r[_l]=o,e=(t.mode&1)!==0,n){case"dialog":se("cancel",r),se("close",r);break;case"iframe":case"object":case"embed":se("load",r);break;case"video":case"audio":for(i=0;i<zo.length;i++)se(zo[i],r);break;case"source":se("error",r);break;case"img":case"image":case"link":se("error",r),se("load",r);break;case"details":se("toggle",r);break;case"input":Yh(r,o),se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},se("invalid",r);break;case"textarea":Qh(r,o),se("invalid",r)}ad(n,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var s=o[l];l==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&hs(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&hs(r.textContent,s,e),i=["children",""+s]):cl.hasOwnProperty(l)&&s!=null&&l==="onScroll"&&se("scroll",r)}switch(n){case"input":ls(r),Gh(r,o,!0);break;case"textarea":ls(r),Jh(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ra)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=l0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[mn]=t,e[_l]=r,Pv(e,t,!1,!1),t.stateNode=e;e:{switch(l=ud(n,r),n){case"dialog":se("cancel",e),se("close",e),i=r;break;case"iframe":case"object":case"embed":se("load",e),i=r;break;case"video":case"audio":for(i=0;i<zo.length;i++)se(zo[i],e);i=r;break;case"source":se("error",e),i=r;break;case"img":case"image":case"link":se("error",e),se("load",e),i=r;break;case"details":se("toggle",e),i=r;break;case"input":Yh(e,r),i=rd(e,r),se("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=_e({},r,{value:void 0}),se("invalid",e);break;case"textarea":Qh(e,r),i=ld(e,r),se("invalid",e);break;default:i=r}ad(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="style"?u0(e,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&s0(e,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&dl(e,a):typeof a=="number"&&dl(e,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(cl.hasOwnProperty(o)?a!=null&&o==="onScroll"&&se("scroll",e):a!=null&&Kf(e,o,a,l))}switch(n){case"input":ls(e),Gh(e,r,!1);break;case"textarea":ls(e),Jh(e);break;case"option":r.value!=null&&e.setAttribute("value",""+_r(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?$i(e,!!r.multiple,o,!1):r.defaultValue!=null&&$i(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ra)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ge(t),null;case 6:if(e&&t.stateNode!=null)Rv(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(j(166));if(n=Wr(wl.current),Wr(yn.current),ms(t)){if(r=t.stateNode,n=t.memoizedProps,r[mn]=t,(o=r.nodeValue!==n)&&(e=Tt,e!==null))switch(e.tag){case 3:hs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hs(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mn]=t,t.stateNode=r}return Ge(t),null;case 13:if(ue(ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(he&&Nt!==null&&t.mode&1&&!(t.flags&128))Q0(),Gi(),t.flags|=98560,o=!1;else if(o=ms(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(j(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(j(317));o[mn]=t}else Gi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ge(t),o=!1}else nn!==null&&(Wd(nn),nn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ye.current&1?Ie===0&&(Ie=3):Op())),t.updateQueue!==null&&(t.flags|=4),Ge(t),null);case 4:return Ji(),Md(e,t),e===null&&vl(t.stateNode.containerInfo),Ge(t),null;case 10:return dp(t.type._context),Ge(t),null;case 17:return yt(t.type)&&ia(),Ge(t),null;case 19:if(ue(ye),o=t.memoizedState,o===null)return Ge(t),null;if(r=(t.flags&128)!==0,l=o.rendering,l===null)if(r)Oo(o,!1);else{if(Ie!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=da(e),l!==null){for(t.flags|=128,Oo(o,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ie(ye,ye.current&1|2),t.child}e=e.sibling}o.tail!==null&&be()>Zi&&(t.flags|=128,r=!0,Oo(o,!1),t.lanes=4194304)}else{if(!r)if(e=da(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Oo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!he)return Ge(t),null}else 2*be()-o.renderingStartTime>Zi&&n!==1073741824&&(t.flags|=128,r=!0,Oo(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=be(),t.sibling=null,n=ye.current,ie(ye,r?n&1|2:n&1),t):(Ge(t),null);case 22:case 23:return bp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?wt&1073741824&&(Ge(t),t.subtreeFlags&6&&(t.flags|=8192)):Ge(t),null;case 24:return null;case 25:return null}throw Error(j(156,t.tag))}function hC(e,t){switch(sp(t),t.tag){case 1:return yt(t.type)&&ia(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ji(),ue(gt),ue(rt),gp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return mp(t),null;case 13:if(ue(ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(j(340));Gi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ue(ye),null;case 4:return Ji(),null;case 10:return dp(t.type._context),null;case 22:case 23:return bp(),null;case 24:return null;default:return null}}var vs=!1,Xe=!1,mC=typeof WeakSet=="function"?WeakSet:Set,L=null;function Oi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){we(e,t,r)}else n.current=null}function Id(e,t,n){try{n()}catch(r){we(e,t,r)}}var zm=!1;function gC(e,t){if(xd=ea,e=A0(),op(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,s=-1,a=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(s=l+i),h!==o||r!==0&&h.nodeType!==3||(a=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(s=l),f===o&&++d===r&&(a=l),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=s===-1||a===-1?null:{start:s,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(_d={focusedElem:e,selectionRange:n},ea=!1,L=t;L!==null;)if(t=L,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,L=e;else for(;L!==null;){t=L;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,_=m.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Xt(t.type,y),_);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(S){we(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,L=e;break}L=t.return}return m=zm,zm=!1,m}function Xo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Id(t,n,o)}i=i.next}while(i!==r)}}function Ga(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ad(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Lv(e){var t=e.alternate;t!==null&&(e.alternate=null,Lv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[mn],delete t[_l],delete t[Cd],delete t[Xw],delete t[Zw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Mv(e){return e.tag===5||e.tag===3||e.tag===4}function Bm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Dd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ra));else if(r!==4&&(e=e.child,e!==null))for(Dd(e,t,n),e=e.sibling;e!==null;)Dd(e,t,n),e=e.sibling}function Fd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Fd(e,t,n),e=e.sibling;e!==null;)Fd(e,t,n),e=e.sibling}var We=null,en=!1;function Gn(e,t,n){for(n=n.child;n!==null;)Iv(e,t,n),n=n.sibling}function Iv(e,t,n){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Ba,n)}catch{}switch(n.tag){case 5:Xe||Oi(n,t);case 6:var r=We,i=en;We=null,Gn(e,t,n),We=r,en=i,We!==null&&(en?(e=We,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):We.removeChild(n.stateNode));break;case 18:We!==null&&(en?(e=We,n=n.stateNode,e.nodeType===8?cc(e.parentNode,n):e.nodeType===1&&cc(e,n),ml(e)):cc(We,n.stateNode));break;case 4:r=We,i=en,We=n.stateNode.containerInfo,en=!0,Gn(e,t,n),We=r,en=i;break;case 0:case 11:case 14:case 15:if(!Xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Id(n,t,l),i=i.next}while(i!==r)}Gn(e,t,n);break;case 1:if(!Xe&&(Oi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){we(n,t,s)}Gn(e,t,n);break;case 21:Gn(e,t,n);break;case 22:n.mode&1?(Xe=(r=Xe)||n.memoizedState!==null,Gn(e,t,n),Xe=r):Gn(e,t,n);break;default:Gn(e,t,n)}}function Hm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new mC),t.forEach(function(r){var i=EC.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Jt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,l=t,s=l;e:for(;s!==null;){switch(s.tag){case 5:We=s.stateNode,en=!1;break e;case 3:We=s.stateNode.containerInfo,en=!0;break e;case 4:We=s.stateNode.containerInfo,en=!0;break e}s=s.return}if(We===null)throw Error(j(160));Iv(o,l,i),We=null,en=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){we(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Av(t,e),t=t.sibling}function Av(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),pn(e),r&4){try{Xo(3,e,e.return),Ga(3,e)}catch(y){we(e,e.return,y)}try{Xo(5,e,e.return)}catch(y){we(e,e.return,y)}}break;case 1:Jt(t,e),pn(e),r&512&&n!==null&&Oi(n,n.return);break;case 5:if(Jt(t,e),pn(e),r&512&&n!==null&&Oi(n,n.return),e.flags&32){var i=e.stateNode;try{dl(i,"")}catch(y){we(e,e.return,y)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,s=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&i0(i,o),ud(s,l);var u=ud(s,o);for(l=0;l<a.length;l+=2){var d=a[l],h=a[l+1];d==="style"?u0(i,h):d==="dangerouslySetInnerHTML"?s0(i,h):d==="children"?dl(i,h):Kf(i,d,h,u)}switch(s){case"input":id(i,o);break;case"textarea":o0(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?$i(i,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?$i(i,!!o.multiple,o.defaultValue,!0):$i(i,!!o.multiple,o.multiple?[]:"",!1))}i[_l]=o}catch(y){we(e,e.return,y)}}break;case 6:if(Jt(t,e),pn(e),r&4){if(e.stateNode===null)throw Error(j(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){we(e,e.return,y)}}break;case 3:if(Jt(t,e),pn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ml(t.containerInfo)}catch(y){we(e,e.return,y)}break;case 4:Jt(t,e),pn(e);break;case 13:Jt(t,e),pn(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Ep=be())),r&4&&Hm(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Xe=(u=Xe)||d,Jt(t,e),Xe=u):Jt(t,e),pn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(L=e,d=e.child;d!==null;){for(h=L=d;L!==null;){switch(f=L,p=f.child,f.tag){case 0:case 11:case 14:case 15:Xo(4,f,f.return);break;case 1:Oi(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(y){we(r,n,y)}}break;case 5:Oi(f,f.return);break;case 22:if(f.memoizedState!==null){Um(h);continue}}p!==null?(p.return=f,L=p):Um(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=h.stateNode,a=h.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,s.style.display=a0("display",l))}catch(y){we(e,e.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){we(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Jt(t,e),pn(e),r&4&&Hm(e);break;case 21:break;default:Jt(t,e),pn(e)}}function pn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Mv(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(dl(i,""),r.flags&=-33);var o=Bm(e);Fd(e,o,i);break;case 3:case 4:var l=r.stateNode.containerInfo,s=Bm(e);Dd(e,s,l);break;default:throw Error(j(161))}}catch(a){we(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yC(e,t,n){L=e,Dv(e)}function Dv(e,t,n){for(var r=(e.mode&1)!==0;L!==null;){var i=L,o=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||vs;if(!l){var s=i.alternate,a=s!==null&&s.memoizedState!==null||Xe;s=vs;var u=Xe;if(vs=l,(Xe=a)&&!u)for(L=i;L!==null;)l=L,a=l.child,l.tag===22&&l.memoizedState!==null?Vm(i):a!==null?(a.return=l,L=a):Vm(i);for(;o!==null;)L=o,Dv(o),o=o.sibling;L=i,vs=s,Xe=u}Wm(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,L=o):Wm(e)}}function Wm(e){for(;L!==null;){var t=L;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xe||Ga(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Xe)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Xt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Tm(t,o,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Tm(t,l,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ml(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}Xe||t.flags&512&&Ad(t)}catch(f){we(t,t.return,f)}}if(t===e){L=null;break}if(n=t.sibling,n!==null){n.return=t.return,L=n;break}L=t.return}}function Um(e){for(;L!==null;){var t=L;if(t===e){L=null;break}var n=t.sibling;if(n!==null){n.return=t.return,L=n;break}L=t.return}}function Vm(e){for(;L!==null;){var t=L;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ga(4,t)}catch(a){we(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){we(t,i,a)}}var o=t.return;try{Ad(t)}catch(a){we(t,o,a)}break;case 5:var l=t.return;try{Ad(t)}catch(a){we(t,l,a)}}}catch(a){we(t,t.return,a)}if(t===e){L=null;break}var s=t.sibling;if(s!==null){s.return=t.return,L=s;break}L=t.return}}var vC=Math.ceil,ha=Wn.ReactCurrentDispatcher,Cp=Wn.ReactCurrentOwner,Kt=Wn.ReactCurrentBatchConfig,J=0,ze=null,je=null,Ve=0,wt=0,ji=kr(0),Ie=0,Tl=null,Zr=0,Qa=0,Np=0,Zo=null,ht=null,Ep=0,Zi=1/0,jn=null,ma=!1,zd=null,pr=null,xs=!1,ir=null,ga=0,el=0,Bd=null,Fs=-1,zs=0;function ct(){return J&6?be():Fs!==-1?Fs:Fs=be()}function hr(e){return e.mode&1?J&2&&Ve!==0?Ve&-Ve:tC.transition!==null?(zs===0&&(zs=S0()),zs):(e=Z,e!==0||(e=window.event,e=e===void 0?16:O0(e.type)),e):1}function sn(e,t,n,r){if(50<el)throw el=0,Bd=null,Error(j(185));Bl(e,n,r),(!(J&2)||e!==ze)&&(e===ze&&(!(J&2)&&(Qa|=n),Ie===4&&tr(e,Ve)),vt(e,r),n===1&&J===0&&!(t.mode&1)&&(Zi=be()+500,Ka&&Pr()))}function vt(e,t){var n=e.callbackNode;tw(e,t);var r=Zs(e,e===ze?Ve:0);if(r===0)n!==null&&em(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&em(n),t===1)e.tag===0?eC(Km.bind(null,e)):q0(Km.bind(null,e)),Qw(function(){!(J&6)&&Pr()}),n=null;else{switch(w0(r)){case 1:n=Jf;break;case 4:n=x0;break;case 16:n=Xs;break;case 536870912:n=_0;break;default:n=Xs}n=Kv(n,Fv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Fv(e,t){if(Fs=-1,zs=0,J&6)throw Error(j(327));var n=e.callbackNode;if(Ai()&&e.callbackNode!==n)return null;var r=Zs(e,e===ze?Ve:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ya(e,r);else{t=r;var i=J;J|=2;var o=Bv();(ze!==e||Ve!==t)&&(jn=null,Zi=be()+500,Vr(e,t));do try{SC();break}catch(s){zv(e,s)}while(1);cp(),ha.current=o,J=i,je!==null?t=0:(ze=null,Ve=0,t=Ie)}if(t!==0){if(t===2&&(i=hd(e),i!==0&&(r=i,t=Hd(e,i))),t===1)throw n=Tl,Vr(e,0),tr(e,r),vt(e,be()),n;if(t===6)tr(e,r);else{if(i=e.current.alternate,!(r&30)&&!xC(i)&&(t=ya(e,r),t===2&&(o=hd(e),o!==0&&(r=o,t=Hd(e,o))),t===1))throw n=Tl,Vr(e,0),tr(e,r),vt(e,be()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(j(345));case 2:Fr(e,ht,jn);break;case 3:if(tr(e,r),(r&130023424)===r&&(t=Ep+500-be(),10<t)){if(Zs(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ct(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=wd(Fr.bind(null,e,ht,jn),t);break}Fr(e,ht,jn);break;case 4:if(tr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-ln(r);o=1<<l,l=t[l],l>i&&(i=l),r&=~o}if(r=i,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vC(r/1960))-r,10<r){e.timeoutHandle=wd(Fr.bind(null,e,ht,jn),r);break}Fr(e,ht,jn);break;case 5:Fr(e,ht,jn);break;default:throw Error(j(329))}}}return vt(e,be()),e.callbackNode===n?Fv.bind(null,e):null}function Hd(e,t){var n=Zo;return e.current.memoizedState.isDehydrated&&(Vr(e,t).flags|=256),e=ya(e,t),e!==2&&(t=ht,ht=n,t!==null&&Wd(t)),e}function Wd(e){ht===null?ht=e:ht.push.apply(ht,e)}function xC(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!an(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function tr(e,t){for(t&=~Np,t&=~Qa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ln(t),r=1<<n;e[n]=-1,t&=~r}}function Km(e){if(J&6)throw Error(j(327));Ai();var t=Zs(e,0);if(!(t&1))return vt(e,be()),null;var n=ya(e,t);if(e.tag!==0&&n===2){var r=hd(e);r!==0&&(t=r,n=Hd(e,r))}if(n===1)throw n=Tl,Vr(e,0),tr(e,t),vt(e,be()),n;if(n===6)throw Error(j(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fr(e,ht,jn),vt(e,be()),null}function Tp(e,t){var n=J;J|=1;try{return e(t)}finally{J=n,J===0&&(Zi=be()+500,Ka&&Pr())}}function ei(e){ir!==null&&ir.tag===0&&!(J&6)&&Ai();var t=J;J|=1;var n=Kt.transition,r=Z;try{if(Kt.transition=null,Z=1,e)return e()}finally{Z=r,Kt.transition=n,J=t,!(J&6)&&Pr()}}function bp(){wt=ji.current,ue(ji)}function Vr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Gw(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(sp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ia();break;case 3:Ji(),ue(gt),ue(rt),gp();break;case 5:mp(r);break;case 4:Ji();break;case 13:ue(ye);break;case 19:ue(ye);break;case 10:dp(r.type._context);break;case 22:case 23:bp()}n=n.return}if(ze=e,je=e=mr(e.current,null),Ve=wt=t,Ie=0,Tl=null,Np=Qa=Zr=0,ht=Zo=null,Hr!==null){for(t=0;t<Hr.length;t++)if(n=Hr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=i,r.next=l}n.pending=r}Hr=null}return e}function zv(e,t){do{var n=je;try{if(cp(),Is.current=pa,fa){for(var r=ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fa=!1}if(Xr=0,Ae=Le=ve=null,Jo=!1,Cl=0,Cp.current=null,n===null||n.return===null){Ie=1,Tl=t,je=null;break}e:{var o=e,l=n.return,s=n,a=t;if(t=Ve,s.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,d=s,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Rm(l);if(p!==null){p.flags&=-257,Lm(p,l,s,o,t),p.mode&1&&$m(o,u,t),t=p,a=u;var m=t.updateQueue;if(m===null){var y=new Set;y.add(a),t.updateQueue=y}else m.add(a);break e}else{if(!(t&1)){$m(o,u,t),Op();break e}a=Error(j(426))}}else if(he&&s.mode&1){var _=Rm(l);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Lm(_,l,s,o,t),ap(Xi(a,s));break e}}o=a=Xi(a,s),Ie!==4&&(Ie=2),Zo===null?Zo=[o]:Zo.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=Cv(o,a,t);Em(o,g);break e;case 1:s=a;var v=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(pr===null||!pr.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=Nv(o,s,t);Em(o,S);break e}}o=o.return}while(o!==null)}Wv(n)}catch(C){t=C,je===n&&n!==null&&(je=n=n.return);continue}break}while(1)}function Bv(){var e=ha.current;return ha.current=pa,e===null?pa:e}function Op(){(Ie===0||Ie===3||Ie===2)&&(Ie=4),ze===null||!(Zr&268435455)&&!(Qa&268435455)||tr(ze,Ve)}function ya(e,t){var n=J;J|=2;var r=Bv();(ze!==e||Ve!==t)&&(jn=null,Vr(e,t));do try{_C();break}catch(i){zv(e,i)}while(1);if(cp(),J=n,ha.current=r,je!==null)throw Error(j(261));return ze=null,Ve=0,Ie}function _C(){for(;je!==null;)Hv(je)}function SC(){for(;je!==null&&!KS();)Hv(je)}function Hv(e){var t=Vv(e.alternate,e,wt);e.memoizedProps=e.pendingProps,t===null?Wv(e):je=t,Cp.current=null}function Wv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=hC(n,t),n!==null){n.flags&=32767,je=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ie=6,je=null;return}}else if(n=pC(n,t,wt),n!==null){je=n;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);Ie===0&&(Ie=5)}function Fr(e,t,n){var r=Z,i=Kt.transition;try{Kt.transition=null,Z=1,wC(e,t,n,r)}finally{Kt.transition=i,Z=r}return null}function wC(e,t,n,r){do Ai();while(ir!==null);if(J&6)throw Error(j(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(j(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(nw(e,o),e===ze&&(je=ze=null,Ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xs||(xs=!0,Kv(Xs,function(){return Ai(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Kt.transition,Kt.transition=null;var l=Z;Z=1;var s=J;J|=4,Cp.current=null,gC(e,n),Av(n,e),Hw(_d),ea=!!xd,_d=xd=null,e.current=n,yC(n),qS(),J=s,Z=l,Kt.transition=o}else e.current=n;if(xs&&(xs=!1,ir=e,ga=i),o=e.pendingLanes,o===0&&(pr=null),QS(n.stateNode),vt(e,be()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ma)throw ma=!1,e=zd,zd=null,e;return ga&1&&e.tag!==0&&Ai(),o=e.pendingLanes,o&1?e===Bd?el++:(el=0,Bd=e):el=0,Pr(),null}function Ai(){if(ir!==null){var e=w0(ga),t=Kt.transition,n=Z;try{if(Kt.transition=null,Z=16>e?16:e,ir===null)var r=!1;else{if(e=ir,ir=null,ga=0,J&6)throw Error(j(331));var i=J;for(J|=4,L=e.current;L!==null;){var o=L,l=o.child;if(L.flags&16){var s=o.deletions;if(s!==null){for(var a=0;a<s.length;a++){var u=s[a];for(L=u;L!==null;){var d=L;switch(d.tag){case 0:case 11:case 15:Xo(8,d,o)}var h=d.child;if(h!==null)h.return=d,L=h;else for(;L!==null;){d=L;var f=d.sibling,p=d.return;if(Lv(d),d===u){L=null;break}if(f!==null){f.return=p,L=f;break}L=p}}}var m=o.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}L=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,L=l;else e:for(;L!==null;){if(o=L,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Xo(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,L=g;break e}L=o.return}}var v=e.current;for(L=v;L!==null;){l=L;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,L=x;else e:for(l=v;L!==null;){if(s=L,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Ga(9,s)}}catch(C){we(s,s.return,C)}if(s===l){L=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,L=S;break e}L=s.return}}if(J=i,Pr(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Ba,e)}catch{}r=!0}return r}finally{Z=n,Kt.transition=t}}return!1}function qm(e,t,n){t=Xi(n,t),t=Cv(e,t,1),e=fr(e,t,1),t=ct(),e!==null&&(Bl(e,1,t),vt(e,t))}function we(e,t,n){if(e.tag===3)qm(e,e,n);else for(;t!==null;){if(t.tag===3){qm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){e=Xi(n,e),e=Nv(t,e,1),t=fr(t,e,1),e=ct(),t!==null&&(Bl(t,1,e),vt(t,e));break}}t=t.return}}function CC(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ct(),e.pingedLanes|=e.suspendedLanes&n,ze===e&&(Ve&n)===n&&(Ie===4||Ie===3&&(Ve&130023424)===Ve&&500>be()-Ep?Vr(e,0):Np|=n),vt(e,t)}function Uv(e,t){t===0&&(e.mode&1?(t=us,us<<=1,!(us&130023424)&&(us=4194304)):t=1);var n=ct();e=Fn(e,t),e!==null&&(Bl(e,t,n),vt(e,n))}function NC(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Uv(e,n)}function EC(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(t),Uv(e,n)}var Vv;Vv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||gt.current)mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return mt=!1,fC(e,t,n);mt=!!(e.flags&131072)}else mt=!1,he&&t.flags&1048576&&Y0(t,sa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ds(e,t),e=t.pendingProps;var i=Yi(t,rt.current);Ii(t,n),i=vp(null,t,r,e,i,n);var o=xp();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yt(r)?(o=!0,oa(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pp(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,jd(t,r,e,n),t=$d(null,t,r,!0,o,n)):(t.tag=0,he&&o&&lp(t),lt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ds(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=bC(r),e=Xt(r,e),i){case 0:t=Pd(null,t,r,e,n);break e;case 1:t=Am(null,t,r,e,n);break e;case 11:t=Mm(null,t,r,e,n);break e;case 14:t=Im(null,t,r,Xt(r.type,e),n);break e}throw Error(j(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xt(r,i),Pd(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xt(r,i),Am(e,t,r,i,n);case 3:e:{if(Ov(t),e===null)throw Error(j(387));r=t.pendingProps,o=t.memoizedState,i=o.element,X0(e,t),ca(t,r,null,n);var l=t.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Xi(Error(j(423)),t),t=Dm(e,t,r,n,i);break e}else if(r!==i){i=Xi(Error(j(424)),t),t=Dm(e,t,r,n,i);break e}else for(Nt=dr(t.stateNode.containerInfo.firstChild),Tt=t,he=!0,nn=null,n=nv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gi(),r===i){t=zn(e,t,n);break e}lt(e,t,r,n)}t=t.child}return t;case 5:return rv(t),e===null&&Td(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,l=i.children,Sd(r,i)?l=null:o!==null&&Sd(r,o)&&(t.flags|=32),bv(e,t),lt(e,t,l,n),t.child;case 6:return e===null&&Td(t),null;case 13:return jv(e,t,n);case 4:return hp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Qi(t,null,r,n):lt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xt(r,i),Mm(e,t,r,i,n);case 7:return lt(e,t,t.pendingProps,n),t.child;case 8:return lt(e,t,t.pendingProps.children,n),t.child;case 12:return lt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,l=i.value,ie(aa,r._currentValue),r._currentValue=l,o!==null)if(an(o.value,l)){if(o.children===i.children&&!gt.current){t=zn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){l=o.child;for(var a=s.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Mn(-1,n&-n),a.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?a.next=a:(a.next=d.next,d.next=a),u.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),bd(o.return,n,t),s.lanes|=n;break}a=a.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(j(341));l.lanes|=n,s=l.alternate,s!==null&&(s.lanes|=n),bd(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}lt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ii(t,n),i=qt(i),r=r(i),t.flags|=1,lt(e,t,r,n),t.child;case 14:return r=t.type,i=Xt(r,t.pendingProps),i=Xt(r.type,i),Im(e,t,r,i,n);case 15:return Ev(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xt(r,i),Ds(e,t),t.tag=1,yt(r)?(e=!0,oa(t)):e=!1,Ii(t,n),ev(t,r,i),jd(t,r,i,n),$d(null,t,r,!0,e,n);case 19:return kv(e,t,n);case 22:return Tv(e,t,n)}throw Error(j(156,t.tag))};function Kv(e,t){return v0(e,t)}function TC(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,t,n,r){return new TC(e,t,n,r)}function jp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bC(e){if(typeof e=="function")return jp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yf)return 11;if(e===Gf)return 14}return 2}function mr(e,t){var n=e.alternate;return n===null?(n=Wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bs(e,t,n,r,i,o){var l=2;if(r=e,typeof e=="function")jp(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case xi:return Kr(n.children,i,o,t);case qf:l=8,i|=8;break;case Zc:return e=Wt(12,n,t,i|2),e.elementType=Zc,e.lanes=o,e;case ed:return e=Wt(13,n,t,i),e.elementType=ed,e.lanes=o,e;case td:return e=Wt(19,n,t,i),e.elementType=td,e.lanes=o,e;case t0:return Ja(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Zy:l=10;break e;case e0:l=9;break e;case Yf:l=11;break e;case Gf:l=14;break e;case Jn:l=16,r=null;break e}throw Error(j(130,e==null?e:typeof e,""))}return t=Wt(l,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Kr(e,t,n,r){return e=Wt(7,e,r,t),e.lanes=n,e}function Ja(e,t,n,r){return e=Wt(22,e,r,t),e.elementType=t0,e.lanes=n,e.stateNode={isHidden:!1},e}function vc(e,t,n){return e=Wt(6,e,null,t),e.lanes=n,e}function xc(e,t,n){return t=Wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function OC(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zu(0),this.expirationTimes=Zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function kp(e,t,n,r,i,o,l,s,a){return e=new OC(e,t,n,s,a),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Wt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pp(o),e}function jC(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function qv(e){if(!e)return Sr;e=e._reactInternals;e:{if(si(e)!==e||e.tag!==1)throw Error(j(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(j(171))}if(e.tag===1){var n=e.type;if(yt(n))return K0(e,n,t)}return t}function Yv(e,t,n,r,i,o,l,s,a){return e=kp(n,r,!0,e,i,o,l,s,a),e.context=qv(null),n=e.current,r=ct(),i=hr(n),o=Mn(r,i),o.callback=t??null,fr(n,o,i),e.current.lanes=i,Bl(e,i,r),vt(e,r),e}function Xa(e,t,n,r){var i=t.current,o=ct(),l=hr(i);return n=qv(n),t.context===null?t.context=n:t.pendingContext=n,t=Mn(o,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=fr(i,t,l),e!==null&&(sn(e,i,l,o),Ms(e,i,l)),l}function va(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ym(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Pp(e,t){Ym(e,t),(e=e.alternate)&&Ym(e,t)}function kC(){return null}var Gv=typeof reportError=="function"?reportError:function(e){console.error(e)};function $p(e){this._internalRoot=e}Za.prototype.render=$p.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(j(409));Xa(e,t,null,null)};Za.prototype.unmount=$p.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ei(function(){Xa(null,e,null,null)}),t[Dn]=null}};function Za(e){this._internalRoot=e}Za.prototype.unstable_scheduleHydration=function(e){if(e){var t=E0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<er.length&&t!==0&&t<er[n].priority;n++);er.splice(n,0,e),n===0&&b0(e)}};function Rp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function eu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gm(){}function PC(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=va(l);o.call(u)}}var l=Yv(t,r,e,0,null,!1,!1,"",Gm);return e._reactRootContainer=l,e[Dn]=l.current,vl(e.nodeType===8?e.parentNode:e),ei(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=va(a);s.call(u)}}var a=kp(e,0,!1,null,null,!1,!1,"",Gm);return e._reactRootContainer=a,e[Dn]=a.current,vl(e.nodeType===8?e.parentNode:e),ei(function(){Xa(t,a,n,r)}),a}function tu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var s=i;i=function(){var a=va(l);s.call(a)}}Xa(t,l,e,i)}else l=PC(n,t,e,i,r);return va(l)}C0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fo(t.pendingLanes);n!==0&&(Xf(t,n|1),vt(t,be()),!(J&6)&&(Zi=be()+500,Pr()))}break;case 13:ei(function(){var r=Fn(e,1);if(r!==null){var i=ct();sn(r,e,1,i)}}),Pp(e,1)}};Zf=function(e){if(e.tag===13){var t=Fn(e,134217728);if(t!==null){var n=ct();sn(t,e,134217728,n)}Pp(e,134217728)}};N0=function(e){if(e.tag===13){var t=hr(e),n=Fn(e,t);if(n!==null){var r=ct();sn(n,e,t,r)}Pp(e,t)}};E0=function(){return Z};T0=function(e,t){var n=Z;try{return Z=e,t()}finally{Z=n}};dd=function(e,t,n){switch(t){case"input":if(id(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Va(r);if(!i)throw Error(j(90));r0(r),id(r,i)}}}break;case"textarea":o0(e,n);break;case"select":t=n.value,t!=null&&$i(e,!!n.multiple,t,!1)}};f0=Tp;p0=ei;var $C={usingClientEntryPoint:!1,Events:[Wl,Ci,Va,c0,d0,Tp]},jo={findFiberByHostInstance:Br,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},RC={bundleType:jo.bundleType,version:jo.version,rendererPackageName:jo.rendererPackageName,rendererConfig:jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=g0(e),e===null?null:e.stateNode},findFiberByHostInstance:jo.findFiberByHostInstance||kC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_s.isDisabled&&_s.supportsFiber)try{Ba=_s.inject(RC),gn=_s}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$C;$t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rp(t))throw Error(j(200));return jC(e,t,null,n)};$t.createRoot=function(e,t){if(!Rp(e))throw Error(j(299));var n=!1,r="",i=Gv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=kp(e,1,!1,null,null,n,!1,r,i),e[Dn]=t.current,vl(e.nodeType===8?e.parentNode:e),new $p(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(j(188)):(e=Object.keys(e).join(","),Error(j(268,e)));return e=g0(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return ei(e)};$t.hydrate=function(e,t,n){if(!eu(t))throw Error(j(200));return tu(null,e,t,!0,n)};$t.hydrateRoot=function(e,t,n){if(!Rp(e))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",l=Gv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Yv(t,null,e,1,n??null,i,!1,o,l),e[Dn]=t.current,vl(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Za(t)};$t.render=function(e,t,n){if(!eu(t))throw Error(j(200));return tu(null,e,t,!1,n)};$t.unmountComponentAtNode=function(e){if(!eu(e))throw Error(j(40));return e._reactRootContainer?(ei(function(){tu(null,null,e,!1,function(){e._reactRootContainer=null,e[Dn]=null})}),!0):!1};$t.unstable_batchedUpdates=Tp;$t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!eu(n))throw Error(j(200));if(e==null||e._reactInternals===void 0)throw Error(j(38));return tu(e,t,n,!1,r)};$t.version="18.2.0-next-9e3b772b8-20220608";function Qv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qv)}catch(e){console.error(e)}}Qv(),Yy.exports=$t;var Lp=Yy.exports,Qm=Lp;Jc.createRoot=Qm.createRoot,Jc.hydrateRoot=Qm.hydrateRoot;var Jv={exports:{}},Xv={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eo=w;function LC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var MC=typeof Object.is=="function"?Object.is:LC,IC=eo.useState,AC=eo.useEffect,DC=eo.useLayoutEffect,FC=eo.useDebugValue;function zC(e,t){var n=t(),r=IC({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return DC(function(){i.value=n,i.getSnapshot=t,_c(i)&&o({inst:i})},[e,n,t]),AC(function(){return _c(i)&&o({inst:i}),e(function(){_c(i)&&o({inst:i})})},[e]),FC(n),n}function _c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!MC(e,n)}catch{return!0}}function BC(e,t){return t()}var HC=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?BC:zC;Xv.useSyncExternalStore=eo.useSyncExternalStore!==void 0?eo.useSyncExternalStore:HC;Jv.exports=Xv;var WC=Jv.exports,Zv={exports:{}},e1={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nu=w,UC=WC;function VC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var KC=typeof Object.is=="function"?Object.is:VC,qC=UC.useSyncExternalStore,YC=nu.useRef,GC=nu.useEffect,QC=nu.useMemo,JC=nu.useDebugValue;e1.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=YC(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=QC(function(){function a(p){if(!u){if(u=!0,d=p,p=r(p),i!==void 0&&l.hasValue){var m=l.value;if(i(m,p))return h=m}return h=p}if(m=h,KC(d,p))return m;var y=r(p);return i!==void 0&&i(m,y)?m:(d=p,h=y)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return a(t())},f===null?void 0:function(){return a(f())}]},[t,n,r,i]);var s=qC(e,o[0],o[1]);return GC(function(){l.hasValue=!0,l.value=s},[s]),JC(s),s};Zv.exports=e1;var XC=Zv.exports;function ZC(e){e()}let t1=ZC;const eN=e=>t1=e,tN=()=>t1,Jm=Symbol.for("react-redux-context"),Xm=typeof globalThis<"u"?globalThis:{};function nN(){var e;if(!w.createContext)return{};const t=(e=Xm[Jm])!=null?e:Xm[Jm]=new Map;let n=t.get(w.createContext);return n||(n=w.createContext(null),t.set(w.createContext,n)),n}const wr=nN();function Mp(e=wr){return function(){return w.useContext(e)}}const n1=Mp(),rN=()=>{throw new Error("uSES not initialized!")};let r1=rN;const iN=e=>{r1=e},oN=(e,t)=>e===t;function lN(e=wr){const t=e===wr?n1:Mp(e);return function(r,i={}){const{equalityFn:o=oN,stabilityCheck:l=void 0,noopCheck:s=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:d,stabilityCheck:h,noopCheck:f}=t();w.useRef(!0);const p=w.useCallback({[r.name](y){return r(y)}}[r.name],[r,h,l]),m=r1(u.addNestedSub,a.getState,d||a.getState,p,o);return w.useDebugValue(m),m}}const z=lN();var i1={exports:{}},ee={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Be=typeof Symbol=="function"&&Symbol.for,Ip=Be?Symbol.for("react.element"):60103,Ap=Be?Symbol.for("react.portal"):60106,ru=Be?Symbol.for("react.fragment"):60107,iu=Be?Symbol.for("react.strict_mode"):60108,ou=Be?Symbol.for("react.profiler"):60114,lu=Be?Symbol.for("react.provider"):60109,su=Be?Symbol.for("react.context"):60110,Dp=Be?Symbol.for("react.async_mode"):60111,au=Be?Symbol.for("react.concurrent_mode"):60111,uu=Be?Symbol.for("react.forward_ref"):60112,cu=Be?Symbol.for("react.suspense"):60113,sN=Be?Symbol.for("react.suspense_list"):60120,du=Be?Symbol.for("react.memo"):60115,fu=Be?Symbol.for("react.lazy"):60116,aN=Be?Symbol.for("react.block"):60121,uN=Be?Symbol.for("react.fundamental"):60117,cN=Be?Symbol.for("react.responder"):60118,dN=Be?Symbol.for("react.scope"):60119;function Lt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Ip:switch(e=e.type,e){case Dp:case au:case ru:case ou:case iu:case cu:return e;default:switch(e=e&&e.$$typeof,e){case su:case uu:case fu:case du:case lu:return e;default:return t}}case Ap:return t}}}function o1(e){return Lt(e)===au}ee.AsyncMode=Dp;ee.ConcurrentMode=au;ee.ContextConsumer=su;ee.ContextProvider=lu;ee.Element=Ip;ee.ForwardRef=uu;ee.Fragment=ru;ee.Lazy=fu;ee.Memo=du;ee.Portal=Ap;ee.Profiler=ou;ee.StrictMode=iu;ee.Suspense=cu;ee.isAsyncMode=function(e){return o1(e)||Lt(e)===Dp};ee.isConcurrentMode=o1;ee.isContextConsumer=function(e){return Lt(e)===su};ee.isContextProvider=function(e){return Lt(e)===lu};ee.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ip};ee.isForwardRef=function(e){return Lt(e)===uu};ee.isFragment=function(e){return Lt(e)===ru};ee.isLazy=function(e){return Lt(e)===fu};ee.isMemo=function(e){return Lt(e)===du};ee.isPortal=function(e){return Lt(e)===Ap};ee.isProfiler=function(e){return Lt(e)===ou};ee.isStrictMode=function(e){return Lt(e)===iu};ee.isSuspense=function(e){return Lt(e)===cu};ee.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ru||e===au||e===ou||e===iu||e===cu||e===sN||typeof e=="object"&&e!==null&&(e.$$typeof===fu||e.$$typeof===du||e.$$typeof===lu||e.$$typeof===su||e.$$typeof===uu||e.$$typeof===uN||e.$$typeof===cN||e.$$typeof===dN||e.$$typeof===aN)};ee.typeOf=Lt;i1.exports=ee;var fN=i1.exports,l1=fN,pN={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},hN={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s1={};s1[l1.ForwardRef]=pN;s1[l1.Memo]=hN;var ne={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp=Symbol.for("react.element"),zp=Symbol.for("react.portal"),pu=Symbol.for("react.fragment"),hu=Symbol.for("react.strict_mode"),mu=Symbol.for("react.profiler"),gu=Symbol.for("react.provider"),yu=Symbol.for("react.context"),mN=Symbol.for("react.server_context"),vu=Symbol.for("react.forward_ref"),xu=Symbol.for("react.suspense"),_u=Symbol.for("react.suspense_list"),Su=Symbol.for("react.memo"),wu=Symbol.for("react.lazy"),gN=Symbol.for("react.offscreen"),a1;a1=Symbol.for("react.module.reference");function Gt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Fp:switch(e=e.type,e){case pu:case mu:case hu:case xu:case _u:return e;default:switch(e=e&&e.$$typeof,e){case mN:case yu:case vu:case wu:case Su:case gu:return e;default:return t}}case zp:return t}}}ne.ContextConsumer=yu;ne.ContextProvider=gu;ne.Element=Fp;ne.ForwardRef=vu;ne.Fragment=pu;ne.Lazy=wu;ne.Memo=Su;ne.Portal=zp;ne.Profiler=mu;ne.StrictMode=hu;ne.Suspense=xu;ne.SuspenseList=_u;ne.isAsyncMode=function(){return!1};ne.isConcurrentMode=function(){return!1};ne.isContextConsumer=function(e){return Gt(e)===yu};ne.isContextProvider=function(e){return Gt(e)===gu};ne.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fp};ne.isForwardRef=function(e){return Gt(e)===vu};ne.isFragment=function(e){return Gt(e)===pu};ne.isLazy=function(e){return Gt(e)===wu};ne.isMemo=function(e){return Gt(e)===Su};ne.isPortal=function(e){return Gt(e)===zp};ne.isProfiler=function(e){return Gt(e)===mu};ne.isStrictMode=function(e){return Gt(e)===hu};ne.isSuspense=function(e){return Gt(e)===xu};ne.isSuspenseList=function(e){return Gt(e)===_u};ne.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===pu||e===mu||e===hu||e===xu||e===_u||e===gN||typeof e=="object"&&e!==null&&(e.$$typeof===wu||e.$$typeof===Su||e.$$typeof===gu||e.$$typeof===yu||e.$$typeof===vu||e.$$typeof===a1||e.getModuleId!==void 0)};ne.typeOf=Gt;function yN(){const e=tN();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,o=n={callback:r,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}const Zm={notify(){},get:()=>[]};function vN(e,t){let n,r=Zm,i=0,o=!1;function l(y){d();const _=r.subscribe(y);let g=!1;return()=>{g||(g=!0,_(),h())}}function s(){r.notify()}function a(){m.onStateChange&&m.onStateChange()}function u(){return o}function d(){i++,n||(n=t?t.addNestedSub(a):e.subscribe(a),r=yN())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Zm)}function f(){o||(o=!0,d())}function p(){o&&(o=!1,h())}const m={addNestedSub:l,notifyNestedSubs:s,handleChangeWrapper:a,isSubscribed:u,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>r};return m}const xN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_N=xN?w.useLayoutEffect:w.useEffect;function eg(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function cn(e,t){if(eg(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!eg(e[n[i]],t[n[i]]))return!1;return!0}function SN({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",noopCheck:o="once"}){const l=w.useMemo(()=>{const u=vN(e);return{store:e,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:o}},[e,r,i,o]),s=w.useMemo(()=>e.getState(),[e]);_N(()=>{const{subscription:u}=l;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),s!==e.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[l,s]);const a=t||wr;return w.createElement(a.Provider,{value:l},n)}function u1(e=wr){const t=e===wr?n1:Mp(e);return function(){const{store:r}=t();return r}}const wN=u1();function CN(e=wr){const t=e===wr?wN:u1(e);return function(){return t().dispatch}}const q=CN();iN(XC.useSyncExternalStoreWithSelector);eN(Lp.unstable_batchedUpdates);var c1={exports:{}},NN="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",EN=NN,TN=EN;function d1(){}function f1(){}f1.resetWarningCache=d1;var bN=function(){function e(r,i,o,l,s,a){if(a!==TN){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:f1,resetWarningCache:d1};return n.PropTypes=n,n};c1.exports=bN();var ON=c1.exports;const ce=io(ON);function jN(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var p1=w,kN=jN(p1);function tg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PN(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var $N=!!(typeof window<"u"&&window.document&&window.document.createElement);function RN(e,t,n){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof n<"u"&&typeof n!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(i){return i.displayName||i.name||"Component"}return function(o){if(typeof o!="function")throw new Error("Expected WrappedComponent to be a React component.");var l=[],s;function a(){s=e(l.map(function(d){return d.props})),u.canUseDOM?t(s):n&&(s=n(s))}var u=function(d){PN(h,d);function h(){return d.apply(this,arguments)||this}h.peek=function(){return s},h.rewind=function(){if(h.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var m=s;return s=void 0,l=[],m};var f=h.prototype;return f.UNSAFE_componentWillMount=function(){l.push(this),a()},f.componentDidUpdate=function(){a()},f.componentWillUnmount=function(){var m=l.indexOf(this);l.splice(m,1),a()},f.render=function(){return kN.createElement(o,this.props)},h}(p1.PureComponent);return tg(u,"displayName","SideEffect("+r(o)+")"),tg(u,"canUseDOM",$N),u}}var LN=RN;const MN=io(LN);var IN=typeof Element<"u",AN=typeof Map=="function",DN=typeof Set=="function",FN=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Hs(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Hs(e[r],t[r]))return!1;return!0}var o;if(AN&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;for(o=e.entries();!(r=o.next()).done;)if(!Hs(r.value[1],t.get(r.value[0])))return!1;return!0}if(DN&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(FN&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(IN&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!Hs(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var zN=function(t,n){try{return Hs(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const BN=io(zN);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ng=Object.getOwnPropertySymbols,HN=Object.prototype.hasOwnProperty,WN=Object.prototype.propertyIsEnumerable;function UN(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function VN(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var KN=VN()?Object.assign:function(e,t){for(var n,r=UN(e),i,o=1;o<arguments.length;o++){n=Object(arguments[o]);for(var l in n)HN.call(n,l)&&(r[l]=n[l]);if(ng){i=ng(n);for(var s=0;s<i.length;s++)WN.call(n,i[s])&&(r[i[s]]=n[i[s]])}}return r};const qN=io(KN);var qr={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},W={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(W).map(function(e){return W[e]});var de={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},xa={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},bl={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},YN=Object.keys(xa).reduce(function(e,t){return e[xa[t]]=t,e},{}),GN=[W.NOSCRIPT,W.SCRIPT,W.STYLE],on="data-react-helmet",QN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JN=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},XN=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZN=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},rg=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},e2=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Ud=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},t2=function(t){var n=Di(t,W.TITLE),r=Di(t,bl.TITLE_TEMPLATE);if(r&&n)return r.replace(/%s/g,function(){return Array.isArray(n)?n.join(""):n});var i=Di(t,bl.DEFAULT_TITLE);return n||i||void 0},n2=function(t){return Di(t,bl.ON_CHANGE_CLIENT_STATE)||function(){}},Sc=function(t,n){return n.filter(function(r){return typeof r[t]<"u"}).map(function(r){return r[t]}).reduce(function(r,i){return pt({},r,i)},{})},r2=function(t,n){return n.filter(function(r){return typeof r[W.BASE]<"u"}).map(function(r){return r[W.BASE]}).reverse().reduce(function(r,i){if(!r.length)for(var o=Object.keys(i),l=0;l<o.length;l++){var s=o[l],a=s.toLowerCase();if(t.indexOf(a)!==-1&&i[a])return r.concat(i)}return r},[])},ko=function(t,n,r){var i={};return r.filter(function(o){return Array.isArray(o[t])?!0:(typeof o[t]<"u"&&s2("Helmet: "+t+' should be of type "Array". Instead found type "'+QN(o[t])+'"'),!1)}).map(function(o){return o[t]}).reverse().reduce(function(o,l){var s={};l.filter(function(f){for(var p=void 0,m=Object.keys(f),y=0;y<m.length;y++){var _=m[y],g=_.toLowerCase();n.indexOf(g)!==-1&&!(p===de.REL&&f[p].toLowerCase()==="canonical")&&!(g===de.REL&&f[g].toLowerCase()==="stylesheet")&&(p=g),n.indexOf(_)!==-1&&(_===de.INNER_HTML||_===de.CSS_TEXT||_===de.ITEM_PROP)&&(p=_)}if(!p||!f[p])return!1;var v=f[p].toLowerCase();return i[p]||(i[p]={}),s[p]||(s[p]={}),i[p][v]?!1:(s[p][v]=!0,!0)}).reverse().forEach(function(f){return o.push(f)});for(var a=Object.keys(s),u=0;u<a.length;u++){var d=a[u],h=qN({},i[d],s[d]);i[d]=h}return o},[]).reverse()},Di=function(t,n){for(var r=t.length-1;r>=0;r--){var i=t[r];if(i.hasOwnProperty(n))return i[n]}return null},i2=function(t){return{baseTag:r2([de.HREF,de.TARGET],t),bodyAttributes:Sc(qr.BODY,t),defer:Di(t,bl.DEFER),encode:Di(t,bl.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Sc(qr.HTML,t),linkTags:ko(W.LINK,[de.REL,de.HREF],t),metaTags:ko(W.META,[de.NAME,de.CHARSET,de.HTTPEQUIV,de.PROPERTY,de.ITEM_PROP],t),noscriptTags:ko(W.NOSCRIPT,[de.INNER_HTML],t),onChangeClientState:n2(t),scriptTags:ko(W.SCRIPT,[de.SRC,de.INNER_HTML],t),styleTags:ko(W.STYLE,[de.CSS_TEXT],t),title:t2(t),titleAttributes:Sc(qr.TITLE,t)}},Vd=function(){var e=Date.now();return function(t){var n=Date.now();n-e>16?(e=n,t(n)):setTimeout(function(){Vd(t)},0)}}(),ig=function(t){return clearTimeout(t)},o2=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Vd:global.requestAnimationFrame||Vd,l2=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||ig:global.cancelAnimationFrame||ig,s2=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},Po=null,a2=function(t){Po&&l2(Po),t.defer?Po=o2(function(){og(t,function(){Po=null})}):(og(t),Po=null)},og=function(t,n){var r=t.baseTag,i=t.bodyAttributes,o=t.htmlAttributes,l=t.linkTags,s=t.metaTags,a=t.noscriptTags,u=t.onChangeClientState,d=t.scriptTags,h=t.styleTags,f=t.title,p=t.titleAttributes;Kd(W.BODY,i),Kd(W.HTML,o),u2(f,p);var m={baseTag:fi(W.BASE,r),linkTags:fi(W.LINK,l),metaTags:fi(W.META,s),noscriptTags:fi(W.NOSCRIPT,a),scriptTags:fi(W.SCRIPT,d),styleTags:fi(W.STYLE,h)},y={},_={};Object.keys(m).forEach(function(g){var v=m[g],x=v.newTags,S=v.oldTags;x.length&&(y[g]=x),S.length&&(_[g]=m[g].oldTags)}),n&&n(),u(t,y,_)},h1=function(t){return Array.isArray(t)?t.join(""):t},u2=function(t,n){typeof t<"u"&&document.title!==t&&(document.title=h1(t)),Kd(W.TITLE,n)},Kd=function(t,n){var r=document.getElementsByTagName(t)[0];if(r){for(var i=r.getAttribute(on),o=i?i.split(","):[],l=[].concat(o),s=Object.keys(n),a=0;a<s.length;a++){var u=s[a],d=n[u]||"";r.getAttribute(u)!==d&&r.setAttribute(u,d),o.indexOf(u)===-1&&o.push(u);var h=l.indexOf(u);h!==-1&&l.splice(h,1)}for(var f=l.length-1;f>=0;f--)r.removeAttribute(l[f]);o.length===l.length?r.removeAttribute(on):r.getAttribute(on)!==s.join(",")&&r.setAttribute(on,s.join(","))}},fi=function(t,n){var r=document.head||document.querySelector(W.HEAD),i=r.querySelectorAll(t+"["+on+"]"),o=Array.prototype.slice.call(i),l=[],s=void 0;return n&&n.length&&n.forEach(function(a){var u=document.createElement(t);for(var d in a)if(a.hasOwnProperty(d))if(d===de.INNER_HTML)u.innerHTML=a.innerHTML;else if(d===de.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=a.cssText:u.appendChild(document.createTextNode(a.cssText));else{var h=typeof a[d]>"u"?"":a[d];u.setAttribute(d,h)}u.setAttribute(on,"true"),o.some(function(f,p){return s=p,u.isEqualNode(f)})?o.splice(s,1):l.push(u)}),o.forEach(function(a){return a.parentNode.removeChild(a)}),l.forEach(function(a){return r.appendChild(a)}),{oldTags:o,newTags:l}},m1=function(t){return Object.keys(t).reduce(function(n,r){var i=typeof t[r]<"u"?r+'="'+t[r]+'"':""+r;return n?n+" "+i:i},"")},c2=function(t,n,r,i){var o=m1(r),l=h1(n);return o?"<"+t+" "+on+'="true" '+o+">"+Ud(l,i)+"</"+t+">":"<"+t+" "+on+'="true">'+Ud(l,i)+"</"+t+">"},d2=function(t,n,r){return n.reduce(function(i,o){var l=Object.keys(o).filter(function(u){return!(u===de.INNER_HTML||u===de.CSS_TEXT)}).reduce(function(u,d){var h=typeof o[d]>"u"?d:d+'="'+Ud(o[d],r)+'"';return u?u+" "+h:h},""),s=o.innerHTML||o.cssText||"",a=GN.indexOf(t)===-1;return i+"<"+t+" "+on+'="true" '+l+(a?"/>":">"+s+"</"+t+">")},"")},g1=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,i){return r[xa[i]||i]=t[i],r},n)},f2=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,i){return r[YN[i]||i]=t[i],r},n)},p2=function(t,n,r){var i,o=(i={key:n},i[on]=!0,i),l=g1(r,o);return[Vt.createElement(W.TITLE,l,n)]},h2=function(t,n){return n.map(function(r,i){var o,l=(o={key:i},o[on]=!0,o);return Object.keys(r).forEach(function(s){var a=xa[s]||s;if(a===de.INNER_HTML||a===de.CSS_TEXT){var u=r.innerHTML||r.cssText;l.dangerouslySetInnerHTML={__html:u}}else l[a]=r[s]}),Vt.createElement(t,l)})},bn=function(t,n,r){switch(t){case W.TITLE:return{toComponent:function(){return p2(t,n.title,n.titleAttributes)},toString:function(){return c2(t,n.title,n.titleAttributes,r)}};case qr.BODY:case qr.HTML:return{toComponent:function(){return g1(n)},toString:function(){return m1(n)}};default:return{toComponent:function(){return h2(t,n)},toString:function(){return d2(t,n,r)}}}},y1=function(t){var n=t.baseTag,r=t.bodyAttributes,i=t.encode,o=t.htmlAttributes,l=t.linkTags,s=t.metaTags,a=t.noscriptTags,u=t.scriptTags,d=t.styleTags,h=t.title,f=h===void 0?"":h,p=t.titleAttributes;return{base:bn(W.BASE,n,i),bodyAttributes:bn(qr.BODY,r,i),htmlAttributes:bn(qr.HTML,o,i),link:bn(W.LINK,l,i),meta:bn(W.META,s,i),noscript:bn(W.NOSCRIPT,a,i),script:bn(W.SCRIPT,u,i),style:bn(W.STYLE,d,i),title:bn(W.TITLE,{title:f,titleAttributes:p},i)}},m2=function(t){var n,r;return r=n=function(i){ZN(o,i);function o(){return JN(this,o),e2(this,i.apply(this,arguments))}return o.prototype.shouldComponentUpdate=function(s){return!BN(this.props,s)},o.prototype.mapNestedChildrenToProps=function(s,a){if(!a)return null;switch(s.type){case W.SCRIPT:case W.NOSCRIPT:return{innerHTML:a};case W.STYLE:return{cssText:a}}throw new Error("<"+s.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},o.prototype.flattenArrayTypeChildren=function(s){var a,u=s.child,d=s.arrayTypeChildren,h=s.newChildProps,f=s.nestedChildren;return pt({},d,(a={},a[u.type]=[].concat(d[u.type]||[],[pt({},h,this.mapNestedChildrenToProps(u,f))]),a))},o.prototype.mapObjectTypeChildren=function(s){var a,u,d=s.child,h=s.newProps,f=s.newChildProps,p=s.nestedChildren;switch(d.type){case W.TITLE:return pt({},h,(a={},a[d.type]=p,a.titleAttributes=pt({},f),a));case W.BODY:return pt({},h,{bodyAttributes:pt({},f)});case W.HTML:return pt({},h,{htmlAttributes:pt({},f)})}return pt({},h,(u={},u[d.type]=pt({},f),u))},o.prototype.mapArrayTypeChildrenToProps=function(s,a){var u=pt({},a);return Object.keys(s).forEach(function(d){var h;u=pt({},u,(h={},h[d]=s[d],h))}),u},o.prototype.warnOnInvalidChildren=function(s,a){return!0},o.prototype.mapChildrenToProps=function(s,a){var u=this,d={};return Vt.Children.forEach(s,function(h){if(!(!h||!h.props)){var f=h.props,p=f.children,m=rg(f,["children"]),y=f2(m);switch(u.warnOnInvalidChildren(h,p),h.type){case W.LINK:case W.META:case W.NOSCRIPT:case W.SCRIPT:case W.STYLE:d=u.flattenArrayTypeChildren({child:h,arrayTypeChildren:d,newChildProps:y,nestedChildren:p});break;default:a=u.mapObjectTypeChildren({child:h,newProps:a,newChildProps:y,nestedChildren:p});break}}}),a=this.mapArrayTypeChildrenToProps(d,a),a},o.prototype.render=function(){var s=this.props,a=s.children,u=rg(s,["children"]),d=pt({},u);return a&&(d=this.mapChildrenToProps(a,d)),Vt.createElement(t,d)},XN(o,null,[{key:"canUseDOM",set:function(s){t.canUseDOM=s}}]),o}(Vt.Component),n.propTypes={base:ce.object,bodyAttributes:ce.object,children:ce.oneOfType([ce.arrayOf(ce.node),ce.node]),defaultTitle:ce.string,defer:ce.bool,encodeSpecialCharacters:ce.bool,htmlAttributes:ce.object,link:ce.arrayOf(ce.object),meta:ce.arrayOf(ce.object),noscript:ce.arrayOf(ce.object),onChangeClientState:ce.func,script:ce.arrayOf(ce.object),style:ce.arrayOf(ce.object),title:ce.string,titleAttributes:ce.object,titleTemplate:ce.string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=t.peek,n.rewind=function(){var i=t.rewind();return i||(i=y1({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},r},g2=function(){return null},y2=MN(i2,a2,y1)(g2),qd=m2(y2);qd.renderStatic=qd.rewind;function rn(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Cr(e){return!!e&&!!e[fe]}function Bn(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===T2}(e)||Array.isArray(e)||!!e[fg]||!!(!((t=e.constructor)===null||t===void 0)&&t[fg])||Bp(e)||Hp(e))}function ti(e,t,n){n===void 0&&(n=!1),ao(e)===0?(n?Object.keys:zi)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function ao(e){var t=e[fe];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Bp(e)?2:Hp(e)?3:0}function Fi(e,t){return ao(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function v2(e,t){return ao(e)===2?e.get(t):e[t]}function v1(e,t,n){var r=ao(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function x1(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Bp(e){return N2&&e instanceof Map}function Hp(e){return E2&&e instanceof Set}function zr(e){return e.o||e.t}function Wp(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=S1(e);delete t[fe];for(var n=zi(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Up(e,t){return t===void 0&&(t=!1),Vp(e)||Cr(e)||!Bn(e)||(ao(e)>1&&(e.set=e.add=e.clear=e.delete=x2),Object.freeze(e),t&&ti(e,function(n,r){return Up(r,!0)},!0)),e}function x2(){rn(2)}function Vp(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function vn(e){var t=Jd[e];return t||rn(18,e),t}function _2(e,t){Jd[e]||(Jd[e]=t)}function Yd(){return Ol}function wc(e,t){t&&(vn("Patches"),e.u=[],e.s=[],e.v=t)}function _a(e){Gd(e),e.p.forEach(S2),e.p=null}function Gd(e){e===Ol&&(Ol=e.l)}function lg(e){return Ol={p:[],l:Ol,h:e,m:!0,_:0}}function S2(e){var t=e[fe];t.i===0||t.i===1?t.j():t.g=!0}function Cc(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||vn("ES5").S(t,e,r),r?(n[fe].P&&(_a(t),rn(4)),Bn(e)&&(e=Sa(t,e),t.l||wa(t,e)),t.u&&vn("Patches").M(n[fe].t,e,t.u,t.s)):e=Sa(t,n,[]),_a(t),t.u&&t.v(t.u,t.s),e!==_1?e:void 0}function Sa(e,t,n){if(Vp(t))return t;var r=t[fe];if(!r)return ti(t,function(s,a){return sg(e,r,t,s,a,n)},!0),t;if(r.A!==e)return t;if(!r.P)return wa(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Wp(r.k):r.o,o=i,l=!1;r.i===3&&(o=new Set(i),i.clear(),l=!0),ti(o,function(s,a){return sg(e,r,i,s,a,n,l)}),wa(e,i,!1),n&&e.u&&vn("Patches").N(r,n,e.u,e.s)}return r.o}function sg(e,t,n,r,i,o,l){if(Cr(i)){var s=Sa(e,i,o&&t&&t.i!==3&&!Fi(t.R,r)?o.concat(r):void 0);if(v1(n,r,s),!Cr(s))return;e.m=!1}else l&&n.add(i);if(Bn(i)&&!Vp(i)){if(!e.h.D&&e._<1)return;Sa(e,i),t&&t.A.l||wa(e,i)}}function wa(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Up(t,n)}function Nc(e,t){var n=e[fe];return(n?zr(n):e)[t]}function ag(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function nr(e){e.P||(e.P=!0,e.l&&nr(e.l))}function Ec(e){e.o||(e.o=Wp(e.t))}function Qd(e,t,n){var r=Bp(t)?vn("MapSet").F(t,n):Hp(t)?vn("MapSet").T(t,n):e.O?function(i,o){var l=Array.isArray(i),s={i:l?1:0,A:o?o.A:Yd(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},a=s,u=jl;l&&(a=[s],u=Bo);var d=Proxy.revocable(a,u),h=d.revoke,f=d.proxy;return s.k=f,s.j=h,f}(t,n):vn("ES5").J(t,n);return(n?n.A:Yd()).p.push(r),r}function w2(e){return Cr(e)||rn(22,e),function t(n){if(!Bn(n))return n;var r,i=n[fe],o=ao(n);if(i){if(!i.P&&(i.i<4||!vn("ES5").K(i)))return i.t;i.I=!0,r=ug(n,o),i.I=!1}else r=ug(n,o);return ti(r,function(l,s){i&&v2(i.t,l)===s||v1(r,l,t(s))}),o===3?new Set(r):r}(e)}function ug(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Wp(e)}function C2(){function e(o,l){var s=i[o];return s?s.enumerable=l:i[o]=s={configurable:!0,enumerable:l,get:function(){var a=this[fe];return jl.get(a,o)},set:function(a){var u=this[fe];jl.set(u,o,a)}},s}function t(o){for(var l=o.length-1;l>=0;l--){var s=o[l][fe];if(!s.P)switch(s.i){case 5:r(s)&&nr(s);break;case 4:n(s)&&nr(s)}}}function n(o){for(var l=o.t,s=o.k,a=zi(s),u=a.length-1;u>=0;u--){var d=a[u];if(d!==fe){var h=l[d];if(h===void 0&&!Fi(l,d))return!0;var f=s[d],p=f&&f[fe];if(p?p.t!==h:!x1(f,h))return!0}}var m=!!l[fe];return a.length!==zi(l).length+(m?0:1)}function r(o){var l=o.k;if(l.length!==o.t.length)return!0;var s=Object.getOwnPropertyDescriptor(l,l.length-1);if(s&&!s.get)return!0;for(var a=0;a<l.length;a++)if(!l.hasOwnProperty(a))return!0;return!1}var i={};_2("ES5",{J:function(o,l){var s=Array.isArray(o),a=function(d,h){if(d){for(var f=Array(h.length),p=0;p<h.length;p++)Object.defineProperty(f,""+p,e(p,!0));return f}var m=S1(h);delete m[fe];for(var y=zi(m),_=0;_<y.length;_++){var g=y[_];m[g]=e(g,d||!!m[g].enumerable)}return Object.create(Object.getPrototypeOf(h),m)}(s,o),u={i:s?5:4,A:l?l.A:Yd(),P:!1,I:!1,R:{},l,t:o,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,fe,{value:u,writable:!0}),a},S:function(o,l,s){s?Cr(l)&&l[fe].A===o&&t(o.p):(o.u&&function a(u){if(u&&typeof u=="object"){var d=u[fe];if(d){var h=d.t,f=d.k,p=d.R,m=d.i;if(m===4)ti(f,function(x){x!==fe&&(h[x]!==void 0||Fi(h,x)?p[x]||a(f[x]):(p[x]=!0,nr(d)))}),ti(h,function(x){f[x]!==void 0||Fi(f,x)||(p[x]=!1,nr(d))});else if(m===5){if(r(d)&&(nr(d),p.length=!0),f.length<h.length)for(var y=f.length;y<h.length;y++)p[y]=!1;else for(var _=h.length;_<f.length;_++)p[_]=!0;for(var g=Math.min(f.length,h.length),v=0;v<g;v++)f.hasOwnProperty(v)||(p[v]=!0),p[v]===void 0&&a(f[v])}}}}(o.p[0]),t(o.p))},K:function(o){return o.i===4?n(o):r(o)}})}var cg,Ol,Kp=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",N2=typeof Map<"u",E2=typeof Set<"u",dg=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",_1=Kp?Symbol.for("immer-nothing"):((cg={})["immer-nothing"]=!0,cg),fg=Kp?Symbol.for("immer-draftable"):"__$immer_draftable",fe=Kp?Symbol.for("immer-state"):"__$immer_state",T2=""+Object.prototype.constructor,zi=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,S1=Object.getOwnPropertyDescriptors||function(e){var t={};return zi(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Jd={},jl={get:function(e,t){if(t===fe)return e;var n=zr(e);if(!Fi(n,t))return function(i,o,l){var s,a=ag(o,l);return a?"value"in a?a.value:(s=a.get)===null||s===void 0?void 0:s.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Bn(r)?r:r===Nc(e.t,t)?(Ec(e),e.o[t]=Qd(e.A.h,r,e)):r},has:function(e,t){return t in zr(e)},ownKeys:function(e){return Reflect.ownKeys(zr(e))},set:function(e,t,n){var r=ag(zr(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Nc(zr(e),t),o=i==null?void 0:i[fe];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(x1(n,i)&&(n!==void 0||Fi(e.t,t)))return!0;Ec(e),nr(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return Nc(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Ec(e),nr(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=zr(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){rn(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){rn(12)}},Bo={};ti(jl,function(e,t){Bo[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Bo.deleteProperty=function(e,t){return Bo.set.call(this,e,t,void 0)},Bo.set=function(e,t,n){return jl.set.call(this,e[0],t,n,e[0])};var b2=function(){function e(n){var r=this;this.O=dg,this.D=!0,this.produce=function(i,o,l){if(typeof i=="function"&&typeof o!="function"){var s=o;o=i;var a=r;return function(y){var _=this;y===void 0&&(y=s);for(var g=arguments.length,v=Array(g>1?g-1:0),x=1;x<g;x++)v[x-1]=arguments[x];return a.produce(y,function(S){var C;return(C=o).call.apply(C,[_,S].concat(v))})}}var u;if(typeof o!="function"&&rn(6),l!==void 0&&typeof l!="function"&&rn(7),Bn(i)){var d=lg(r),h=Qd(r,i,void 0),f=!0;try{u=o(h),f=!1}finally{f?_a(d):Gd(d)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(y){return wc(d,l),Cc(y,d)},function(y){throw _a(d),y}):(wc(d,l),Cc(u,d))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===_1&&(u=void 0),r.D&&Up(u,!0),l){var p=[],m=[];vn("Patches").M(i,u,p,m),l(p,m)}return u}rn(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var d=arguments.length,h=Array(d>1?d-1:0),f=1;f<d;f++)h[f-1]=arguments[f];return r.produceWithPatches(u,function(p){return i.apply(void 0,[p].concat(h))})};var l,s,a=r.produce(i,o,function(u,d){l=u,s=d});return typeof Promise<"u"&&a instanceof Promise?a.then(function(u){return[u,l,s]}):[a,l,s]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Bn(n)||rn(8),Cr(n)&&(n=w2(n));var r=lg(this),i=Qd(this,n,void 0);return i[fe].C=!0,Gd(r),i},t.finishDraft=function(n,r){var i=n&&n[fe],o=i.A;return wc(o,r),Cc(void 0,o)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!dg&&rn(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var l=vn("Patches").$;return Cr(n)?l(n,r):this.produce(n,function(s){return l(s,r)})},e}(),jt=new b2,w1=jt.produce;jt.produceWithPatches.bind(jt);jt.setAutoFreeze.bind(jt);jt.setUseProxies.bind(jt);jt.applyPatches.bind(jt);jt.createDraft.bind(jt);jt.finishDraft.bind(jt);function kl(e){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(e)}function O2(e,t){if(kl(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(kl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j2(e){var t=O2(e,"string");return kl(t)==="symbol"?t:String(t)}function k2(e,t,n){return t=j2(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pg(Object(n),!0).forEach(function(r){k2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pg(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Je(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var mg=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Tc=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ca={INIT:"@@redux/INIT"+Tc(),REPLACE:"@@redux/REPLACE"+Tc(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Tc()}};function P2(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function C1(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Je(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Je(1));return n(C1)(e,t)}if(typeof e!="function")throw new Error(Je(2));var i=e,o=t,l=[],s=l,a=!1;function u(){s===l&&(s=l.slice())}function d(){if(a)throw new Error(Je(3));return o}function h(y){if(typeof y!="function")throw new Error(Je(4));if(a)throw new Error(Je(5));var _=!0;return u(),s.push(y),function(){if(_){if(a)throw new Error(Je(6));_=!1,u();var v=s.indexOf(y);s.splice(v,1),l=null}}}function f(y){if(!P2(y))throw new Error(Je(7));if(typeof y.type>"u")throw new Error(Je(8));if(a)throw new Error(Je(9));try{a=!0,o=i(o,y)}finally{a=!1}for(var _=l=s,g=0;g<_.length;g++){var v=_[g];v()}return y}function p(y){if(typeof y!="function")throw new Error(Je(10));i=y,f({type:Ca.REPLACE})}function m(){var y,_=h;return y={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Je(11));function x(){v.next&&v.next(d())}x();var S=_(x);return{unsubscribe:S}}},y[mg]=function(){return this},y}return f({type:Ca.INIT}),r={dispatch:f,subscribe:h,getState:d,replaceReducer:p},r[mg]=m,r}function $2(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:Ca.INIT});if(typeof r>"u")throw new Error(Je(12));if(typeof n(void 0,{type:Ca.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Je(13))})}function R2(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var o=Object.keys(n),l;try{$2(n)}catch(s){l=s}return function(a,u){if(a===void 0&&(a={}),l)throw l;for(var d=!1,h={},f=0;f<o.length;f++){var p=o[f],m=n[p],y=a[p],_=m(y,u);if(typeof _>"u")throw u&&u.type,new Error(Je(14));h[p]=_,d=d||_!==y}return d=d||o.length!==Object.keys(a).length,d?h:a}}function Na(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function L2(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),o=function(){throw new Error(Je(15))},l={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=t.map(function(a){return a(l)});return o=Na.apply(void 0,s)(i.dispatch),hg(hg({},i),{},{dispatch:o})}}}function N1(e){var t=function(r){var i=r.dispatch,o=r.getState;return function(l){return function(s){return typeof s=="function"?s(i,o,e):l(s)}}};return t}var E1=N1();E1.withExtraArgument=N1;const gg=E1;var T1=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vl=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function s(u){return function(d){return a([u,d])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(d){u=[6,d],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ni=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},M2=Object.defineProperty,I2=Object.defineProperties,A2=Object.getOwnPropertyDescriptors,yg=Object.getOwnPropertySymbols,D2=Object.prototype.hasOwnProperty,F2=Object.prototype.propertyIsEnumerable,vg=function(e,t,n){return t in e?M2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},gr=function(e,t){for(var n in t||(t={}))D2.call(t,n)&&vg(e,n,t[n]);if(yg)for(var r=0,i=yg(t);r<i.length;r++){var n=i[r];F2.call(t,n)&&vg(e,n,t[n])}return e},bc=function(e,t){return I2(e,A2(t))},Kl=function(e,t,n){return new Promise(function(r,i){var o=function(a){try{s(n.next(a))}catch(u){i(u)}},l=function(a){try{s(n.throw(a))}catch(u){i(u)}},s=function(a){return a.done?r(a.value):Promise.resolve(a.value).then(o,l)};s((n=n.apply(e,t)).next())})},z2=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Na:Na.apply(null,arguments)};function b1(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}function In(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var o=t.apply(void 0,r);if(!o)throw new Error("prepareAction did not return an object");return gr(gr({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function B2(e){return b1(e)&&"type"in e}var H2=function(e){T1(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,ni([void 0],n[0].concat(this)))):new(t.bind.apply(t,ni([void 0],n.concat(this))))},t}(Array),W2=function(e){T1(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,ni([void 0],n[0].concat(this)))):new(t.bind.apply(t,ni([void 0],n.concat(this))))},t}(Array);function Xd(e){return Bn(e)?w1(e,function(){}):e}function U2(e){return typeof e=="boolean"}function V2(){return function(t){return K2(t)}}function K2(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new H2;return n&&(U2(n)?r.push(gg):r.push(gg.withExtraArgument(n.extraArgument))),r}var q2=!0;function Y2(e){var t=V2(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,o=n.middleware,l=o===void 0?t():o,s=n.devTools,a=s===void 0?!0:s,u=n.preloadedState,d=u===void 0?void 0:u,h=n.enhancers,f=h===void 0?void 0:h,p;if(typeof i=="function")p=i;else if(b1(i))p=R2(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=l;typeof m=="function"&&(m=m(t));var y=L2.apply(void 0,m),_=Na;a&&(_=z2(gr({trace:!q2},typeof a=="object"&&a)));var g=new W2(y),v=g;Array.isArray(f)?v=ni([y],f):typeof f=="function"&&(v=f(g));var x=_.apply(void 0,v);return C1(p,d,x)}function O1(e){var t={},n=[],r,i={addCase:function(o,l){var s=typeof o=="string"?o:o.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[s]=l,i},addMatcher:function(o,l){return n.push({matcher:o,reducer:l}),i},addDefaultCase:function(o){return r=o,i}};return e(i),[t,n,r]}function G2(e){return typeof e=="function"}function Q2(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?O1(t):[t,n,r],o=i[0],l=i[1],s=i[2],a;if(G2(e))a=function(){return Xd(e())};else{var u=Xd(e);a=function(){return u}}function d(h,f){h===void 0&&(h=a());var p=ni([o[f.type]],l.filter(function(m){var y=m.matcher;return y(f)}).map(function(m){var y=m.reducer;return y}));return p.filter(function(m){return!!m}).length===0&&(p=[s]),p.reduce(function(m,y){if(y)if(Cr(m)){var _=m,g=y(_,f);return g===void 0?m:g}else{if(Bn(m))return w1(m,function(v){return y(v,f)});var g=y(m,f);if(g===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}return m},h)}return d.getInitialState=a,d}function J2(e,t){return e+"/"+t}function Cu(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:Xd(e.initialState),r=e.reducers||{},i=Object.keys(r),o={},l={},s={};i.forEach(function(d){var h=r[d],f=J2(t,d),p,m;"reducer"in h?(p=h.reducer,m=h.prepare):p=h,o[d]=p,l[f]=p,s[d]=m?In(f,m):In(f)});function a(){var d=typeof e.extraReducers=="function"?O1(e.extraReducers):[e.extraReducers],h=d[0],f=h===void 0?{}:h,p=d[1],m=p===void 0?[]:p,y=d[2],_=y===void 0?void 0:y,g=gr(gr({},f),l);return Q2(n,function(v){for(var x in g)v.addCase(x,g[x]);for(var S=0,C=m;S<C.length;S++){var N=C[S];v.addMatcher(N.matcher,N.reducer)}_&&v.addDefaultCase(_)})}var u;return{name:t,reducer:function(d,h){return u||(u=a()),u(d,h)},actions:s,caseReducers:o,getInitialState:function(){return u||(u=a()),u.getInitialState()}}}var X2="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",j1=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=X2[Math.random()*64|0];return t},Z2=["name","message","stack","code"],Oc=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),xg=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),eE=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=Z2;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=In(t+"/fulfilled",function(u,d,h,f){return{payload:u,meta:bc(gr({},f||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),o=In(t+"/pending",function(u,d,h){return{payload:void 0,meta:bc(gr({},h||{}),{arg:d,requestId:u,requestStatus:"pending"})}}),l=In(t+"/rejected",function(u,d,h,f,p){return{payload:f,error:(r&&r.serializeError||eE)(u||"Rejected"),meta:bc(gr({},p||{}),{arg:h,requestId:d,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function a(u){return function(d,h,f){var p=r!=null&&r.idGenerator?r.idGenerator(u):j1(),m=new s,y;function _(v){y=v,m.abort()}var g=function(){return Kl(this,null,function(){var v,x,S,C,N,T,b;return Vl(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),C=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,u,{getState:h,extra:f}),nE(C)?[4,C]:[3,2];case 1:C=A.sent(),A.label=2;case 2:if(C===!1||m.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return N=new Promise(function(M,K){return m.signal.addEventListener("abort",function(){return K({name:"AbortError",message:y||"Aborted"})})}),d(o(p,u,(x=r==null?void 0:r.getPendingMeta)==null?void 0:x.call(r,{requestId:p,arg:u},{getState:h,extra:f}))),[4,Promise.race([N,Promise.resolve(n(u,{dispatch:d,getState:h,extra:f,requestId:p,signal:m.signal,abort:_,rejectWithValue:function(M,K){return new Oc(M,K)},fulfillWithValue:function(M,K){return new xg(M,K)}})).then(function(M){if(M instanceof Oc)throw M;return M instanceof xg?i(M.payload,p,u,M.meta):i(M,p,u)})])];case 3:return S=A.sent(),[3,5];case 4:return T=A.sent(),S=T instanceof Oc?l(null,p,u,T.payload,T.meta):l(T,p,u),[3,5];case 5:return b=r&&!r.dispatchConditionRejection&&l.match(S)&&S.meta.condition,b||d(S),[2,S]}})})}();return Object.assign(g,{abort:_,requestId:p,arg:u,unwrap:function(){return g.then(tE)}})}}return Object.assign(a,{pending:o,rejected:l,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function tE(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function nE(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var qp=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Zd=function(){},k1=function(e,t){return t===void 0&&(t=Zd),e.catch(t),e},P1=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Bi=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},rE="task",$1="listener",R1="completed",Yp="cancelled",iE="task-"+Yp,oE="task-"+R1,L1=$1+"-"+Yp,lE=$1+"-"+R1,Nu=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=rE+" "+Yp+" (reason: "+t+")"}return e}(),Hi=function(e){if(e.aborted)throw new Nu(e.reason)};function M1(e,t){var n=Zd;return new Promise(function(r,i){var o=function(){return i(new Nu(e.reason))};if(e.aborted){o();return}n=P1(e,o),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=Zd})}var sE=function(e,t){return Kl(void 0,null,function(){var n,r;return Vl(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof Nu?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},Ea=function(e){return function(t){return k1(M1(e,t).then(function(n){return Hi(e),n}))}},I1=function(e){var t=Ea(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},aE=Object.assign,_g={},ql="listenerMiddleware",uE=function(e,t){var n=function(r){return P1(e,function(){return Bi(r,e.reason)})};return function(r,i){qp(r,"taskExecutor");var o=new AbortController;n(o);var l=sE(function(){return Kl(void 0,null,function(){var s;return Vl(this,function(a){switch(a.label){case 0:return Hi(e),Hi(o.signal),[4,r({pause:Ea(o.signal),delay:I1(o.signal),signal:o.signal})];case 1:return s=a.sent(),Hi(o.signal),[2,s]}})})},function(){return Bi(o,oE)});return i!=null&&i.autoJoin&&t.push(l),{result:Ea(e)(l),cancel:function(){Bi(o,iE)}}}},cE=function(e,t){var n=function(r,i){return Kl(void 0,null,function(){var o,l,s,a;return Vl(this,function(u){switch(u.label){case 0:Hi(t),o=function(){},l=new Promise(function(d,h){var f=e({predicate:r,effect:function(p,m){m.unsubscribe(),d([p,m.getState(),m.getOriginalState()])}});o=function(){f(),h()}}),s=[l],i!=null&&s.push(new Promise(function(d){return setTimeout(d,i,null)})),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,M1(t,Promise.race(s))];case 2:return a=u.sent(),Hi(t),[2,a];case 3:return o(),[7];case 4:return[2]}})})};return function(r,i){return k1(n(r,i))}},A1=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,o=e.effect;if(t)i=In(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return qp(o,"options.listener"),{predicate:i,type:t,effect:o}},dE=function(e){var t=A1(e),n=t.type,r=t.predicate,i=t.effect,o=j1(),l={id:o,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return l},ef=function(e){e.pending.forEach(function(t){Bi(t,L1)})},fE=function(e){return function(){e.forEach(ef),e.clear()}},Sg=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},pE=In(ql+"/add"),hE=In(ql+"/removeAll"),mE=In(ql+"/remove"),gE=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,ni([ql+"/error"],e))};function yE(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,o=i===void 0?gE:i;qp(o,"onError");var l=function(p){return p.unsubscribe=function(){return n.delete(p.id)},n.set(p.id,p),function(m){p.unsubscribe(),m!=null&&m.cancelActive&&ef(p)}},s=function(p){for(var m=0,y=Array.from(n.values());m<y.length;m++){var _=y[m];if(p(_))return _}},a=function(p){var m=s(function(y){return y.effect===p.effect});return m||(m=dE(p)),l(m)},u=function(p){var m=A1(p),y=m.type,_=m.effect,g=m.predicate,v=s(function(x){var S=typeof y=="string"?x.type===y:x.predicate===g;return S&&x.effect===_});return v&&(v.unsubscribe(),p.cancelActive&&ef(v)),!!v},d=function(p,m,y,_){return Kl(t,null,function(){var g,v,x,S;return Vl(this,function(C){switch(C.label){case 0:g=new AbortController,v=cE(a,g.signal),x=[],C.label=1;case 1:return C.trys.push([1,3,4,6]),p.pending.add(g),[4,Promise.resolve(p.effect(m,aE({},y,{getOriginalState:_,condition:function(N,T){return v(N,T).then(Boolean)},take:v,delay:I1(g.signal),pause:Ea(g.signal),extra:r,signal:g.signal,fork:uE(g.signal,x),unsubscribe:p.unsubscribe,subscribe:function(){n.set(p.id,p)},cancelActiveListeners:function(){p.pending.forEach(function(N,T,b){N!==g&&(Bi(N,L1),b.delete(N))})}})))];case 2:return C.sent(),[3,6];case 3:return S=C.sent(),S instanceof Nu||Sg(o,S,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(x)];case 5:return C.sent(),Bi(g,lE),p.pending.delete(g),[7];case 6:return[2]}})})},h=fE(n),f=function(p){return function(m){return function(y){if(!B2(y))return m(y);if(pE.match(y))return a(y.payload);if(hE.match(y)){h();return}if(mE.match(y))return u(y.payload);var _=p.getState(),g=function(){if(_===_g)throw new Error(ql+": getOriginalState can only be called synchronously");return _},v;try{if(v=m(y),n.size>0)for(var x=p.getState(),S=Array.from(n.values()),C=0,N=S;C<N.length;C++){var T=N[C],b=!1;try{b=T.predicate(y,x,_)}catch(A){b=!1,Sg(o,A,{raisedBy:"predicate"})}b&&d(T,y,p,g)}}finally{_=_g}return v}}};return{middleware:f,startListening:a,stopListening:u,clearListeners:h}}var wg;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);C2();var Ut=(e=>(e.LOADING="LOADING",e.CONNECTED="CONNECTED",e.DISCONNECTED="DISCONNECTED",e.READY_TO_CONNECT="READY_TO_CONNECT",e))(Ut||{});const D1=Cu({name:"connection",initialState:{socketState:"LOADING"},reducers:{updateSocketState:(e,t)=>t.payload}}),{updateSocketState:tl}=D1.actions,vE=D1.reducer,_n=Object.create(null);_n.open="0";_n.close="1";_n.ping="2";_n.pong="3";_n.message="4";_n.upgrade="5";_n.noop="6";const Ws=Object.create(null);Object.keys(_n).forEach(e=>{Ws[_n[e]]=e});const tf={type:"error",data:"parser error"},F1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",z1=typeof ArrayBuffer=="function",B1=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Gp=({type:e,data:t},n,r)=>F1&&t instanceof Blob?n?r(t):Cg(t,r):z1&&(t instanceof ArrayBuffer||B1(t))?n?r(t):Cg(new Blob([t]),r):r(_n[e]+(t||"")),Cg=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function Ng(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let jc;function xE(e,t){if(F1&&e.data instanceof Blob)return e.data.arrayBuffer().then(Ng).then(t);if(z1&&(e.data instanceof ArrayBuffer||B1(e.data)))return t(Ng(e.data));Gp(e,!1,n=>{jc||(jc=new TextEncoder),t(jc.encode(n))})}const Eg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ho=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Eg.length;e++)Ho[Eg.charCodeAt(e)]=e;const _E=e=>{let t=e.length*.75,n=e.length,r,i=0,o,l,s,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),d=new Uint8Array(u);for(r=0;r<n;r+=4)o=Ho[e.charCodeAt(r)],l=Ho[e.charCodeAt(r+1)],s=Ho[e.charCodeAt(r+2)],a=Ho[e.charCodeAt(r+3)],d[i++]=o<<2|l>>4,d[i++]=(l&15)<<4|s>>2,d[i++]=(s&3)<<6|a&63;return u},SE=typeof ArrayBuffer=="function",Qp=(e,t)=>{if(typeof e!="string")return{type:"message",data:H1(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:wE(e.substring(1),t)}:Ws[n]?e.length>1?{type:Ws[n],data:e.substring(1)}:{type:Ws[n]}:tf},wE=(e,t)=>{if(SE){const n=_E(e);return H1(n,t)}else return{base64:!0,data:e}},H1=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},W1=String.fromCharCode(30),CE=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((o,l)=>{Gp(o,!1,s=>{r[l]=s,++i===n&&t(r.join(W1))})})},NE=(e,t)=>{const n=e.split(W1),r=[];for(let i=0;i<n.length;i++){const o=Qp(n[i],t);if(r.push(o),o.type==="error")break}return r};function EE(){return new TransformStream({transform(e,t){xE(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let kc;function Ss(e){return e.reduce((t,n)=>t+n.length,0)}function ws(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function TE(e,t){kc||(kc=new TextDecoder);const n=[];let r=0,i=-1,o=!1;return new TransformStream({transform(l,s){for(n.push(l);;){if(r===0){if(Ss(n)<1)break;const a=ws(n,1);o=(a[0]&128)===128,i=a[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Ss(n)<2)break;const a=ws(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(Ss(n)<8)break;const a=ws(n,8),u=new DataView(a.buffer,a.byteOffset,a.length),d=u.getUint32(0);if(d>Math.pow(2,53-32)-1){s.enqueue(tf);break}i=d*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Ss(n)<i)break;const a=ws(n,i);s.enqueue(Qp(o?a:kc.decode(a),t)),r=0}if(i===0||i>e){s.enqueue(tf);break}}}})}const U1=4;function ke(e){if(e)return bE(e)}function bE(e){for(var t in ke.prototype)e[t]=ke.prototype[t];return e}ke.prototype.on=ke.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ke.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};ke.prototype.off=ke.prototype.removeListener=ke.prototype.removeAllListeners=ke.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};ke.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};ke.prototype.emitReserved=ke.prototype.emit;ke.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ke.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Bt=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function V1(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const OE=Bt.setTimeout,jE=Bt.clearTimeout;function Eu(e,t){t.useNativeTimers?(e.setTimeoutFn=OE.bind(Bt),e.clearTimeoutFn=jE.bind(Bt)):(e.setTimeoutFn=Bt.setTimeout.bind(Bt),e.clearTimeoutFn=Bt.clearTimeout.bind(Bt))}const kE=1.33;function PE(e){return typeof e=="string"?$E(e):Math.ceil((e.byteLength||e.size)*kE)}function $E(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function RE(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function LE(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class ME extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Jp extends ke{constructor(t){super(),this.writable=!1,Eu(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,n,r){return super.emitReserved("error",new ME(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Qp(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=RE(t);return n.length?"?"+n:""}}const K1="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),nf=64,IE={};let Tg=0,Cs=0,bg;function Og(e){let t="";do t=K1[e%nf]+t,e=Math.floor(e/nf);while(e>0);return t}function q1(){const e=Og(+new Date);return e!==bg?(Tg=0,bg=e):e+"."+Og(Tg++)}for(;Cs<nf;Cs++)IE[K1[Cs]]=Cs;let Y1=!1;try{Y1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const AE=Y1;function G1(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||AE))return new XMLHttpRequest}catch{}if(!t)try{return new Bt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function DE(){}const FE=function(){return new G1({xdomain:!1}).responseType!=null}();class zE extends Jp{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}const n=t&&t.forceBase64;this.supportsBinary=FE&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};NE(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,CE(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=q1()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new xn(this.uri(),t)}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class xn extends ke{constructor(t,n){super(),Eu(this,n),this.opts=n,this.method=n.method||"GET",this.uri=t,this.data=n.data!==void 0?n.data:null,this.create()}create(){var t;const n=V1(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new G1(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=xn.requestsCount++,xn.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=DE,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete xn.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}xn.requestsCount=0;xn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",jg);else if(typeof addEventListener=="function"){const e="onpagehide"in Bt?"pagehide":"unload";addEventListener(e,jg,!1)}}function jg(){for(let e in xn.requests)xn.requests.hasOwnProperty(e)&&xn.requests[e].abort()}const Xp=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0))(),Ns=Bt.WebSocket||Bt.MozWebSocket,kg=!0,BE="arraybuffer",Pg=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class HE extends Jp{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),n=this.opts.protocols,r=Pg?{}:V1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=kg&&!Pg?n?new Ns(t,n):new Ns(t):new Ns(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;Gp(r,this.supportsBinary,o=>{const l={};try{kg&&this.ws.send(o)}catch{}i&&Xp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=q1()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}check(){return!!Ns}}class WE extends Jp{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const n=TE(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=EE();i.readable.pipeTo(t.writable),this.writer=i.writable.getWriter();const o=()=>{r.read().then(({done:s,value:a})=>{s||(this.onPacket(a),o())}).catch(s=>{})};o();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this.writer.write(l).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this.writer.write(r).then(()=>{i&&Xp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const UE={websocket:HE,webtransport:WE,polling:zE},VE=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,KE=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function rf(e){const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=VE.exec(e||""),o={},l=14;for(;l--;)o[KE[l]]=i[l]||"";return n!=-1&&r!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=qE(o,o.path),o.queryKey=YE(o,o.query),o}function qE(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function YE(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,o){i&&(n[i]=o)}),n}let Q1=class mi extends ke{constructor(t,n={}){super(),this.binaryType=BE,this.writeBuffer=[],t&&typeof t=="object"&&(n=t,t=null),t?(t=rf(t),n.hostname=t.host,n.secure=t.protocol==="https"||t.protocol==="wss",n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=rf(n.host).host),Eu(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=LE(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=U1,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new UE[t](r)}open(){let t;if(this.opts.rememberUpgrade&&mi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(t){let n=this.createTransport(t),r=!1;mi.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!r)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;mi.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function o(){r||(r=!0,d(),n.close(),n=null)}const l=h=>{const f=new Error("probe error: "+h);f.transport=n.name,o(),this.emitReserved("upgradeError",f)};function s(){l("transport closed")}function a(){l("socket closed")}function u(h){n&&h.name!==n.name&&o()}const d=()=>{n.removeListener("open",i),n.removeListener("error",l),n.removeListener("close",s),this.off("close",a),this.off("upgrading",u)};n.once("open",i),n.once("error",l),n.once("close",s),this.once("close",a),this.once("upgrading",u),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",mi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const n=this.upgrades.length;for(;t<n;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=t.data,this.onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=PE(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(t,n,r){return this.sendPacket("message",t,n,r),this}send(t,n,r){return this.sendPacket("message",t,n,r),this}sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:t,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}onError(t){mi.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const n=[];let r=0;const i=t.length;for(;r<i;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}};Q1.protocol=U1;function GE(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=rf(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const QE=typeof ArrayBuffer=="function",JE=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,J1=Object.prototype.toString,XE=typeof Blob=="function"||typeof Blob<"u"&&J1.call(Blob)==="[object BlobConstructor]",ZE=typeof File=="function"||typeof File<"u"&&J1.call(File)==="[object FileConstructor]";function Zp(e){return QE&&(e instanceof ArrayBuffer||JE(e))||XE&&e instanceof Blob||ZE&&e instanceof File}function Us(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(Us(e[n]))return!0;return!1}if(Zp(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Us(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Us(e[n]))return!0;return!1}function eT(e){const t=[],n=e.data,r=e;return r.data=of(n,t),r.attachments=t.length,{packet:r,buffers:t}}function of(e,t){if(!e)return e;if(Zp(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=of(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=of(e[r],t));return n}return e}function tT(e,t){return e.data=lf(e.data,t),delete e.attachments,e}function lf(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=lf(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=lf(e[n],t));return e}const nT=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],rT=5;var G;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(G||(G={}));class iT{constructor(t){this.replacer=t}encode(t){return(t.type===G.EVENT||t.type===G.ACK)&&Us(t)?this.encodeAsBinary({type:t.type===G.EVENT?G.BINARY_EVENT:G.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===G.BINARY_EVENT||t.type===G.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=eT(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function $g(e){return Object.prototype.toString.call(e)==="[object Object]"}class eh extends ke{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===G.BINARY_EVENT;r||n.type===G.BINARY_ACK?(n.type=r?G.EVENT:G.ACK,this.reconstructor=new oT(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Zp(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(G[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===G.BINARY_EVENT||r.type===G.BINARY_ACK){const o=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const l=t.substring(o,n);if(l!=Number(l)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(t.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(o,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const o=n+1;for(;++n;){const l=t.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===t.length)break}r.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(eh.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case G.CONNECT:return $g(n);case G.DISCONNECT:return n===void 0;case G.CONNECT_ERROR:return typeof n=="string"||$g(n);case G.EVENT:case G.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&nT.indexOf(n[0])===-1);case G.ACK:case G.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class oT{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=tT(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const lT=Object.freeze(Object.defineProperty({__proto__:null,Decoder:eh,Encoder:iT,get PacketType(){return G},protocol:rT},Symbol.toStringTag,{value:"Module"}));function tn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const sT=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class X1 extends ke{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[tn(t,"open",this.onopen.bind(this)),tn(t,"packet",this.onpacket.bind(this)),tn(t,"error",this.onerror.bind(this)),tn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){if(sT.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:G.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const l=this.ids++,s=n.pop();this._registerAckCallback(l,s),r.id=l}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i);this.acks[t]=(...l)=>{this.io.clearTimeoutFn(o),n.apply(this,[null,...l])}}emitWithAck(t,...n){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((i,o)=>{n.push((l,s)=>r?l?o(l):i(s):i(l)),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...o)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:G.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case G.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case G.EVENT:case G.BINARY_EVENT:this.onevent(t);break;case G.ACK:case G.BINARY_ACK:this.onack(t);break;case G.DISCONNECT:this.ondisconnect();break;case G.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:G.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(n.apply(this,t.data),delete this.acks[t.id])}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:G.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function uo(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}uo.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};uo.prototype.reset=function(){this.attempts=0};uo.prototype.setMin=function(e){this.ms=e};uo.prototype.setMax=function(e){this.max=e};uo.prototype.setJitter=function(e){this.jitter=e};class sf extends ke{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Eu(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new uo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||lT;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Q1(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=tn(n,"open",function(){r.onopen(),t&&t()}),o=s=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",s),t?t(s):this.maybeReconnectOnOpen()},l=tn(n,"error",o);if(this._timeout!==!1){const s=this._timeout,a=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),n.close()},s);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(tn(t,"ping",this.onping.bind(this)),tn(t,"data",this.ondata.bind(this)),tn(t,"error",this.onerror.bind(this)),tn(t,"close",this.onclose.bind(this)),tn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Xp(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new X1(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const $o={};function Vs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=GE(e,t.path||"/socket.io"),r=n.source,i=n.id,o=n.path,l=$o[i]&&o in $o[i].nsps,s=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let a;return s?a=new sf(r,t):($o[i]||($o[i]=new sf(r,t)),a=$o[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(Vs,{Manager:sf,Socket:X1,io:Vs,connect:Vs});const Yl=w.createContext({}),aT=({children:e})=>{const t=w.useRef(),n=q(),{ghostpadConfig:r,socketState:i}=z(o=>{var l;return{ghostpadConfig:(l=o==null?void 0:o.config)==null?void 0:l.ghostpadConfig,socketState:o==null?void 0:o.connection.socketState}},cn);return w.useEffect(()=>()=>{var o,l;(o=t.current)!=null&&o.connected&&((l=t.current)==null||l.disconnect())},[]),w.useEffect(()=>{const o=()=>{n(tl({socketState:Ut.DISCONNECTED}));const l=Vs((r==null?void 0:r.host)||window.location.host,{transports:["polling","websocket"],closeOnBeforeunload:!1,query:{ui:"2"}});l.on("disconnect",()=>{n(tl({socketState:Ut.DISCONNECTED}))}),l.on("connect",()=>{n(tl({socketState:Ut.CONNECTED}))}),t.current=l};i===Ut.READY_TO_CONNECT&&o()},[i,r==null?void 0:r.host,n]),c.jsx(Yl.Provider,{value:{socket:t==null?void 0:t.current},children:e})};function ae(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function Et(e){return function t(n){return arguments.length===0||ae(n)?t:e.apply(this,arguments)}}function Ze(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return ae(n)?t:Et(function(i){return e(n,i)});default:return ae(n)&&ae(r)?t:ae(n)?Et(function(i){return e(i,r)}):ae(r)?Et(function(i){return e(n,i)}):e(n,r)}}}function uT(e,t){e=e||[],t=t||[];var n,r=e.length,i=t.length,o=[];for(n=0;n<r;)o[o.length]=e[n],n+=1;for(n=0;n<i;)o[o.length]=t[n],n+=1;return o}function th(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(n){return t.apply(this,arguments)};case 2:return function(n,r){return t.apply(this,arguments)};case 3:return function(n,r,i){return t.apply(this,arguments)};case 4:return function(n,r,i,o){return t.apply(this,arguments)};case 5:return function(n,r,i,o,l){return t.apply(this,arguments)};case 6:return function(n,r,i,o,l,s){return t.apply(this,arguments)};case 7:return function(n,r,i,o,l,s,a){return t.apply(this,arguments)};case 8:return function(n,r,i,o,l,s,a,u){return t.apply(this,arguments)};case 9:return function(n,r,i,o,l,s,a,u,d){return t.apply(this,arguments)};case 10:return function(n,r,i,o,l,s,a,u,d,h){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Z1(e,t,n){return function(){for(var r=[],i=0,o=e,l=0,s=!1;l<t.length||i<arguments.length;){var a;l<t.length&&(!ae(t[l])||i>=arguments.length)?a=t[l]:(a=arguments[i],i+=1),r[l]=a,ae(a)?s=!0:o-=1,l+=1}return!s&&o<=0?n.apply(this,r):th(Math.max(0,o),Z1(e,r,n))}}var cT=Ze(function(t,n){return t===1?Et(n):th(t,Z1(t,[],n))});const dT=cT;function nh(e){return function t(n,r,i){switch(arguments.length){case 0:return t;case 1:return ae(n)?t:Ze(function(o,l){return e(n,o,l)});case 2:return ae(n)&&ae(r)?t:ae(n)?Ze(function(o,l){return e(o,r,l)}):ae(r)?Ze(function(o,l){return e(n,o,l)}):Et(function(o){return e(n,r,o)});default:return ae(n)&&ae(r)&&ae(i)?t:ae(n)&&ae(r)?Ze(function(o,l){return e(o,l,i)}):ae(n)&&ae(i)?Ze(function(o,l){return e(o,r,l)}):ae(r)&&ae(i)?Ze(function(o,l){return e(n,o,l)}):ae(n)?Et(function(o){return e(o,r,i)}):ae(r)?Et(function(o){return e(n,o,i)}):ae(i)?Et(function(o){return e(n,r,o)}):e(n,r,i)}}}const af=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function fT(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function pT(e,t,n){return function(){if(arguments.length===0)return n();var r=arguments[arguments.length-1];if(!af(r)){for(var i=0;i<e.length;){if(typeof r[e[i]]=="function")return r[e[i]].apply(r,Array.prototype.slice.call(arguments,0,-1));i+=1}if(fT(r)){var o=t.apply(null,Array.prototype.slice.call(arguments,0,-1));return o(r)}}return n.apply(this,arguments)}}const Rg={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};function Lg(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}function Mg(e,t,n){for(var r=0,i=n.length;r<i;){if(e(t,n[r]))return!0;r+=1}return!1}function hT(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function Ln(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function mT(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const Pc=typeof Object.is=="function"?Object.is:mT;var Ig=Object.prototype.toString,gT=function(){return Ig.call(arguments)==="[object Arguments]"?function(t){return Ig.call(t)==="[object Arguments]"}:function(t){return Ln("callee",t)}}();const yT=gT;var vT=!{toString:null}.propertyIsEnumerable("toString"),Ag=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Dg=function(){return arguments.propertyIsEnumerable("length")}(),xT=function(t,n){for(var r=0;r<t.length;){if(t[r]===n)return!0;r+=1}return!1},_T=Et(typeof Object.keys=="function"&&!Dg?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var n,r,i=[],o=Dg&&yT(t);for(n in t)Ln(n,t)&&(!o||n!=="length")&&(i[i.length]=n);if(vT)for(r=Ag.length-1;r>=0;)n=Ag[r],Ln(n,t)&&!xT(i,n)&&(i[i.length]=n),r-=1;return i});const to=_T;var ST=Et(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});const Fg=ST;function zg(e,t,n,r){var i=Lg(e),o=Lg(t);function l(s,a){return rh(s,a,n.slice(),r.slice())}return!Mg(function(s,a){return!Mg(l,a,s)},o,i)}function rh(e,t,n,r){if(Pc(e,t))return!0;var i=Fg(e);if(i!==Fg(t))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(i){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&hT(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&Pc(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!Pc(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var o=n.length-1;o>=0;){if(n[o]===e)return r[o]===t;o-=1}switch(i){case"Map":return e.size!==t.size?!1:zg(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size!==t.size?!1:zg(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var l=to(e);if(l.length!==to(t).length)return!1;var s=n.concat([e]),a=r.concat([t]);for(o=l.length-1;o>=0;){var u=l[o];if(!(Ln(u,t)&&rh(t[u],e[u],s,a)))return!1;o-=1}return!0}var wT=Ze(function(t,n){return rh(t,n,[],[])});const CT=wT;function NT(e,t,n){var r,i;if(typeof e.indexOf=="function")switch(typeof t){case"number":if(t===0){for(r=1/t;n<e.length;){if(i=e[n],i===0&&1/i===r)return n;n+=1}return-1}else if(t!==t){for(;n<e.length;){if(i=e[n],typeof i=="number"&&i!==i)return n;n+=1}return-1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(t===null)return e.indexOf(t,n)}for(;n<e.length;){if(CT(e[n],t))return n;n+=1}return-1}function ET(e,t){return NT(t,e,0)>=0}function $c(e,t){for(var n=0,r=t.length,i=Array(r);n<r;)i[n]=e(t[n]),n+=1;return i}function Rc(e){var t=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+t.replace(/"/g,'\\"')+'"'}var Ro=function(t){return(t<10?"0":"")+t},TT=typeof Date.prototype.toISOString=="function"?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+Ro(t.getUTCMonth()+1)+"-"+Ro(t.getUTCDate())+"T"+Ro(t.getUTCHours())+":"+Ro(t.getUTCMinutes())+":"+Ro(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};const bT=TT;function OT(e){return function(){return!e.apply(this,arguments)}}function ex(e,t,n){for(var r=0,i=n.length;r<i;)t=e(t,n[r]),r+=1;return t}function jT(e,t){for(var n=0,r=t.length,i=[];n<r;)e(t[n])&&(i[i.length]=t[n]),n+=1;return i}function uf(e){return Object.prototype.toString.call(e)==="[object Object]"}var kT=function(){function e(t,n){this.xf=n,this.f=t}return e.prototype["@@transducer/init"]=Rg.init,e.prototype["@@transducer/result"]=Rg.result,e.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t},e}();function PT(e){return function(t){return new kT(e,t)}}var $T=Ze(pT(["fantasy-land/filter","filter"],PT,function(e,t){return uf(t)?ex(function(n,r){return e(t[r])&&(n[r]=t[r]),n},{},to(t)):jT(e,t)}));const RT=$T;var LT=Ze(function(t,n){return RT(OT(t),n)});const MT=LT;function tx(e,t){var n=function(l){var s=t.concat([e]);return ET(l,s)?"<Circular>":tx(l,s)},r=function(o,l){return $c(function(s){return Rc(s)+": "+n(o[s])},l.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+$c(n,e).join(", ")+"))";case"[object Array]":return"["+$c(n,e).concat(r(e,MT(function(o){return/^\d+$/.test(o)},to(e)))).join(", ")+"]";case"[object Boolean]":return typeof e=="object"?"new Boolean("+n(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?n(NaN):Rc(bT(e)))+")";case"[object Map]":return"new Map("+n(Array.from(e))+")";case"[object Null]":return"null";case"[object Number]":return typeof e=="object"?"new Number("+n(e.valueOf())+")":1/e===-1/0?"-0":e.toString(10);case"[object Set]":return"new Set("+n(Array.from(e).sort())+")";case"[object String]":return typeof e=="object"?"new String("+n(e.valueOf())+")":Rc(e);case"[object Undefined]":return"undefined";default:if(typeof e.toString=="function"){var i=e.toString();if(i!=="[object Object]")return i}return"{"+r(e,to(e)).join(", ")+"}"}}var IT=Et(function(t){return tx(t,[])});const Lc=IT;function Bg(e){return Object.prototype.toString.call(e)==="[object String]"}function Hg(e){var t=Object.prototype.toString.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"}var AT=Ze(function(t,n){if(af(t)){if(af(n))return t.concat(n);throw new TypeError(Lc(n)+" is not an array")}if(Bg(t)){if(Bg(n))return t+n;throw new TypeError(Lc(n)+" is not a string")}if(t!=null&&Hg(t["fantasy-land/concat"]))return t["fantasy-land/concat"](n);if(t!=null&&Hg(t.concat))return t.concat(n);throw new TypeError(Lc(t)+' does not have a method named "concat" or "fantasy-land/concat"')});const DT=AT;var FT=Et(function(t){return dT(t.length,function(n,r){var i=Array.prototype.slice.call(arguments,0);return i[0]=r,i[1]=n,t.apply(this,i)})});const zT=FT;function BT(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,r=arguments.length;n<r;){var i=arguments[n];if(i!=null)for(var o in i)Ln(o,i)&&(t[o]=i[o]);n+=1}return t}const HT=typeof Object.assign=="function"?Object.assign:BT;function Wg(e){return Object.prototype.toString.call(e)==="[object Number]"}var WT=Ze(function(t,n){return ex(function(r,i){return r[i]=t(n[i],i,n),r},{},to(n))});const UT=WT;var VT=nh(function(t,n,r){var i={},o;n=n||{},r=r||{};for(o in n)Ln(o,n)&&(i[o]=Ln(o,r)?t(o,n[o],r[o]):n[o]);for(o in r)Ln(o,r)&&!Ln(o,i)&&(i[o]=r[o]);return i});const KT=VT;var qT=nh(function e(t,n,r){return KT(function(i,o,l){return uf(o)&&uf(l)?e(t,o,l):t(i,o,l)},n,r)});const YT=qT;var GT=nh(function(t,n,r){return YT(function(i,o,l){return t(o,l)},n,r)});const QT=GT;var JT=Ze(function(t,n){return HT({},t,n)});const Ug=JT;var XT=Ze(function(t,n){for(var r={},i={},o=0,l=t.length;o<l;)i[t[o]]=1,o+=1;for(var s in n)i.hasOwnProperty(s)||(r[s]=n[s]);return r});const ZT=XT;function eb(e){return Ze(function(t,n){return th(Math.max(0,t.length-n.length),function(){return t.apply(this,e(n,arguments))})})}var tb=eb(zT(uT));const nb=tb;var rb=Ze(function(t,n){if(!(Wg(t)&&Wg(n)))throw new TypeError("Both arguments to range must be numbers");for(var r=[],i=t;i<n;)r.push(i),i+=1;return r});const ib=rb,ob={ghostpadConfig:null,koboldConfig:{},sequenceNumbers:{story_actions:{}},lastNodeCount:0,pendingInsertion:!1,pendingRetry:!1,reinsertQueue:[],reinsertHistory:null,audioInEnabled:!1,audioOutEnabled:!1,utteranceStart:null,utteranceInProgress:!1,speechSynthesisLanguage:null,speechSynthesisVoice:null,loadState:{prompt:!1,actions:!1}},nx=Cu({name:"config",initialState:ob,reducers:{updateGhostpadConfig:(e,t)=>({...e,ghostpadConfig:t.payload}),setAudioInEnabled:(e,t)=>({...e,audioInEnabled:t.payload}),setAudioOutEnabled:(e,t)=>({...e,audioOutEnabled:t.payload}),setUtteranceStart:(e,t)=>({...e,utteranceStart:t.payload}),setSpeechSynthesisLanguage:(e,t)=>e.ghostpadConfig?{...e,ghostpadConfig:{...e.ghostpadConfig,speechSynthesisLanguage:t.payload}}:e,setSpeechSynthesisVoice:(e,t)=>e.ghostpadConfig?{...e,ghostpadConfig:{...e.ghostpadConfig,speechSynthesisVoice:t.payload}}:e,resetStory:e=>({...e,sequenceNumbers:{story_actions:{}},loadState:{prompt:!1,actions:!1},lastNodeCount:0}),setNodeCount:(e,t)=>({...e,lastNodeCount:t.payload}),setUtteranceInProgress:(e,t)=>({...e,utteranceInProgress:t.payload}),updateEditorGoogleFont:(e,t)=>e.ghostpadConfig?{...e,ghostpadConfig:{...e.ghostpadConfig,editorGoogleFont:t.payload}}:e,updateEditorFont:(e,t)=>e.ghostpadConfig?{...e,ghostpadConfig:{...e.ghostpadConfig,editorFont:t.payload}}:e,updateEditorFontSize:(e,t)=>e.ghostpadConfig?{...e,ghostpadConfig:{...e.ghostpadConfig,editorFontSize:t.payload}}:e,updateUseGoogleFont:(e,t)=>e.ghostpadConfig?{...e,ghostpadConfig:{...e.ghostpadConfig,useGoogleFont:t.payload}}:e,updateReinsertHistory:(e,t)=>({...e,reinsertHistory:t.payload}),updatePendingInsertion:(e,t)=>({...e,pendingInsertion:t.payload}),updatePendingRetry:(e,t)=>({...e,pendingRetry:t.payload}),updateReinsertQueue:(e,t)=>({...e,reinsertQueue:t.payload}),updateLocalSequenceNumber:(e,t)=>(t.payload.key==="story_actions"&&typeof t.payload.actionId<"u"?e.sequenceNumbers.story_actions[t.payload.actionId]=[t.payload.sequenceNumber,!1]:e.sequenceNumbers[t.payload.key]=[t.payload.sequenceNumber,!1],e),updateKoboldVar:(e,t)=>{var d;const{koboldConfig:n,loadState:r}=e,i=t.payload.classname==="story"&&t.payload.name==="actions",o=t.payload.classname==="story"&&t.payload.name==="prompt_wi_highlighted_text",l=t.payload.classname==="system"&&t.payload.name==="aibusy",s=`${t.payload.classname}_${t.payload.name}`;if(typeof t.payload.sequence_number=="number"&&!i&&(e.sequenceNumbers[s]=[t.payload.sequence_number,!0]),l&&e.koboldConfig.system)return e.koboldConfig.system.aibusy=!!t.payload.value,e;if(o&&t.payload.old_value!==null)return e;const a={[t.payload.classname]:{[t.payload.name]:t.payload.value}};if(i&&typeof t.payload.value=="object"&&!Array.isArray(t.payload.value)){const h=t.payload.value,f=a.story;f.actions=[...((d=n.story)==null?void 0:d.actions)||[]];const p=f.actions.findIndex(y=>y.id===h.id),m=f.actions[p]||{};m.id>=0?f.actions[p]={...m,action:h.action}:f.actions.push(h),e.sequenceNumbers.story_actions[h.id]=[t.payload.sequence_number,!0]}const u={[t.payload.classname]:Ug(n[t.payload.classname]||{},a[t.payload.classname]||{})};return e.koboldConfig=Ug(n,u),e.loadState={prompt:o?!0:r.prompt,actions:i?!0:r.actions},e}}}),{updateGhostpadConfig:ih,updateReinsertQueue:Tu,updateKoboldVar:bu,setNodeCount:lb,updateLocalSequenceNumber:X,updatePendingInsertion:oh,updatePendingRetry:lh,updateReinsertHistory:sh,updateEditorFont:Lk,updateEditorFontSize:Mk,updateEditorGoogleFont:Ik,updateUseGoogleFont:Ak,resetStory:rx,setAudioInEnabled:ix,setAudioOutEnabled:sb,setUtteranceStart:Vg,setUtteranceInProgress:Kg,setSpeechSynthesisLanguage:Dk,setSpeechSynthesisVoice:Fk}=nx.actions,ab=nx.reducer;var Ct=(e=>(e.Home="Home",e.ModelSettings="ModelSettings",e.Settings="Settings",e.WorldInfo="WorldInfo",e.Memory="Memory",e))(Ct||{});const qg={lastPopup:null,availableUserscripts:[],streamTokens:[],libraryItems:[],localBiases:[],localSubstitutions:[],modalState:{substitutions:{active:!1},biasing:{active:!1},samplerOrder:{active:!1},savePreset:{active:!1},saveStory:{active:!1},overwriteStory:{active:!1},selectOption:{active:!1,data:{actionId:null,options:[]}},confirmDeleteLibraryItem:{active:!1,data:null},confirmDeleteStory:{active:!1,data:null},confirmDeleteEntry:{active:!1,data:null},confirmResetEditor:{active:!1},addUserscript:{active:!1},saveToLibrary:{active:!1,data:null},confirmOverwriteLibraryFile:{active:!1,data:null},loadFromLibrary:{active:!1,data:null}},sidebarState:{active:!1,hiddenEntries:[],hfDefaultResults:[],hfSearchResults:null,isGeneratingWI:!1,localModels:[],localModelInfo:null,savedStories:[],selectedModel:null,selectedModelBackends:[],selectedSubsection:null,selectedSection:Ct.Home,movingWIEntry:null,loadedFile:null}},ox=Cu({name:"ui",initialState:{...qg},reducers:{toggleEntryVisibility:(e,t)=>{e.sidebarState.hiddenEntries.includes(t.payload)?e.sidebarState.hiddenEntries=e.sidebarState.hiddenEntries.filter(n=>n!==t.payload):e.sidebarState.hiddenEntries.push(t.payload)},updateLocalBiases:(e,t)=>{e.localBiases=t.payload},addLocalBias:(e,t)=>{e.localBiases.push(t.payload)},removeLocalBias:(e,t)=>{e.localBiases.splice(t.payload,1)},updateLocalSubstitutions:(e,t)=>{e.localSubstitutions=t.payload},addLocalSubstitution:(e,t)=>{e.localSubstitutions.push(t.payload)},removeLocalSubstitution:(e,t)=>{e.localSubstitutions.splice(t.payload,1)},updateLibraryItems:(e,t)=>{e.libraryItems=t.payload},updateLastPopup:(e,t)=>{e.lastPopup=t.payload},addStreamTokens:(e,t)=>{Array.isArray(t.payload)&&(e.streamTokens=[...e.streamTokens,...t.payload])},clearStreamTokens:e=>{e.streamTokens=[]},setIsLoadingWi:(e,t)=>{e.sidebarState.isGeneratingWI=t.payload},updateHfDefaultResults:(e,t)=>{e.sidebarState.hfDefaultResults=t.payload},updateHfSearchResults:(e,t)=>{e.sidebarState.hfSearchResults=t.payload},updateLocalModelInfo:(e,t)=>{const{model_backends:n}=t.payload,r=Object.keys(n).map(i=>{const o=n[i],l=o.find(s=>s.uitype==="Valid Display");return{name:i,loadParameterControls:o,totalLayers:(l==null?void 0:l.check.value)||0,layerSliders:(l==null?void 0:l.check.sum)||[]}});e.sidebarState.selectedModelBackends=r},updateLocalModels:(e,t)=>{e.sidebarState.localModels=t.payload.filter(n=>n.isMenu===!1)},updatePopupItems:(e,t)=>{if(e.lastPopup==="load_story")return{...e,sidebarState:{...e.sidebarState,savedStories:t.payload.items.map(n=>{const r=n[4];return{name:r[0],actionCount:r[1],timestamp:r[2],path:n[1],isValid:n[3]}})}};if(e.lastPopup==="load_userscripts")return{...e,availableUserscripts:t.payload.items.map(n=>{const r=n[4];return{name:r[0],description:r[1],path:n[1]}})}},updateSelectedModel:(e,t)=>{e.sidebarState.selectedModel=t.payload,e.sidebarState.selectedModelBackends=[]},updateSelectedSubsection:(e,t)=>{e.sidebarState.selectedSubsection=t.payload},updateSelectedSection:(e,t)=>{e.sidebarState.selectedSection=t.payload,e.sidebarState.selectedSubsection=null},updateMovingWIEntry:(e,t)=>{e.sidebarState.movingWIEntry=t.payload},updateLoadedFile:(e,t)=>{e.sidebarState.loadedFile=t.payload},openSidebar:e=>{e.sidebarState.active=!0},closeSidebar:e=>{e.sidebarState=qg.sidebarState},openModal:(e,t)=>{const n=e.modalState[t.payload.name];n.active=!0,n.data=t.payload.data},closeModal:(e,t)=>{e.modalState[t.payload].active=!1,e.modalState[t.payload].data=null}}}),{addStreamTokens:lx,clearStreamTokens:Ou,openModal:me,closeModal:te,openSidebar:ub,closeSidebar:sx,setIsLoadingWi:ax,toggleEntryVisibility:cb,updateHfDefaultResults:db,updateHfSearchResults:Yg,updateLastPopup:fb,updateLibraryItems:pb,updateLoadedFile:Pl,updateLocalModels:hb,updateLocalModelInfo:mb,updateMovingWIEntry:ux,updatePopupItems:gb,updateSelectedModel:yr,updateSelectedSubsection:ah,updateSelectedSection:cx,updateLocalBiases:Es,updateLocalSubstitutions:Lo}=ox.actions,yb=ox.reducer,dx=Cu({name:"worldInfo",initialState:{worldInfoFolders:{},worldInfoEntries:{},storyCommentary:null},reducers:{resetWorldInfo:()=>({worldInfoFolders:{},worldInfoEntries:{},storyCommentary:null}),deleteWorldInfoEntry:(e,t)=>{const n=t.payload,r=ZT([n.toString()],e.worldInfoEntries);return{...e,worldInfoEntries:r}},updateStoryCommentary:(e,t)=>({...e,storyCommentary:t.payload}),updateWorldInfoEntry:(e,t)=>{if(Array.isArray(t.payload)){const n=t.payload.reduce((r,i)=>{const{uid:o}=i;return{...r,[o]:i}},{});return{...e,worldInfoEntries:{...e.worldInfoEntries,...n}}}else{const n=t.payload,{uid:r}=n;return{...e,worldInfoEntries:{...e.worldInfoEntries,[r]:n}}}},updateWorldInfoFolders:(e,t)=>{const n=t.payload,r={...e.worldInfoEntries};return Object.entries(n).forEach(([i,o])=>{o.forEach(l=>{typeof r[l]>"u"||(r[l]={...r[l],folder:i})})}),{...e,worldInfoEntries:r,worldInfoFolders:n}}}}),{updateWorldInfoEntry:Gg,updateWorldInfoFolders:vb,updateStoryCommentary:xb,deleteWorldInfoEntry:_b,resetWorldInfo:Sb}=dx.actions,wb=dx.reducer,Zt=yE(),tt=Y2({reducer:{config:ab,connection:vE,worldInfo:wb,ui:yb},middleware:e=>e().prepend(Zt.middleware)}),Cb={uid:-1,title:"New World Info Entry",key:[],keysecondary:[],folder:"root",constant:!1,content:"",manual_text:"",comment:"",token_length:0,selective:!1,wpp:{name:"",type:"",format:"W++",attributes:{}},use_wpp:!1,object_type:null},Nb=e=>({...Cb,...e,uid:-1}),uh=(e,t)=>{t==null||t.emit("edit_world_info",e)},Eb=(e,t)=>{const n=Nb(e);uh(n,t)},Pe=(e,t,n)=>e==="story_actions"&&typeof n<"u"?n in t.story_actions?t.story_actions[n]:[0,!1]:e!=="story_actions"&&e in t?t[e]:[0,!1],Tb=(e,t)=>{t==null||t.on("stream_tokens",n=>{e(lx(n))}),t==null||t.on("world_info_folder",n=>{e(vb(n))}),t==null||t.on("delete_world_info_entry",n=>{e(_b(n))}),t==null||t.on("world_info_entry",n=>{e(Gg(n))}),t==null||t.on("generated_wi",n=>{const{worldInfoEntries:r}=tt.getState().worldInfo;if(typeof n.uid<"u"){const o={...r[n.uid],manual_text:n.out};uh(o,t),e(Gg(o))}e(ax(!1))}),t==null||t.on("reset_story",()=>{e(rx()),e(Sb())}),t==null||t.on("var_changed",n=>{const r=tt.getState().config.sequenceNumbers,i=n.classname==="story"&&n.name==="actions";let o;if(i){const l=n.value;[o]="id"in l?Pe("story_actions",r,l.id):[0]}else{const l=`${n.classname}_${n.name}`;[o]=Pe(l,r)}o>n.sequence_number||e(bu(n))}),t==null||t.on("show_options",()=>{const{actions:n,model:r}=tt.getState().config.koboldConfig,i=(n==null?void 0:n["Action Count"])||0;((r==null?void 0:r.numseqs)??0)>1&&e(me({name:"selectOption",data:{actionId:i+1}}))}),t==null||t.on("load_popup",({call_back:n})=>{e(fb(n))}),t==null||t.on("popup_items",n=>{e(gb(n))}),t==null||t.on("open_model_load_menu",({items:n})=>{e(hb(n))}),t==null||t.on("selected_model_info",n=>{e(mb(n))}),t==null||t.on("show_story_review",n=>{e(xb(n))})};var fx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Qg=Vt.createContext&&Vt.createContext(fx),vr=globalThis&&globalThis.__assign||function(){return vr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},vr.apply(this,arguments)},bb=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function px(e){return e&&e.map(function(t,n){return Vt.createElement(t.tag,vr({key:n},t.attr),px(t.child))})}function V(e){return function(t){return Vt.createElement(Ob,vr({attr:vr({},e.attr)},t),px(e.child))}}function Ob(e){var t=function(n){var r=e.attr,i=e.size,o=e.title,l=bb(e,["attr","size","title"]),s=i||n.size||"1em",a;return n.className&&(a=n.className),e.className&&(a=(a?a+" ":"")+e.className),Vt.createElement("svg",vr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,l,{className:a,style:vr(vr({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&Vt.createElement("title",null,o),e.children)};return Qg!==void 0?Vt.createElement(Qg.Consumer,null,function(n){return t(n)}):t(fx)}function jb(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 4h12v2H6zm6 16.414 6.707-6.707-1.414-1.414L13 16.586V8h-2v8.586l-4.293-4.293-1.414 1.414z"}}]})(e)}function ch(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m10 15.586-3.293-3.293-1.414 1.414L10 18.414l9.707-9.707-1.414-1.414z"}}]})(e)}function kb(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m18.707 12.707-1.414-1.414L13 15.586V6h-2v9.586l-4.293-4.293-1.414 1.414L12 19.414z"}}]})(e)}function Pb(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m2.586 15.408 4.299 4.299a.996.996 0 0 0 .707.293h12.001v-2h-6.958l7.222-7.222c.78-.779.78-2.049 0-2.828L14.906 3a2.003 2.003 0 0 0-2.828 0l-4.75 4.749-4.754 4.843a2.007 2.007 0 0 0 .012 2.816zM13.492 4.414l4.95 4.95-2.586 2.586L10.906 7l2.586-2.586zM8.749 9.156l.743-.742 4.95 4.95-4.557 4.557a1.026 1.026 0 0 0-.069.079h-1.81l-4.005-4.007 4.748-4.837z"}}]})(e)}function $b(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 17a5.007 5.007 0 0 0 4.898-4H14v2h2v-2h2v3h2v-3h1v-2h-9.102A5.007 5.007 0 0 0 7 7c-2.757 0-5 2.243-5 5s2.243 5 5 5zm0-8c1.654 0 3 1.346 3 3s-1.346 3-3 3-3-1.346-3-3 1.346-3 3-3z"}}]})(e)}function Rb(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.707 17.293 8.414 13H18v-2H8.414l4.293-4.293-1.414-1.414L4.586 12l6.707 6.707z"}}]})(e)}function Lb(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"}}]})(e)}function Mb(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 11h-5V6h3l-4-4-4 4h3v5H6V8l-4 4 4 4v-3h5v5H8l4 4 4-4h-3v-5h5v3l4-4-4-4z"}}]})(e)}function Ur(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 4h-3V2h-2v2h-4V2H8v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zM5 20V7h14V6l.002 14H5z"}},{tag:"path",attr:{d:"M7 9h10v2H7zm0 4h5v2H7z"}}]})(e)}function Ib(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M8 7h3v10H8zm5 0h3v10h-3z"}}]})(e)}function hx(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 21a1 1 0 0 0 .24 0l4-1a1 1 0 0 0 .47-.26L21 7.41a2 2 0 0 0 0-2.82L19.42 3a2 2 0 0 0-2.83 0L4.3 15.29a1.06 1.06 0 0 0-.27.47l-1 4A1 1 0 0 0 3.76 21 1 1 0 0 0 4 21zM18 4.41 19.59 6 18 7.59 16.42 6zM5.91 16.51 15 7.41 16.59 9l-9.1 9.1-2.11.52z"}}]})(e)}function Ab(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 6v12l10-6z"}}]})(e)}function Db(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 11H7.101l.001-.009a4.956 4.956 0 0 1 .752-1.787 5.054 5.054 0 0 1 2.2-1.811c.302-.128.617-.226.938-.291a5.078 5.078 0 0 1 2.018 0 4.978 4.978 0 0 1 2.525 1.361l1.416-1.412a7.036 7.036 0 0 0-2.224-1.501 6.921 6.921 0 0 0-1.315-.408 7.079 7.079 0 0 0-2.819 0 6.94 6.94 0 0 0-1.316.409 7.04 7.04 0 0 0-3.08 2.534 6.978 6.978 0 0 0-1.054 2.505c-.028.135-.043.273-.063.41H2l4 4 4-4zm4 2h2.899l-.001.008a4.976 4.976 0 0 1-2.103 3.138 4.943 4.943 0 0 1-1.787.752 5.073 5.073 0 0 1-2.017 0 4.956 4.956 0 0 1-1.787-.752 5.072 5.072 0 0 1-.74-.61L7.05 16.95a7.032 7.032 0 0 0 2.225 1.5c.424.18.867.317 1.315.408a7.07 7.07 0 0 0 2.818 0 7.031 7.031 0 0 0 4.395-2.945 6.974 6.974 0 0 0 1.053-2.503c.027-.135.043-.273.063-.41H22l-4-4-4 4z"}}]})(e)}function Fb(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m11.293 17.293 1.414 1.414L19.414 12l-6.707-6.707-1.414 1.414L15.586 11H6v2h9.586z"}}]})(e)}function zb(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7.5 14.5c-1.58 0-2.903 1.06-3.337 2.5H2v2h2.163c.434 1.44 1.757 2.5 3.337 2.5s2.903-1.06 3.337-2.5H22v-2H10.837c-.434-1.44-1.757-2.5-3.337-2.5zm0 5c-.827 0-1.5-.673-1.5-1.5s.673-1.5 1.5-1.5S9 17.173 9 18s-.673 1.5-1.5 1.5zm9-11c-1.58 0-2.903 1.06-3.337 2.5H2v2h11.163c.434 1.44 1.757 2.5 3.337 2.5s2.903-1.06 3.337-2.5H22v-2h-2.163c-.434-1.44-1.757-2.5-3.337-2.5zm0 5c-.827 0-1.5-.673-1.5-1.5s.673-1.5 1.5-1.5 1.5.673 1.5 1.5-.673 1.5-1.5 1.5z"}},{tag:"path",attr:{d:"M12.837 5C12.403 3.56 11.08 2.5 9.5 2.5S6.597 3.56 6.163 5H2v2h4.163C6.597 8.44 7.92 9.5 9.5 9.5s2.903-1.06 3.337-2.5h9.288V5h-9.288zM9.5 7.5C8.673 7.5 8 6.827 8 6s.673-1.5 1.5-1.5S11 5.173 11 6s-.673 1.5-1.5 1.5z"}}]})(e)}function ju(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z"}},{tag:"path",attr:{d:"M9 10h2v8H9zm4 0h2v8h-2z"}}]})(e)}function Bb(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11 8.414V18h2V8.414l4.293 4.293 1.414-1.414L12 4.586l-6.707 6.707 1.414 1.414z"}}]})(e)}function Hb(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zM4 12c0-.899.156-1.762.431-2.569L6 11l2 2v2l2 2 1 1v1.931C7.061 19.436 4 16.072 4 12zm14.33 4.873C17.677 16.347 16.687 16 16 16v-1a2 2 0 0 0-2-2h-4v-3a2 2 0 0 0 2-2V7h1a2 2 0 0 0 2-2v-.411C17.928 5.778 20 8.65 20 12a7.947 7.947 0 0 1-1.67 4.873z"}}]})(e)}function co(e){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m16.192 6.344-4.243 4.242-4.242-4.242-1.414 1.414L10.535 12l-4.242 4.242 1.414 1.414 4.242-4.242 4.243 4.242 1.414-1.414L13.364 12l4.242-4.242z"}}]})(e)}function Wb(e){return V({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0V3z"}},{tag:"path",attr:{d:"M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5z"}}]})(e)}function mx(e){return V({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}}]})(e)}function Ub(e){return V({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}},{tag:"path",attr:{fillRule:"evenodd",d:"M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"}}]})(e)}function ku(e){return V({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12zm-4.5-6.5H5.707l2.147-2.146a.5.5 0 1 0-.708-.708l-3 3a.5.5 0 0 0 0 .708l3 3a.5.5 0 0 0 .708-.708L5.707 8.5H11.5a.5.5 0 0 0 0-1z"}}]})(e)}function Vb(e){return V({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"}},{tag:"path",attr:{fillRule:"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"}}]})(e)}function Kb(e){return V({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm4-2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5ZM9 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4A.5.5 0 0 1 9 8Zm1 2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Z"}},{tag:"path",attr:{d:"M2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2ZM1 4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H8.96c.026-.163.04-.33.04-.5C9 10.567 7.21 9 5 9c-2.086 0-3.8 1.398-3.984 3.181A1.006 1.006 0 0 1 1 12V4Z"}}]})(e)}function qb(e){return V({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9 4a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-2.5 6.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0z"}},{tag:"path",attr:{d:"M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm6 4a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 7a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7z"}}]})(e)}function gx(e){return V({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"}}]})(e)}const Yb=e=>{e==null||e.emit("redo",{})},dh=(e,t)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>e(...r),t)}},yx=(e,t,n,r=null,i)=>{i==null||i.emit("var_change",{ID:e,value:t,sequence_number:n},()=>{r==null||r()})},vx=(e,t,n,r)=>yx(e,t,n,null,r),Gb=dh(vx,200),Qb=e=>{e==null||e.emit("new_story","")},Jb=e=>{e==null||e.emit("back",{})},Xb=(e,t,n,r)=>{r==null||r.emit("Set Selected Text",{text:t,id:e,sequence_number:n})},Zb=e=>{e==null||e.emit("retry",{})},e4=(e,t)=>{t==null||t.emit("submit",{data:e,theme:""})},t4=(e,t)=>{t==null||t.emit("load_userscripts",e)},n4=(e,t)=>{t==null||t.emit("popup_delete",e)},r4=(e,t)=>{t==null||t.emit("save_story",null,n=>{e(n)})},i4=e=>{e==null||e.emit("save_story","overwrite")},o4=(e,t,n)=>{n==null||n.emit("save_new_preset",{preset:e,description:t})},l4=e=>{e==null||e.emit("abort",{})},s4=(e,t,n)=>{n==null||n.emit("Use Option Text",{chunk:e,option:t})},a4=(e,t)=>{t==null||t.emit("load_story",e)},u4=e=>{e==null||e.emit("load_story_list","")},c4=e=>{e==null||e.emit("load_userscripts_list","")},d4=(e,t)=>{t==null||t.emit("unload_userscripts",e)},f4=(e,t)=>{t==null||t.emit("load_model",e)},p4=(e,t)=>{t==null||t.emit("select_model",e)},h4=e=>{e==null||e.emit("create_world_info_folder",{})},m4=(e,t)=>{t==null||t.emit("delete_wi_folder",e)},g4=(e,t,n)=>{n==null||n.emit("Rename_World_Info_Folder",{old_folder:e,new_folder:t})},y4=(e,t)=>{t==null||t.emit("delete_world_info",e)},v4=(e,t,n)=>{n==null||n.emit("wi_set_folder",{dragged_id:e.toString(),folder:t})},x4=(e,t,n,r)=>{r==null||r.emit("upload_world_info_folder",{folder:e,filename:t,data:n})},_4=(e,t)=>{t==null||t.emit("resubmit_model_info",e)},S4=(e,t)=>{const n={existing:{desc:null,title:e.title,type:e.object_type},field:"desc",genAmount:50,uid:e.uid};t==null||t.emit("generate_wi",n)},w4=(e,t,n)=>{n==null||n.emit("popup_rename_story",{file:e,new_name:t})},C4=(e,t,n)=>{n==null||n.emit("upload_file",{filename:e,data:t,upload_no_save:!1})},N4=(e,t,n)=>{n==null||n.emit("phrase_bias_update",{biases:e,sequence_number:t})},E4=(e,t,n)=>{n==null||n.emit("substitution_update",{substitutions:e,sequence_number:t})},T4={redo:Yb,varChange:vx,varChangeWithCallback:yx,debouncedVarChange:Gb,newStory:Qb,back:Jb,setSelectedText:Xb,retry:Zb,submit:e4,addUserscript:t4,removeUserscript:d4,deleteStory:n4,saveStoryWithCallback:r4,overwriteStory:i4,saveNewPreset:o4,abort:l4,useOptionText:s4,loadStory:a4,loadStoryList:u4,loadUserscriptsList:c4,loadModel:f4,selectModel:p4,createWorldInfoFolder:h4,deleteWorldInfoFolder:m4,createWorldInfoEntry:Eb,editWorldInfoEntry:uh,renameWorldInfoFolder:g4,deleteWorldInfoEntry:y4,moveWorldInfoEntry:v4,uploadFile:C4,uploadWorldInfoFolder:x4,resubmitModelInfo:_4,generateWI:S4,renameStory:w4,phraseBiasUpdate:N4,substitutionUpdate:E4},Q=w.createContext(null),b4=({children:e})=>{const{socket:t}=w.useContext(Yl),[n,r]=w.useState(null);return w.useEffect(()=>{if(!t)return;r(UT(o=>nb(o,[t]),T4))},[t]),c.jsx(Q.Provider,{value:n,children:e})},O4=()=>{var l,s,a,u,d;const e=q(),{koboldConfig:t,audioInEnabled:n,audioOutEnabled:r}=z(h=>({koboldConfig:h.config.koboldConfig,audioInEnabled:h.config.audioInEnabled,audioOutEnabled:h.config.audioOutEnabled}),cn),i=w.useContext(Q),o=()=>{var m,y;const h=(m=t.actions)==null?void 0:m["Action Count"];if(typeof h!="number")return;const f=(y=t.story)==null?void 0:y.actions[h+1];!!f&&f.action.Options.length>1?e(me({name:"selectOption",data:{actionId:f.id}})):i==null||i.redo()};return c.jsxs("div",{className:"h-16 flex justify-between items-center bg-base-300",children:[c.jsx("div",{className:"left-icons",children:c.jsx("label",{className:"btn drawer-button ml-4",onClick:()=>{e(ub())},children:c.jsx(Lb,{size:"1.5em"})})}),c.jsxs("div",{className:"right-icons flex",children:[c.jsx("button",{className:"btn btn-error mr-4",title:"Clear the story and start over",disabled:((l=t.system)==null?void 0:l.aibusy)||!1,onClick:()=>{e(me({name:"confirmResetEditor"}))},children:c.jsx(Pb,{size:"1.5em"})}),c.jsx("button",{className:"btn mr-4",disabled:((s=t.system)==null?void 0:s.aibusy)||!1,onClick:()=>{e(lh(!0))},children:c.jsx(Db,{size:"1.5em"})}),c.jsxs("div",{className:"dropdown dropdown-bottom dropdown-end",children:[c.jsx("label",{tabIndex:0,className:"btn mr-4",children:c.jsx(gx,{size:"1.5em"})}),c.jsxs("ul",{tabIndex:0,className:"dropdown-content menu menu-md p-2 shadow rounded-box w-52 bg-base-100",children:[c.jsx("li",{children:c.jsxs("button",{title:"Undo on the Kobold backend. Different from CTRL+Z and may not be compatible with all Ghostpad features.",disabled:((a=t.system)==null?void 0:a.aibusy)||!1,onClick:()=>{i==null||i.back()},className:"flex flex-row justify-start",children:[c.jsx(Rb,{size:"1.5em"}),c.jsx("span",{children:"Undo Generation"})]})}),c.jsx("li",{children:c.jsxs("button",{disabled:((u=t.system)==null?void 0:u.aibusy)||!1,onClick:o,className:"flex flex-row justify-start",title:"Redo on the Kobold backend. Different from CTRL+Shift+Z and may not be compatible with all Ghostpad features.",children:[c.jsx(Fb,{size:"1.5em"}),c.jsx("span",{children:"Redo Generation"})]})}),c.jsx("li",{children:c.jsxs("button",{title:"Generate from the cursor position",disabled:((d=t.system)==null?void 0:d.aibusy)||!1,onClick:()=>{e(oh(!0))},className:"flex flex-row justify-start",children:[c.jsx(Vb,{size:"1.5em"}),c.jsx("span",{children:"Continue"})]})}),c.jsxs("li",{children:[c.jsxs("button",{title:"Toggle microphone speech recognition",onClick:()=>{e(ix(!n))},className:"flex flex-row justify-start",children:[c.jsx(Wb,{size:"1.5em"}),c.jsxs("span",{children:[n?"Disable":"Enable"," Audio In"]})]}),c.jsxs("button",{title:"Toggle audio-only communication",onClick:()=>{e(sb(!r))},className:"flex flex-row justify-start",children:[c.jsx(qb,{size:"1.5em"}),c.jsxs("span",{children:[r?"Disable":"Enable"," Audio Out"]})]})]})]})]})]})]})};var xx={},Pu={},_x=w;function j4(e){let t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let Sx=_x.createContext(null);Pu.LexicalComposerContext=Sx;Pu.createLexicalComposerContext=function(e,t){let n=null;return e!=null&&(n=e[1]),{getTheme:function(){return t??(n!=null?n.getTheme():null)}}};Pu.useLexicalComposerContext=function(){let e=_x.useContext(Sx);return e==null&&j4(8),e};const k4=Pu;var wn=k4,E={};let $u={},wx={},Wi={},nl={},cf={},Ui={},fh={},df={},$l={},Rl={},or={},ph={},hh={},Cx={},Nx={},Ex={},Tx={},bx={},Ox={},jx={},Ta={},kx={},Px={},$x={},Rx={},Lx={},Mx={},Ix={},Ax={},Dx={},mh={},gh={},ff={},Fx={},zx={},Bx={};function $(e){let t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let Cn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",P4=Cn&&"documentMode"in document?document.documentMode:null,Qe=Cn&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Nr=Cn&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),ba=Cn&&"InputEvent"in window&&!P4?"getTargetRanges"in new window.InputEvent("input"):!1,yh=Cn&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Ru=Cn&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,$4=Cn&&/Android/.test(navigator.userAgent),R4=Cn&&/^(?=.*Chrome).*/i.test(navigator.userAgent),vh=Cn&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!R4,Lu=yh||Ru||vh?" ":"​",L4=Nr?" ":Lu,M4=/^[^A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]/,I4=/^[^\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]*[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,xr={bold:1,code:16,highlight:128,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},A4={directionless:1,unmergeable:2},Jg={center:2,end:6,justify:4,left:1,right:3,start:5},D4={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},F4={normal:0,segmented:2,token:1},z4={0:"normal",2:"segmented",1:"token"},pf=!1,xh=0;function B4(e){xh=e.timeStamp}function Mc(e,t,n){return t.__lexicalLineBreak===e||e[`__lexicalKey_${n._key}`]!==void 0}function H4(e){return e.getEditorState().read(()=>{let t=oe();return t!==null?t.clone():null})}function Hx(e,t,n){pf=!0;let r=100<performance.now()-xh;try{Pt(e,()=>{let i=oe()||H4(e);var o=new Map,l=e.getRootElement(),s=e._editorState,a=e._blockCursorElement;let u=!1,d="";for(var h=0;h<t.length;h++){var f=t[h],p=f.type,m=f.target,y=Ql(m,s);if(!(y===null&&m!==l||Ce(y))){if(p==="characterData"){if(f=r&&I(y))e:{f=i,p=m;var _=y;if(B(f)){var g=f.anchor.getNode();if(g.is(_)&&f.format!==g.getFormat()){f=!1;break e}}f=p.nodeType===3&&_.isAttached()}f&&(_=Nn(e._window),p=f=null,_!==null&&_.anchorNode===m&&(f=_.anchorOffset,p=_.focusOffset),m=m.nodeValue,m!==null&&Nh(y,m,f,p,!1))}else if(p==="childList"){for(u=!0,p=f.addedNodes,_=0;_<p.length;_++){g=p[_];var v=Yx(g),x=g.parentNode;x==null||g===a||v!==null||g.nodeName==="BR"&&Mc(g,x,e)||(Nr&&(v=g.innerText||g.nodeValue)&&(d+=v),x.removeChild(g))}if(f=f.removedNodes,p=f.length,0<p){for(_=0,g=0;g<p;g++)x=f[g],(x.nodeName==="BR"&&Mc(x,m,e)||a===x)&&(m.appendChild(x),_++);p!==_&&(m===l&&(y=s._nodeMap.get("root")),o.set(m,y))}}}}if(0<o.size)for(let[S,C]of o)if(O(C))for(o=C.getChildrenKeys(),l=S.firstChild,s=0;s<o.length;s++)a=e.getElementByKey(o[s]),a!==null&&(l==null?(S.appendChild(a),l=a):l!==a&&S.replaceChild(a,l),l=l.nextSibling);else I(C)&&C.markDirty();if(o=n.takeRecords(),0<o.length){for(l=0;l<o.length;l++)for(a=o[l],s=a.addedNodes,a=a.target,h=0;h<s.length;h++)y=s[h],m=y.parentNode,m==null||y.nodeName!=="BR"||Mc(y,a,e)||m.removeChild(y);n.takeRecords()}i!==null&&(u&&(i.dirty=!0,Sn(i)),Nr&&Xx(e)&&i.insertRawText(d))})}finally{pf=!1}}function Wx(e){let t=e._observer;if(t!==null){let n=t.takeRecords();Hx(e,n,t)}}function Ux(e){xh===0&&Iu(e).addEventListener("textInput",B4,!0),e._observer=new MutationObserver((t,n)=>{Hx(e,t,n)})}function Xg(e,t){let n=e.__mode,r=e.__format;e=e.__style;let i=t.__mode,o=t.__format;return t=t.__style,(n===null||n===i)&&(r===null||r===o)&&(e===null||e===t)}function Zg(e,t){let n=e.mergeWithSibling(t),r=xe()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function Vx(e){if(e.__text===""&&e.isSimpleText()&&!e.isUnmergeable())e.remove();else{for(var t;(t=e.getPreviousSibling())!==null&&I(t)&&t.isSimpleText()&&!t.isUnmergeable();)if(t.__text==="")t.remove();else{Xg(t,e)&&(e=Zg(t,e));break}for(var n;(n=e.getNextSibling())!==null&&I(n)&&n.isSimpleText()&&!n.isUnmergeable();)if(n.__text==="")n.remove();else{Xg(e,n)&&Zg(e,n);break}}}function Kx(e){return ey(e.anchor),ey(e.focus),e}function ey(e){for(;e.type==="element";){var t=e.getNode(),n=e.offset;if(n===t.getChildrenSize()?(t=t.getChildAtIndex(n-1),n=!0):(t=t.getChildAtIndex(n),n=!1),I(t)){e.set(t.__key,n?t.getTextContentSize():0,"text");break}else if(!O(t))break;e.set(t.__key,n?t.getChildrenSize():0,"element")}}let W4=1,U4=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function _h(e){let t=document.activeElement;if(t===null)return!1;let n=t.nodeName;return Ce(Ql(e))&&(n==="INPUT"||n==="TEXTAREA"||t.contentEditable==="true"&&t.__lexicalEditor==null)}function Gl(e,t,n){let r=e.getRootElement();try{return r!==null&&r.contains(t)&&r.contains(n)&&t!==null&&!_h(t)&&Sh(t)===e}catch{return!1}}function Sh(e){for(;e!=null;){let t=e.__lexicalEditor;if(t!=null)return t;e=Mu(e)}return null}function hf(e){return e.isToken()||e.isSegmented()}function Oa(e){for(;e!=null;){if(e.nodeType===3)return e;e=e.firstChild}return null}function mf(e,t,n){let r=xr[t];return n!==null&&(e&r)===(n&r)||(e^=r,t==="subscript"?e&=~xr.superscript:t==="superscript"&&(e&=~xr.subscript)),e}function qx(e,t){if(t!=null)e.__key=t;else{ut(),99<Al&&$(14),t=xe();var n=En(),r=""+W4++;n._nodeMap.set(r,e),O(e)?t._dirtyElements.set(r,!0):t._dirtyLeaves.add(r),t._cloneNotNeeded.add(r),t._dirtyType=1,e.__key=r}}function Yr(e){var t=e.getParent();if(t!==null){let i=e.getWritable();t=t.getWritable();var n=e.getPreviousSibling();if(e=e.getNextSibling(),n===null)if(e!==null){var r=e.getWritable();t.__first=e.__key,r.__prev=null}else t.__first=null;else{if(r=n.getWritable(),e!==null){let o=e.getWritable();o.__prev=r.__key,r.__next=o.__key}else r.__next=null;i.__prev=null}e===null?n!==null?(e=n.getWritable(),t.__last=n.__key,e.__next=null):t.__last=null:(e=e.getWritable(),n!==null?(n=n.getWritable(),n.__next=e.__key,e.__prev=n.__key):e.__prev=null,i.__next=null),t.__size--,i.__parent=null}}function ja(e){99<Al&&$(14);var t=e.getLatest(),n=t.__parent,r=En();let i=xe(),o=r._nodeMap;if(r=i._dirtyElements,n!==null)e:for(;n!==null;){if(r.has(n))break e;let l=o.get(n);if(l===void 0)break;r.set(n,!1),n=l.__parent}t=t.__key,i._dirtyType=1,O(e)?r.set(t,!0):i._dirtyLeaves.add(t)}function Me(e){ut();var t=xe();let n=t._compositionKey;e!==n&&(t._compositionKey=e,n!==null&&(t=et(n),t!==null&&t.getWritable()),e!==null&&(e=et(e),e!==null&&e.getWritable()))}function lr(){return mo()?null:xe()._compositionKey}function et(e,t){return e=(t||En())._nodeMap.get(e),e===void 0?null:e}function Yx(e,t){let n=xe();return e=e[`__lexicalKey_${n._key}`],e!==void 0?et(e,t):null}function Ql(e,t){for(;e!=null;){let n=Yx(e,t);if(n!==null)return n;e=Mu(e)}return null}function Gx(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t}function ty(e){return e.read(()=>kt().getTextContent())}function V4(e,t){Pt(e,()=>{var n=En();if(!n.isEmpty())if(t==="root")kt().markDirty();else{n=n._nodeMap;for(let[,r]of n)r.markDirty()}},e._pendingEditorState===null?{tag:"history-merge"}:void 0)}function kt(){return En()._nodeMap.get("root")}function Sn(e){ut();let t=En();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function ki(e){var t=xe(),n;e:{for(n=e;n!=null;){let r=n[`__lexicalKey_${t._key}`];if(r!==void 0){n=r;break e}n=Mu(n)}n=null}return n===null?(t=t.getRootElement(),e===t?et("root"):null):et(n)}function Qx(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function wh(e){let t=[];for(;e!==null;)t.push(e),e=e._parentEditor;return t}function Jx(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function Ch(e,t,n){if(t=Nn(t._window),t!==null){var r=t.anchorNode,{anchorOffset:i,focusOffset:o}=t;if(r!==null&&(t=r.nodeType===3?r.nodeValue:null,r=Ql(r),t!==null&&I(r))){if(t===Lu&&n){let l=n.length;t=n,o=i=l}t!==null&&Nh(r,t,i,o,e)}}}function Nh(e,t,n,r,i){let o=e;if(o.isAttached()&&(i||!o.isDirty())){let u=o.isComposing(),d=t;if((u||i)&&t[t.length-1]===Lu&&(d=t.slice(0,-1)),t=o.getTextContent(),i||d!==t)if(d==="")if(Me(null),yh||Ru||vh)o.remove();else{let h=xe();setTimeout(()=>{h.update(()=>{o.isAttached()&&o.remove()})},20)}else{i=o.getParent(),t=ho();var l=o.getTextContentSize(),s=lr(),a=o.getKey();o.isToken()||s!==null&&a===s&&!u||B(t)&&(i!==null&&!i.canInsertTextBefore()&&t.anchor.offset===0||t.anchor.key===e.__key&&t.anchor.offset===0&&!o.canInsertTextBefore()&&!u||t.focus.key===e.__key&&t.focus.offset===l&&!o.canInsertTextAfter()&&!u)?o.markDirty():(e=oe(),B(e)&&n!==null&&r!==null&&(e.setTextNodeRange(o,n,o,r),o.isSegmented()&&(n=o.getTextContent(),n=Ue(n),o.replace(n),o=n)),o.setTextContent(d))}}}function K4(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;e=e.anchor.offset;let n=t.getParentOrThrow(),r=t.isToken();return e===0?((e=!t.canInsertTextBefore()||!n.canInsertTextBefore()||r)||(t=t.getPreviousSibling(),e=(I(t)||O(t)&&t.isInline())&&!t.canInsertTextAfter()),e):e===t.getTextContentSize()?!t.canInsertTextAfter()||!n.canInsertTextAfter()||r:!1}function rl(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});let n=e.__lexicalClassNameCache,r=n[t];return r!==void 0?r:(e=e[t],typeof e=="string"?(e=e.split(" "),n[t]=e):e)}function Eh(e,t,n,r,i){n.size!==0&&(n=r.__type,r=r.__key,t=t.get(n),t===void 0&&$(33,n),n=t.klass,t=e.get(n),t===void 0&&(t=new Map,e.set(n,t)),e=t.get(r),n=e==="destroyed"&&i==="created",(e===void 0||n)&&t.set(r,n?"updated":i))}function ny(e,t,n){let r=e.getParent(),i=n;return r!==null&&(t&&n===0?(i=e.getIndexWithinParent(),e=r):t||n!==e.getChildrenSize()||(i=e.getIndexWithinParent()+1,e=r)),e.getChildAtIndex(t?i-1:i)}function gf(e,t){var n=e.offset;return e.type==="element"?(e=e.getNode(),ny(e,t,n)):(e=e.getNode(),t&&n===0||!t&&n===e.getTextContentSize()?(n=t?e.getPreviousSibling():e.getNextSibling(),n===null?ny(e.getParentOrThrow(),t,e.getIndexWithinParent()+(t?0:1)):n):null)}function Xx(e){return e=(e=Iu(e).event)&&e.inputType,e==="insertFromPaste"||e==="insertFromPasteAsQuotation"}function ka(e){return!bt(e)&&!e.isLastChild()&&!e.isInline()}function Pa(e,t){return e=e._keyToDOMMap.get(t),e===void 0&&$(75,t),e}function Mu(e){return e=e.assignedSlot||e.parentElement,e!==null&&e.nodeType===11?e.host:e}function $a(e,t){for(e=e.getParent();e!==null;){if(e.is(t))return!0;e=e.getParent()}return!1}function Iu(e){return e=e._window,e===null&&$(78),e}function Zx(e){for(e=e.getParentOrThrow();e!==null&&!Er(e);)e=e.getParentOrThrow();return e}function Er(e){return bt(e)||O(e)&&e.isShadowRoot()}function e_(e){return e=e.constructor.clone(e),qx(e,null),e}function Jl(e){var t=xe();let n=e.constructor.getType();return t=t._nodes.get(n),t===void 0&&$(97),t=t.replace,t!==null?(t=t(e),t instanceof e.constructor||$(98),t):e}function Ic(e,t){e=e.getParent(),!bt(e)||O(t)||Ce(t)||$(99)}function Ac(e){return(Ce(e)||O(e)&&!e.canBeEmpty())&&!e.isInline()}function yf(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null,t=e.parentElement,t!==null&&t.removeChild(e)}function Nn(e){return Cn?(e||window).getSelection():null}function Au(e){return e.nodeType===1}function gi(e){if(Ce(e)&&!e.isInline())return!0;if(!O(e)||Er(e))return!1;var t=e.getFirstChild();return t=t===null||ii(t)||I(t)||t.isInline(),!e.isInline()&&e.canBeEmpty()!==!1&&t}function Dc(e,t){for(;e!==null&&e.getParent()!==null&&!t(e);)e=e.getParentOrThrow();return t(e)?e:null}function t_(e,t,n,r,i,o){for(e=e.getFirstChild();e!==null;){let l=e.__key;e.__parent===t&&(O(e)&&t_(e,l,n,r,i,o),n.has(l)||o.delete(l),i.push(l)),e=e.getNextSibling()}}function q4(e,t,n,r){e=e._nodeMap,t=t._nodeMap;let i=[];for(let[o]of r){let l=t.get(o);l===void 0||l.isAttached()||(O(l)&&t_(l,o,e,t,i,r),e.has(o)||r.delete(o),i.push(o))}for(let o of i)t.delete(o);for(let o of n)r=t.get(o),r===void 0||r.isAttached()||(e.has(o)||n.delete(o),t.delete(o))}let Re="",at="",Pn="",Tr,nt,Ll,n_=!1,Th=!1,Du,Ks=null,vf,xf,ri,br,_f,Ml;function qs(e,t){let n=ri.get(e);if(t!==null){let r=Cf(e);r.parentNode===t&&t.removeChild(r)}br.has(e)||nt._keyToDOMMap.delete(e),O(n)&&(e=Ra(n,ri),Sf(e,0,e.length-1,null)),n!==void 0&&Eh(Ml,Ll,Du,n,"destroyed")}function Sf(e,t,n,r){for(;t<=n;++t){let i=e[t];i!==void 0&&qs(i,r)}}function Ar(e,t){e.setProperty("text-align",t)}function r_(e,t){var n=Tr.theme.indent;if(typeof n=="string"){let r=e.classList.contains(n);0<t&&!r?e.classList.add(n):1>t&&r&&e.classList.remove(n)}n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px",e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function i_(e,t){e=e.style,t===0?Ar(e,""):t===1?Ar(e,"left"):t===2?Ar(e,"center"):t===3?Ar(e,"right"):t===4?Ar(e,"justify"):t===5?Ar(e,"start"):t===6&&Ar(e,"end")}function Ys(e,t,n){let r=br.get(e);r===void 0&&$(60);let i=r.createDOM(Tr,nt);var o=nt._keyToDOMMap;if(i["__lexicalKey_"+nt._key]=e,o.set(e,i),I(r)?i.setAttribute("data-lexical-text","true"):Ce(r)&&i.setAttribute("data-lexical-decorator","true"),O(r)){if(e=r.__indent,o=r.__size,e!==0&&r_(i,e),o!==0){--o,e=Ra(r,br);var l=at;at="",wf(e,r,0,o,i,null),l_(r,i),at=l}e=r.__format,e!==0&&i_(i,e),r.isInline()||o_(null,r,i),ka(r)&&(Re+=`

`,Pn+=`

`)}else o=r.getTextContent(),Ce(r)?(l=r.decorate(nt,Tr),l!==null&&s_(e,l),i.contentEditable="false"):I(r)&&(r.isDirectionless()||(at+=o)),Re+=o,Pn+=o;return t!==null&&(n!=null?t.insertBefore(i,n):(n=t.__lexicalLineBreak,n!=null?t.insertBefore(i,n):t.appendChild(i))),Eh(Ml,Ll,Du,r,"created"),i}function wf(e,t,n,r,i,o){let l=Re;for(Re="";n<=r;++n)Ys(e[n],i,o);ka(t)&&(Re+=`

`),i.__lexicalTextContent=Re,Re=l+Re}function ry(e,t){return e=t.get(e),ii(e)||Ce(e)&&e.isInline()}function o_(e,t,n){e=e!==null&&(e.__size===0||ry(e.__last,ri)),t=t.__size===0||ry(t.__last,br),e?t||(t=n.__lexicalLineBreak,t!=null&&n.removeChild(t),n.__lexicalLineBreak=null):t&&(t=document.createElement("br"),n.__lexicalLineBreak=t,n.appendChild(t))}function l_(e,t){var n=t.__lexicalDir;if(t.__lexicalDirTextContent!==at||n!==Ks){let o=at==="";if(o)var r=Ks;else r=at,r=M4.test(r)?"rtl":I4.test(r)?"ltr":null;if(r!==n){let l=t.classList,s=Tr.theme;var i=n!==null?s[n]:void 0;let a=r!==null?s[r]:void 0;i!==void 0&&(typeof i=="string"&&(i=i.split(" "),i=s[n]=i),l.remove(...i)),r===null||o&&r==="ltr"?t.removeAttribute("dir"):(a!==void 0&&(typeof a=="string"&&(n=a.split(" "),a=s[r]=n),a!==void 0&&l.add(...a)),t.dir=r),Th||(e.getWritable().__dir=r)}Ks=r,t.__lexicalDirTextContent=at,t.__lexicalDir=r}}function Ra(e,t){let n=[];for(e=e.__first;e!==null;){let r=t.get(e);r===void 0&&$(101),n.push(e),e=r.__next}return n}function Wo(e,t){var n=ri.get(e),r=br.get(e);n!==void 0&&r!==void 0||$(61);var i=n_||xf.has(e)||vf.has(e);let o=Pa(nt,e);if(n===r&&!i)return O(n)?(r=o.__lexicalTextContent,r!==void 0&&(Re+=r,Pn+=r),r=o.__lexicalDirTextContent,r!==void 0&&(at+=r)):(r=n.getTextContent(),I(n)&&!n.isDirectionless()&&(at+=r),Pn+=r,Re+=r),o;if(n!==r&&i&&Eh(Ml,Ll,Du,r,"updated"),r.updateDOM(n,o,Tr))return r=Ys(e,null,null),t===null&&$(62),t.replaceChild(r,o),qs(e,null),r;if(O(n)&&O(r)){if(e=r.__indent,e!==n.__indent&&r_(o,e),e=r.__format,e!==n.__format&&i_(o,e),i){e=at,at="",i=Re;var l=n.__size,s=r.__size;if(Re="",l===1&&s===1){var a=n.__first;if(t=r.__first,a===t)Wo(a,o);else{var u=Cf(a);t=Ys(t,null,null),o.replaceChild(t,u),qs(a,null)}}else{t=Ra(n,ri);var d=Ra(r,br);if(l===0)s!==0&&wf(d,r,0,s-1,o,null);else if(s===0)l!==0&&(a=o.__lexicalLineBreak==null,Sf(t,0,l-1,a?null:o),a&&(o.textContent=""));else{var h=t;t=d,d=l-1,l=s-1;let p=o.firstChild,m=0;for(s=0;m<=d&&s<=l;){var f=h[m];let y=t[s];if(f===y)p=Fc(Wo(y,o)),m++,s++;else{a===void 0&&(a=new Set(h)),u===void 0&&(u=new Set(t));let _=u.has(f),g=a.has(y);_?(g?(f=Pa(nt,y),f===p?p=Fc(Wo(y,o)):(p!=null?o.insertBefore(f,p):o.appendChild(f),Wo(y,o)),m++):Ys(y,o,p),s++):(p=Fc(Cf(f)),qs(f,o),m++)}}a=m>d,u=s>l,a&&!u?(a=t[l+1],a=a===void 0?null:nt.getElementByKey(a),wf(t,r,s,l,o,a)):u&&!a&&Sf(h,m,d,o)}}ka(r)&&(Re+=`

`),o.__lexicalTextContent=Re,Re=i+Re,l_(r,o),at=e,bt(r)||r.isInline()||o_(n,r,o)}ka(r)&&(Re+=`

`,Pn+=`

`)}else n=r.getTextContent(),Ce(r)?(i=r.decorate(nt,Tr),i!==null&&s_(e,i)):I(r)&&!r.isDirectionless()&&(at+=n),Re+=n,Pn+=n;return!Th&&bt(r)&&r.__cachedText!==Pn&&(r.getWritable().__cachedText=Pn),o}function s_(e,t){let n=nt._pendingDecorators,r=nt._decorators;if(n===null){if(r[e]===t)return;n=Gx(nt)}n[e]=t}function Fc(e){return e=e.nextSibling,e!==null&&e===nt._blockCursorElement&&(e=e.nextSibling),e}function Cf(e){let t=_f.get(e);return t===void 0&&$(75,e),t}let On=Object.freeze({}),Nf=[["keydown",tO],["pointerdown",G4],["compositionstart",Z4],["compositionend",eO],["input",X4],["click",Y4],["cut",On],["copy",On],["dragstart",On],["dragover",On],["dragend",On],["paste",On],["focus",On],["blur",On],["drop",On]];ba&&Nf.push(["beforeinput",(e,t)=>J4(e,t)]);let Il=0,a_=0,u_=0,yi=null,il=0,Ef=!1,Tf=!1,ol=!1,Uo=!1,c_=[0,"",0,"root",0];function d_(e,t,n,r,i){let o=e.anchor,l=e.focus,s=o.getNode();var a=xe();let u=Nn(a._window),d=u!==null?u.anchorNode:null,h=o.key;a=a.getElementByKey(h);let f=n.length;return h!==l.key||!I(s)||(!i&&(!ba||u_<r+50)||s.isDirty()&&2>f||Qx(n))&&o.offset!==l.offset&&!s.isComposing()||hf(s)||s.isDirty()&&1<f||(i||!ba)&&a!==null&&!s.isComposing()&&d!==Oa(a)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||s.getFormat()!==e.format||s.getStyle()!==e.style||K4(e,s)}function iy(e,t){return e!==null&&e.nodeValue!==null&&e.nodeType===3&&t!==0&&t!==e.nodeValue.length}function oy(e,t,n){let{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:l}=e;Ef&&(Ef=!1,iy(r,i)&&iy(o,l))||Pt(t,()=>{if(!n)Sn(null);else if(Gl(t,r,o)){var s=oe();if(B(s)){var a=s.anchor,u=a.getNode();if(s.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(s.dirty=!0);var d=Iu(t).event;d=d?d.timeStamp:performance.now();let[y,_,g,v,x]=c_;var h=kt();h=t.isComposing()===!1&&h.getTextContent()==="",d<x+200&&a.offset===g&&a.key===v?(s.format=y,s.style=_):a.type==="text"?(I(u)||$(141),s.format=u.getFormat(),s.style=u.getStyle()):a.type!=="element"||h||(s.format=0,s.style="")}else{var f=a.key,p=s.focus.key;a=s.getNodes(),u=a.length;var m=s.isBackward();d=m?l:i,h=m?i:l;let y=m?p:f;f=m?f:p,p=255,m=!1;for(let _=0;_<u;_++){let g=a[_],v=g.getTextContentSize();if(I(g)&&v!==0&&!(_===0&&g.__key===y&&d===v||_===u-1&&g.__key===f&&h===0)&&(m=!0,p&=g.getFormat(),p===0))break}s.format=m?p:0}}P(t,$u,void 0)}})}function Y4(e,t){Pt(t,()=>{let n=oe();var r=Nn(t._window);let i=ho();if(r)if(B(n)){let l=n.anchor;var o=l.getNode();l.type==="element"&&l.offset===0&&n.isCollapsed()&&!bt(o)&&kt().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&i!==null&&n.is(i)?(r.removeAllRanges(),n.dirty=!0):e.detail!==3||n.isCollapsed()||(r=n.focus.getNode(),o!==r&&(O(o)?o.select(0):o.getParentOrThrow().select(0)))}else e.pointerType==="touch"&&(o=r.anchorNode,o!==null&&(o=o.nodeType,o===1||o===3))&&(r=bh(i,r,t,e),Sn(r));P(t,wx,e)})}function G4(e,t){let n=e.target;e=e.pointerType,n instanceof Node&&e!=="touch"&&Pt(t,()=>{Ce(Ql(n))||(Tf=!0)})}function f_(e){return e.getTargetRanges?(e=e.getTargetRanges(),e.length===0?null:e[0]):null}function Q4(e,t){return e!==t||O(e)||O(t)||!e.isToken()||!t.isToken()}function J4(e,t){let n=e.inputType,r=f_(e);n==="deleteCompositionText"||Nr&&Xx(t)||n!=="insertCompositionText"&&Pt(t,()=>{let i=oe();if(n==="deleteContentBackward"){if(i===null){var o=ho();if(!B(o))return;Sn(o.clone())}if(B(i)){$4&&Me(i.anchor.key),a_===229&&e.timeStamp<Il+30&&t.isComposing()&&i.anchor.key===i.focus.key?(Me(null),Il=0,setTimeout(()=>{Pt(t,()=>{Me(null)})},30),B(i)&&(o=i.anchor.getNode(),o.markDirty(),i.format=o.getFormat(),I(o)||$(142),i.style=o.getStyle()),1>=i.anchor.getNode().getTextContent().length&&(e.preventDefault(),P(t,Wi,!0))):(Me(null),e.preventDefault(),P(t,Wi,!0));return}}if(B(i)){o=e.data,yi!==null&&Ch(!1,t,yi),i.dirty&&yi===null||!i.isCollapsed()||bt(i.anchor.getNode())||r===null||i.applyDOMRange(r),yi=null;var l=i.focus,s=i.anchor.getNode();if(l=l.getNode(),n==="insertText"||n==="insertTranspose")o===`
`?(e.preventDefault(),P(t,nl,!1)):o===`

`?(e.preventDefault(),P(t,cf,void 0)):o==null&&e.dataTransfer?(o=e.dataTransfer.getData("text/plain"),e.preventDefault(),i.insertRawText(o)):o!=null&&d_(i,r,o,e.timeStamp,!0)?(e.preventDefault(),P(t,Ui,o)):yi=o,u_=e.timeStamp;else switch(e.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":P(t,Ui,e);break;case"insertFromComposition":Me(null),P(t,Ui,e);break;case"insertLineBreak":Me(null),P(t,nl,!1);break;case"insertParagraph":Me(null),ol&&!Ru?(ol=!1,P(t,nl,!1)):P(t,cf,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":P(t,fh,e);break;case"deleteByComposition":Q4(s,l)&&P(t,df,e);break;case"deleteByDrag":case"deleteByCut":P(t,df,e);break;case"deleteContent":P(t,Wi,!1);break;case"deleteWordBackward":P(t,$l,!0);break;case"deleteWordForward":P(t,$l,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":P(t,Rl,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":P(t,Rl,!1);break;case"formatStrikeThrough":P(t,or,"strikethrough");break;case"formatBold":P(t,or,"bold");break;case"formatItalic":P(t,or,"italic");break;case"formatUnderline":P(t,or,"underline");break;case"historyUndo":P(t,ph,void 0);break;case"historyRedo":P(t,hh,void 0)}}})}function X4(e,t){e.stopPropagation(),Pt(t,()=>{var n=oe(),r=e.data,i=f_(e);if(r!=null&&B(n)&&d_(n,i,r,e.timeStamp,!1)){Uo&&(bf(t,r),Uo=!1);var o=n.anchor,l=o.getNode();if(i=Nn(t._window),i===null)return;let s=o.offset;(o=ba&&!n.isCollapsed()&&I(l)&&i.anchorNode!==null)&&(l=l.getTextContent().slice(0,s)+r+l.getTextContent().slice(s+n.focus.offset),i=i.anchorNode,o=l===(i.nodeType===3?i.nodeValue:null)),o||P(t,Ui,r),r=r.length,Nr&&1<r&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(n.anchor.offset-=r),yh||Ru||vh||!t.isComposing()||(Il=0,Me(null))}else Ch(!1,t,r!==null?r:void 0),Uo&&(bf(t,r||void 0),Uo=!1);ut(),n=xe(),Wx(n)}),yi=null}function Z4(e,t){Pt(t,()=>{let n=oe();if(B(n)&&!t.isComposing()){let r=n.anchor,i=n.anchor.getNode();Me(r.key),(e.timeStamp<Il+30||r.type==="element"||!n.isCollapsed()||i.getFormat()!==n.format||I(i)&&i.getStyle()!==n.style)&&P(t,Ui,L4)}})}function bf(e,t){var n=e._compositionKey;if(Me(null),n!==null&&t!=null){if(t===""){t=et(n),e=Oa(e.getElementByKey(n)),e!==null&&e.nodeValue!==null&&I(t)&&Nh(t,e.nodeValue,null,null,!0);return}if(t[t.length-1]===`
`&&(n=oe(),B(n))){t=n.focus,n.anchor.set(t.key,t.offset,t.type),P(e,Ta,null);return}}Ch(!0,e,t)}function eO(e,t){Nr?Uo=!0:Pt(t,()=>{bf(t,e.data)})}function tO(e,t){if(Il=e.timeStamp,a_=e.keyCode,!t.isComposing()){var{keyCode:n,shiftKey:r,ctrlKey:i,metaKey:o,altKey:l}=e;if(!P(t,Cx,e)){if(n!==39||i||o||l)if(n!==39||l||r||!i&&!o)if(n!==37||i||o||l)if(n!==37||l||r||!i&&!o)if(n!==38||i||o)if(n!==40||i||o)if(n===13&&r)ol=!0,P(t,Ta,e);else if(n===32)P(t,kx,e);else if(Qe&&i&&n===79)e.preventDefault(),ol=!0,P(t,nl,!0);else if(n!==13||r){var s=Qe?l||o?!1:n===8||n===72&&i:i||l||o?!1:n===8;s?n===8?P(t,Px,e):(e.preventDefault(),P(t,Wi,!0)):n===27?P(t,$x,e):(s=Qe?r||l||o?!1:n===46||n===68&&i:i||l||o?!1:n===46,s?n===46?P(t,Rx,e):(e.preventDefault(),P(t,Wi,!1)):n===8&&(Qe?l:i)?(e.preventDefault(),P(t,$l,!0)):n===46&&(Qe?l:i)?(e.preventDefault(),P(t,$l,!1)):Qe&&o&&n===8?(e.preventDefault(),P(t,Rl,!0)):Qe&&o&&n===46?(e.preventDefault(),P(t,Rl,!1)):n===66&&!l&&(Qe?o:i)?(e.preventDefault(),P(t,or,"bold")):n===85&&!l&&(Qe?o:i)?(e.preventDefault(),P(t,or,"underline")):n===73&&!l&&(Qe?o:i)?(e.preventDefault(),P(t,or,"italic")):n!==9||l||i||o?n===90&&!r&&(Qe?o:i)?(e.preventDefault(),P(t,ph,void 0)):(s=Qe?n===90&&o&&r:n===89&&i||n===90&&i&&r,s?(e.preventDefault(),P(t,hh,void 0)):Xl(t._editorState._selection)?(s=r?!1:n===67?Qe?o:i:!1,s?(e.preventDefault(),P(t,mh,e)):(s=r?!1:n===88?Qe?o:i:!1,s?(e.preventDefault(),P(t,gh,e)):n===65&&(Qe?o:i)&&(e.preventDefault(),P(t,ff,e)))):!Nr&&n===65&&(Qe?o:i)&&(e.preventDefault(),P(t,ff,e))):P(t,Lx,e))}else ol=!1,P(t,Ta,e);else P(t,jx,e);else P(t,Ox,e);else P(t,bx,e);else P(t,Tx,e);else P(t,Ex,e);else P(t,Nx,e);(i||r||l||o)&&P(t,Bx,e)}}}function p_(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}let Vi=new Map;function h_(e){var t=e.target;let n=Nn(t==null?null:t.nodeType===9?t.defaultView:t.ownerDocument.defaultView);if(n!==null){var r=Sh(n.anchorNode);if(r!==null){Tf&&(Tf=!1,Pt(r,()=>{var s=ho(),a=n.anchorNode;a!==null&&(a=a.nodeType,a===1||a===3)&&(s=bh(s,n,r,e),Sn(s))})),t=wh(r),t=t[t.length-1];var i=t._key,o=Vi.get(i),l=o||t;l!==r&&oy(n,l,!1),oy(n,r,!0),r!==t?Vi.set(i,r):o&&Vi.delete(i)}}}function nO(e,t){il===0&&e.ownerDocument.addEventListener("selectionchange",h_),il++,e.__lexicalEditor=t;let n=p_(e);for(let r=0;r<Nf.length;r++){let[i,o]=Nf[r],l=typeof o=="function"?s=>{s._lexicalHandled!==!0&&(s._lexicalHandled=!0,t.isEditable()&&o(s,t))}:s=>{if(s._lexicalHandled!==!0&&(s._lexicalHandled=!0,t.isEditable()))switch(i){case"cut":return P(t,gh,s);case"copy":return P(t,mh,s);case"paste":return P(t,fh,s);case"dragstart":return P(t,Ix,s);case"dragover":return P(t,Ax,s);case"dragend":return P(t,Dx,s);case"focus":return P(t,Fx,s);case"blur":return P(t,zx,s);case"drop":return P(t,Mx,s)}};e.addEventListener(i,l),n.push(()=>{e.removeEventListener(i,l)})}}function Of(e,t,n){ut();var r=e.__key;let i=e.getParent();if(i!==null){var o=oe();if(B(o)&&O(e)){var{anchor:l,focus:s}=o,a=l.getNode(),u=s.getNode();$a(a,e)&&l.set(e.__key,0,"element"),$a(u,e)&&s.set(e.__key,0,"element")}if(a=o,u=!1,B(a)&&t){o=a.anchor;let d=a.focus;o.key===r&&(Ma(o,e,i,e.getPreviousSibling(),e.getNextSibling()),u=!0),d.key===r&&(Ma(d,e,i,e.getPreviousSibling(),e.getNextSibling()),u=!0)}else Xl(a)&&t&&e.isSelected()&&e.selectPrevious();B(a)&&t&&!u?(r=e.getIndexWithinParent(),Yr(e),La(a,i,r,-1)):Yr(e),n||Er(i)||i.canBeEmpty()||!i.isEmpty()||Of(i,t),t&&bt(i)&&i.isEmpty()&&i.selectEnd()}}class Fu{static getType(){$(64,this.name)}static clone(){$(65,this.name)}constructor(t){this.__type=this.constructor.getType(),this.__next=this.__prev=this.__parent=null,qx(this,t)}getType(){return this.__type}isInline(){$(137,this.constructor.name)}isAttached(){for(var t=this.__key;t!==null;){if(t==="root")return!0;if(t=et(t),t===null)break;t=t.__parent}return!1}isSelected(t){if(t=t||oe(),t==null)return!1;let n=t.getNodes().some(r=>r.__key===this.__key);return I(this)?n:B(t)&&t.anchor.type==="element"&&t.focus.type==="element"&&t.anchor.key===t.focus.key&&t.anchor.offset===t.focus.offset?!1:n}getKey(){return this.__key}getIndexWithinParent(){var t=this.getParent();if(t===null)return-1;t=t.getFirstChild();let n=0;for(;t!==null;){if(this.is(t))return n;n++,t=t.getNextSibling()}return-1}getParent(){let t=this.getLatest().__parent;return t===null?null:et(t)}getParentOrThrow(){let t=this.getParent();return t===null&&$(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){let n=t.getParent();if(Er(n))return O(t)||$(138),t;t=n}return null}getTopLevelElementOrThrow(){let t=this.getTopLevelElement();return t===null&&$(67,this.__key),t}getParents(){let t=[],n=this.getParent();for(;n!==null;)t.push(n),n=n.getParent();return t}getParentKeys(){let t=[],n=this.getParent();for(;n!==null;)t.push(n.__key),n=n.getParent();return t}getPreviousSibling(){let t=this.getLatest().__prev;return t===null?null:et(t)}getPreviousSiblings(){let t=[];var n=this.getParent();if(n===null)return t;for(n=n.getFirstChild();n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){let t=this.getLatest().__next;return t===null?null:et(t)}getNextSiblings(){let t=[],n=this.getNextSibling();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getCommonAncestor(t){let n=this.getParents();var r=t.getParents();O(this)&&n.unshift(this),O(t)&&r.unshift(t),t=n.length;var i=r.length;if(t===0||i===0||n[t-1]!==r[i-1])return null;for(r=new Set(r),i=0;i<t;i++){let o=n[i];if(r.has(o))return o}return null}is(t){return t==null?!1:this.__key===t.__key}isBefore(t){if(this===t)return!1;if(t.isParentOf(this))return!0;if(this.isParentOf(t))return!1;var n=this.getCommonAncestor(t);let r=this;for(;;){var i=r.getParentOrThrow();if(i===n){i=r.getIndexWithinParent();break}r=i}for(r=t;;){if(t=r.getParentOrThrow(),t===n){n=r.getIndexWithinParent();break}r=t}return i<n}isParentOf(t){let n=this.__key;if(n===t.__key)return!1;for(;t!==null;){if(t.__key===n)return!0;t=t.getParent()}return!1}getNodesBetween(t){let n=this.isBefore(t),r=[],i=new Set;for(var o=this;;){var l=o.__key;if(i.has(l)||(i.add(l),r.push(o)),o===t)break;if(l=O(o)?n?o.getFirstChild():o.getLastChild():null,l!==null)o=l;else if(l=n?o.getNextSibling():o.getPreviousSibling(),l!==null)o=l;else{if(o=o.getParentOrThrow(),i.has(o.__key)||r.push(o),o===t)break;l=o;do l===null&&$(68),o=n?l.getNextSibling():l.getPreviousSibling(),l=l.getParent(),l!==null&&(o!==null||i.has(l.__key)||r.push(l));while(o===null)}}return n||r.reverse(),r}isDirty(){let t=xe()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){let t=et(this.__key);return t===null&&$(113),t}getWritable(){ut();var t=En(),n=xe();t=t._nodeMap;let r=this.__key,i=this.getLatest(),o=i.__parent;n=n._cloneNotNeeded;var l=oe();return l!==null&&l.setCachedNodes(null),n.has(r)?(ja(i),i):(l=i.constructor.clone(i),l.__parent=o,l.__next=i.__next,l.__prev=i.__prev,O(i)&&O(l)?(l.__first=i.__first,l.__last=i.__last,l.__size=i.__size,l.__indent=i.__indent,l.__format=i.__format,l.__dir=i.__dir):I(i)&&I(l)&&(l.__format=i.__format,l.__style=i.__style,l.__mode=i.__mode,l.__detail=i.__detail),n.add(r),l.__key=r,ja(l),t.set(r,l),l)}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(){$(70)}updateDOM(){$(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){$(72)}static importJSON(){$(18,this.name)}static transform(){return null}remove(t){Of(this,!0,t)}replace(t,n){ut();var r=oe();r!==null&&(r=r.clone()),Ic(this,t);let i=this.getLatest(),o=this.__key,l=t.__key,s=t.getWritable();t=this.getParentOrThrow().getWritable();let a=t.__size;Yr(s);let u=i.getPreviousSibling(),d=i.getNextSibling(),h=i.__prev,f=i.__next,p=i.__parent;return Of(i,!1,!0),u===null?t.__first=l:u.getWritable().__next=l,s.__prev=h,d===null?t.__last=l:d.getWritable().__prev=l,s.__next=f,s.__parent=p,t.__size=a,n&&(O(this)&&O(s)||$(139),this.getChildren().forEach(m=>{s.append(m)})),B(r)&&(Sn(r),n=r.anchor,r=r.focus,n.key===o&&uy(n,s),r.key===o&&uy(r,s)),lr()===o&&Me(l),s}insertAfter(t,n=!0){ut(),Ic(this,t);var r=this.getWritable();let i=t.getWritable();var o=i.getParent();let l=oe();var s=!1,a=!1;if(o!==null){var u=t.getIndexWithinParent();Yr(i),B(l)&&(a=o.__key,s=l.anchor,o=l.focus,s=s.type==="element"&&s.key===a&&s.offset===u+1,a=o.type==="element"&&o.key===a&&o.offset===u+1)}o=this.getNextSibling(),u=this.getParentOrThrow().getWritable();let d=i.__key,h=r.__next;return o===null?u.__last=d:o.getWritable().__prev=d,u.__size++,r.__next=d,i.__next=h,i.__prev=r.__key,i.__parent=r.__parent,n&&B(l)&&(n=this.getIndexWithinParent(),La(l,u,n+1),r=u.__key,s&&l.anchor.set(r,n+2,"element"),a&&l.focus.set(r,n+2,"element")),t}insertBefore(t,n=!0){ut(),Ic(this,t);var r=this.getWritable();let i=t.getWritable(),o=i.__key;Yr(i);let l=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),a=r.__prev,u=this.getIndexWithinParent();return l===null?s.__first=o:l.getWritable().__next=o,s.__size++,r.__prev=o,i.__prev=a,i.__next=r.__key,i.__parent=r.__parent,r=oe(),n&&B(r)&&(n=this.getParentOrThrow(),La(r,n,u)),t}isParentRequired(){return!1}createParentElementNode(){return Hn()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,n){ut();let r=this.getPreviousSibling(),i=this.getParentOrThrow();return r===null?i.select(0,0):O(r)?r.select():I(r)?r.select(t,n):(t=r.getIndexWithinParent()+1,i.select(t,t))}selectNext(t,n){ut();let r=this.getNextSibling(),i=this.getParentOrThrow();return r===null?i.select():O(r)?r.select(0,0):I(r)?r.select(t,n):(t=r.getIndexWithinParent(),i.select(t,t))}markDirty(){this.getWritable()}}function rO(e,t,n){n=n||t.getParentOrThrow().getLastChild();let r=t;for(t=[t];r!==n;)r.getNextSibling()||$(140),r=r.getNextSibling(),t.push(r);for(let i of t)e=e.insertAfter(i)}class fo extends Fu{static getType(){return"linebreak"}static clone(t){return new fo(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:t=>{e:{var n=t.parentElement;if(n!==null){let r=n.firstChild;if((r===t||r.nextSibling===t&&ly(r))&&(n=n.lastChild,n===t||n.previousSibling===t&&ly(n))){t=!0;break e}}t=!1}return t?null:{conversion:iO,priority:0}}}}static importJSON(){return no()}exportJSON(){return{type:"linebreak",version:1}}}function iO(){return{node:no()}}function no(){return Jl(new fo)}function ii(e){return e instanceof fo}function ly(e){return e.nodeType===3&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function zc(e,t){return t&16?"code":t&128?"mark":t&32?"sub":t&64?"sup":null}function Bc(e,t){return t&1?"strong":t&2?"em":"span"}function Hc(e,t,n,r,i){e=r.classList,r=rl(i,"base"),r!==void 0&&e.add(...r),r=rl(i,"underlineStrikethrough");let o=!1,l=t&8&&t&4;var s=n&8&&n&4;r!==void 0&&(s?(o=!0,l||e.add(...r)):l&&e.remove(...r));for(let a in xr)s=xr[a],r=rl(i,a),r!==void 0&&(n&s?!o||a!=="underline"&&a!=="strikethrough"?(!(t&s)||l&&a==="underline"||a==="strikethrough")&&e.add(...r):t&s&&e.remove(...r):t&s&&e.remove(...r))}function Wc(e,t,n){let r=t.firstChild;if(n=n.isComposing(),e+=n?Lu:"",r==null)t.textContent=e;else if(t=r.nodeValue,t!==e)if(n||Nr){n=t.length;let i=e.length,o=0,l=0;for(;o<n&&o<i&&t[o]===e[o];)o++;for(;l+o<n&&l+o<i&&t[n-l-1]===e[i-l-1];)l++;e=[o,n-o-l,e.slice(o,i-l)];let[s,a,u]=e;a!==0&&r.deleteData(s,a),r.insertData(s,u)}else r.nodeValue=e}function Ts(e,t){return t=document.createElement(t),t.appendChild(e),t}class ai extends Fu{static getType(){return"text"}static clone(t){return new ai(t.__text,t.__key)}constructor(t,n){super(n),this.__text=t,this.__format=0,this.__style="",this.__detail=this.__mode=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){let t=this.getLatest();return z4[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===lr()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return(this.getLatest().__detail&1)!==0}isUnmergeable(){return(this.getLatest().__detail&2)!==0}hasFormat(t){return t=xr[t],(this.getFormat()&t)!==0}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,n){let r=this.getLatest().__format;return mf(r,t,n)}canHaveFormat(){return!0}createDOM(t){var n=this.__format,r=zc(this,n);let i=Bc(this,n),o=document.createElement(r===null?i:r),l=o;return this.hasFormat("code")&&o.setAttribute("spellcheck","false"),r!==null&&(l=document.createElement(i),o.appendChild(l)),r=l,Wc(this.__text,r,this),t=t.theme.text,t!==void 0&&Hc(i,0,n,r,t),n=this.__style,n!==""&&(o.style.cssText=n),o}updateDOM(t,n,r){let i=this.__text;var o=t.__format,l=this.__format,s=zc(this,o);let a=zc(this,l);var u=Bc(this,o);let d=Bc(this,l);return(s===null?u:s)!==(a===null?d:a)?!0:s===a&&u!==d?(o=n.firstChild,o==null&&$(48),t=s=document.createElement(d),Wc(i,t,this),r=r.theme.text,r!==void 0&&Hc(d,0,l,t,r),n.replaceChild(s,o),!1):(u=n,a!==null&&s!==null&&(u=n.firstChild,u==null&&$(49)),Wc(i,u,this),r=r.theme.text,r!==void 0&&o!==l&&Hc(d,o,l,u,r),l=this.__style,t.__style!==l&&(n.style.cssText=l),!1)}static importDOM(){return{"#text":()=>({conversion:sO,priority:0}),b:()=>({conversion:lO,priority:0}),code:()=>({conversion:Qn,priority:0}),em:()=>({conversion:Qn,priority:0}),i:()=>({conversion:Qn,priority:0}),s:()=>({conversion:Qn,priority:0}),span:()=>({conversion:oO,priority:0}),strong:()=>({conversion:Qn,priority:0}),sub:()=>({conversion:Qn,priority:0}),sup:()=>({conversion:Qn,priority:0}),u:()=>({conversion:Qn,priority:0})}}static importJSON(t){let n=Ue(t.text);return n.setFormat(t.format),n.setDetail(t.detail),n.setMode(t.mode),n.setStyle(t.style),n}exportDOM(t){return{element:t}=super.exportDOM(t),t!==null&&Au(t)||$(132),t.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(t=Ts(t,"b")),this.hasFormat("italic")&&(t=Ts(t,"i")),this.hasFormat("strikethrough")&&(t=Ts(t,"s")),this.hasFormat("underline")&&(t=Ts(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(){}setFormat(t){let n=this.getWritable();return n.__format=typeof t=="string"?xr[t]:t,n}setDetail(t){let n=this.getWritable();return n.__detail=typeof t=="string"?A4[t]:t,n}setStyle(t){let n=this.getWritable();return n.__style=t,n}toggleFormat(t){let n=this.getFormat();return t=mf(n,t,null),this.setFormat(t)}toggleDirectionless(){let t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){let t=this.getWritable();return t.__detail^=2,t}setMode(t){if(t=F4[t],this.__mode===t)return this;let n=this.getWritable();return n.__mode=t,n}setTextContent(t){if(this.__text===t)return this;let n=this.getWritable();return n.__text=t,n}select(t,n){ut();let r=oe();var i=this.getTextContent();let o=this.__key;if(typeof i=="string"?(i=i.length,t===void 0&&(t=i),n===void 0&&(n=i)):n=t=0,B(r))i=lr(),i!==r.anchor.key&&i!==r.focus.key||Me(o),r.setTextNodeRange(this,t,this,n);else return v_(o,t,o,n,"text","text");return r}selectStart(){return this.select(0,0)}selectEnd(){let t=this.getTextContentSize();return this.select(t,t)}spliceText(t,n,r,i){let o=this.getWritable(),l=o.__text,s=r.length,a=t;0>a&&(a=s+a,0>a&&(a=0));let u=oe();return i&&B(u)&&(t+=s,u.setTextNodeRange(o,t,o,t)),n=l.slice(0,a)+r+l.slice(a+n),o.__text=n,o}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){ut();var n=this.getLatest(),r=n.getTextContent(),i=n.__key,o=lr(),l=new Set(t);t=[];for(var s=r.length,a="",u=0;u<s;u++)a!==""&&l.has(u)&&(t.push(a),a=""),a+=r[u];if(a!==""&&t.push(a),l=t.length,l===0)return[];if(t[0]===r)return[n];var d=t[0];r=n.getParentOrThrow(),u=n.getFormat();let h=n.getStyle(),f=n.__detail;s=!1,n.isSegmented()?(a=Ue(d),a.__format=u,a.__style=h,a.__detail=f,s=!0):(a=n.getWritable(),a.__text=d),n=oe(),a=[a],d=d.length;for(let y=1;y<l;y++){var p=t[y],m=p.length;p=Ue(p).getWritable(),p.__format=u,p.__style=h,p.__detail=f;let _=p.__key;if(m=d+m,B(n)){let g=n.anchor,v=n.focus;g.key===i&&g.type==="text"&&g.offset>d&&g.offset<=m&&(g.key=_,g.offset-=d,n.dirty=!0),v.key===i&&v.type==="text"&&v.offset>d&&v.offset<=m&&(v.key=_,v.offset-=d,n.dirty=!0)}o===i&&Me(_),d=m,a.push(p)}return i=this.getPreviousSibling(),o=this.getNextSibling(),i!==null&&ja(i),o!==null&&ja(o),i=r.getWritable(),o=this.getIndexWithinParent(),s?(i.splice(o,0,a),this.remove()):i.splice(o,1,a),B(n)&&La(n,r,o,l-1),a}mergeWithSibling(t){var n=t===this.getPreviousSibling();n||t===this.getNextSibling()||$(50);var r=this.__key;let i=t.__key,o=this.__text,l=o.length;lr()===i&&Me(r);let s=oe();if(B(s)){let a=s.anchor,u=s.focus;a!==null&&a.key===i&&(gy(a,n,r,t,l),s.dirty=!0),u!==null&&u.key===i&&(gy(u,n,r,t,l),s.dirty=!0)}return r=t.__text,this.setTextContent(n?r+o:o+r),n=this.getWritable(),t.remove(),n}isTextEntity(){return!1}}function oO(e){let t=e.style.fontWeight==="700",n=e.style.textDecoration==="line-through",r=e.style.fontStyle==="italic",i=e.style.textDecoration==="underline",o=e.style.verticalAlign;return{forChild:l=>(I(l)&&(t&&l.toggleFormat("bold"),n&&l.toggleFormat("strikethrough"),r&&l.toggleFormat("italic"),i&&l.toggleFormat("underline"),o==="sub"&&l.toggleFormat("subscript"),o==="super"&&l.toggleFormat("superscript")),l),node:null}}function lO(e){let t=e.style.fontWeight==="normal";return{forChild:n=>(I(n)&&!t&&n.toggleFormat("bold"),n),node:null}}let sy=new WeakMap;function sO(e){e.parentElement===null&&$(129);for(var t=e.textContent||"",n,r=e.parentNode,i=[e];r!==null&&(n=sy.get(r))===void 0&&!(r.nodeName==="PRE"||r.nodeType===1&&r.style!==void 0&&r.style.whiteSpace!==void 0&&r.style.whiteSpace.startsWith("pre"));)i.push(r),r=r.parentNode;for(n=n===void 0?r:n,r=0;r<i.length;r++)sy.set(i[r],n);if(n!==null){for(t=t.split(/(\r?\n|\t)/),e=[],i=t.length,n=0;n<i;n++)r=t[n],r===`
`||r===`\r
`?e.push(no()):r==="	"?e.push(zu()):r!==""&&e.push(Ue(r));return{node:e}}if(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," "),t==="")return{node:null};if(t[0]===" "){for(i=e,n=!0;i!==null&&(i=ay(i,!1))!==null;)if(r=i.textContent||"",0<r.length){/[ \t\n]$/.test(r)&&(t=t.slice(1)),n=!1;break}n&&(t=t.slice(1))}if(t[t.length-1]===" "){for(i=!0;e!==null&&(e=ay(e,!0))!==null;)if(0<(e.textContent||"").replace(/^( |\t|\r?\n)+/,"").length){i=!1;break}i&&(t=t.slice(0,t.length-1))}return t===""?{node:null}:{node:Ue(t)}}let aO=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/,"i");function ay(e,t){for(;;){for(var n=void 0;(n=t?e.nextSibling:e.previousSibling)===null;)if(e=e.parentElement,e===null)return null;if(e=n,e.nodeType===1&&(n=e.style.display,n===""&&e.nodeName.match(aO)===null||n!==""&&!n.startsWith("inline")))return null;for(;(n=t?e.firstChild:e.lastChild)!==null;)e=n;if(e.nodeType===3)return e;if(e.nodeName==="BR")return null}}let uO={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Qn(e){let t=uO[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:n=>(I(n)&&!n.hasFormat(t)&&n.toggleFormat(t),n),node:null}}function Ue(e=""){return Jl(new ai(e))}function I(e){return e instanceof ai}class po extends ai{static getType(){return"tab"}static clone(t){let n=new po(t.__key);return n.__text=t.__text,n.__format=t.__format,n.__style=t.__style,n}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}static importJSON(t){let n=zu();return n.setFormat(t.format),n.setStyle(t.style),n}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(){$(126)}setDetail(){$(127)}setMode(){$(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function zu(){return Jl(new po)}function m_(e){return e instanceof po}class cO{constructor(t,n,r){this._selection=null,this.key=t,this.offset=n,this.type=r}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){let n=this.getNode(),r=t.getNode(),i=this.offset;if(t=t.offset,O(n)){var o=n.getDescendantByIndex(i);n=o??n}return O(r)&&(o=r.getDescendantByIndex(t),r=o??r),n===r?i<t:n.isBefore(r)}getNode(){let t=et(this.key);return t===null&&$(20),t}set(t,n,r){let i=this._selection,o=this.key;this.key=t,this.offset=n,this.type=r,mo()||(lr()===o&&Me(t),i!==null&&(i.setCachedNodes(null),i.dirty=!0))}}function un(e,t,n){return new cO(e,t,n)}function Uc(e,t){let n=t.__key,r=e.offset,i="element";if(I(t))i="text",t=t.getTextContentSize(),r>t&&(r=t);else if(!O(t)){var o=t.getNextSibling();I(o)?(n=o.__key,r=0,i="text"):(o=t.getParent())&&(n=o.__key,r=t.getIndexWithinParent()+1)}e.set(n,r,i)}function uy(e,t){if(O(t)){let n=t.getLastDescendant();O(n)||I(n)?Uc(e,n):Uc(e,t)}else Uc(e,t)}function cy(e,t,n,r){let i=e.getNode(),o=i.getChildAtIndex(e.offset),l=Ue(),s=bt(i)?Hn().append(l):l;l.setFormat(n),l.setStyle(r),o===null?i.append(s):o.insertBefore(s),e.is(t)&&t.set(l.__key,0,"text"),e.set(l.__key,0,"text")}function Zn(e,t,n,r){e.key=t,e.offset=n,e.type=r}class Bu{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!Xl(t))return!1;let n=this._nodes,r=t._nodes;return n.size===r.size&&Array.from(n).every(i=>r.has(i))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new Bu(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(t){let n=this.getNodes(),r=n.length;var i=n[r-1];if(I(i))i=i.select();else{let o=i.getIndexWithinParent()+1;i=i.getParentOrThrow().select(o,o)}for(i.insertNodes(t),t=0;t<r;t++)n[t].remove()}getNodes(){var t=this._cachedNodes;if(t!==null)return t;var n=this._nodes;t=[];for(let r of n)n=et(r),n!==null&&t.push(n);return mo()||(this._cachedNodes=t),t}getTextContent(){let t=this.getNodes(),n="";for(let r=0;r<t.length;r++)n+=t[r].getTextContent();return n}}function B(e){return e instanceof $r}class $r{constructor(t,n,r,i){this.anchor=t,this.focus=n,t._selection=this,n._selection=this,this._cachedNodes=null,this.format=r,this.style=i,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return B(t)?this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style:!1}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){var t=this._cachedNodes;if(t!==null)return t;t=this.anchor;var n=this.focus,r=t.isBefore(n),i=r?t:n;r=r?n:t,t=i.getNode(),n=r.getNode();let o=i.offset;return i=r.offset,O(t)&&(r=t.getDescendantByIndex(o),t=r??t),O(n)&&(r=n.getDescendantByIndex(i),r!==null&&r!==t&&n.getChildAtIndex(i)===r&&(r=r.getPreviousSibling()),n=r??n),t=t.is(n)?O(t)&&0<t.getChildrenSize()?[]:[t]:t.getNodesBetween(n),mo()||(this._cachedNodes=t),t}setTextNodeRange(t,n,r,i){Zn(this.anchor,t.__key,n,"text"),Zn(this.focus,r.__key,i,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){let t=this.getNodes();if(t.length===0)return"";let n=t[0],r=t[t.length-1],i=this.anchor,o=this.focus,l=i.isBefore(o),[s,a]=jf(this),u="",d=!0;for(let h=0;h<t.length;h++){let f=t[h];if(O(f)&&!f.isInline())d||(u+=`
`),d=!f.isEmpty();else if(d=!1,I(f)){let p=f.getTextContent();f===n?f===r?(i.type!=="element"||o.type!=="element"||o.offset===i.offset)&&(p=s<a?p.slice(s,a):p.slice(a,s)):p=l?p.slice(s):p.slice(a):f===r&&(p=l?p.slice(0,a):p.slice(0,s)),u+=p}else!Ce(f)&&!ii(f)||f===r&&this.isCollapsed()||(u+=f.getTextContent())}return u}applyDOMRange(t){let n=xe(),r=n.getEditorState()._selection;if(t=y_(t.startContainer,t.startOffset,t.endContainer,t.endOffset,n,r),t!==null){var[i,o]=t;Zn(this.anchor,i.key,i.offset,i.type),Zn(this.focus,o.key,o.offset,o.type),this._cachedNodes=null}}clone(){let t=this.anchor,n=this.focus;return new $r(un(t.key,t.offset,t.type),un(n.key,n.offset,n.type),this.format,this.style)}toggleFormat(t){this.format=mf(this.format,t,null),this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){return(this.format&xr[t])!==0}insertRawText(t){t=t.split(/(\r?\n|\t)/);let n=[],r=t.length;for(let i=0;i<r;i++){let o=t[i];o===`
`||o===`\r
`?n.push(no()):o==="	"?n.push(zu()):n.push(Ue(o))}this.insertNodes(n)}insertText(t){var n=this.anchor,r=this.focus,i=this.isCollapsed()||n.isBefore(r),o=this.format,l=this.style;i&&n.type==="element"?cy(n,r,o,l):i||r.type!=="element"||cy(r,n,o,l);var s=this.getNodes(),a=s.length,u=i?r:n;r=(i?n:r).offset;var d=u.offset;n=s[0],I(n)||$(26),i=n.getTextContent().length;var h=n.getParentOrThrow(),f=s[a-1];if(this.isCollapsed()&&r===i&&(n.isSegmented()||n.isToken()||!n.canInsertTextAfter()||!h.canInsertTextAfter()&&n.getNextSibling()===null)){var p=n.getNextSibling();if(I(p)&&p.canInsertTextBefore()&&!hf(p)||(p=Ue(),p.setFormat(o),h.canInsertTextAfter()?n.insertAfter(p):h.insertAfter(p)),p.select(0,0),n=p,t!==""){this.insertText(t);return}}else if(this.isCollapsed()&&r===0&&(n.isSegmented()||n.isToken()||!n.canInsertTextBefore()||!h.canInsertTextBefore()&&n.getPreviousSibling()===null)){if(p=n.getPreviousSibling(),(!I(p)||hf(p))&&(p=Ue(),p.setFormat(o),h.canInsertTextBefore()?n.insertBefore(p):h.insertBefore(p)),p.select(),n=p,t!==""){this.insertText(t);return}}else if(n.isSegmented()&&r!==i)h=Ue(n.getTextContent()),h.setFormat(o),n.replace(h),n=h;else if(!(this.isCollapsed()||t===""||(p=f.getParent(),h.canInsertTextBefore()&&h.canInsertTextAfter()&&(!O(p)||p.canInsertTextBefore()&&p.canInsertTextAfter())))){this.insertText(""),g_(this.anchor,this.focus,null),this.insertText(t);return}if(a===1)if(n.isToken())t=Ue(t),t.select(),n.replace(t);else{if(s=n.getFormat(),a=n.getStyle(),r===d&&(s!==o||a!==l))if(n.getTextContent()==="")n.setFormat(o),n.setStyle(l);else{s=Ue(t),s.setFormat(o),s.setStyle(l),s.select(),r===0?n.insertBefore(s,!1):([a]=n.splitText(r),a.insertAfter(s,!1)),s.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);return}else if(m_(n)){t=Ue(t),t.setFormat(o),t.setStyle(l),t.select(),n.replace(t);return}n=n.spliceText(r,d-r,t,!0),n.getTextContent()===""?n.remove():this.anchor.type==="text"&&(n.isComposing()?this.anchor.offset-=t.length:(this.format=s,this.style=a))}else{if(o=new Set([...n.getParentKeys(),...f.getParentKeys()]),p=O(n)?n:n.getParentOrThrow(),l=O(f)?f:f.getParentOrThrow(),h=f,!p.is(l)&&l.isInline())do h=l,l=l.getParentOrThrow();while(l.isInline());if(u.type==="text"&&(d!==0||f.getTextContent()==="")||u.type==="element"&&f.getIndexWithinParent()<d)if(I(f)&&!f.isToken()&&d!==f.getTextContentSize()){if(f.isSegmented()){var m=Ue(f.getTextContent());f.replace(m),f=m}bt(u.getNode())||u.type!=="text"||(f=f.spliceText(0,d,"")),o.add(f.__key)}else u=f.getParentOrThrow(),u.canBeEmpty()||u.getChildrenSize()!==1?f.remove():u.remove();else o.add(f.__key);for(u=l.getChildren(),d=new Set(s),f=p.is(l),p=p.isInline()&&n.getNextSibling()===null?p:n,m=u.length-1;0<=m;m--){let y=u[m];if(y.is(n)||O(y)&&y.isParentOf(n))break;y.isAttached()&&(!d.has(y)||y.is(h)?f||p.insertAfter(y,!1):y.remove())}if(!f)for(u=l,l=null;u!==null;)d=u.getChildren(),f=d.length,(f===0||d[f-1].is(l))&&(o.delete(u.__key),l=u),u=u.getParent();for(n.isToken()?r===i?n.select():(t=Ue(t),t.select(),n.replace(t)):(n=n.spliceText(r,i-r,t,!0),n.getTextContent()===""?n.remove():n.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length)),t=1;t<a;t++)n=s[t],o.has(n.__key)||n.remove()}}removeText(){this.insertText("")}formatText(t){if(this.isCollapsed())this.toggleFormat(t),Me(null);else{var n=this.getNodes(),r=[];for(var i of n)I(i)&&r.push(i);var o=r.length;if(o===0)this.toggleFormat(t),Me(null);else{i=this.anchor;var l=this.focus,s=this.isBackward();n=s?l:i,i=s?i:l;var a=0,u=r[0];if(l=n.type==="element"?0:n.offset,n.type==="text"&&l===u.getTextContentSize()&&(a=1,u=r[1],l=0),u!=null){s=u.getFormatFlags(t,null);var d=o-1,h=r[d];if(o=i.type==="text"?i.offset:h.getTextContentSize(),u.is(h))l!==o&&(l===0&&o===u.getTextContentSize()?u.setFormat(s):(t=u.splitText(l,o),t=l===0?t[0]:t[1],t.setFormat(s),n.type==="text"&&n.set(t.__key,0,"text"),i.type==="text"&&i.set(t.__key,o-l,"text")),this.format=s);else{l!==0&&([,u]=u.splitText(l),l=0),u.setFormat(s);var f=h.getFormatFlags(t,s);for(0<o&&(o!==h.getTextContentSize()&&([h]=h.splitText(o)),h.setFormat(f)),a+=1;a<d;a++){let p=r[a];if(!p.isToken()){let m=p.getFormatFlags(t,f);p.setFormat(m)}}n.type==="text"&&n.set(u.__key,l,"text"),i.type==="text"&&i.set(h.__key,o,"text"),this.format=s|f}}}}}insertNodes(t){if(t.length!==0){if(this.anchor.key==="root"){this.insertParagraph();var n=oe();return B(n)||$(134),n.insertNodes(t)}n=this.isBackward()?this.focus:this.anchor;var r=Dc(n.getNode(),gi);if(n=t[t.length-1],"__language"in r&&O(r))if("__language"in t[0])this.insertText(t[0].getTextContent());else{var i=Vc(this);r.splice(i,0,t),n.selectEnd()}else if(t.some(s=>(O(s)||Ce(s))&&!s.isInline())){n=hO(t),t=n.getLastDescendant();var o=n.getChildren();n=O(r)&&r.isEmpty()?null:this.insertParagraph(),i=o[o.length-1];var l=o[0];(s=>O(s)&&gi(s)&&!s.isEmpty()&&O(r)&&(!r.isEmpty()||"__value"in r&&"__checked"in r))(l)&&(O(r)||$(135),r.append(...l.getChildren()),l=o[1]),l&&rO(r,l),o=Dc(t,gi),n&&O(o)&&("__value"in n&&"__checked"in n||gi(i))&&(o.append(...n.getChildren()),n.remove()),O(r)&&r.isEmpty()&&r.remove(),t.selectEnd(),t=O(r)?r.getLastChild():null,ii(t)&&o!==r&&t.remove()}else O(r)||$(135),i=Vc(this),r.splice(i,0,t),n.selectEnd()}}insertParagraph(){if(this.anchor.key==="root"){var t=Hn();return kt().splice(this.anchor.offset,0,[t]),t.select(),t}var n=Vc(this);return t=Dc(this.anchor.getNode(),gi),O(t)||$(136),n=(n=t.getChildAtIndex(n))?[n,...n.getNextSiblings()]:[],(t=t.insertNewAfter(this,!1))?(t.append(...n),t.selectStart(),t):null}insertLineBreak(t){var n=no();this.insertNodes([n]),t&&(t=n.getParentOrThrow(),n=n.getIndexWithinParent(),t.select(n,n))}extract(){var t=this.getNodes(),n=t.length,r=n-1,i=this.anchor;let o=this.focus;var l=t[0];let s=t[r],[a,u]=jf(this);return n===0?[]:n===1?I(l)&&!this.isCollapsed()?(t=a>u?u:a,r=l.splitText(t,a>u?a:u),t=t===0?r[0]:r[1],t!=null?[t]:[]):[l]:(n=i.isBefore(o),I(l)&&(i=n?a:u,i===l.getTextContentSize()?t.shift():i!==0&&([,l]=l.splitText(i),t[0]=l)),I(s)&&(l=s.getTextContent().length,n=n?u:a,n===0?t.pop():n!==l&&([s]=s.splitText(n),t[r]=s)),t)}modify(t,n,r){var i=this.focus,o=this.anchor,l=t==="move",s=gf(i,n);if(Ce(s)&&!s.isIsolated())l&&s.isKeyboardSelectable()?(n=kf(),n.add(s.__key),Sn(n)):(t=n?s.getPreviousSibling():s.getNextSibling(),I(t)?(s=t.__key,n=n?t.getTextContent().length:0,i.set(s,n,"text"),l&&o.set(s,n,"text")):(r=s.getParentOrThrow(),O(t)?(r=t.__key,s=n?t.getChildrenSize():0):(s=s.getIndexWithinParent(),r=r.__key,n||s++),i.set(r,s,"element"),l&&o.set(r,s,"element")));else if(o=xe(),i=Nn(o._window)){var a=o._blockCursorElement,u=o._rootElement;if(u===null||a===null||!O(s)||s.isInline()||s.canBeEmpty()||yf(a,o,u),i.modify(t,n?"backward":"forward",r),0<i.rangeCount&&(s=i.getRangeAt(0),o=this.anchor.getNode(),o=bt(o)?o:Zx(o),this.applyDOMRange(s),this.dirty=!0,!l)){for(l=this.getNodes(),t=[],r=!1,a=0;a<l.length;a++)u=l[a],$a(u,o)?t.push(u):r=!0;r&&0<t.length&&(n?(n=t[0],O(n)?n.selectStart():n.getParentOrThrow().selectStart()):(n=t[t.length-1],O(n)?n.selectEnd():n.getParentOrThrow().selectEnd())),(i.anchorNode!==s.startContainer||i.anchorOffset!==s.startOffset)&&(n=this.focus,l=this.anchor,i=l.key,s=l.offset,o=l.type,Zn(l,n.key,n.offset,n.type),Zn(n,i,s,o),this._cachedNodes=null)}}}deleteCharacter(t){let n=this.isCollapsed();if(this.isCollapsed()){var r=this.anchor,i=this.focus,o=r.getNode();if(!t&&(r.type==="element"&&O(o)&&r.offset===o.getChildrenSize()||r.type==="text"&&r.offset===o.getTextContentSize())){var l=o.getParent();if(l=o.getNextSibling()||(l===null?null:l.getNextSibling()),O(l)&&l.isShadowRoot())return}if(l=gf(i,t),Ce(l)&&!l.isIsolated()){l.isKeyboardSelectable()&&O(o)&&o.getChildrenSize()===0?(o.remove(),t=kf(),t.add(l.__key),Sn(t)):(l.remove(),xe().dispatchCommand($u,void 0));return}if(!t&&O(l)&&O(o)&&o.isEmpty()){o.remove(),l.selectStart();return}if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&r.offset===0&&(r.type==="element"?r.getNode():r.getNode().getParentOrThrow()).collapseAtStart(this))return}else{if(l=i.type==="text"?i.getNode():null,o=r.type==="text"?r.getNode():null,l!==null&&l.isSegmented()){if(r=i.offset,i=l.getTextContentSize(),l.is(o)||t&&r!==i||!t&&r!==0){fy(l,t,r);return}}else if(o!==null&&o.isSegmented()&&(r=r.offset,i=o.getTextContentSize(),o.is(l)||t&&r!==0||!t&&r!==i)){fy(o,t,r);return}if(o=this.anchor,l=this.focus,r=o.getNode(),i=l.getNode(),r===i&&o.type==="text"&&l.type==="text"){var s=o.offset,a=l.offset;let u=s<a;i=u?s:a,a=u?a:s,s=a-1,i!==s&&(r=r.getTextContent().slice(i,a),Qx(r)||(t?l.offset=s:o.offset=s))}}}this.removeText(),t&&!n&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0&&(t=this.anchor.getNode(),t.isEmpty()&&bt(t.getParent())&&t.getIndexWithinParent()===0&&t.collapseAtStart(this))}deleteLine(t){this.isCollapsed()&&(this.anchor.type==="text"&&this.modify("extend",t,"lineboundary"),(t?this.focus:this.anchor).offset===0&&this.modify("extend",t,"character")),this.removeText()}deleteWord(t){this.isCollapsed()&&this.modify("extend",t,"word"),this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function Xl(e){return e instanceof Bu}function dy(e){let t=e.offset;return e.type==="text"?t:(e=e.getNode(),t===e.getChildrenSize()?e.getTextContent().length:0)}function jf(e){if(e=e.getStartEndPoints(),e===null)return[0,0];let[t,n]=e;return t.type==="element"&&n.type==="element"&&t.key===n.key&&t.offset===n.offset?[0,0]:[dy(t),dy(n)]}function fy(e,t,n){let r=e.getTextContent().split(/(?=\s)/g),i=r.length,o=0,l=0;for(let s=0;s<i;s++){let a=r[s],u=s===i-1;if(l=o,o+=a.length,t&&o===n||o>n||u){r.splice(s,1),u&&(l=void 0);break}}t=r.join("").trim(),t===""?e.remove():(e.setTextContent(t),e.select(l,l))}function py(e,t,n,r){var i=t;if(e.nodeType===1){let s=!1;var o=e.childNodes,l=o.length;i===l&&(s=!0,i=l-1);let a=o[i];if(l=!1,a===r._blockCursorElement?(a=o[i+1],l=!0):r._blockCursorElement!==null&&i--,r=ki(a),I(r))i=s?r.getTextContentSize():0;else{if(o=ki(e),o===null)return null;if(O(o)?(e=o.getChildAtIndex(i),(t=O(e))&&(t=e.getParent(),t=n===null||t===null||!t.canBeEmpty()||t!==n.getNode()),t&&(n=s?e.getLastDescendant():e.getFirstDescendant(),n===null?(o=e,i=0):(e=n,o=O(e)?e:e.getParentOrThrow())),I(e)?(r=e,o=null,i=s?e.getTextContentSize():0):e!==o&&s&&!l&&i++):(i=o.getIndexWithinParent(),i=t===0&&Ce(o)&&ki(e)===o?i:i+1,o=o.getParentOrThrow()),O(o))return un(o.__key,i,"element")}}else r=ki(e);return I(r)?un(r.__key,i,"text"):null}function hy(e,t,n){var r=e.offset,i=e.getNode();r===0?(r=i.getPreviousSibling(),i=i.getParent(),t?(n||!t)&&r===null&&O(i)&&i.isInline()&&(t=i.getPreviousSibling(),I(t)&&(e.key=t.__key,e.offset=t.getTextContent().length)):O(r)&&!n&&r.isInline()?(e.key=r.__key,e.offset=r.getChildrenSize(),e.type="element"):I(r)&&(e.key=r.__key,e.offset=r.getTextContent().length)):r===i.getTextContent().length&&(r=i.getNextSibling(),i=i.getParent(),t&&O(r)&&r.isInline()?(e.key=r.__key,e.offset=0,e.type="element"):(n||t)&&r===null&&O(i)&&i.isInline()&&!i.canInsertTextAfter()&&(t=i.getNextSibling(),I(t)&&(e.key=t.__key,e.offset=0)))}function g_(e,t,n){if(e.type==="text"&&t.type==="text"){var r=e.isBefore(t);let i=e.is(t);hy(e,r,i),hy(t,!r,i),i&&(t.key=e.key,t.offset=e.offset,t.type=e.type),r=xe(),r.isComposing()&&r._compositionKey!==e.key&&B(n)&&(r=n.anchor,n=n.focus,Zn(e,r.key,r.offset,r.type),Zn(t,n.key,n.offset,n.type))}}function y_(e,t,n,r,i,o){return e===null||n===null||!Gl(i,e,n)||(t=py(e,t,B(o)?o.anchor:null,i),t===null)||(r=py(n,r,B(o)?o.focus:null,i),r===null||t.type==="element"&&r.type==="element"&&(e=ki(e),n=ki(n),Ce(e)&&Ce(n)))?null:(g_(t,r,o),[t,r])}function v_(e,t,n,r,i,o){let l=En();return e=new $r(un(e,t,i),un(n,r,o),0,""),e.dirty=!0,l._selection=e}function kf(){return new Bu(new Set)}function dO(e){let t=e.getEditorState()._selection,n=Nn(e._window);return B(t)||t==null?bh(t,n,e,null):t.clone()}function bh(e,t,n,r){var i=n._window;if(i===null)return null;var o=(i=r||i.event)?i.type:void 0;r=o==="selectionchange",i=!pf&&(r||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&i&&i.detail===3||o==="drop"||o===void 0);let l;if(!B(e)||i){if(t===null)return null;if(i=t.anchorNode,o=t.focusNode,l=t.anchorOffset,t=t.focusOffset,r&&B(e)&&!Gl(n,i,o))return e.clone()}else return e.clone();if(n=y_(i,l,o,t,n,e),n===null)return null;let[s,a]=n;return new $r(s,a,B(e)?e.format:0,B(e)?e.style:"")}function oe(){return En()._selection}function ho(){return xe()._editorState._selection}function La(e,t,n,r=1){var i=e.anchor,o=e.focus,l=i.getNode(),s=o.getNode();if(t.is(l)||t.is(s)){if(l=t.__key,e.isCollapsed())t=i.offset,(n<=t&&0<r||n<t&&0>r)&&(n=Math.max(0,t+r),i.set(l,n,"element"),o.set(l,n,"element"),my(e));else{let u=e.isBackward();s=u?o:i;var a=s.getNode();i=u?i:o,o=i.getNode(),t.is(a)&&(a=s.offset,(n<=a&&0<r||n<a&&0>r)&&s.set(l,Math.max(0,a+r),"element")),t.is(o)&&(t=i.offset,(n<=t&&0<r||n<t&&0>r)&&i.set(l,Math.max(0,t+r),"element"))}my(e)}}function my(e){var t=e.anchor,n=t.offset;let r=e.focus;var i=r.offset,o=t.getNode(),l=r.getNode();if(e.isCollapsed())O(o)&&(l=o.getChildrenSize(),l=(i=n>=l)?o.getChildAtIndex(l-1):o.getChildAtIndex(n),I(l)&&(n=0,i&&(n=l.getTextContentSize()),t.set(l.__key,n,"text"),r.set(l.__key,n,"text")));else{if(O(o)){let s=o.getChildrenSize();n=(e=n>=s)?o.getChildAtIndex(s-1):o.getChildAtIndex(n),I(n)&&(o=0,e&&(o=n.getTextContentSize()),t.set(n.__key,o,"text"))}O(l)&&(n=l.getChildrenSize(),i=(t=i>=n)?l.getChildAtIndex(n-1):l.getChildAtIndex(i),I(i)&&(l=0,t&&(l=i.getTextContentSize()),r.set(i.__key,l,"text")))}}function fO(e,t){if(t=t.getEditorState()._selection,e=e._selection,B(e)){var n=e.anchor;let r=e.focus,i;n.type==="text"&&(i=n.getNode(),i.selectionTransform(t,e)),r.type==="text"&&(n=r.getNode(),i!==n&&n.selectionTransform(t,e))}}function Ma(e,t,n,r,i){let o=null,l=0,s=null;r!==null?(o=r.__key,I(r)?(l=r.getTextContentSize(),s="text"):O(r)&&(l=r.getChildrenSize(),s="element")):i!==null&&(o=i.__key,I(i)?s="text":O(i)&&(s="element")),o!==null&&s!==null?e.set(o,l,s):(l=t.getIndexWithinParent(),l===-1&&(l=n.getChildrenSize()),e.set(n.__key,l,"element"))}function gy(e,t,n,r,i){e.type==="text"?(e.key=n,t||(e.offset+=i)):e.offset>r.getIndexWithinParent()&&--e.offset}function Vc(e){e.isCollapsed()||e.removeText();var t=e.anchor;for(e=t.getNode(),t=t.offset;!gi(e);)[e,t]=pO(e,t);return t}function pO(e,t){var n=e.getParent();if(!n)return n=Hn(),kt().append(n),n.select(),[kt(),0];if(I(e)){var r=e.splitText(t);return r.length===0?[n,e.getIndexWithinParent()]:(e=t===0?0:1,e=r[0].getIndexWithinParent()+e,[n,e])}return!O(e)||t===0?[n,e.getIndexWithinParent()]:((r=e.getChildAtIndex(t))&&(t=new $r(un(e.__key,t,"element"),un(e.__key,t,"element"),0,""),(t=e.insertNewAfter(t))&&t.append(r,...r.getNextSiblings())),[n,e.getIndexWithinParent()+1])}function hO(e){let t=Hn(),n=null;for(let r=0;r<e.length;r++){let i=e[r],o=ii(i);if(o||Ce(i)&&i.isInline()||O(i)&&i.isInline()||I(i)||i.isParentRequired()){if(n===null&&(n=i.createParentElementNode(),t.append(n),o))continue;n!==null&&n.append(i)}else t.append(i),n=null}return t}let De=null,Fe=null,xt=!1,Kc=!1,Al=0,yy={characterData:!0,childList:!0,subtree:!0};function mo(){return xt||De!==null&&De._readOnly}function ut(){xt&&$(13)}function En(){return De===null&&$(15),De}function xe(){return Fe===null&&$(16),Fe}function vy(e,t,n){var r=t.__type;let i=e._nodes.get(r);for(i===void 0&&$(30,r),e=n.get(r),e===void 0&&(e=Array.from(i.transforms),n.set(r,e)),n=e.length,r=0;r<n&&(e[r](t),t.isAttached());r++);}function mO(e,t){t=t._dirtyLeaves,e=e._nodeMap;for(let n of t)t=e.get(n),I(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&Vx(t)}function gO(e,t){let n=t._dirtyLeaves,r=t._dirtyElements;e=e._nodeMap;let i=lr(),o=new Map;var l=n;let s=l.size;for(var a=r,u=a.size;0<s||0<u;){if(0<s){t._dirtyLeaves=new Set;for(let d of l)l=e.get(d),I(l)&&l.isAttached()&&l.isSimpleText()&&!l.isUnmergeable()&&Vx(l),l!==void 0&&l!==void 0&&l.__key!==i&&l.isAttached()&&vy(t,l,o),n.add(d);if(l=t._dirtyLeaves,s=l.size,0<s){Al++;continue}}t._dirtyLeaves=new Set,t._dirtyElements=new Map;for(let d of a)a=d[0],u=d[1],(a==="root"||u)&&(l=e.get(a),l!==void 0&&l!==void 0&&l.__key!==i&&l.isAttached()&&vy(t,l,o),r.set(a,u));l=t._dirtyLeaves,s=l.size,a=t._dirtyElements,u=a.size,Al++}t._dirtyLeaves=n,t._dirtyElements=r}function Oh(e,t){var n=e.type,r=t.get(n);if(r===void 0&&$(17,n),n=r.klass,e.type!==n.getType()&&$(18,n.name),n=n.importJSON(e),e=e.children,O(n)&&Array.isArray(e))for(r=0;r<e.length;r++){let i=Oh(e[r],t);n.append(i)}return n}function xy(e,t){let n=De,r=xt,i=Fe;De=e,xt=!0,Fe=null;try{return t()}finally{De=n,xt=r,Fe=i}}function Gr(e,t){let n=e._pendingEditorState,r=e._rootElement,i=e._headless||r===null;if(n!==null){var o=e._editorState,l=o._selection,s=n._selection,a=e._dirtyType!==0,u=De,d=xt,h=Fe,f=e._updating,p=e._observer,m=null;if(e._pendingEditorState=null,e._editorState=n,!i&&a&&p!==null){Fe=e,De=n,xt=!1,e._updating=!0;try{let ge=e._dirtyType,it=e._dirtyElements,ot=e._dirtyLeaves;p.disconnect();var y=ge,_=it,g=ot;at=Pn=Re="",n_=y===2,Ks=null,nt=e,Tr=e._config,Ll=e._nodes,Du=nt._listeners.mutation,vf=_,xf=g,ri=o._nodeMap,br=n._nodeMap,Th=n._readOnly,_f=new Map(e._keyToDOMMap);let fn=new Map;Ml=fn,Wo("root",null),Ml=_f=Tr=br=ri=xf=vf=Ll=nt=void 0,m=fn}catch(ge){if(ge instanceof Error&&e._onError(ge),Kc)throw ge;w_(e,null,r,n),Ux(e),e._dirtyType=2,Kc=!0,Gr(e,o),Kc=!1;return}finally{p.observe(r,yy),e._updating=f,De=u,xt=d,Fe=h}}n._readOnly||(n._readOnly=!0);var v=e._dirtyLeaves,x=e._dirtyElements,S=e._normalizedNodes,C=e._updateTags,N=e._deferred;a&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set);var T=e._decorators,b=e._pendingDecorators||T,A=n._nodeMap,M;for(M in b)A.has(M)||(b===T&&(b=Gx(e)),delete b[M]);var K=i?null:Nn(e._window);if(e._editable&&K!==null&&(a||s===null||s.dirty)){Fe=e,De=n;try{if(p!==null&&p.disconnect(),a||s===null||s.dirty){let ge=e._blockCursorElement;ge!==null&&yf(ge,e,r);e:{let it=K.anchorNode,ot=K.focusNode,fn=K.anchorOffset,So=K.focusOffset,It=document.activeElement;if(!(C.has("collaboration")&&It!==r||It!==null&&_h(It)))if(B(s)){var $e=s.anchor,_t=s.focus,Vn=$e.key,Vu=_t.key,ui=Pa(e,Vn),ci=Pa(e,Vu),R=$e.offset,H=_t.offset,U=s.format,le=s.style,Ee=s.isCollapsed(),dn=ui,Mt=ci,Lr=!1;if($e.type==="text"){dn=Oa(ui);let At=$e.getNode();Lr=At.getFormat()!==U||At.getStyle()!==le}else B(l)&&l.anchor.type==="text"&&(Lr=!0);if(_t.type==="text"&&(Mt=Oa(ci)),dn!==null&&Mt!==null){if(Ee&&(l===null||Lr||B(l)&&(l.format!==U||l.style!==le))){var Tn=performance.now();c_=[U,le,R,Vn,Tn]}if(fn===R&&So===H&&it===dn&&ot===Mt&&(K.type!=="Range"||!Ee)&&(It!==null&&r.contains(It)||r.focus({preventScroll:!0}),$e.type!=="element"))break e;try{K.setBaseAndExtent(dn,R,Mt,H)}catch{}if(!C.has("skip-scroll-into-view")&&s.isCollapsed()&&r!==null&&r===document.activeElement){let At=s instanceof $r&&s.anchor.type==="element"?dn.childNodes[R]||null:0<K.rangeCount?K.getRangeAt(0):null;if(At!==null){let Dt;if(At instanceof Text){let St=document.createRange();St.selectNode(At),Dt=St.getBoundingClientRect()}else Dt=At.getBoundingClientRect();let Yn=r.ownerDocument,Mr=Yn.defaultView;if(Mr!==null)for(var{top:Kn,bottom:Ku}=Dt,ts,ns,qn=r;qn!==null;){let St=qn===Yn.body;if(St)ts=0,ns=Iu(e).innerHeight;else{let rs=qn.getBoundingClientRect();ts=rs.top,ns=rs.bottom}let Ir=0;if(Kn<ts?Ir=-(ts-Kn):Ku>ns&&(Ir=Ku-ns),Ir!==0)if(St)Mr.scrollBy(0,Ir);else{let rs=qn.scrollTop;qn.scrollTop+=Ir;let zh=qn.scrollTop-rs;Kn-=zh,Ku-=zh}if(St)break;qn=Mu(qn)}}}Ef=!0}}else l!==null&&Gl(e,it,ot)&&K.removeAllRanges()}}e:{let ge=e._blockCursorElement;if(B(s)&&s.isCollapsed()&&s.anchor.type==="element"&&r.contains(document.activeElement)){let it=s.anchor,ot=it.getNode(),fn=it.offset,So=ot.getChildrenSize(),It=!1,At=null;if(fn===So){let Dt=ot.getChildAtIndex(fn-1);Ac(Dt)&&(It=!0)}else{let Dt=ot.getChildAtIndex(fn);if(Ac(Dt)){let Yn=Dt.getPreviousSibling();(Yn===null||Ac(Yn))&&(It=!0,At=e.getElementByKey(Dt.__key))}}if(It){let Dt=e.getElementByKey(ot.__key);if(ge===null){let Yn=e._config.theme,Mr=document.createElement("div");Mr.contentEditable="false",Mr.setAttribute("data-lexical-cursor","true");let St=Yn.blockCursor;if(St!==void 0){if(typeof St=="string"){let Ir=St.split(" ");St=Yn.blockCursor=Ir}St!==void 0&&Mr.classList.add(...St)}e._blockCursorElement=ge=Mr}r.style.caretColor="transparent",At===null?Dt.appendChild(ge):Dt.insertBefore(ge,At);break e}}ge!==null&&yf(ge,e,r)}p!==null&&p.observe(r,yy)}finally{Fe=h,De=u}}if(m!==null){var lS=m;let ge=Array.from(e._listeners.mutation),it=ge.length;for(let ot=0;ot<it;ot++){let[fn,So]=ge[ot],It=lS.get(So);It!==void 0&&fn(It,{dirtyLeaves:v,prevEditorState:o,updateTags:C})}}B(s)||s===null||l!==null&&l.is(s)||e.dispatchCommand($u,void 0);var qu=e._pendingDecorators;qu!==null&&(e._decorators=qu,e._pendingDecorators=null,ll("decorator",e,!0,qu));var sS=ty(t||o),Dh=ty(n);if(sS!==Dh&&ll("textcontent",e,!0,Dh),ll("update",e,!0,{dirtyElements:x,dirtyLeaves:v,editorState:n,normalizedNodes:S,prevEditorState:t||o,tags:C}),e._deferred=[],N.length!==0){let ge=e._updating;e._updating=!0;try{for(let it=0;it<N.length;it++)N[it]()}finally{e._updating=ge}}var Fh=e._updates;if(Fh.length!==0){let ge=Fh.shift();if(ge){let[it,ot]=ge;x_(e,it,ot)}}}}function ll(e,t,n,...r){let i=t._updating;t._updating=n;try{let o=Array.from(t._listeners[e]);for(e=0;e<o.length;e++)o[e].apply(null,r)}finally{t._updating=i}}function P(e,t,n){if(e._updating===!1||Fe!==e){let o=!1;return e.update(()=>{o=P(e,t,n)}),o}let r=wh(e);for(let o=4;0<=o;o--)for(let l=0;l<r.length;l++){var i=r[l]._commands.get(t);if(i!==void 0&&(i=i[o],i!==void 0)){i=Array.from(i);let s=i.length;for(let a=0;a<s;a++)if(i[a](n,e)===!0)return!0}}return!1}function _y(e,t){let n=e._updates;for(t=t||!1;n.length!==0;){var r=n.shift();if(r){let[i,o]=r,l;o!==void 0&&(r=o.onUpdate,l=o.tag,o.skipTransforms&&(t=!0),r&&e._deferred.push(r),l&&e._updateTags.add(l)),i()}}return t}function x_(e,t,n){let r=e._updateTags;var i,o=i=!1;if(n!==void 0){var l=n.onUpdate;i=n.tag,i!=null&&r.add(i),i=n.skipTransforms||!1,o=n.discrete||!1}l&&e._deferred.push(l),n=e._editorState,l=e._pendingEditorState;let s=!1;(l===null||l._readOnly)&&(l=e._pendingEditorState=new Wu(new Map((l||n)._nodeMap)),s=!0),l._flushSync=o,o=De;let a=xt,u=Fe,d=e._updating;De=l,xt=!1,e._updating=!0,Fe=e;try{s&&(e._headless?n._selection!==null&&(l._selection=n._selection.clone()):l._selection=dO(e));let h=e._compositionKey;t(),i=_y(e,i),fO(l,e),e._dirtyType!==0&&(i?mO(l,e):gO(l,e),_y(e),q4(n,l,e._dirtyLeaves,e._dirtyElements)),h!==e._compositionKey&&(l._flushSync=!0);let f=l._selection;if(B(f)){let p=l._nodeMap,m=f.focus.key;p.get(f.anchor.key)!==void 0&&p.get(m)!==void 0||$(19)}else Xl(f)&&f._nodes.size===0&&(l._selection=null)}catch(h){h instanceof Error&&e._onError(h),e._pendingEditorState=n,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),Gr(e);return}finally{De=o,xt=a,Fe=u,e._updating=d,Al=0}e._dirtyType!==0||yO(l,e)?l._flushSync?(l._flushSync=!1,Gr(e)):s&&U4(()=>{Gr(e)}):(l._flushSync=!1,s&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function Pt(e,t,n){e._updating?e._updates.push([t,n]):x_(e,t,n)}class __ extends Fu{constructor(t){super(t)}decorate(){$(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Ce(e){return e instanceof __}class Hu extends Fu{constructor(t){super(t),this.__last=this.__first=null,this.__indent=this.__format=this.__size=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){let t=this.getFormat();return D4[t]||""}getIndent(){return this.getLatest().__indent}getChildren(){let t=[],n=this.getFirstChild();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getChildrenKeys(){let t=[],n=this.getFirstChild();for(;n!==null;)t.push(n.__key),n=n.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){let t=xe()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){let t=this.getLatest(),n=this.getParentOrThrow().getLastChild();return n!==null&&n.is(t)}getAllTextNodes(){let t=[],n=this.getFirstChild();for(;n!==null;){if(I(n)&&t.push(n),O(n)){let r=n.getAllTextNodes();t.push(...r)}n=n.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;t!==null;){if(O(t)){let n=t.getFirstChild();if(n!==null){t=n;continue}}break}return t}getLastDescendant(){let t=this.getLastChild();for(;t!==null;){if(O(t)){let n=t.getLastChild();if(n!==null){t=n;continue}}break}return t}getDescendantByIndex(t){let n=this.getChildren(),r=n.length;return t>=r?(t=n[r-1],O(t)&&t.getLastDescendant()||t||null):(t=n[t],O(t)&&t.getFirstDescendant()||t||null)}getFirstChild(){let t=this.getLatest().__first;return t===null?null:et(t)}getFirstChildOrThrow(){let t=this.getFirstChild();return t===null&&$(45,this.__key),t}getLastChild(){let t=this.getLatest().__last;return t===null?null:et(t)}getLastChildOrThrow(){let t=this.getLastChild();return t===null&&$(96,this.__key),t}getChildAtIndex(t){var n=this.getChildrenSize();let r;if(t<n/2){for(r=this.getFirstChild(),n=0;r!==null&&n<=t;){if(n===t)return r;r=r.getNextSibling(),n++}return null}for(r=this.getLastChild(),--n;r!==null&&n>=t;){if(n===t)return r;r=r.getPreviousSibling(),n--}return null}getTextContent(){let t="",n=this.getChildren(),r=n.length;for(let i=0;i<r;i++){let o=n[i];t+=o.getTextContent(),O(o)&&i!==r-1&&!o.isInline()&&(t+=`

`)}return t}getTextContentSize(){let t=0,n=this.getChildren(),r=n.length;for(let i=0;i<r;i++){let o=n[i];t+=o.getTextContentSize(),O(o)&&i!==r-1&&!o.isInline()&&(t+=2)}return t}getDirection(){return this.getLatest().__dir}hasFormat(t){return t!==""?(t=Jg[t],(this.getFormat()&t)!==0):!1}select(t,n){ut();let r=oe(),i=t,o=n;var l=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&n===0){if(t=this.getFirstChild(),I(t)||O(t))return t.select(0,0)}else if(!(t!==void 0&&t!==l||n!==void 0&&n!==l)&&(t=this.getLastChild(),I(t)||O(t)))return t.select()}if(i===void 0&&(i=l),o===void 0&&(o=l),l=this.__key,B(r))r.anchor.set(l,i,"element"),r.focus.set(l,o,"element"),r.dirty=!0;else return v_(l,i,l,o,"element","element");return r}selectStart(){let t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){let t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){let t=this.getWritable();return this.getChildren().forEach(n=>n.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){let n=this.getWritable();return n.__dir=t,n}setFormat(t){return this.getWritable().__format=t!==""?Jg[t]:0,this}setIndent(t){return this.getWritable().__indent=t,this}splice(t,n,r){let i=r.length,o=this.getChildrenSize(),l=this.getWritable(),s=l.__key;var a=[],u=[];let d=this.getChildAtIndex(t+n),h=null,f=o-n+i;if(t!==0)if(t===o)h=this.getLastChild();else{var p=this.getChildAtIndex(t);p!==null&&(h=p.getPreviousSibling())}if(0<n){var m=h===null?this.getFirstChild():h.getNextSibling();for(p=0;p<n;p++){m===null&&$(100);var y=m.getNextSibling(),_=m.__key;m=m.getWritable(),Yr(m),u.push(_),m=y}}for(p=h,y=0;y<i;y++){_=r[y],p!==null&&_.is(p)&&(h=p=p.getPreviousSibling()),m=_.getWritable(),m.__parent===s&&f--,Yr(m);let g=_.__key;p===null?(l.__first=g,m.__prev=null):(p=p.getWritable(),p.__next=g,m.__prev=p.__key),_.__key===s&&$(76),m.__parent=s,a.push(g),p=_}if(t+n===o?p!==null&&(p.getWritable().__next=null,l.__last=p.__key):d!==null&&(t=d.getWritable(),p!==null?(n=p.getWritable(),t.__prev=p.__key,n.__next=d.__key):t.__prev=null),l.__size=f,u.length&&(t=oe(),B(t))){u=new Set(u),a=new Set(a);let{anchor:g,focus:v}=t;Sy(g,u,a)&&Ma(g,g.getNode(),this,h,d),Sy(v,u,a)&&Ma(v,v.getNode(),this,h,d),f!==0||this.canBeEmpty()||Er(this)||this.remove()}return l}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(){return null}canIndent(){return!0}collapseAtStart(){return!1}excludeFromCopy(){return!1}canExtractContents(){return!0}canReplaceWith(){return!0}canInsertAfter(){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(){return!1}extractWithChild(){return!1}}function O(e){return e instanceof Hu}function Sy(e,t,n){for(e=e.getNode();e;){let r=e.__key;if(t.has(r)&&!n.has(r))return!0;e=e.getParent()}return!1}class go extends Hu{static getType(){return"root"}static clone(){return new go}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){$(51)}getTextContent(){let t=this.__cachedText;return!mo()&&xe()._dirtyType!==0||t===null?super.getTextContent():t}remove(){$(52)}replace(){$(53)}insertBefore(){$(54)}insertAfter(){$(55)}updateDOM(){return!1}append(...t){for(let n=0;n<t.length;n++){let r=t[n];O(r)||Ce(r)||$(56)}return super.append(...t)}static importJSON(t){let n=kt();return n.setFormat(t.format),n.setIndent(t.indent),n.setDirection(t.direction),n}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function bt(e){return e instanceof go}function yO(e,t){if(t=t.getEditorState()._selection,e=e._selection,e!==null){if(e.dirty||!e.is(t))return!0}else if(t!==null)return!0;return!1}function jh(){return new Wu(new Map([["root",new go]]))}function S_(e){let t=e.exportJSON();var n=e.constructor;if(t.type!==n.getType()&&$(130,n.name),O(e)){let r=t.children;for(Array.isArray(r)||$(59,n.name),e=e.getChildren(),n=0;n<e.length;n++){let i=S_(e[n]);r.push(i)}}return t}class Wu{constructor(t,n){this._nodeMap=t,this._selection=n||null,this._readOnly=this._flushSync=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t){return xy(this,t)}clone(t){return t=new Wu(this._nodeMap,t===void 0?this._selection:t),t._readOnly=!0,t}toJSON(){return xy(this,()=>({root:S_(kt())}))}}class yo extends Hu{static getType(){return"paragraph"}static clone(t){return new yo(t.__key)}createDOM(t){let n=document.createElement("p");return t=rl(t.theme,"paragraph"),t!==void 0&&n.classList.add(...t),n}updateDOM(){return!1}static importDOM(){return{p:()=>({conversion:vO,priority:0})}}exportDOM(t){if({element:t}=super.exportDOM(t),t&&Au(t)){this.isEmpty()&&t.append(document.createElement("br"));var n=this.getFormatType();t.style.textAlign=n,(n=this.getDirection())&&(t.dir=n),n=this.getIndent(),0<n&&(t.style.textIndent=`${20*n}px`)}return{element:t}}static importJSON(t){let n=Hn();return n.setFormat(t.format),n.setIndent(t.indent),n.setDirection(t.direction),n}exportJSON(){return{...super.exportJSON(),type:"paragraph",version:1}}insertNewAfter(t,n){t=Hn();let r=this.getDirection();return t.setDirection(r),this.insertAfter(t,n),t}collapseAtStart(){let t=this.getChildren();if(t.length===0||I(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function vO(e){let t=Hn();return e.style&&(t.setFormat(e.style.textAlign),e=parseInt(e.style.textIndent,10)/20,0<e&&t.setIndent(e)),{node:t}}function Hn(){return Jl(new yo)}function w_(e,t,n,r){let i=e._keyToDOMMap;i.clear(),e._editorState=jh(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null,r=e._observer,r!==null&&(r.disconnect(),e._observer=null),t!==null&&(t.textContent=""),n!==null&&(n.textContent="",i.set("root",n))}function xO(e,t){let n=new Map,r=new Set,i=o=>{Object.keys(o).forEach(l=>{let s=n.get(l);s===void 0&&(s=[],n.set(l,s)),s.push(o[l])})};return e.forEach(o=>{o=o.klass.importDOM!=null?o.klass.importDOM.bind(o.klass):null,o==null||r.has(o)||(r.add(o),o=o(),o!==null&&i(o))}),t&&i(t),n}class _O{constructor(t,n,r,i,o,l,s){this._parentEditor=n,this._rootElement=null,this._editorState=t,this._compositionKey=this._pendingEditorState=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Jx(),this._onError=o,this._htmlConversions=l,this._editable=s,this._headless=n!==null&&n._headless,this._blockCursorElement=this._window=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){let n=this._listeners.update;return n.add(t),()=>{n.delete(t)}}registerEditableListener(t){let n=this._listeners.editable;return n.add(t),()=>{n.delete(t)}}registerDecoratorListener(t){let n=this._listeners.decorator;return n.add(t),()=>{n.delete(t)}}registerTextContentListener(t){let n=this._listeners.textcontent;return n.add(t),()=>{n.delete(t)}}registerRootListener(t){let n=this._listeners.root;return t(this._rootElement,null),n.add(t),()=>{t(null,this._rootElement),n.delete(t)}}registerCommand(t,n,r){r===void 0&&$(35);let i=this._commands;i.has(t)||i.set(t,[new Set,new Set,new Set,new Set,new Set]);let o=i.get(t);o===void 0&&$(36,String(t));let l=o[r];return l.add(n),()=>{l.delete(n),o.every(s=>s.size===0)&&i.delete(t)}}registerMutationListener(t,n){this._nodes.get(t.getType())===void 0&&$(37,t.name);let r=this._listeners.mutation;return r.set(n,t),()=>{r.delete(n)}}registerNodeTransformToKlass(t,n){var r=t.getType();return r=this._nodes.get(r),r===void 0&&$(37,t.name),r.transforms.add(n),r}registerNodeTransform(t,n){var r=this.registerNodeTransformToKlass(t,n);let i=[r];return r=r.replaceWithKlass,r!=null&&(r=this.registerNodeTransformToKlass(r,n),i.push(r)),V4(this,t.getType()),()=>{i.forEach(o=>o.transforms.delete(n))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,n){return P(this,t,n)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){let n=this._rootElement;if(t!==n){let l=rl(this._config.theme,"root");var r=this._pendingEditorState||this._editorState;if(this._rootElement=t,w_(this,n,t,r),n!==null){if(!this._config.disableEvents){il!==0&&(il--,il===0&&n.ownerDocument.removeEventListener("selectionchange",h_));var i=n.__lexicalEditor;if(i!=null){if(i._parentEditor!==null){var o=wh(i);o=o[o.length-1]._key,Vi.get(o)===i&&Vi.delete(o)}else Vi.delete(i._key);n.__lexicalEditor=null}for(i=p_(n),o=0;o<i.length;o++)i[o]();n.__lexicalEventHandles=[]}l!=null&&n.classList.remove(...l)}t!==null?(r=(r=t.ownerDocument)&&r.defaultView||null,i=t.style,i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=r,this._dirtyType=2,Ux(this),this._updateTags.add("history-merge"),Gr(this),this._config.disableEvents||nO(t,this),l!=null&&t.classList.add(...l)):(this._editorState=r,this._window=this._pendingEditorState=null),ll("root",this,!1,t,n)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,n){t.isEmpty()&&$(38),Wx(this);let r=this._pendingEditorState,i=this._updateTags;n=n!==void 0?n.tag:null,r===null||r.isEmpty()||(n!=null&&i.add(n),Gr(this)),this._pendingEditorState=t,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,n!=null&&i.add(n),Gr(this)}parseEditorState(t,n){t=typeof t=="string"?JSON.parse(t):t;let r=jh(),i=De,o=xt,l=Fe,s=this._dirtyElements,a=this._dirtyLeaves,u=this._cloneNotNeeded,d=this._dirtyType;this._dirtyElements=new Map,this._dirtyLeaves=new Set,this._cloneNotNeeded=new Set,this._dirtyType=0,De=r,xt=!1,Fe=this;try{Oh(t.root,this._nodes),n&&n(),r._readOnly=!0}catch(h){h instanceof Error&&this._onError(h)}finally{this._dirtyElements=s,this._dirtyLeaves=a,this._cloneNotNeeded=u,this._dirtyType=d,De=i,xt=o,Fe=l}return r}update(t,n){Pt(this,t,n)}focus(t,n={}){let r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),Pt(this,()=>{let i=oe(),o=kt();i!==null?i.dirty=!0:o.getChildrenSize()!==0&&(n.defaultSelection==="rootStart"?o.selectStart():o.selectEnd())},{onUpdate:()=>{r.removeAttribute("autocapitalize"),t&&t()},tag:"focus"}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){var t=this._rootElement;t!==null&&t.blur(),t=Nn(this._window),t!==null&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,ll("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}E.$addUpdateTag=function(e){ut(),xe()._updateTags.add(e)};E.$applyNodeReplacement=Jl;E.$copyNode=e_;E.$createLineBreakNode=no;E.$createNodeSelection=kf;E.$createParagraphNode=Hn;E.$createPoint=un;E.$createRangeSelection=function(){let e=un("root",0,"element"),t=un("root",0,"element");return new $r(e,t,0,"")};E.$createTabNode=zu;E.$createTextNode=Ue;E.$getAdjacentNode=gf;E.$getCharacterOffsets=jf;E.$getNearestNodeFromDOMNode=Ql;E.$getNearestRootOrShadowRoot=Zx;E.$getNodeByKey=et;E.$getPreviousSelection=ho;E.$getRoot=kt;E.$getSelection=oe;E.$getTextContent=function(){let e=oe();return e===null?"":e.getTextContent()};E.$hasAncestor=$a;E.$hasUpdateTag=function(e){return xe()._updateTags.has(e)};E.$insertNodes=function(e){let t=oe()||ho();t===null&&(t=kt().selectEnd()),t.insertNodes(e)};E.$isBlockElementNode=function(e){return O(e)&&!e.isInline()};E.$isDecoratorNode=Ce;E.$isElementNode=O;E.$isInlineElementOrDecoratorNode=function(e){return O(e)&&e.isInline()||Ce(e)&&e.isInline()};E.$isLeafNode=function(e){return I(e)||ii(e)||Ce(e)};E.$isLineBreakNode=ii;E.$isNodeSelection=Xl;E.$isParagraphNode=function(e){return e instanceof yo};E.$isRangeSelection=B;E.$isRootNode=bt;E.$isRootOrShadowRoot=Er;E.$isTabNode=m_;E.$isTextNode=I;E.$nodesOfType=function(e){var t=En();let n=t._readOnly,r=e.getType();t=t._nodeMap;let i=[];for(let[,o]of t)o instanceof e&&o.__type===r&&(n||o.isAttached())&&i.push(o);return i};E.$normalizeSelection__EXPERIMENTAL=Kx;E.$parseSerializedNode=function(e){return Oh(e,xe()._nodes)};E.$selectAll=function(){var e=kt();e=e.select(0,e.getChildrenSize()),Sn(Kx(e))};E.$setCompositionKey=Me;E.$setSelection=Sn;E.$splitNode=function(e,t){let n=e.getChildAtIndex(t);n==null&&(n=e),Er(e)&&$(102);let r=l=>{const s=l.getParentOrThrow(),a=Er(s),u=l!==n||a?e_(l):l;if(a)return O(l)&&O(u)||$(133),l.insertAfter(u),[l,u,u];const[d,h,f]=r(s);return l=l.getNextSiblings(),f.append(u,...l),[d,h,u]},[i,o]=r(n);return[i,o]};E.BLUR_COMMAND=zx;E.CAN_REDO_COMMAND={};E.CAN_UNDO_COMMAND={};E.CLEAR_EDITOR_COMMAND={};E.CLEAR_HISTORY_COMMAND={};E.CLICK_COMMAND=wx;E.COMMAND_PRIORITY_CRITICAL=4;E.COMMAND_PRIORITY_EDITOR=0;E.COMMAND_PRIORITY_HIGH=3;E.COMMAND_PRIORITY_LOW=1;E.COMMAND_PRIORITY_NORMAL=2;E.CONTROLLED_TEXT_INSERTION_COMMAND=Ui;E.COPY_COMMAND=mh;E.CUT_COMMAND=gh;E.DELETE_CHARACTER_COMMAND=Wi;E.DELETE_LINE_COMMAND=Rl;E.DELETE_WORD_COMMAND=$l;E.DRAGEND_COMMAND=Dx;E.DRAGOVER_COMMAND=Ax;E.DRAGSTART_COMMAND=Ix;E.DROP_COMMAND=Mx;E.DecoratorNode=__;E.ElementNode=Hu;E.FOCUS_COMMAND=Fx;E.FORMAT_ELEMENT_COMMAND={};E.FORMAT_TEXT_COMMAND=or;E.INDENT_CONTENT_COMMAND={};E.INSERT_LINE_BREAK_COMMAND=nl;E.INSERT_PARAGRAPH_COMMAND=cf;E.INSERT_TAB_COMMAND={};E.KEY_ARROW_DOWN_COMMAND=jx;E.KEY_ARROW_LEFT_COMMAND=Tx;E.KEY_ARROW_RIGHT_COMMAND=Nx;E.KEY_ARROW_UP_COMMAND=Ox;E.KEY_BACKSPACE_COMMAND=Px;E.KEY_DELETE_COMMAND=Rx;E.KEY_DOWN_COMMAND=Cx;E.KEY_ENTER_COMMAND=Ta;E.KEY_ESCAPE_COMMAND=$x;E.KEY_MODIFIER_COMMAND=Bx;E.KEY_SPACE_COMMAND=kx;E.KEY_TAB_COMMAND=Lx;E.LineBreakNode=fo;E.MOVE_TO_END=Ex;E.MOVE_TO_START=bx;E.OUTDENT_CONTENT_COMMAND={};E.PASTE_COMMAND=fh;E.ParagraphNode=yo;E.REDO_COMMAND=hh;E.REMOVE_TEXT_COMMAND=df;E.RootNode=go;E.SELECTION_CHANGE_COMMAND=$u;E.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND={};E.SELECT_ALL_COMMAND=ff;E.TabNode=po;E.TextNode=ai;E.UNDO_COMMAND=ph;E.createCommand=function(){return{}};E.createEditor=function(e){var t=e||{},n=Fe,r=t.theme||{};let i=e===void 0?n:t.parentEditor||null,o=t.disableEvents||!1,l=jh(),s=t.namespace||(i!==null?i._config.namespace:Jx()),a=t.editorState,u=[go,ai,fo,po,yo,...t.nodes||[]],{onError:d,html:h}=t;if(t=t.editable!==void 0?t.editable:!0,e===void 0&&n!==null)e=n._nodes;else for(e=new Map,n=0;n<u.length;n++){let p=u[n],m=null;var f=null;typeof p!="function"&&(f=p,p=f.replace,m=f.with,f=f.withKlass||null);let y=p.getType(),_=p.transform(),g=new Set;_!==null&&g.add(_),e.set(y,{exportDOM:h&&h.export?h.export.get(p):void 0,klass:p,replace:m,replaceWithKlass:f,transforms:g})}return r=new _O(l,i,e,{disableEvents:o,namespace:s,theme:r},d||console.error,xO(e,h?h.import:void 0),t),a!==void 0&&(r._pendingEditorState=a,r._dirtyType=2),r};E.getNearestEditorFromDOMNode=Sh;E.isCurrentlyReadOnlyMode=mo;E.isHTMLAnchorElement=function(e){return Au(e)&&e.tagName==="A"};E.isHTMLElement=Au;E.isSelectionCapturedInDecoratorInput=_h;E.isSelectionWithinEditor=Gl;const SO=E;var F=SO,wy=wn,Vo=F,Ia=w;let C_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";var wO=C_?Ia.useLayoutEffect:Ia.useEffect;let bs={tag:"history-merge"};function CO(e,t){if(t!==null){if(t===void 0)e.update(()=>{var n=Vo.$getRoot();if(n.isEmpty()){let r=Vo.$createParagraphNode();n.append(r),n=C_?document.activeElement:null,(Vo.$getSelection()!==null||n!==null&&n===e.getRootElement())&&r.select()}},bs);else if(t!==null)switch(typeof t){case"string":let n=e.parseEditorState(t);e.setEditorState(n,bs);break;case"object":e.setEditorState(t,bs);break;case"function":e.update(()=>{Vo.$getRoot().isEmpty()&&t(e)},bs)}}}xx.LexicalComposer=function({initialConfig:e,children:t}){let n=Ia.useMemo(()=>{const{theme:r,namespace:i,editor__DEPRECATED:o,nodes:l,onError:s,editorState:a,html:u}=e,d=wy.createLexicalComposerContext(null,r);let h=o||null;if(h===null){const f=Vo.createEditor({editable:e.editable,html:u,namespace:i,nodes:l,onError:p=>s(p,f),theme:r});CO(f,a),h=f}return[h,d]},[]);return wO(()=>{let r=e.editable,[i]=n;i.setEditable(r!==void 0?r:!0)},[]),Ia.createElement(wy.LexicalComposerContext.Provider,{value:n},t)};const NO=xx;var EO=NO,N_={},TO=wn,Mo=F,Cy=w,bO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Cy.useLayoutEffect:Cy.useEffect;N_.ClearEditorPlugin=function({onClear:e}){let[t]=TO.useLexicalComposerContext();return bO(()=>t.registerCommand(Mo.CLEAR_EDITOR_COMMAND,()=>(t.update(()=>{if(e==null){let n=Mo.$getRoot(),r=Mo.$getSelection(),i=Mo.$createParagraphNode();n.clear(),n.append(i),r!==null&&i.select()}else e()}),!0),Mo.COMMAND_PRIORITY_EDITOR),[t,e]),null};const OO=N_;var jO=OO,E_={},kO=wn,sl=w,PO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?sl.useLayoutEffect:sl.useEffect;function $O(e){let[t]=kO.useLexicalComposerContext(),n=sl.useMemo(()=>e(t),[t,e]),r=sl.useRef(n.initialValueFn()),[i,o]=sl.useState(r.current);return PO(()=>{let{initialValueFn:l,subscribe:s}=n,a=l();return r.current!==a&&(r.current=a,o(a)),s(u=>{r.current=u,o(u)})},[n,e]),i}function RO(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}var LO=function(){return $O(RO)};const MO=LO;var IO=MO,Rr={},st=F;function kh(e,t=!0){return e?!1:(e=T_(),t&&(e=e.trim()),e==="")}function T_(){return st.$getRoot().getTextContent()}function b_(e){if(!kh(e,!1))return!1;e=st.$getRoot().getChildren();let t=e.length;if(1<t)return!1;for(let r=0;r<t;r++){var n=e[r];if(st.$isDecoratorNode(n))return!1;if(st.$isElementNode(n)){if(!st.$isParagraphNode(n)||n.__indent!==0)return!1;n=n.getChildren();let i=n.length;for(let o=0;o<i;o++)if(!st.$isTextNode(n[r]))return!1}}return!0}Rr.$canShowPlaceholder=b_;Rr.$canShowPlaceholderCurry=function(e){return()=>b_(e)};Rr.$findTextIntersectionFromCharacters=function(e,t){var n=e.getFirstChild();e=0;e:for(;n!==null;){if(st.$isElementNode(n)){var r=n.getFirstChild();if(r!==null){n=r;continue}}else if(st.$isTextNode(n)){if(r=n.getTextContentSize(),e+r>t)return{node:n,offset:t-e};e+=r}if(r=n.getNextSibling(),r!==null)n=r;else{for(n=n.getParent();n!==null;){if(r=n.getNextSibling(),r!==null){n=r;continue e}n=n.getParent()}break}}return null};Rr.$isRootTextContentEmpty=kh;Rr.$isRootTextContentEmptyCurry=function(e,t){return()=>kh(e,t)};Rr.$rootTextContent=T_;Rr.registerLexicalTextEntity=function(e,t,n,r){let i=l=>{const s=st.$createTextNode(l.getTextContent());s.setFormat(l.getFormat()),l.replace(s)},o=e.registerNodeTransform(st.TextNode,l=>{if(l.isSimpleText()){var s=l.getPreviousSibling(),a=l.getTextContent(),u=l;if(st.$isTextNode(s)){var d=s.getTextContent(),h=t(d+a);if(s instanceof n){if(h===null||s.getLatest().__mode!==0){i(s);return}if(h=h.end-d.length,0<h){u=a.slice(0,h),u=d+u,s.select(),s.setTextContent(u),h===a.length?l.remove():(s=a.slice(h),l.setTextContent(s));return}}else if(h===null||h.start<d.length)return}for(;;){if(l=t(a),a=h=l===null?"":a.slice(l.end),h===""){if(d=u.getNextSibling(),st.$isTextNode(d)){if(h=u.getTextContent()+d.getTextContent(),h=t(h),h===null){d instanceof n?i(d):d.markDirty();break}else if(h.start!==0)break}}else if(d=t(h),d!==null&&d.start===0)break;if(l===null)break;if(l.start===0&&st.$isTextNode(s)&&s.isTextEntity())continue;let f;if(l.start===0?[f,u]=u.splitText(l.end):[,f,u]=u.splitText(l.start,l.end),l=r(f),l.setFormat(f.getFormat()),f.replace(l),u==null)break}}});return e=e.registerNodeTransform(n,l=>{var s=l.getTextContent();const a=t(s);a===null||a.start!==0?i(l):s.length>a.end?l.splitText(a.end):(s=l.getPreviousSibling(),st.$isTextNode(s)&&s.isTextEntity()&&(i(s),i(l)),s=l.getNextSibling(),st.$isTextNode(s)&&s.isTextEntity()&&(i(s),l instanceof n&&i(l)))}),[o,e]};const AO=Rr;var DO=AO,Ne={},He={},D=F;let Aa=new Map;function Ny(e){for(;e!=null;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function Ey(e){let t=e.parentNode;if(t==null)throw Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(e)]}function O_(e){let t={};e=e.split(";");for(let n of e)if(n!==""){let[r,i]=n.split(/:([^]+)/);r&&i&&(t[r.trim()]=i.trim())}return t}function Da(e){let t=Aa.get(e);return t===void 0&&(t=O_(e),Aa.set(e,t)),t}function FO(e){let t="";for(let n in e)n&&(t+=`${n}: ${e[n]};`);return t}function pi(e,t){let n=Da("getStyle"in e?e.getStyle():e.style);t=Object.entries(t).reduce((i,[o,l])=>(l instanceof Function?i[o]=l(n[o]):l===null?delete i[o]:i[o]=l,i),{...n});let r=FO(t);e.setStyle(r),Aa.set(r,t)}function zO(e){for(;e!==null&&!D.$isRootOrShadowRoot(e);){let t=e.getLatest(),n=e.getParent();t.getChildrenSize()===0&&e.remove(!0),e=n}}function qc(e,t,n,r,i=null){if(t.length!==0){var o=t[0],l=new Map,s=[];o=D.$isElementNode(o)?o:o.getParentOrThrow(),o.isInline()&&(o=o.getParentOrThrow());for(var a=!1;o!==null;){var u=o.getPreviousSibling();if(u!==null){o=u,a=!0;break}if(o=o.getParentOrThrow(),D.$isRootOrShadowRoot(o))break}u=new Set;for(var d=0;d<n;d++){var h=t[d];D.$isElementNode(h)&&h.getChildrenSize()===0&&u.add(h.getKey())}var f=new Set;for(d=0;d<n;d++){h=t[d];var p=h.getParent();if(p!==null&&p.isInline()&&(p=p.getParent()),p!==null&&D.$isLeafNode(h)&&!f.has(h.getKey())){if(h=p.getKey(),l.get(h)===void 0){let m=r();m.setFormat(p.getFormatType()),m.setIndent(p.getIndent()),s.push(m),l.set(h,m),p.getChildren().forEach(y=>{m.append(y),f.add(y.getKey()),D.$isElementNode(y)&&y.getChildrenKeys().forEach(_=>f.add(_))}),zO(p)}}else if(u.has(h.getKey())){if(!D.$isElementNode(h))throw Error("Expected node in emptyElements to be an ElementNode");p=r(),p.setFormat(h.getFormatType()),p.setIndent(h.getIndent()),s.push(p),h.remove(!0)}}if(i!==null)for(t=0;t<s.length;t++)i.append(s[t]);if(t=null,D.$isRootOrShadowRoot(o))if(a)if(i!==null)o.insertAfter(i);else for(i=s.length-1;0<=i;i--)o.insertAfter(s[i]);else if(a=o.getFirstChild(),D.$isElementNode(a)&&(o=a),a===null)if(i)o.append(i);else for(i=0;i<s.length;i++)a=s[i],o.append(a),t=a;else if(i!==null)a.insertBefore(i);else for(o=0;o<s.length;o++)i=s[o],a.insertBefore(i),t=i;else if(i)o.insertAfter(i);else for(i=s.length-1;0<=i;i--)a=s[i],o.insertAfter(a),t=a;s=D.$getPreviousSelection(),D.$isRangeSelection(s)&&s.anchor.getNode().isAttached()&&s.focus.getNode().isAttached()?D.$setSelection(s.clone()):t!==null?t.selectEnd():e.dirty=!0}}function j_(e,t,n,r){e.modify(t?"extend":"move",n,r)}function k_(e){return e=e.anchor.getNode(),(D.$isRootNode(e)?e:e.getParentOrThrow()).getDirection()==="rtl"}function Yc(e){if(D.$isDecoratorNode(e)||!D.$isElementNode(e)||D.$isRootOrShadowRoot(e))return!1;var t=e.getFirstChild();return t=t===null||D.$isLineBreakNode(t)||D.$isTextNode(t)||t.isInline(),!e.isInline()&&e.canBeEmpty()!==!1&&t}He.$addNodeStyle=function(e){e=e.getStyle();let t=O_(e);Aa.set(e,t)};He.$cloneWithProperties=function(e){let t=e.constructor.clone(e);return t.__parent=e.__parent,t.__next=e.__next,t.__prev=e.__prev,D.$isElementNode(e)&&D.$isElementNode(t)?(t.__first=e.__first,t.__last=e.__last,t.__size=e.__size,t.__format=e.__format,t.__indent=e.__indent,t.__dir=e.__dir,t):(D.$isTextNode(e)&&D.$isTextNode(t)&&(t.__format=e.__format,t.__style=e.__style,t.__mode=e.__mode,t.__detail=e.__detail),t)};He.$getSelectionStyleValueForProperty=function(e,t,n=""){let r=null,i=e.getNodes();var o=e.anchor,l=e.focus,s=e.isBackward();let a=s?l.offset:o.offset;if(o=s?l.getNode():o.getNode(),e.isCollapsed()&&e.style!==""&&(e=Da(e.style),e!==null&&t in e))return e[t];for(e=0;e<i.length;e++){var u=i[e];if((e===0||a!==0||!u.is(o))&&D.$isTextNode(u)){if(l=t,s=n,u=u.getStyle(),u=Da(u),l=u!==null&&u[l]||s,r===null)r=l;else if(r!==l){r="";break}}}return r===null?n:r};He.$isAtNodeEnd=function(e){if(e.type==="text")return e.offset===e.getNode().getTextContentSize();let t=e.getNode();if(!D.$isElementNode(t))throw Error("isAtNodeEnd: node must be a TextNode or ElementNode");return e.offset===t.getChildrenSize()};He.$isParentElementRTL=k_;He.$moveCaretSelection=j_;He.$moveCharacter=function(e,t,n){let r=k_(e);j_(e,t,n?!r:r,"character")};He.$patchStyleText=function(e,t){var n=e.getNodes(),r=n.length,i=e.getStartEndPoints();if(i!==null){var[o,l]=i;--r,i=n[0];var s=n[r];if(e.isCollapsed()&&D.$isRangeSelection(e))pi(e,t);else{var a=i.getTextContent().length,u=l.offset,d=o.offset,h=o.isBefore(l),f=h?d:u;e=h?u:d;var p=h?o.type:l.type,m=h?l.type:o.type;if(h=h?l.key:o.key,D.$isTextNode(i)&&f===a){let y=i.getNextSibling();D.$isTextNode(y)&&(f=d=0,i=y)}if(n.length===1)D.$isTextNode(i)&&i.canHaveFormat()&&(f=p==="element"?0:d>u?u:d,e=m==="element"?a:d>u?d:u,f!==e&&(f===0&&e===a?(pi(i,t),i.select(f,e)):(n=i.splitText(f,e),n=f===0?n[0]:n[1],pi(n,t),n.select(0,e-f))));else for(D.$isTextNode(i)&&f<i.getTextContentSize()&&i.canHaveFormat()&&(f!==0&&(i=i.splitText(f)[1],f=0,o.set(i.getKey(),f,"text")),pi(i,t)),D.$isTextNode(s)&&s.canHaveFormat()&&(f=s.getTextContent().length,s.__key!==h&&e!==0&&(e=f),e!==f&&([s]=s.splitText(e)),e===0&&m!=="element"||pi(s,t)),e=1;e<r;e++)f=n[e],m=f.getKey(),D.$isTextNode(f)&&f.canHaveFormat()&&m!==i.getKey()&&m!==s.getKey()&&!f.isToken()&&pi(f,t)}}};He.$selectAll=function(e){let t=e.anchor;e=e.focus;var n=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();let r=n.getFirstDescendant();n=n.getLastDescendant();let i="element",o="element",l=0;D.$isTextNode(r)?i="text":D.$isElementNode(r)||r===null||(r=r.getParentOrThrow()),D.$isTextNode(n)?(o="text",l=n.getTextContentSize()):D.$isElementNode(n)||n===null||(n=n.getParentOrThrow()),r&&n&&(t.set(r.getKey(),0,i),e.set(n.getKey(),l,o))};He.$setBlocksType=function(e,t){if(e!==null){var n=e.getStartEndPoints();if(n=n?n[0]:null,n!==null&&n.key==="root")t=t(),e=D.$getRoot(),(n=e.getFirstChild())?n.replace(t,!0):e.append(t);else{if(e=e.getNodes(),n!==null){for(n=n.getNode();n!==null&&n.getParent()!==null&&!Yc(n);)n=n.getParentOrThrow();n=Yc(n)?n:null}else n=!1;for(n&&e.indexOf(n)===-1&&e.push(n),n=0;n<e.length;n++){let r=e[n];if(!Yc(r))continue;if(!D.$isElementNode(r))throw Error("Expected block node to be an ElementNode");let i=t();i.setFormat(r.getFormatType()),i.setIndent(r.getIndent()),r.replace(i,!0)}}}};He.$shouldOverrideDefaultCharacterSelection=function(e,t){return e=D.$getAdjacentNode(e.focus,t),D.$isDecoratorNode(e)&&!e.isIsolated()||D.$isElementNode(e)&&!e.isInline()&&!e.canBeEmpty()};He.$sliceSelectedTextNodeContent=function(e,t){var n=e.getStartEndPoints();if(t.isSelected(e)&&!t.isSegmented()&&!t.isToken()&&n!==null){let[s,a]=n;n=e.isBackward();var r=s.getNode(),i=a.getNode(),o=t.is(r),l=t.is(i);if(o||l){let[u,d]=D.$getCharacterOffsets(e);e=r.is(i),o=t.is(n?i:r),i=t.is(n?r:i),r=0,l=void 0,e?(r=u>d?d:u,l=u>d?u:d):o?(r=n?d:u,l=void 0):i&&(n=n?u:d,r=0,l=n),t.__text=t.__text.slice(r,l)}}return t};He.$wrapNodes=function(e,t,n=null){var r=e.getStartEndPoints(),i=r?r[0]:null;r=e.getNodes();let o=r.length;if(i!==null&&(o===0||o===1&&i.type==="element"&&i.getNode().getChildrenSize()===0)){e=i.type==="text"?i.getNode().getParentOrThrow():i.getNode(),r=e.getChildren();let s=t();s.setFormat(e.getFormatType()),s.setIndent(e.getIndent()),r.forEach(a=>s.append(a)),n&&(s=n.append(s)),e.replace(s)}else{i=null;var l=[];for(let s=0;s<o;s++){let a=r[s];D.$isRootOrShadowRoot(a)?(qc(e,l,l.length,t,n),l=[],i=a):i===null||i!==null&&D.$hasAncestor(a,i)?l.push(a):(qc(e,l,l.length,t,n),l=[a])}qc(e,l,l.length,t,n)}};He.createDOMRange=function(e,t,n,r,i){let o=t.getKey(),l=r.getKey(),s=document.createRange(),a=e.getElementByKey(o);if(e=e.getElementByKey(l),D.$isTextNode(t)&&(a=Ny(a)),D.$isTextNode(r)&&(e=Ny(e)),t===void 0||r===void 0||a===null||e===null)return null;a.nodeName==="BR"&&([a,n]=Ey(a)),e.nodeName==="BR"&&([e,i]=Ey(e)),t=a.firstChild,a===e&&t!=null&&t.nodeName==="BR"&&n===0&&i===0&&(i=1);try{s.setStart(a,n),s.setEnd(e,i)}catch{return null}return!s.collapsed||n===i&&o===l||(s.setStart(e,i),s.setEnd(a,n)),s};He.createRectsFromDOMRange=function(e,t){var n=e.getRootElement();if(n===null)return[];e=n.getBoundingClientRect(),n=getComputedStyle(n),n=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),t=Array.from(t.getClientRects());let r=t.length;t.sort((o,l)=>{let s=o.top-l.top;return 3>=Math.abs(s)?o.left-l.left:s});let i;for(let o=0;o<r;o++){let l=t[o],s=l.width+n===e.width;i&&i.top<=l.top&&i.top+i.height>l.top&&i.left+i.width>l.left||s?(t.splice(o--,1),r--):i=l}return t};He.getStyleObjectFromCSS=Da;He.trimTextContentFromAnchor=function(e,t,n){let r=t.getNode();if(D.$isElementNode(r)){var i=r.getDescendantByIndex(t.offset);i!==null&&(r=i)}for(;0<n&&r!==null;){D.$isElementNode(r)&&(i=r.getLastDescendant(),i!==null&&(r=i));var o=r.getPreviousSibling(),l=0;if(o===null){i=r.getParentOrThrow();for(var s=i.getPreviousSibling();s===null;){if(i=i.getParent(),i===null){o=null;break}s=i.getPreviousSibling()}i!==null&&(l=i.isInline()?0:2,o=s)}if(s=r.getTextContent(),s===""&&D.$isElementNode(r)&&!r.isInline()&&(s=`

`),i=s.length,!D.$isTextNode(r)||n>=i)s=r.getParent(),r.remove(),s==null||s.getChildrenSize()!==0||D.$isRootNode(s)||s.remove(),n-=i+l,r=o;else{let a=r.getKey();l=e.getEditorState().read(()=>{const d=D.$getNodeByKey(a);return D.$isTextNode(d)&&d.isSimpleText()?d.getTextContent():null}),o=i-n;let u=s.slice(0,o);l!==null&&l!==s?(n=D.$getPreviousSelection(),i=r,r.isSimpleText()?r.setTextContent(l):(i=D.$createTextNode(l),r.replace(i)),D.$isRangeSelection(n)&&n.isCollapsed()&&(n=n.anchor.offset,i.select(n,n))):r.isSimpleText()?(l=t.key===a,s=t.offset,s<n&&(s=i),n=l?s-n:0,i=l?s:o,l&&n===0?([n]=r.splitText(n,i),n.remove()):([,n]=r.splitText(n,i),n.remove())):(n=D.$createTextNode(u),r.replace(n)),n=0}}};const BO=He;var Uu=BO,P_=Uu,pe=F;function HO(e){let t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function $_(...e){return()=>{e.forEach(t=>t())}}let WO={attributes:!0,characterData:!0,childList:!0,subtree:!0};function R_(e,t,n){function r(){if(l===null)throw Error("Unexpected null rootDOMNode");if(s===null)throw Error("Unexpected null parentDOMNode");let{left:f,top:p}=l.getBoundingClientRect();var m=s;let y=P_.createRectsFromDOMRange(e,t);d.isConnected||m.append(d),m=!1;for(let v=0;v<y.length;v++){var _=y[v];let x=u[v]||document.createElement("div"),S=x.style;S.position!=="absolute"&&(S.position="absolute",m=!0);var g=`${_.left-f}px`;S.left!==g&&(S.left=g,m=!0),g=`${_.top-p}px`,S.top!==g&&(x.style.top=g,m=!0),g=`${_.width}px`,S.width!==g&&(x.style.width=g,m=!0),_=`${_.height}px`,S.height!==_&&(x.style.height=_,m=!0),x.parentNode!==d&&(d.append(x),m=!0),u[v]=x}for(;u.length>y.length;)u.pop();m&&n(u)}function i(){l=s=null,a!==null&&a.disconnect(),a=null,d.remove();for(let f of u)f.remove();u=[]}function o(){let f=e.getRootElement();if(f===null)return i();let p=f.parentElement;if(!(p instanceof HTMLElement))return i();i(),l=f,s=p,a=new MutationObserver(m=>{let y=e.getRootElement(),_=y&&y.parentElement;if(y!==l||_!==s)return o();for(let g of m)if(!d.contains(g.target))return r()}),a.observe(p,WO),r()}let l=null,s=null,a=null,u=[],d=document.createElement("div"),h=e.registerRootListener(o);return()=>{h(),i()}}function L_(e,t){for(let n of t)if(e.type.startsWith(n))return!0;return!1}let M_=(e,t)=>{for(;e!==pe.$getRoot()&&e!=null;){if(t(e))return e;e=e.getParent()}return null};Ne.$splitNode=pe.$splitNode;Ne.isHTMLAnchorElement=pe.isHTMLAnchorElement;Ne.isHTMLElement=pe.isHTMLElement;Ne.$dfs=function(e,t){let n=[];e=(e||pe.$getRoot()).getLatest(),t=t||(pe.$isElementNode(e)?e.getLastDescendant():e);for(var r=e,i=0;(r=r.getParent())!==null;)i++;for(r=i;e!==null&&!e.is(t);)if(n.push({depth:r,node:e}),pe.$isElementNode(e)&&0<e.getChildrenSize())e=e.getFirstChild(),r++;else for(i=null;i===null&&e!==null;)i=e.getNextSibling(),i===null?(e=e.getParent(),r--):e=i;return e!==null&&e.is(t)&&n.push({depth:r,node:e}),n};Ne.$filter=function(e,t){let n=[];for(let r=0;r<e.length;r++){let i=t(e[r]);i!==null&&n.push(i)}return n};Ne.$findMatchingParent=M_;Ne.$getNearestBlockElementAncestorOrThrow=function(e){let t=M_(e,n=>pe.$isElementNode(n)&&!n.isInline());return pe.$isElementNode(t)||HO(4,e.__key),t};Ne.$getNearestNodeOfType=function(e,t){for(;e!=null;){if(e instanceof t)return e;e=e.getParent()}return null};Ne.$insertFirst=function(e,t){let n=e.getFirstChild();n!==null?n.insertBefore(t):e.append(t)};Ne.$insertNodeToNearestRoot=function(e){var t=pe.$getSelection()||pe.$getPreviousSelection();if(pe.$isRangeSelection(t)){var{focus:n}=t;if(t=n.getNode(),n=n.offset,pe.$isRootOrShadowRoot(t))n=t.getChildAtIndex(n),n==null?t.append(e):n.insertBefore(e),e.selectNext();else{let r,i;pe.$isTextNode(t)?(r=t.getParentOrThrow(),i=t.getIndexWithinParent(),0<n&&(i+=1,t.splitText(n))):(r=t,i=n),[,t]=pe.$splitNode(r,i),t.insertBefore(e),t.selectStart()}}else t!=null?(t=t.getNodes(),t[t.length-1].getTopLevelElementOrThrow().insertAfter(e)):pe.$getRoot().append(e),t=pe.$createParagraphNode(),e.insertAfter(t),t.select();return e.getLatest()};Ne.$restoreEditorState=function(e,t){let n=new Map,r=e._pendingEditorState;for(let[i,o]of t._nodeMap){let l=P_.$cloneWithProperties(o);if(pe.$isTextNode(l)){if(!pe.$isTextNode(o))throw Error("Expected node be a TextNode");l.__text=o.__text}n.set(i,l)}r&&(r._nodeMap=n),e._dirtyType=2,e=t._selection,pe.$setSelection(e===null?null:e.clone())};Ne.$wrapNodeInElement=function(e,t){return t=t(),e.replace(t),t.append(e),t};Ne.addClassNamesToElement=function(e,...t){t.forEach(n=>{typeof n=="string"&&(n=n.split(" ").filter(r=>r!==""),e.classList.add(...n))})};Ne.isMimeType=L_;Ne.markSelection=function(e,t){function n(a){a.read(()=>{var u=pe.$getSelection();if(pe.$isRangeSelection(u)){var{anchor:d,focus:h}=u;u=d.getNode();var f=u.getKey(),p=d.offset,m=h.getNode(),y=m.getKey(),_=h.offset,g=e.getElementByKey(f),v=e.getElementByKey(y);if(f=r===null||g===null||p!==i||f!==r.getKey()||u!==r&&(!(r instanceof pe.TextNode)||u.updateDOM(r,g,e._config)),y=o===null||v===null||_!==l||y!==o.getKey()||m!==o&&(!(o instanceof pe.TextNode)||m.updateDOM(o,v,e._config)),f||y){g=e.getElementByKey(d.getNode().getKey());var x=e.getElementByKey(h.getNode().getKey());if(g!==null&&x!==null&&g.tagName==="SPAN"&&x.tagName==="SPAN"){if(y=document.createRange(),h.isBefore(d)?(f=x,v=h.offset,x=g,g=d.offset):(f=g,v=d.offset,g=h.offset),f=f.firstChild,f===null||(x=x.firstChild,x===null))throw Error("Expected text node to be first child of span");y.setStart(f,v),y.setEnd(x,g),s(),s=R_(e,y,S=>{for(let C of S){let N=C.style;N.background!=="Highlight"&&(N.background="Highlight"),N.color!=="HighlightText"&&(N.color="HighlightText"),N.zIndex!=="-1"&&(N.zIndex="-1"),N.pointerEvents!=="none"&&(N.pointerEvents="none"),N.marginTop!=="-1.5px"&&(N.marginTop="-1.5px"),N.paddingTop!=="4px"&&(N.paddingTop="4px"),N.paddingBottom!=="0px"&&(N.paddingBottom="0px")}t!==void 0&&t(S)})}}r=u,i=p,o=m,l=_}else l=o=i=r=null,s(),s=()=>{}})}let r=null,i=null,o=null,l=null,s=()=>{};return n(e.getEditorState()),$_(e.registerUpdateListener(({editorState:a})=>n(a)),s,()=>{s()})};Ne.mediaFileReader=function(e,t){let n=e[Symbol.iterator]();return new Promise((r,i)=>{let o=[],l=()=>{const{done:s,value:a}=n.next();if(s)return r(o);const u=new FileReader;u.addEventListener("error",i),u.addEventListener("load",()=>{const d=u.result;typeof d=="string"&&o.push({file:a,result:d}),l()}),L_(a,t)?u.readAsDataURL(a):l()};l()})};Ne.mergeRegister=$_;Ne.objectKlassEquals=function(e,t){return e!==null?Object.getPrototypeOf(e).constructor.name===t.name:!1};Ne.positionNodeOnRange=R_;Ne.registerNestedElementResolver=function(e,t,n,r){return e.registerNodeTransform(t,i=>{e:{for(var o=i.getChildren(),l=0;l<o.length;l++)if(o[l]instanceof t){o=null;break e}for(o=i;o!==null;)if(l=o,o=o.getParent(),o instanceof t){o={child:l,parent:o};break e}o=null}if(o!==null){const{child:s,parent:a}=o;if(s.is(i)){if(r(a,i),i=s.getNextSiblings(),o=i.length,a.insertAfter(s),o!==0){l=n(a),s.insertAfter(l);for(let u=0;u<o;u++)l.append(i[u])}a.canBeEmpty()||a.getChildrenSize()!==0||a.remove()}}})};Ne.removeClassNamesFromElement=function(e,...t){t.forEach(n=>{typeof n=="string"&&e.classList.remove(...n.split(" "))})};const UO=Ne;var Zl=UO,I_={},Os=F;I_.registerDragonSupport=function(e){let t=window.location.origin,n=r=>{if(r.origin===t){var i=e.getRootElement();if(document.activeElement===i&&(i=r.data,typeof i=="string")){try{var o=JSON.parse(i)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"&&(o=o.payload)&&o.functionId==="makeChanges"&&(o=o.args)){const[l,s,a,u,d]=o;e.update(()=>{const h=Os.$getSelection();if(Os.$isRangeSelection(h)){var f=h.anchor;let p=f.getNode(),m=0,y=0;Os.$isTextNode(p)&&0<=l&&0<=s&&(m=l,y=l+s,h.setTextNodeRange(p,m,p,y)),(m!==y||a!=="")&&(h.insertRawText(a),p=f.getNode()),Os.$isTextNode(p)&&(m=u,y=u+d,f=p.getTextContentSize(),m=m>f?f:m,y=y>f?f:y,h.setTextNodeRange(p,m,p,y)),r.stopImmediatePropagation()}})}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}};const VO=I_;var KO=VO,A_={},Un={},Ph={},Ty=Uu,qO=Zl,Pi=F;function D_(e,t,n,r=null){let i=r!==null?t.isSelected(r):!0,o=Pi.$isElementNode(t)&&t.excludeFromCopy("html");var l=t;r!==null&&(l=Ty.$cloneWithProperties(t),l=Pi.$isTextNode(l)&&r!==null?Ty.$sliceSelectedTextNodeContent(r,l):l);let s=Pi.$isElementNode(l)?l.getChildren():[];var a=e._nodes.get(l.getType());a=a&&a.exportDOM!==void 0?a.exportDOM(e,l):l.exportDOM(e);let{element:u,after:d}=a;if(!u)return!1;a=document.createDocumentFragment();for(let h=0;h<s.length;h++){let f=s[h],p=D_(e,f,a,r);!i&&Pi.$isElementNode(t)&&p&&t.extractWithChild(f,r,"html")&&(i=!0)}return i&&!o?(qO.isHTMLElement(u)&&u.append(a),n.append(u),d&&(e=d.call(l,u))&&u.replaceWith(e)):n.append(a),i}let F_=new Set(["STYLE","SCRIPT"]);function z_(e,t,n=new Map,r){let i=[];if(F_.has(e.nodeName))return i;let o=null;var l,{nodeName:s}=e,a=t._htmlConversions.get(s.toLowerCase());if(s=null,a!==void 0)for(l of a)a=l(e),a!==null&&(s===null||(s.priority||0)<(a.priority||0))&&(s=a);if(s=(l=s!==null?s.conversion:null)?l(e):null,l=null,s!==null){if(l=s.after,a=s.node,o=Array.isArray(a)?a[a.length-1]:a,o!==null){for(var[,u]of n)if(o=u(o,r),!o)break;o&&i.push(...Array.isArray(a)?a:[o])}s.forChild!=null&&n.set(e.nodeName,s.forChild)}for(e=e.childNodes,r=[],u=0;u<e.length;u++)r.push(...z_(e[u],t,new Map(n),o));return l!=null&&(r=l(r)),o==null?i=i.concat(r):Pi.$isElementNode(o)&&o.append(...r),i}Ph.$generateHtmlFromNodes=function(e,t){if(typeof document>"u"||typeof window>"u")throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let n=document.createElement("div"),r=Pi.$getRoot().getChildren();for(let i=0;i<r.length;i++)D_(e,r[i],n,t);return n.innerHTML};Ph.$generateNodesFromDOM=function(e,t){t=t.body?t.body.childNodes:[];let n=[];for(let i=0;i<t.length;i++){var r=t[i];F_.has(r.nodeName)||(r=z_(r,e),r!==null&&(n=n.concat(r)))}return n};const YO=Ph;var GO=YO,B_=GO,Pf=Uu,QO=Zl,Oe=F;function by(e){let t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let H_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function W_(e){let t=Oe.$getSelection();if(t==null)throw Error("Expected valid LexicalSelection");return Oe.$isRangeSelection(t)&&t.isCollapsed()||t.getNodes().length===0?"":B_.$generateHtmlFromNodes(e,t)}function U_(e){let t=Oe.$getSelection();if(t==null)throw Error("Expected valid LexicalSelection");return Oe.$isRangeSelection(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(K_(e,t))}function $f(e,t,n){e.dispatchCommand(Oe.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,{nodes:t,selection:n})||n.insertNodes(t)}function V_(e,t,n,r=[]){let i=t!==null?n.isSelected(t):!0,o=Oe.$isElementNode(n)&&n.excludeFromCopy("html");var l=n;if(t!==null){var s=Pf.$cloneWithProperties(n);l=s=Oe.$isTextNode(s)&&t!==null?Pf.$sliceSelectedTextNodeContent(t,s):s}let a=Oe.$isElementNode(l)?l.getChildren():[];var u=l;s=u.exportJSON();var d=u.constructor;for(s.type!==d.getType()&&by(58,d.name),Oe.$isElementNode(u)&&(Array.isArray(s.children)||by(59,d.name)),Oe.$isTextNode(l)&&(l=l.__text,0<l.length?s.text=l:i=!1),l=0;l<a.length;l++)u=a[l],d=V_(e,t,u,s.children),!i&&Oe.$isElementNode(n)&&d&&n.extractWithChild(u,t,"clone")&&(i=!0);if(i&&!o)r.push(s);else if(Array.isArray(s.children))for(e=0;e<s.children.length;e++)r.push(s.children[e]);return i}function K_(e,t){let n=[],r=Oe.$getRoot().getChildren();for(let i=0;i<r.length;i++)V_(e,t,r[i],n);return{namespace:e._config.namespace,nodes:n}}function q_(e){let t=[];for(let n=0;n<e.length;n++){let r=Oe.$parseSerializedNode(e[n]);Oe.$isTextNode(r)&&Pf.$addNodeStyle(r),t.push(r)}return t}let hi=null;function Oy(e,t){var n=H_?(e._window||window).getSelection():null;if(!n)return!1;var r=n.anchorNode;if(n=n.focusNode,r!==null&&n!==null&&!Oe.isSelectionWithinEditor(e,r,n)||(t.preventDefault(),t=t.clipboardData,r=Oe.$getSelection(),t===null||r===null))return!1;n=W_(e),e=U_(e);let i="";return r!==null&&(i=r.getTextContent()),n!==null&&t.setData("text/html",n),e!==null&&t.setData("application/x-lexical-editor",e),t.setData("text/plain",i),!0}Un.$generateJSONFromSelectedNodes=K_;Un.$generateNodesFromSerializedNodes=q_;Un.$getHtmlContent=W_;Un.$getLexicalContent=U_;Un.$insertDataTransferForPlainText=function(e,t){e=e.getData("text/plain")||e.getData("text/uri-list"),e!=null&&t.insertRawText(e)};Un.$insertDataTransferForRichText=function(e,t,n){var r=e.getData("application/x-lexical-editor");if(r)try{let o=JSON.parse(r);if(o.namespace===n._config.namespace&&Array.isArray(o.nodes)){let l=q_(o.nodes);return $f(n,l,t)}}catch{}if(r=e.getData("text/html"))try{var i=new DOMParser().parseFromString(r,"text/html");let o=B_.$generateNodesFromDOM(n,i);return $f(n,o,t)}catch{}if(e=e.getData("text/plain")||e.getData("text/uri-list"),e!=null)if(Oe.$isRangeSelection(t))for(e=e.split(/(\r?\n|\t)/),e[e.length-1]===""&&e.pop(),n=0;n<e.length;n++)i=e[n],i===`
`||i===`\r
`?t.insertParagraph():i==="	"?t.insertNodes([Oe.$createTabNode()]):t.insertText(i);else t.insertRawText(e)};Un.$insertGeneratedNodes=$f;Un.copyToClipboard=async function(e,t){if(hi!==null)return!1;if(t!==null)return new Promise(l=>{e.update(()=>{l(Oy(e,t))})});var n=e.getRootElement();let r=e._window==null?window.document:e._window.document,i=H_?(e._window||window).getSelection():null;if(n===null||i===null)return!1;let o=r.createElement("span");return o.style.cssText="position: fixed; top: -1000px;",o.append(r.createTextNode("#")),n.append(o),n=new Range,n.setStart(o,0),n.setEnd(o,1),i.removeAllRanges(),i.addRange(n),new Promise(l=>{let s=e.registerCommand(Oe.COPY_COMMAND,a=>(QO.objectKlassEquals(a,ClipboardEvent)&&(s(),hi!==null&&(window.clearTimeout(hi),hi=null),l(Oy(e,a))),!0),Oe.COMMAND_PRIORITY_CRITICAL);hi=window.setTimeout(()=>{s(),hi=null,l(!1)},50),r.execCommand("copy"),o.remove()})};const JO=Un;var XO=JO,$h=XO,js=Uu,ZO=Zl,k=F;let vo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",e3=vo&&"documentMode"in document?document.documentMode:null,t3=vo&&"InputEvent"in window&&!e3?"getTargetRanges"in new window.InputEvent("input"):!1,n3=vo&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),r3=vo&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,i3=vo&&/^(?=.*Chrome).*/i.test(navigator.userAgent),o3=vo&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!i3;function Y_(e,t){t.update(()=>{if(e!==null){let n=e instanceof KeyboardEvent?null:e.clipboardData,r=k.$getSelection();if(r!==null&&n!=null){e.preventDefault();let i=$h.$getHtmlContent(t);i!==null&&n.setData("text/html",i),n.setData("text/plain",r.getTextContent())}}})}function l3(e,t){e.preventDefault(),t.update(()=>{let n=k.$getSelection(),{clipboardData:r}=e;r!=null&&k.$isRangeSelection(n)&&$h.$insertDataTransferForPlainText(r,n)},{tag:"paste"})}function s3(e,t){Y_(e,t),t.update(()=>{let n=k.$getSelection();k.$isRangeSelection(n)&&n.removeText()})}A_.registerPlainText=function(e){return ZO.mergeRegister(e.registerCommand(k.DELETE_CHARACTER_COMMAND,t=>{const n=k.$getSelection();return k.$isRangeSelection(n)?(n.deleteCharacter(t),!0):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.DELETE_WORD_COMMAND,t=>{const n=k.$getSelection();return k.$isRangeSelection(n)?(n.deleteWord(t),!0):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.DELETE_LINE_COMMAND,t=>{const n=k.$getSelection();return k.$isRangeSelection(n)?(n.deleteLine(t),!0):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.CONTROLLED_TEXT_INSERTION_COMMAND,t=>{const n=k.$getSelection();if(!k.$isRangeSelection(n))return!1;if(typeof t=="string")n.insertText(t);else{const r=t.dataTransfer;r!=null?$h.$insertDataTransferForPlainText(r,n):(t=t.data)&&n.insertText(t)}return!0},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.REMOVE_TEXT_COMMAND,()=>{const t=k.$getSelection();return k.$isRangeSelection(t)?(t.removeText(),!0):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.INSERT_LINE_BREAK_COMMAND,t=>{const n=k.$getSelection();return k.$isRangeSelection(n)?(n.insertLineBreak(t),!0):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.INSERT_PARAGRAPH_COMMAND,()=>{const t=k.$getSelection();return k.$isRangeSelection(t)?(t.insertLineBreak(),!0):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.KEY_ARROW_LEFT_COMMAND,t=>{const n=k.$getSelection();if(!k.$isRangeSelection(n))return!1;const r=t.shiftKey;return js.$shouldOverrideDefaultCharacterSelection(n,!0)?(t.preventDefault(),js.$moveCharacter(n,r,!0),!0):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.KEY_ARROW_RIGHT_COMMAND,t=>{const n=k.$getSelection();if(!k.$isRangeSelection(n))return!1;const r=t.shiftKey;return js.$shouldOverrideDefaultCharacterSelection(n,!1)?(t.preventDefault(),js.$moveCharacter(n,r,!1),!0):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.KEY_BACKSPACE_COMMAND,t=>{const n=k.$getSelection();return k.$isRangeSelection(n)?(t.preventDefault(),e.dispatchCommand(k.DELETE_CHARACTER_COMMAND,!0)):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.KEY_DELETE_COMMAND,t=>{const n=k.$getSelection();return k.$isRangeSelection(n)?(t.preventDefault(),e.dispatchCommand(k.DELETE_CHARACTER_COMMAND,!1)):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.KEY_ENTER_COMMAND,t=>{const n=k.$getSelection();if(!k.$isRangeSelection(n))return!1;if(t!==null){if((r3||n3||o3)&&t3)return!1;t.preventDefault()}return e.dispatchCommand(k.INSERT_LINE_BREAK_COMMAND,!1)},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.SELECT_ALL_COMMAND,()=>(k.$selectAll(),!0),k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.COPY_COMMAND,t=>{const n=k.$getSelection();return k.$isRangeSelection(n)?(Y_(t,e),!0):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.CUT_COMMAND,t=>{const n=k.$getSelection();return k.$isRangeSelection(n)?(s3(t,e),!0):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.PASTE_COMMAND,t=>{const n=k.$getSelection();return k.$isRangeSelection(n)?(l3(t,e),!0):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.DROP_COMMAND,t=>{const n=k.$getSelection();return k.$isRangeSelection(n)?(t.preventDefault(),!0):!1},k.COMMAND_PRIORITY_EDITOR),e.registerCommand(k.DRAGSTART_COMMAND,t=>{const n=k.$getSelection();return k.$isRangeSelection(n)?(t.preventDefault(),!0):!1},k.COMMAND_PRIORITY_EDITOR))};const a3=A_;var u3=a3,G_=wn,c3=IO,Ht=w,d3=DO,Q_=Zl,jy=Lp,f3=KO,p3=u3,Rh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Ht.useLayoutEffect:Ht.useEffect;function ky(e){return e.getEditorState().read(d3.$canShowPlaceholderCurry(e.isComposing()))}function h3(e){let[t,n]=Ht.useState(()=>ky(e));return Rh(()=>{function r(){let i=ky(e);n(i)}return r(),Q_.mergeRegister(e.registerUpdateListener(()=>{r()}),e.registerEditableListener(()=>{r()}))},[e]),t}function m3(e,t){let[n,r]=Ht.useState(()=>e.getDecorators());return Rh(()=>e.registerDecoratorListener(i=>{jy.flushSync(()=>{r(i)})}),[e]),Ht.useEffect(()=>{r(e.getDecorators())},[e]),Ht.useMemo(()=>{let i=[],o=Object.keys(n);for(let l=0;l<o.length;l++){let s=o[l],a=Ht.createElement(t,{onError:d=>e._onError(d)},Ht.createElement(Ht.Suspense,{fallback:null},n[s])),u=e.getElementByKey(s);u!==null&&i.push(jy.createPortal(a,u,s))}return i},[t,n,e])}function g3(e){Rh(()=>Q_.mergeRegister(p3.registerPlainText(e),f3.registerDragonSupport(e)),[e])}function y3({content:e}){var[t]=G_.useLexicalComposerContext();t=h3(t);let n=c3();return t?typeof e=="function"?e(n):e:null}E_.PlainTextPlugin=function({contentEditable:e,placeholder:t,ErrorBoundary:n}){let[r]=G_.useLexicalComposerContext();return n=m3(r,n),g3(r),Ht.createElement(Ht.Fragment,null,e,Ht.createElement(y3,{content:t}),n)};const v3=E_;var x3=v3,J_={},_3=wn,al=w;function Rf(){return Rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t],r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rf.apply(this,arguments)}var S3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?al.useLayoutEffect:al.useEffect;J_.ContentEditable=function({ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:n,ariaDescribedBy:r,ariaExpanded:i,ariaLabel:o,ariaLabelledBy:l,ariaMultiline:s,ariaOwns:a,ariaRequired:u,autoCapitalize:d,className:h,id:f,role:p="textbox",spellCheck:m=!0,style:y,tabIndex:_,"data-testid":g,...v}){let[x]=_3.useLexicalComposerContext(),[S,C]=al.useState(!1),N=al.useCallback(T=>{x.setRootElement(T)},[x]);return S3(()=>(C(x.isEditable()),x.registerEditableListener(T=>{C(T)})),[x]),al.createElement("div",Rf({},v,{"aria-activedescendant":S?e:void 0,"aria-autocomplete":S?t:"none","aria-controls":S?n:void 0,"aria-describedby":r,"aria-expanded":S&&p==="combobox"?!!i:void 0,"aria-label":o,"aria-labelledby":l,"aria-multiline":s,"aria-owns":S?a:void 0,"aria-readonly":S?void 0:!0,"aria-required":u,autoCapitalize:d,className:h,contentEditable:S,"data-testid":g,id:f,ref:N,role:p,spellCheck:m,style:y,tabIndex:_}))};const w3=J_;var C3=w3,Lh={},Mh={},N3=Zl,re=F;function E3(e,t,n,r,i){if(e===null||n.size===0&&r.size===0&&!i)return 0;var o=t._selection,l=e._selection;if(i)return 1;if(!(re.$isRangeSelection(o)&&re.$isRangeSelection(l)&&l.isCollapsed()&&o.isCollapsed()))return 0;i=t._nodeMap;let s=[];for(let a of n)n=i.get(a),n!==void 0&&s.push(n);for(let[a,u]of r)u&&(r=i.get(a),r===void 0||re.$isRootNode(r)||s.push(r));return s.length===0?0:1<s.length?(r=t._nodeMap,t=r.get(o.anchor.key),l=r.get(l.anchor.key),t&&l&&!e._nodeMap.has(t.__key)&&re.$isTextNode(t)&&t.__text.length===1&&o.anchor.offset===1?2:0):(t=s[0],e=e._nodeMap.get(t.__key),!re.$isTextNode(e)||!re.$isTextNode(t)||e.__mode!==t.__mode||(e=e.__text,t=t.__text,e===t)||(o=o.anchor,l=l.anchor,o.key!==l.key||o.type!=="text")?0:(o=o.offset,l=l.offset,e=t.length-e.length,e===1&&l===o-1?2:e===-1&&l===o+1?3:e===-1&&l===o?4:0))}function T3(e,t){let n=Date.now(),r=0;return(i,o,l,s,a,u)=>{let d=Date.now();if(u.has("historic"))return r=0,n=d,2;let h=E3(i,o,s,a,e.isComposing()),f=(()=>{var p=l===null||l.editor===e,m=u.has("history-push");if(!m&&p&&u.has("history-merge"))return 0;if(i===null)return 1;var y=o._selection;if(!(0<s.size||0<a.size))return y!==null?0:2;if(m===!1&&h!==0&&h===r&&d<n+t&&p)return 0;if(s.size===1){{m=Array.from(s)[0],p=i._nodeMap.get(m),m=o._nodeMap.get(m),y=i._selection;let _=o._selection,g=!1;re.$isRangeSelection(y)&&re.$isRangeSelection(_)&&(g=y.anchor.type==="element"&&y.focus.type==="element"&&_.anchor.type==="text"&&_.focus.type==="text"),p=!g&&re.$isTextNode(p)&&re.$isTextNode(m)?p.__type===m.__type&&p.__text===m.__text&&p.__mode===m.__mode&&p.__detail===m.__detail&&p.__style===m.__style&&p.__format===m.__format&&p.__parent===m.__parent:!1}if(p)return 0}return 1})();return n=d,r=h,f}}Mh.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]}};Mh.registerHistory=function(e,t,n){let r=T3(e,n);n=({editorState:l,prevEditorState:s,dirtyLeaves:a,dirtyElements:u,tags:d})=>{const h=t.current,f=t.redoStack,p=t.undoStack,m=h===null?null:h.editorState;if(h===null||l!==m){if(s=r(s,l,h,a,u,d),s===1)f.length!==0&&(t.redoStack=[],e.dispatchCommand(re.CAN_REDO_COMMAND,!1)),h!==null&&(p.push({...h}),e.dispatchCommand(re.CAN_UNDO_COMMAND,!0));else if(s===2)return;t.current={editor:e,editorState:l}}};let i=N3.mergeRegister(e.registerCommand(re.UNDO_COMMAND,()=>{let l=t.redoStack,s=t.undoStack;if(s.length!==0){let a=t.current,u=s.pop();a!==null&&(l.push(a),e.dispatchCommand(re.CAN_REDO_COMMAND,!0)),s.length===0&&e.dispatchCommand(re.CAN_UNDO_COMMAND,!1),t.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:"historic"})}return!0},re.COMMAND_PRIORITY_EDITOR),e.registerCommand(re.REDO_COMMAND,()=>{let l=t.redoStack;var s=t.undoStack;if(l.length!==0){let a=t.current;a!==null&&(s.push(a),e.dispatchCommand(re.CAN_UNDO_COMMAND,!0)),s=l.pop(),l.length===0&&e.dispatchCommand(re.CAN_REDO_COMMAND,!1),t.current=s||null,s&&s.editor.setEditorState(s.editorState,{tag:"historic"})}return!0},re.COMMAND_PRIORITY_EDITOR),e.registerCommand(re.CLEAR_EDITOR_COMMAND,()=>(t.undoStack=[],t.redoStack=[],t.current=null,!1),re.COMMAND_PRIORITY_EDITOR),e.registerCommand(re.CLEAR_HISTORY_COMMAND,()=>(t.undoStack=[],t.redoStack=[],t.current=null,e.dispatchCommand(re.CAN_REDO_COMMAND,!1),e.dispatchCommand(re.CAN_UNDO_COMMAND,!1),!0),re.COMMAND_PRIORITY_EDITOR),e.registerUpdateListener(n)),o=e.registerUpdateListener(n);return()=>{i(),o()}};const b3=Mh;var O3=b3,j3=wn,Lf=O3,Py=w;function k3(e,t,n=1e3){let r=Py.useMemo(()=>t||Lf.createEmptyHistoryState(),[t]);Py.useEffect(()=>Lf.registerHistory(e,r,n),[n,e,r])}Lh.createEmptyHistoryState=Lf.createEmptyHistoryState;Lh.HistoryPlugin=function({externalHistoryState:e}){let[t]=j3.useLexicalComposerContext();return k3(t,e),null};const P3=Lh;var $3=P3,X_={},R3=wn,$y=w,L3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?$y.useLayoutEffect:$y.useEffect;X_.OnChangePlugin=function({ignoreHistoryMergeTagChange:e=!0,ignoreSelectionChange:t=!1,onChange:n}){let[r]=R3.useLexicalComposerContext();return L3(()=>{if(n)return r.registerUpdateListener(({editorState:i,dirtyElements:o,dirtyLeaves:l,prevEditorState:s,tags:a})=>{t&&o.size===0&&l.size===0||e&&a.has("history-merge")||s.isEmpty()||n(i,r,a)})},[r,e,t,n]),null};const M3=X_;var I3=M3,ul=w;function Mf(e,t){return Mf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Mf(e,t)}function A3(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Mf(e,t)}function D3(e,t){return e===void 0&&(e=[]),t===void 0&&(t=[]),e.length!==t.length||e.some(function(n,r){return!Object.is(n,t[r])})}var Ry={error:null},F3=function(e){function t(){for(var r,i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=e.call.apply(e,[this].concat(o))||this,r.state=Ry,r.resetErrorBoundary=function(){for(var s,a=arguments.length,u=Array(a),d=0;d<a;d++)u[d]=arguments[d];r.props.onReset==null||(s=r.props).onReset.apply(s,u),r.reset()},r}A3(t,e),t.getDerivedStateFromError=function(r){return{error:r}};var n=t.prototype;return n.reset=function(){this.setState(Ry)},n.componentDidCatch=function(r,i){var o,l;(o=(l=this.props).onError)==null||o.call(l,r,i)},n.componentDidUpdate=function(r,i){var o=this.props.resetKeys;if(this.state.error!==null&&i.error!==null&&D3(r.resetKeys,o)){var l,s;(l=(s=this.props).onResetKeysChange)==null||l.call(s,r.resetKeys,o),this.reset()}},n.render=function(){var r=this.state.error,i=this.props,o=i.fallbackRender,l=i.FallbackComponent;if(i=i.fallback,r!==null){if(r={error:r,resetErrorBoundary:this.resetErrorBoundary},ul.isValidElement(i))return i;if(typeof o=="function")return o(r);if(l)return ul.createElement(l,r);throw Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(ul.Component),z3=function({children:e,onError:t}){return ul.createElement(F3,{fallback:ul.createElement("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"}},"An error was thrown."),onError:t},e)};const B3=z3;var H3=B3;const W3=io(H3);class qe extends F.ElementNode{constructor(n,r){super(n);Bh(this,"actionId");this.actionId=r}static getType(){return"action"}static clone(n){return new qe(n.__key,n.actionId)}getActionId(){return this.actionId}createDOM(){const n=document.createElement("div");return n.className=`action paragraph action-${this.actionId??"prompt"}`,n}updateDOM(){return!1}static importJSON(n){const r=U3();return r.setFormat(n.format),r.setIndent(n.indent),r.setDirection(n.direction),r}exportJSON(){return{...super.exportJSON(),type:"paragraph",version:1}}isInline(){return!1}}function Z_(e){return(e==null?void 0:e.getType())==="action"}function U3(e){return F.$applyNodeReplacement(new qe(void 0,e))}class xo extends F.ElementNode{static getType(){return"story"}static clone(t){return new xo(t.__key)}createDOM(){const t=document.createElement("p");return t.className="story",t}isShadowRoot(){return!0}updateDOM(){return!1}static importJSON(t){const n=V3();return n.setFormat(t.format),n.setIndent(t.indent),n.setDirection(t.direction),n}exportJSON(){return{...super.exportJSON(),type:"paragraph",version:1}}isInline(){return!1}}function V3(){return F.$applyNodeReplacement(new xo)}function ro(){return F.$nodesOfType(xo)[0]}function If(e){return(e==null?void 0:e.getType())==="story"}const K3=e=>t=>{var u,d,h,f,p;const{koboldConfig:n,lastNodeCount:r,loadState:i,sequenceNumbers:o}=tt.getState().config;if((u=n.system)!=null&&u.aibusy)return;const l=((d=n.story)==null?void 0:d.actions)||[],[s]=Pe("story_prompt_wi_highlighted_text",o),a=((p=(f=(h=n.story)==null?void 0:h.prompt_wi_highlighted_text)==null?void 0:f[0])==null?void 0:p.text)||"";t.read(()=>{var x;const m=F.$getSelection(),y=F.$nodesOfType(qe).filter(S=>If(S.getParent())),_=((x=m==null?void 0:m.getNodes()[0].getTopLevelElement())==null?void 0:x.getIndexWithinParent())||0,g=Math.max(_,0);typeof g<"u"&&[-1,1].forEach(S=>{var C;for(let N=g;N<Math.max(r,y.length)&&N>=0;N+=S){const T=N===g;if(S===-1&&T)continue;const b=y[N],A=b==null?void 0:b.getActionId(),M=l.find($e=>$e.id===A),K=((C=b==null?void 0:b.getLatest())==null?void 0:C.getTextContent())||"";if(N===0){if(!i.prompt)continue;K!==a&&(e==null||e.varChange("story_prompt",K,s+1),tt.dispatch(X({key:"story_prompt_wi_highlighted_text",sequenceNumber:s+1})))}else{if(!l.length)continue;const $e=M==null?void 0:M.id,_t=M==null?void 0:M.action["Selected Text"];if(K.length&&K===_t&&!T)break;if(typeof _t<"u"&&K!==_t){const[Vn]=Pe("story_actions",o,$e);e==null||e.setSelectedText($e,K,Vn+1),tt.dispatch(X({key:"story_actions",sequenceNumber:Vn+1,actionId:$e}))}}}});const v=new Set(l.filter(S=>!y.find(C=>C.getActionId()===S.id)&&S.action["Selected Text"].length>0).map(S=>S.id));v.size&&i.actions&&i.prompt&&v.forEach(S=>{const[C]=Pe("story_actions",o,S);e==null||e.setSelectedText(S,"",C)}),tt.dispatch(lb(y.length))})};class es extends F.ParagraphNode{static getType(){return"tempreinsert"}static clone(t){return new es(t.__key)}createDOM(){const t=document.createElement("p");return t.className="action temp-action paragraph",t}updateDOM(){return!1}static importJSON(t){const n=eS();return n.setFormat(t.format),n.setIndent(t.indent),n.setDirection(t.direction),n}exportJSON(){return{...super.exportJSON(),type:"tempreinsert",version:1}}isInline(){return!0}exportDOM(t){const{element:n}=super.exportDOM(t);if(n instanceof HTMLElement){const r=this.getFormatType();n.style.textAlign=r;const i=this.getIndent();i>0&&(n.style.textIndent=`${i*20}px`)}return{element:n,after:r=>r}}}function eS(){return F.$applyNodeReplacement(new es)}function q3(e){return(e==null?void 0:e.getType())==="tempreinsert"}class _o extends F.ParagraphNode{static getType(){return"tempstream"}static clone(t){return new _o(t.__key)}createDOM(){const t=document.createElement("p");return t.className="action temp-action paragraph",t}updateDOM(){return!1}static importJSON(t){const n=tS();return n.setFormat(t.format),n.setIndent(t.indent),n.setDirection(t.direction),n}exportJSON(){return{...super.exportJSON(),type:"tempstream",version:1}}isInline(){return!0}exportDOM(t){const{element:n}=super.exportDOM(t);if(n instanceof HTMLElement){const r=this.getFormatType();n.style.textAlign=r;const i=this.getIndent();i>0&&(n.style.textIndent=`${i*20}px`)}return{element:n,after:r=>r}}}function tS(){return F.$applyNodeReplacement(new _o)}function Y3(e){return(e==null?void 0:e.getType())==="tempstream"}const G3=()=>{const e=F.$nodesOfType(qe),n=e.filter(i=>i.getTextContentSize()>0)[0]||e[0],r=ro().getChildren().filter(i=>!Z_(i)&&!q3(i)&&!Y3(i));r.length&&r.forEach(i=>{const o=i.getPreviousSiblings().filter(u=>u.getType()==="action"&&(u.getTextContentSize()||u.getIndexWithinParent()===0&&!F.$getRoot().getTextContentSize()))[0],l=i.getNextSiblings().filter(u=>u.getType()==="action"&&(u.getTextContentSize()||u.getIndexWithinParent()===0&&!F.$getRoot().getTextContentSize()))[0],s=i.getIndexWithinParent()<((n==null?void 0:n.getIndexWithinParent())||0),a=s?l:o;a==null||a.splice(s?0:a.getChildrenSize(),0,[i])})},Q3=(e,t,n,r)=>{t.payload===!0&&e.update(()=>{var o;n(lh(!1));const{reinsertHistory:i}=tt.getState().config;if(i!==null){const l=F.$createRangeSelection(),u=(i.anchor.isAction?ro():ro().getChildAtIndex(i.anchor.parentIdx)).getChildAtIndex(i.anchor.nodeIdx),d=!F.$isTextNode(u),h=u.getKey(),f=i.anchor.offset;(o=l==null?void 0:l.anchor)==null||o.set(h,f,d?"element":"text");const p=F.$nodesOfType(F.TextNode).pop();p&&l.focus.set(p.getKey(),p==null?void 0:p.getTextContentSize(),F.$isLineBreakNode(p)?"element":"text"),l.removeText(),n(Tu(i.reinsertQueue))}else r==null||r.retry()})},J3=(e,t)=>{var n,r;if(e.payload===!0){t(oh(!1));const i=F.$getSelection(),o=F.$nodesOfType(qe).filter(s=>s.getTextContentSize()>0).pop(),l=o==null?void 0:o.getAllTextNodes().pop();if(l&&F.$isRangeSelection(i)){const s=i==null?void 0:i.clone(),a=i.anchor.getNode();s.setTextNodeRange(a,s.anchor.offset,l,l.getTextContentSize());const u=s.getNodes(),d=u.filter(v=>v.getType()==="text"),h=u.findIndex(v=>v.getType()==="text"),f=u.slice(0,h).filter(v=>v.getType()==="linebreak"),p=i==null?void 0:i.clone(),m=(n=a.getTopLevelElement())==null?void 0:n.getAllTextNodes().pop(),y=m.getNextSiblings();p.setTextNodeRange(a,p.anchor.offset,m,(m==null?void 0:m.getTextContentSize())||0);const _=p.getTextContent()+y.map(v=>v.getTextContent()).join(""),g=s.getNodes().reduce((v,x,S)=>{const C=x.getTopLevelElement();return(C==null?void 0:C.getType())==="action"?v.some(N=>N.key===C.getActionId())?v:[...v,{key:C.getActionId(),text:S===0?_:C.getTextContent()}]:v},[]);t(sh({reinsertQueue:g,anchor:{parentIdx:((r=a.getParent())==null?void 0:r.getIndexWithinParent())||0,nodeIdx:a.getIndexWithinParent(),offset:s.anchor.offset,isAction:Z_(a)}})),f.length>0&&(f.forEach(v=>{v.remove()}),d.length>0&&s.setTextNodeRange(d[0],0,l,l.getTextContentSize())),s.removeText(),t(Tu(g))}}},X3=e=>{F.$nodesOfType(qe).forEach((t,n)=>{n!==0&&t.remove()}),e(sh(null))},Z3=(e,t,n,r,i)=>{var p,m,y,_,g;const{audioOutEnabled:o,koboldConfig:l,ghostpadConfig:s,utteranceStart:a}=tt.getState().config,u=(p=l.story)==null?void 0:p.chatmode,d=(m=l.story)==null?void 0:m.chatname,h=(y=l.story)==null?void 0:y.botname,f=typeof((_=t.model)==null?void 0:_.numseqs)=="number"&&t.model.numseqs>1;if(e.payload.value===!0){const v=(((g=t.story)==null?void 0:g.actions)||[]).filter(x=>x.action["Selected Text"].length>0);if(i(Vg(v.length+1)),f){const x=v==null?void 0:v[v.length-1];i(me({name:"selectOption",data:{actionId:x?x.id+1:0}}))}r.setEditable(!1)}else{r.setEditable(!0);const v=F.$nodesOfType(qe).filter(T=>T.getTextContentSize()>0),x=v.length-1,S=v[x],C=S==null?void 0:S.getActionId(),N=(S==null?void 0:S.getTextContent())||"";if(o&&a!==null&&x>=a){const T=u?N.replace(`${d}:`,"").replace(`${h}:`,""):N,b=new SpeechSynthesisUtterance(T);i(Kg(!0));const M=typeof window<"u"&&"speechSynthesis"in window?speechSynthesis.getVoices():[];if(s!=null&&s.speechSynthesisVoice){const K=M.find($e=>$e.voiceURI===s.speechSynthesisVoice);K&&(b.voice=K)}speechSynthesis.speak(b),b.addEventListener("end",()=>{i(Kg(!1))})}if(i(Ou()),i(Vg(null)),n.length){const T=n[n.length-1].key;if(typeof C=="number"&&C>(T||0)){S==null||S.clear();const b=v.pop();b==null||b.append(new F.TextNode(N))}n.forEach(b=>{const A=F.$nodesOfType(qe).pop(),M=new F.TextNode(b.text);A==null||A.append(M)}),i(Tu([]))}else i(sh(null))}},ej=(e,t)=>{const n=new qe(void 0,e);n.append(new F.TextNode(t));const r=F.$nodesOfType(qe).filter(i=>(i.getActionId()??0)<(e??0)).pop()||ro().getFirstChild();return r==null||r.insertAfter(n),n},Ih=e=>{const t=[],n=/(:?\r\n|\r|\n)/g;return e.split(n).forEach(i=>{if(i==="")return;if(n.test(i)){const l=F.$createLineBreakNode();t.push(l);return}const o=F.$createTextNode(i);t.push(o)}),t},tj=(e,t)=>{const n=e.payload.value,r=Array.isArray(n),i=r?n:[n];i.forEach(l=>{var m;const s=Number(l.id),a=((m=l.action)==null?void 0:m["Selected Text"])||"",u=F.$nodesOfType(qe).find(y=>{const _=If(y.getParent()),g=y.getActionId()===s;return _&&g});if(!a){u&&u.remove();return}const d=u==null?void 0:u.getLatest().getTextContent();if(a===d)return;const h=u||ej(s,a),f=Ih(a),p=h.getChildren();if((p==null?void 0:p.length)>f.length)for(let y=0;y<p.length-f.length;y++)p[f.length+y].remove();tt.dispatch(Ou()),f.forEach((y,_)=>{var g,v,x;p[_]?p[_].getType()!==y.getType()?(p[_].replace(y),(v=t.getElementByKey(y.getKey()))==null||v.scrollIntoView()):p[_].getTextContent()!==y.getTextContent()&&(p[_].setTextContent(y.getTextContent()),(x=t.getElementByKey(p[_].getKey()))==null||x.scrollIntoView()):(h.append(y),(g=t.getElementByKey(y.getKey()))==null||g.scrollIntoView())})});const o=F.$nodesOfType(qe).filter(l=>If(l.getParent()));r&&o.length>i.length+1&&ib(i.length+1,o.length).forEach(l=>{o[l].remove()})},nj=(e,t)=>{var l,s,a;const n=((s=(l=e.story)==null?void 0:l.prompt_wi_highlighted_text)==null?void 0:s[0].text)||"",r=Ih(n),i=ro(),o=F.$nodesOfType(qe).filter(u=>i.isParentOf(u))[0];o instanceof qe&&n!==(o==null?void 0:o.getLatest().getTextContent())&&(o.clear(),tt.dispatch(Ou()),o.append(...r),(a=t.getElementByKey(o.getKey()))==null||a.scrollIntoView())},rj=(e,t,n)=>{const{koboldConfig:r,reinsertQueue:i}=tt.getState().config,o=t.payload.classname==="story"&&t.payload.name==="actions",l=t.payload.classname==="story"&&t.payload.name==="prompt_wi_highlighted_text";t.payload.classname==="system"&&t.payload.name==="aibusy"&&Z3(t,r,i,e,n),!(l&&t.payload.old_value!==null)&&(o?tj(t,e):l&&nj(r,e))},ij=(e,t)=>{var r;const n=e.payload;if(F.$nodesOfType(es).forEach(i=>{i.remove()}),n.forEach(i=>{const o=eS(),l=Ih(i.text);o.append(...l),ro().append(o)}),n.length){const i=((r=document.querySelector("#user-input"))==null?void 0:r.textContent)||"";setTimeout(()=>{t==null||t.submit(i)},0)}},oj=()=>{F.$nodesOfType(_o).forEach(t=>{t.remove()})},lj=e=>{var l;const{koboldConfig:t}=tt.getState().config;if(!((l=t.system)!=null&&l.aibusy))return;const n=e.payload;if(!(n!=null&&n.length))return;const r=n.map(s=>{const a=tS(),u=F.$createTextNode(s);return a.append(u),a}),i=F.$nodesOfType(_o),[o]=i.length?i.slice(-1):F.$nodesOfType(qe).slice(-1);o==null||o.append(...r)},Ly=()=>{let e=document.getElementById("report-container");return e===null&&(e=document.createElement("div"),e.id="report-container",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.fontSize="32px",e.style.transform="translate(-50%, -50px)",e.style.padding="20px",e.style.background="rgba(240, 240, 240, 0.4)",e.style.borderRadius="20px",document.body&&document.body.appendChild(e)),e};function sj(){const e=w.useRef(null),t=w.useCallback(()=>{e!==null&&clearTimeout(e.current),document.body&&document.body.removeChild(Ly())},[]);return w.useEffect(()=>t,[t]),w.useCallback(n=>{const r=Ly();return clearTimeout(e.current),r.innerHTML=n,e.current=setTimeout(t,1e3),e.current},[t])}const nS=F.createCommand("SPEECH_TO_TEXT_COMMAND"),aj="SpeechRecognition"in window||"webkitSpeechRecognition"in window;function uj(){const[e]=wn.useLexicalComposerContext(),[t,n]=w.useState(!1),r=w.useContext(Q),i=window.SpeechRecognition||window.webkitSpeechRecognition,o=w.useRef(null),l=sj(),s=z(a=>a.config.utteranceInProgress);return w.useEffect(()=>{const a=u=>{const d=u.results.item(u.resultIndex),{transcript:h}=d.item(0);s||(l(h),d.isFinal&&e.update(()=>{const f=F.$getSelection();F.$isRangeSelection(f)&&(r==null||r.submit(h+`
`))}))};return t&&o.current===null&&(o.current=new i,o.current.continuous=!0,o.current.interimResults=!0,o.current.addEventListener("result",a)),o.current&&(t?o.current.start():o.current.stop()),()=>{var u;o.current!==null&&o.current.stop(),(u=o.current)==null||u.removeEventListener("result",a),o.current=null}},[i,e,t,l,s,r]),w.useEffect(()=>e.registerCommand(nS,a=>(n(a),!0),F.COMMAND_PRIORITY_EDITOR),[e]),null}const cj=aj?uj:()=>null,dj=()=>{const[e]=wn.useLexicalComposerContext(),t=q(),n=w.useContext(Q);return w.useEffect(()=>{const r=e.registerMutationListener(xo,()=>{e.update(G3)}),i=Zt.startListening({actionCreator:lh,effect:p=>{Q3(e,p,t,n)}}),o=Zt.startListening({actionCreator:oh,effect:p=>{e.update(()=>{J3(p,t)})}}),l=Zt.startListening({actionCreator:rx,effect:()=>{e.update(()=>{X3(t)})}}),s=Zt.startListening({actionCreator:lx,effect:p=>{e.update(()=>{lj(p)})}}),a=Zt.startListening({actionCreator:Ou,effect:()=>{e.update(()=>{oj()})}}),u=Zt.startListening({actionCreator:bu,effect:p=>{e.update(()=>{rj(e,p,t)})}}),d=Zt.startListening({actionCreator:Tu,effect:p=>{e.update(()=>{ij(p,n)})}}),h=Zt.startListening({actionCreator:ix,effect:p=>{e.dispatchCommand(nS,p.payload)}}),{socketState:f}=tt.getState().connection;return f===Ut.LOADING&&t(tl({socketState:Ut.READY_TO_CONNECT})),()=>{s(),a(),r(),d(),u(),o(),i(),l(),h()}},[e,t,n]),null},My=(e,t)=>[...e.matchAll(new RegExp(t,"gi"))];function fj(e,t){var i,o,l;const n=e.getTextContent();return(i=t.story)!=null&&i.chatname&&t.story.botname&&((e==null?void 0:e.getStyle())==="font-weight:600;"&&n!==((o=t.story)==null?void 0:o.chatname)+":"&&n!==((l=t.story)==null?void 0:l.botname)+":"&&e.setStyle(""),[...My(n,t.story.botname+":"),...My(n,t.story.chatname+":")].forEach(s=>{const{index:a}=s,u=s[0].length;if(typeof u>"u")return;let d;a===0?[d]=e.splitText(a+u):a&&([,d]=e.splitText(a,a+u)),(d==null?void 0:d.getStyle())!=="font-weight:600;"&&(d==null||d.setStyle("font-weight:600;"))})),null}function pj(e){return t=>{let n=t;for(;n!==null;){if(!n.isSimpleText())return;n=fj(n,e)}}}function hj(e,t){var n,r,i;w.useEffect(()=>{var l;return(l=t.story)!=null&&l.chatmode?e.registerNodeTransform(F.TextNode,pj(t)):void 0},[e,(n=t.story)==null?void 0:n.chatmode,(r=t.story)==null?void 0:r.chatname,(i=t.story)==null?void 0:i.botname])}function mj(){const e=z(n=>n.config.koboldConfig),[t]=wn.useLexicalComposerContext();return hj(t,e),null}const gj={root:"min-h-full p-4 editor-root",ltr:"ltr",rtl:"rtl",placeholder:"editor-placeholder",paragraph:"paragraph"},yj=`{
    "root": {
      "children": [
        {
          "children":[
            {
              "children":[],
              "direction":null,
              "format":"",
              "indent":0,
              "type":"action",
              "version":1
            }
          ],
          "direction":null,
          "format":"",
          "indent":0,
          "type":"story",
          "version":1
        }
      ],
      "direction":null,
      "format":"",
      "indent":0,
      "type":"root",
      "version":1
    }
  }`;function vj(e){console.error(e)}const xj={namespace:"KoboldEditor",editorState:yj,editable:!0,theme:gj,onError:vj,nodes:[qe,xo,es,_o]};function _j(){const e=w.useContext(Q);return c.jsx("div",{className:"overflow-auto flex-1 bg-base-200",children:c.jsxs(EO.LexicalComposer,{initialConfig:xj,children:[c.jsx(x3.PlainTextPlugin,{contentEditable:c.jsx(C3.ContentEditable,{}),placeholder:c.jsx(c.Fragment,{}),ErrorBoundary:W3}),c.jsx(I3.OnChangePlugin,{onChange:K3(e)}),c.jsx(jO.ClearEditorPlugin,{}),c.jsx($3.HistoryPlugin,{}),c.jsx(dj,{}),c.jsx(cj,{}),c.jsx(mj,{})]})})}const Sj=()=>{const[e,t]=w.useState(!1),n=z(r=>r.worldInfo.storyCommentary);return w.useEffect(()=>{n&&t(!0)},[n]),!n||!e?null:c.jsxs("div",{className:"commentary-box p-4 flex",children:[c.jsxs("div",{className:"mr-4",children:[n.who,": ",n.review]}),c.jsx("button",{className:"btn btn-neutral",onClick:()=>{t(!1)},children:c.jsx(co,{size:"1.5em"})})]})};function wj(e){return V({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 0 0-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM632 577c0 3.8-3.4 7-7.5 7H540v84.9c0 3.9-3.2 7.1-7 7.1h-42c-3.8 0-7-3.2-7-7.1V584h-84.5c-4.1 0-7.5-3.2-7.5-7v-42c0-3.8 3.4-7 7.5-7H484v-84.9c0-3.9 3.2-7.1 7-7.1h42c3.8 0 7 3.2 7 7.1V528h84.5c4.1 0 7.5 3.2 7.5 7v42z"}}]})(e)}function Cj(e){return V({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 0 0-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"}}]})(e)}function Nj(e){return V({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 0 0-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32z"}}]})(e)}function Ej(e){return V({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L534.6 93.4a31.93 31.93 0 0 0-45.2 0L77.5 505c-12 12-18.8 28.3-18.8 45.3 0 35.3 28.7 64 64 64h43.4V908c0 17.7 14.3 32 32 32H448V716h112v224h265.9c17.7 0 32-14.3 32-32V614.3h43.4c17 0 33.3-6.7 45.3-18.8 24.9-25 24.9-65.5-.1-90.5z"}}]})(e)}function Tj(e){return V({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1a110.96 110.96 0 0 0-79.1-32.8zm412.3 235.5l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9a32.03 32.03 0 0 0 9.3-35.2l-.9-2.6a442.5 442.5 0 0 0-79.6-137.7l-1.8-2.1a32.12 32.12 0 0 0-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9a32.05 32.05 0 0 0-25.8-25.7l-2.7-.5c-52-9.4-106.8-9.4-158.8 0l-2.7.5a32.05 32.05 0 0 0-25.8 25.7l-15.8 85.3a353.44 353.44 0 0 0-98.9 57.3l-81.8-29.1a32 32 0 0 0-35.1 9.5l-1.8 2.1a445.93 445.93 0 0 0-79.6 137.7l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5a32.03 32.03 0 0 0-9.3 35.2l.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1a32.12 32.12 0 0 0 35.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3a32.05 32.05 0 0 0 25.8 25.7l2.7.5a448.27 448.27 0 0 0 158.8 0l2.7-.5a32.05 32.05 0 0 0 25.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9a32 32 0 0 0 35.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l.9-2.6c4.3-12.4.6-26.3-9.5-35zm-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"}}]})(e)}function Qt(){let e,t="",n=0;for(;n<arguments.length;)(e=arguments[n++])&&typeof e=="string"&&(t&&(t+=" "),t+=e);return t}var Or=(e=>(e.LoadStory="Home.LoadStory",e.LoadModel="Home.LoadModel",e))(Or||{});const oi=({children:e,onClick:t,className:n="",innerClassName:r=""})=>c.jsx("li",{className:n,children:c.jsx("a",{className:Qt("px-6 py-3",r),onClick:t,children:e})}),bj=()=>{const e=q(),t=w.useCallback(async()=>{const a=await(await fetch("https://huggingface.co/api/models?filter=text-generation&limit=30&sort=downloads&config=true&direction=-1")).json();e(db(a))},[e]),n=w.useContext(Q),[r,i,o]=z(s=>[s.ui.sidebarState.hfDefaultResults,s.ui.sidebarState.hfSearchResults,s.ui.sidebarState.selectedModel]);w.useEffect(()=>{n==null||n.selectModel({...Fa,id:"customhuggingface",label:"Load custom model from Hugging Face",name:"customhuggingface",plugin:void 0}),r!=null&&r.length||t()},[e,t,r==null?void 0:r.length,n]);const l=i||r;return c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"px-6 py-3 font-bold text-center",children:"Hugging Face Models"}),c.jsx("ul",{className:"menu menu-md p-0",children:c.jsxs(oi,{onClick:()=>{e(ah(Or.LoadModel)),e(yr(null))},children:[c.jsx(ku,{className:"inline",size:"1.5em"}),"Back"]})}),c.jsx("div",{className:"flex flex-col px-6",children:c.jsx("input",{type:"text",className:"input input-bordered input-md bg-base-200 my-2",placeholder:"Search Hugging Face",onChange:dh(async s=>{const a=s.target.value;if(a.length){const d=await(await fetch(`https://huggingface.co/api/models?filter=text-generation&sort=downloads&config=true&direction=-1&search=${a}`)).json();e(Yg(d))}else e(Yg(null))},500)})}),c.jsx("div",{className:"relative flex-grow",children:c.jsx("ul",{className:"menu menu-md p-0 flex-grow absolute inset-0 flex-nowrap overflow-y-auto",children:!!l&&l.map(s=>{var a;return c.jsx("li",{children:c.jsxs("div",{className:Qt((o==null?void 0:o.label)===s.modelId&&"active","flex flex-row break-all px-6"),onClick:u=>{const d=u.currentTarget.querySelector("a");d!=null&&d.contains(u.target)||((o==null?void 0:o.label)===s.modelId?e(yr(null)):(e(yr({...Af,label:s.modelId,name:"customhuggingface"})),n==null||n.resubmitModelInfo({...Fa,custom_model_name:s.modelId,id:"customhuggingface",label:"Load custom model from Hugging Face",name:"customhuggingface",plugin:"Huggingface",valid_backends:["Huggingface"]})))},children:[c.jsx("div",{className:"flex-grow",children:c.jsxs("div",{className:"block",children:[c.jsx("div",{children:s.modelId}),c.jsx("div",{className:"m-2 ml-0",children:c.jsx("span",{className:"text-gray-800 text-xs bg-gray-200 rounded-md px-2 py-1",children:((a=s.config)==null?void 0:a.model_type)||"Unknown"})})]})}),c.jsx("a",{className:"btn",href:`https://huggingface.co/${s.modelId}`,target:"_blank",rel:"noreferrer",children:c.jsx(Hb,{size:"1.5em"})})]})},s.id)})})})]})},Oj=()=>{const e=w.useContext(Q),t=q(),{localModels:n,selectedModel:r}=z(i=>({localModels:i.ui.sidebarState.localModels,selectedModel:i.ui.sidebarState.selectedModel}),cn);return w.useEffect(()=>{e==null||e.selectModel({class:"model",id:"NeoCustom",ismenu:"true",label:"Load a model from its directory",menu:"mainmenu",name:"NeoCustom",path:"./models",size:"",isdirectory:"true",isdownloaded:"false"})},[e]),c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"px-6 py-3 font-bold text-center",children:"Load Local Model"}),c.jsx("ul",{className:"menu menu-md p-0",children:c.jsxs(oi,{onClick:()=>{t(ah(Or.LoadModel)),t(yr(null))},children:[c.jsx(ku,{className:"inline",size:"1.5em"}),"Back"]})}),c.jsxs("div",{className:"relative flex-grow overflow-y-auto min-h-[128px]",children:[!(n!=null&&n.length)&&c.jsx("div",{className:"text-center mt-6",children:"No models found."}),!!(n!=null&&n.length)&&c.jsx("ul",{className:"menu menu-md flex-grow inset-0 flex-nowrap",children:n==null?void 0:n.map(i=>c.jsx("li",{onClick:()=>{(r==null?void 0:r.name)===i.name?t(yr(null)):(t(yr(i)),e==null||e.selectModel({class:"model",id:i.name,ismenu:"false",label:i.label,menu:i.menu,name:i.name,path:i.path,size:""}))},children:c.jsx("a",{className:Qt((r==null?void 0:r.label)===i.label&&"active"),children:i.name})},i.label))})]})]})};var Dl=(e=>(e.Local="Home.LoadModel.Local",e.HuggingFace="Home.LoadModel.HuggingFace",e))(Dl||{});const Ki=({subsection:e,children:t})=>{const n=q();return c.jsx(oi,{onClick:()=>n(ah(e)),children:t})},Af={isMenu:!1,isDirectory:!1,isDownloaded:!1,label:"Read-Only (No AI)",menu:"mainmenu",name:"ReadOnly",size:""},Fa={class:"model",id:"ReadOnly",isdirectory:"false",isdownloaded:"false",ismenu:"false",label:"Read-Only (No AI)",menu:"mainmenu",name:"ReadOnly",plugin:"Read Only",size:""},jj=()=>{const e=z(i=>i.ui.sidebarState.selectedModel),t=q(),n=w.useContext(Q),r=()=>{e===Af?t(yr(null)):(t(yr(Af)),n==null||n.selectModel(Fa))};return c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"px-6 py-3 font-bold text-center",children:"Load Model"}),c.jsxs("ul",{className:"menu menu-md p-0 flex-grow",children:[c.jsxs(Ki,{subsection:null,children:[c.jsx(ku,{className:"inline",size:"1.5em"}),"Main Menu"]}),c.jsx(Ki,{subsection:Dl.Local,children:"Local Model"}),c.jsx(Ki,{subsection:Dl.HuggingFace,children:"Hugging Face"}),c.jsx(oi,{onClick:r,innerClassName:(e==null?void 0:e.name)==="ReadOnly"?"active":"",children:"Read-Only (No AI)"})]})]})},kj=()=>{const{selectedModel:e,selectedModelBackends:t,selectedSubsection:n,aibusy:r}=z(h=>{var f,p;return{selectedModel:h.ui.sidebarState.selectedModel,selectedModelBackends:h.ui.sidebarState.selectedModelBackends,selectedSubsection:h.ui.sidebarState.selectedSubsection,aibusy:((p=(f=h.config.koboldConfig)==null?void 0:f.system)==null?void 0:p.aibusy)||!1}},cn),[i,o]=w.useState(null),[l,s]=w.useState({}),a=i!==null?t==null?void 0:t[i]:null,u=Object.entries(l).reduce((h,[f,p])=>a!=null&&a.layerSliders.includes(f)?h+Number(p):h,0),d=w.useContext(Q);return w.useEffect(()=>{(t==null?void 0:t.length)>0?(o(0),s(t[0].loadParameterControls.reduce((h,f)=>({...h,[f.id]:f.default}),{}))):(s({}),o(null))},[t]),c.jsxs("div",{className:"flex flex-col flex-grow overflow-y-auto",children:[n===Or.LoadModel&&c.jsx(jj,{}),n===Dl.Local&&c.jsx(Oj,{}),n===Dl.HuggingFace&&c.jsx(bj,{}),c.jsxs("div",{className:"border-t border-neutral drop-shadow",children:[a&&e&&c.jsx("div",{className:Qt(!!a.loadParameterControls.length&&"mt-2 px-6 py-3"),children:e&&a.loadParameterControls.map(h=>{var f;return c.jsxs(w.Fragment,{children:[h.uitype==="slider"&&c.jsxs("div",{className:"flex flex-col mb-2",children:[c.jsxs("div",{className:"flex justify-between mb-2",children:[c.jsx("span",{className:"text-sm",children:h.label}),c.jsx("span",{className:"text-sm",children:l[h.id]})]}),c.jsx("input",{type:"range",min:0,max:h.max,className:"range range-primary",onChange:p=>{s({...l,[h.id]:parseInt(p.target.value)})},value:l[h.id]})]}),h.uitype==="toggle"&&c.jsxs("div",{className:"inline-flex flex-col w-1/2 mb-2",children:[c.jsx("div",{className:"flex mb-2",children:c.jsx("span",{className:"text-sm",children:h.label})}),c.jsx("input",{type:"checkbox",className:"toggle",onChange:p=>{s({...l,[h.id]:p.target.checked})},checked:l[h.id]})]}),h.uitype==="dropdown"&&c.jsxs("div",{className:"flex flex-col mb-2",children:[c.jsx("div",{className:"flex mb-2",children:c.jsx("span",{className:"text-sm",children:h.label})}),c.jsx("select",{className:"select select-bordered",value:l[h.id]||"",onChange:p=>{s({...l,[h.id]:p.target.value})},children:(f=h.children)==null?void 0:f.map(p=>c.jsx("option",{value:p.value,children:p.text},p.value))})]})]},h.id)})}),c.jsxs("div",{className:"text-right px-6 py-3",children:[e&&(t==null?void 0:t.length)>0&&c.jsx("select",{value:i||0,disabled:(t==null?void 0:t.length)===1,onChange:h=>{const f=parseInt(h.target.value);o(f),s(t[f].loadParameterControls.reduce((p,m)=>({...p,[m.id]:m.default}),{}))},className:"select select-md mr-2",children:t==null?void 0:t.map((h,f)=>c.jsx("option",{value:f,children:h.name},h.name))}),c.jsxs("button",{disabled:t.length&&u!==(a==null?void 0:a.totalLayers)||r||!e,className:"btn",onClick:()=>{if(e){const h=e.name==="customhuggingface";d==null||d.loadModel({...Fa,...l,id:e.name,label:h?"Load custom model from Hugging Face":e.label,menu:h?"mainmenu":"Custom",name:e.name,...h?{custom_model_name:e.label}:{path:e.path},plugin:a==null?void 0:a.name})}},children:["Load"," ",!!(a!=null&&a.totalLayers)&&`(${u}/${a==null?void 0:a.totalLayers})`]})]})]})]})};function Pj(e){return V({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M54.8,119.49A35.06,35.06,0,0,1,49.05,128a35.06,35.06,0,0,1,5.75,8.51C60,147.24,60,159.83,60,172c0,25.94,1.84,32,20,32a12,12,0,0,1,0,24c-19.14,0-32.2-6.9-38.8-20.51C36,196.76,36,184.17,36,172c0-25.94-1.84-32-20-32a12,12,0,0,1,0-24c18.16,0,20-6.06,20-32,0-12.17,0-24.76,5.2-35.49C47.8,34.9,60.86,28,80,28a12,12,0,0,1,0,24c-18.16,0-20,6.06-20,32C60,96.17,60,108.76,54.8,119.49ZM240,116c-18.16,0-20-6.06-20-32,0-12.17,0-24.76-5.2-35.49C208.2,34.9,195.14,28,176,28a12,12,0,0,0,0,24c18.16,0,20,6.06,20,32,0,12.17,0,24.76,5.2,35.49A35.06,35.06,0,0,0,207,128a35.06,35.06,0,0,0-5.75,8.51C196,147.24,196,159.83,196,172c0,25.94-1.84,32-20,32a12,12,0,0,0,0,24c19.14,0,32.2-6.9,38.8-20.51C220,196.76,220,184.17,220,172c0-25.94,1.84-32,20-32a12,12,0,0,0,0-24Z"}}]})(e)}function $j(e){return V({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M228,152v56a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V152a12,12,0,0,1,24,0v52H204V152a12,12,0,0,1,24,0ZM96.49,88.49,116,69v83a12,12,0,0,0,24,0V69l19.51,19.52a12,12,0,0,0,17-17l-40-40a12,12,0,0,0-17,0l-40,40a12,12,0,0,0,17,17Z"}}]})(e)}function Rj(e){return V({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,56C48,56,16,128,16,128s32,72,112,72,112-72,112-72S208,56,128,56Zm0,112a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z",opacity:"0.2"}},{tag:"path",attr:{d:"M247.31,124.76c-.35-.79-8.82-19.58-27.65-38.41C194.57,61.26,162.88,48,128,48S61.43,61.26,36.34,86.35C17.51,105.18,9,124,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208s66.57-13.26,91.66-38.34c18.83-18.83,27.3-37.61,27.65-38.4A8,8,0,0,0,247.31,124.76ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.47,133.47,0,0,1,25,128,133.33,133.33,0,0,1,48.07,97.25C70.33,75.19,97.22,64,128,64s57.67,11.19,79.93,33.25A133.46,133.46,0,0,1,231.05,128C223.84,141.46,192.43,192,128,192Zm0-112a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Z"}}]})(e)}function Lj(e){return V({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,56C48,56,16,128,16,128s32,72,112,72,112-72,112-72S208,56,128,56Zm0,112a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z",opacity:"0.2"}},{tag:"path",attr:{d:"M53.92,34.62A8,8,0,1,0,42.08,45.38L61.32,66.55C25,88.84,9.38,123.2,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208a127.11,127.11,0,0,0,52.07-10.83l22,24.21a8,8,0,1,0,11.84-10.76Zm47.33,75.84,41.67,45.85a32,32,0,0,1-41.67-45.85ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.16,133.16,0,0,1,25,128c4.69-8.79,19.66-33.39,47.35-49.38l18,19.75a48,48,0,0,0,63.66,70l14.73,16.2A112,112,0,0,1,128,192Zm6-95.43a8,8,0,0,1,3-15.72,48.16,48.16,0,0,1,38.77,42.64,8,8,0,0,1-7.22,8.71,6.39,6.39,0,0,1-.75,0,8,8,0,0,1-8-7.26A32.09,32.09,0,0,0,134,96.57Zm113.28,34.69c-.42.94-10.55,23.37-33.36,43.8a8,8,0,1,1-10.67-11.92A132.77,132.77,0,0,0,231.05,128a133.15,133.15,0,0,0-23.12-30.77C185.67,75.19,158.78,64,128,64a118.37,118.37,0,0,0-19.36,1.57A8,8,0,1,1,106,49.79,134,134,0,0,1,128,48c34.88,0,66.57,13.26,91.66,38.35,18.83,18.83,27.3,37.62,27.65,38.41A8,8,0,0,1,247.31,131.26Z"}}]})(e)}const Mj=({story:e,setEditingStory:t})=>{const n=w.useContext(Q),r=w.useRef(null),[i,o]=w.useState(e.name);return w.useEffect(()=>{var l;(l=r.current)==null||l.focus()},[]),c.jsxs(c.Fragment,{children:[c.jsx("input",{className:"input input-sm bg-base-200 py-0 pl-4 border-0 max-w-none w-full !cursor-text",type:"text",value:i,onChange:l=>o(l.target.value),ref:r}),c.jsx("button",{className:"px-4 py-2",onClick:()=>{t(null)},children:c.jsx(co,{size:"1.5em"})}),c.jsx("button",{className:"px-4 py-2",onClick:()=>{i.length&&(n==null||n.renameStory(e.path,i)),t(null)},children:c.jsx(ch,{size:"1.5em"})})]})},Ij=()=>{const e=w.useContext(Q);return c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"file",className:"hidden",id:"story-upload",name:"story-upload",accept:"application/json",onChange:t=>{const{files:n}=t.target;if(n)for(const r of n){const i=new FileReader;i.onload=o=>{var l;if((l=o==null?void 0:o.target)!=null&&l.result){const s=o.target.result;e==null||e.uploadFile(r.name,s)}},i.readAsArrayBuffer(r)}}}),c.jsx("label",{htmlFor:"story-upload",children:c.jsxs(oi,{children:[c.jsx($j,{size:"1.5em"}),"Upload Story"]})})]})},Aj=()=>{const{savedStories:e}=z(o=>o.ui.sidebarState),[t,n]=w.useState(null),r=w.useContext(Q),i=q();return w.useEffect(()=>{r==null||r.loadStoryList()},[r]),c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"px-6 my-3 font-bold text-center",children:"Load Story"}),c.jsxs("ul",{className:"menu menu-md p-0",children:[c.jsxs(Ki,{subsection:null,children:[c.jsx(ku,{className:"inline",size:"1.5em"}),"Main Menu"]}),c.jsx(Ij,{})]}),!e.length&&c.jsx("div",{className:"text-center mt-6",children:"No stories found."}),!!e.length&&c.jsx("ul",{className:"menu menu-md overflow-y-auto flex-nowrap",children:e.map(o=>c.jsxs("li",{className:"flex flex-row w-full h-10 items-center flex-nowrap my-1",children:[t===o.path&&c.jsx(Mj,{story:o,setEditingStory:n}),t!==o.path&&c.jsxs(c.Fragment,{children:[c.jsx("a",{onClick:()=>{r==null||r.loadStory(o.path),i(sx())},title:o.name,className:"flex-grow block py-0 h-10 leading-10 content-center whitespace-nowrap overflow-hidden overflow-ellipsis",children:o.name}),c.jsx("button",{onClick:()=>{n(o.path)},children:c.jsx(hx,{size:"1.5em"})}),c.jsx("button",{onClick:()=>{i(me({name:"confirmDeleteStory",data:o}))},children:c.jsx(ju,{size:"1.5em"})})]})]},o.path))})]})},sr=({value:e,onChange:t,className:n,label:r,title:i,inputClassname:o,isSynced:l,...s})=>{const[a,u]=w.useState(e),d=l?e:a;return c.jsxs("div",{className:n,title:i,children:[r&&c.jsx("div",{className:"flex mb-2",children:c.jsx("span",{className:"text-sm",children:r})}),c.jsx("input",{type:"text",value:d,onChange:h=>{t==null||t(h,a),u(h.target.value)},className:o||"input input-sm input-bordered bg-base-200 text-sm w-full placeholder:italic",...s})]})},Dj=({value:e,onChange:t,className:n,label:r,title:i,isSynced:o,...l})=>{const[s,a]=w.useState(e),u=(o?e:s).join(", ");return c.jsxs("div",{className:n,title:i,children:[r&&c.jsx("div",{className:"flex mb-2",children:c.jsx("span",{className:"text-sm",children:r})}),c.jsx("input",{type:"text",value:u,onChange:d=>{t==null||t(d,s),a([d.target.value])},className:"input input-sm input-bordered bg-base-200 text-sm w-full placeholder:italic",...l})]})},rS=({value:e,onChange:t,className:n,label:r,title:i,isSynced:o,...l})=>{const[s,a]=w.useState(e),u=o?e:s;return c.jsxs("div",{className:n,title:i,children:[r&&c.jsx("div",{className:"flex justify-between mb-2",children:c.jsx("span",{className:"text-sm",children:r})}),c.jsx("input",{type:"checkbox",checked:u,onChange:d=>{t==null||t(d,s),a(d.target.checked)},className:"toggle mb-2",...l})]})},Fl=({varName:e,label:t,title:n,type:r,syncOnBlur:i})=>{var _;const o=w.useContext(Q),{koboldConfig:l,sequenceNumbers:s}=z(g=>g.config),a=q(),[u,d]=Pe(e,s),[h,...f]=e.split("_"),p=f.join("_"),m=((_=l[h])==null?void 0:_[p])||"",y=Array.isArray(m);if(!["string","number"].includes(typeof m)&&!y)throw new Error("Expected value type");return y?c.jsx(Dj,{className:"py-2 flex-1 min-w-1/2",title:n,label:t,value:m,type:r,isSynced:d,onBlur:g=>{i&&(o==null||o.varChange(e,[g.target.value],u+1))},onChange:g=>{i||o==null||o.varChange(e,[g.target.value],u+1),a(X({key:e,sequenceNumber:u+1}))}}):c.jsx(sr,{className:"py-2 flex-1 min-w-1/2",label:t,title:n,value:m,type:r,isSynced:d,onBlur:g=>{i&&(o==null||o.varChange(e,g.target.value,u+1))},onChange:g=>{i||o==null||o.varChange(e,g.target.value,u+1),a(X({key:e,sequenceNumber:u+1}))}})},Fj=()=>{const e=z(n=>n.ui.sidebarState.selectedSubsection),t=(e==null?void 0:e.split(".").slice(0,2).join("."))||null;return c.jsxs(c.Fragment,{children:[t===null&&c.jsx(zj,{}),t===Or.LoadModel&&c.jsx(kj,{}),t===Or.LoadStory&&c.jsx(Aj,{})]})},zj=()=>{var h,f,p,m,y,_;const e=q(),{koboldConfig:t,sequenceNumbers:n}=z(g=>g.config),r=w.useContext(Q),i=["Story","Adventure","Chat"],[o,l]=w.useState(!1),[s]=Pe("story_storymode",n),[a]=Pe("story_actionmode",n),u=()=>{var v,x;if(o||(l(!0),typeof((v=t.story)==null?void 0:v.storymode)!="number"))return;const g=(((x=t.story)==null?void 0:x.storymode)+1)%3;r==null||r.varChangeWithCallback("story_storymode",g,s+1,()=>{g===1?r==null||r.varChangeWithCallback("story_actionmode",1,a+1,()=>{l(!1)}):l(!1)})},d=(h=t.story)==null?void 0:h.context.reduce((g,v)=>g+v.tokens.length,0);return c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"px-6 py-3 font-bold text-center",children:"Main Menu"}),c.jsxs("ul",{className:"menu menu-md p-0",children:[c.jsx(Ki,{subsection:Or.LoadModel,children:"Load Model"}),c.jsx(Ki,{subsection:Or.LoadStory,children:"Load Story"}),c.jsx(oi,{onClick:()=>e(me({name:"saveStory"})),children:"Save Story"}),c.jsxs(oi,{className:Qt(o&&"disabled"),onClick:u,children:["Mode: ",i[((f=t.story)==null?void 0:f.storymode)??0]]})]}),((p=t.story)==null?void 0:p.storymode)===2&&c.jsxs("div",{className:"p-6",children:[c.jsx(Fl,{varName:"story_chatname",label:"User Name",syncOnBlur:!0}),c.jsx(Fl,{varName:"story_botname",label:"Bot Name",syncOnBlur:!0})]}),!((m=t.system)!=null&&m.noai)&&c.jsxs("div",{className:"px-6",children:[c.jsx("progress",{className:"progress progress-primary w-full",value:d,max:(y=t.model)==null?void 0:y.max_length}),c.jsxs("span",{className:"text-sm",children:[d," / ",(_=t.model)==null?void 0:_.max_length," Tokens In Use"]})]})]})},Te=({varName:e,label:t,title:n,className:r})=>{var m;const i=w.useContext(Q),{koboldConfig:o,sequenceNumbers:l}=z(y=>y.config),s=q(),[a,u]=Pe(e,l),[d,...h]=e.split("_"),f=h.join("_"),p=((m=o[d])==null?void 0:m[f])||!1;return c.jsx(rS,{className:Qt("p-2 flex-grow min-w-1/2",r),title:n,label:t,value:!!p,isSynced:u,onChange:y=>{i==null||i.debouncedVarChange(e,y.target.checked,a+1),s(X({key:e,sequenceNumber:a+1}))}})},Se=({varName:e,min:t,max:n,step:r,label:i,title:o})=>{var x;const l=w.useContext(Q),{koboldConfig:s,sequenceNumbers:a}=z(S=>S.config),u=q(),[d,h]=Pe(e,a),[f,...p]=e.split("_"),m=p.join("_"),y=((x=s[f])==null?void 0:x[m])||0,[_,g]=w.useState(y),v=h?y:_;return c.jsxs("div",{className:"p-2 flex-grow min-w-1/2",title:o,children:[c.jsxs("div",{className:"flex justify-between mb-2",children:[c.jsx("span",{className:"text-sm",children:i}),c.jsx("span",{className:"text-sm",children:v})]}),c.jsx("input",{type:"range",step:r,min:typeof t=="number"?t:0,max:typeof n=="number"?n:100,value:v,onChange:S=>{g(S.target.valueAsNumber),l==null||l.debouncedVarChange(e,S.target.value,d+1),u(X({key:e,sequenceNumber:d+1}))},className:"range range-primary"})]})},Gc=({preset:e})=>c.jsxs(c.Fragment,{children:[c.jsx("option",{children:e.preset}),e.description&&c.jsx("option",{disabled:!0,className:"italic",children:e.description})]}),Bj=()=>{var a,u,d,h,f,p,m,y,_,g,v,x,S,C,N,T,b;const{koboldConfig:e,sequenceNumbers:t}=z(A=>A.config),[n]=Pe("model_selected_preset",t),r=(a=e.model)==null?void 0:a.presets,i=(u=e.model)==null?void 0:u.selected_preset,o=w.useContext(Q),l=q(),s={Recommended:[...((d=r==null?void 0:r.Recommended)==null?void 0:d.Official)||[],...((h=r==null?void 0:r.Recommended)==null?void 0:h.Custom)||[]],"Same Class":[...((f=r==null?void 0:r["Same Class"])==null?void 0:f.Official)||[],...((p=r==null?void 0:r["Same Class"])==null?void 0:p.Custom)||[]],Other:[...((m=r==null?void 0:r.Other)==null?void 0:m.Official)||[],...((y=r==null?void 0:r.Other)==null?void 0:y.Custom)||[]]};return c.jsxs("div",{className:"px-6 py-3",children:[c.jsx("h2",{className:"px-6 pb-3 font-bold text-center",children:"Model Settings"}),c.jsxs("div",{className:"text-center mb-2",children:[c.jsx("label",{className:"label",children:"Preset"}),c.jsxs("select",{value:i,onChange:A=>{o==null||o.varChange("model_selected_preset",A.target.value,n+1),l(X({key:"model_selected_preset",sequenceNumber:n+1}))},className:"select select-bordered bg-base-200 w-full",children:[((_=s.Recommended)==null?void 0:_.length)>0&&c.jsxs(c.Fragment,{children:[c.jsx("option",{className:"font-bold",disabled:!0,children:"‣ Recommended"}),(g=s.Recommended)==null?void 0:g.map(A=>c.jsx(Gc,{preset:A},A.preset))]}),((v=s["Same Class"])==null?void 0:v.length)>0&&c.jsxs(c.Fragment,{children:[c.jsx("option",{className:"font-bold",disabled:!0,children:"‣ Same Class"}),(x=s["Same Class"])==null?void 0:x.map(A=>c.jsx(Gc,{preset:A},A.preset))]}),((S=s.Other)==null?void 0:S.length)>0&&c.jsxs(c.Fragment,{children:[c.jsx("option",{className:"font-bold",disabled:!0,children:"‣ Other"}),(C=s.Other)==null?void 0:C.map(A=>c.jsx(Gc,{preset:A},A.preset))]})]}),c.jsx("button",{className:"btn btn-md btn-primary mt-4 mb-2 mx-2",onClick:()=>{l(me({name:"savePreset"}))},children:"Save Preset"})]}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mt-4",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0}),c.jsx("div",{className:"collapse-title h-8 text-md",children:"Generation"}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx(Se,{label:"Output Length",varName:"model_genamt",min:16,max:512,step:1,title:"Number of tokens to be generated. Higher values will take longer to generate."}),c.jsx(Se,{label:"Temperature",varName:"model_temp",min:.1,max:2,step:.01,title:"Randomness of sampling. Higher values can increase creativity, but make the output less meaningful. Lower values will make the output more predictable, but it may become more repetitive."}),c.jsx(Se,{label:"Context Tokens",varName:"model_max_length",min:512,max:8192,step:1,title:"Number of context tokens to submit to the AI for sampling. Make sure this is higher than Output Length. Higher values increase VRAM/RAM usage."}),c.jsx(Se,{label:"Gens Per Action",varName:"model_numseqs",min:1,max:5,step:1,title:"Number of generated output choices. Increases VRAM/RAM usage."})]})]}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mt-4",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0}),c.jsx("div",{className:"collapse-title h-8 text-md",children:"Sampling"}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx(Se,{label:"Top P Sampling",varName:"model_top_p",min:0,max:1,step:.01,title:"Used to discard unlikely text in the sampling process. Lower values will make the output more predictable, but also repetitive. (Put this value on 1 to disable its effect)"}),c.jsx(Se,{label:"Top K Sampling",varName:"model_top_k",min:0,max:100,step:1,title:"Alternative sampling method. Can be combined with top_p."}),c.jsx(Se,{label:"Tail Free Sampling",varName:"model_tfs",min:0,max:1,step:.01,title:"Alternative sampling method. It is recommended to disable (set to 0) top_p and top_k if this setting is used. 0.95 is a suggested value for this setting. (Put this value on 1 to disable its effect)"}),c.jsx(Se,{label:"Typical Sampling",varName:"model_typical",min:0,max:1,step:.01,title:'Alternative sampling method. Described in the paper "Typical Decoding for Natural Language Generation" (10.48550/ARXIV.2202.00666). The paper indicates 0.2 as a suggested value for this setting. (Put this value on 1 to disable its effect)'}),c.jsx(Se,{label:"Top A Sampling",varName:"model_top_a",min:0,max:1,step:.01,title:"Alternative sampling method. Reduces the randomness of the AI whenever the probability of one token is much higher than all the others. Higher values have a stronger effect. (Put this value on 0 to disable its effect)"}),c.jsx("div",{className:"min-w-1/2 p-2",children:c.jsx("button",{onClick:()=>{l(me({name:"samplerOrder"}))},title:"Changes the order of the samplers to have a considerably different effect than just leaving the samplers at their default order.",className:"btn btn-primary w-full",children:"Sampler Order"})})]})]}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mt-4",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0}),c.jsx("div",{className:"collapse-title h-8 text-md",children:"Llama.cpp"}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx(Se,{label:"Min P Sampling",varName:"model_min_p",min:0,max:1,step:.01,title:"Alternative to Top P / Top K, only compatible with llama.cpp"}),c.jsx(Se,{label:"Mirostat Mode",varName:"model_mirostat_mode",min:0,max:2,step:1,title:"0 = Disabled, 1 = Mirostat, 2 = Mirostat 2.0. Llama.cpp only."}),c.jsx(Se,{label:"Mirostat Tau",varName:"model_mirostat_tau",min:0,max:6,step:.01,title:""}),c.jsx(Se,{label:"Mirostat ETA",varName:"model_mirostat_eta",min:0,max:1,step:.01,title:"0 = Disabled, 1 = Mirostat, 2 = Mirostat 2.0. Llama.cpp only."}),c.jsx(Se,{label:"Frequency Penalty",varName:"model_freq_pen",min:0,max:3,step:.01,title:"The penalty to apply to tokens based on their frequency in the prompt. Llama.cpp only."}),c.jsx(Se,{label:"Presence Penalty",varName:"model_presence_pen",min:0,max:3,step:.01,title:"The penalty to apply to tokens based on their presence in the prompt."})]})]}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mt-4",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0}),c.jsx("div",{className:"collapse-title h-8 text-md",children:"Repetition"}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx(Se,{label:"Repetition Penalty",varName:"model_rep_pen",min:1,max:3,step:.01,title:"Used to penalize words that were already generated or belong to the context."}),c.jsx(Se,{label:"Rep Pen Range",varName:"model_rep_pen_range",min:0,max:4096,step:1,title:"Repetition penalty range. If set higher than 0, only applies repetition penalty to the last few tokens of the story rather than applying it to the entire story. The slider controls the amount of tokens at the end of your story to apply it to."}),c.jsx(Se,{label:"Rep Pen Slope",varName:"model_rep_pen_slope",min:0,max:10,step:.1,title:"Repetition penalty slope. If both this setting and Rep Penalty Range are set higher than 0, will use sigmoid interpolation to apply repetition penalty more strongly on tokens that are closer to the end of the story. Higher values will result in the repetition penalty difference between the start and end of your story being more apparent. (Setting this to 1 uses linear interpolation; setting this to 0 disables interpolation)"}),c.jsx(Te,{label:"Alt Rep Pen",varName:"model_use_alt_rep_pen",title:"Applies repetition penalty as a logarithmic modifier rather than a linear modifier."})]})]}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mt-4",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0}),c.jsx("div",{className:"collapse-title h-8 text-md",children:"Other"}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx(Te,{label:"Contextual Prompt",title:"Whether the prompt should be sent in the context of every action.",varName:"story_useprompt"}),c.jsx(Te,{label:"No Prompt Gen",title:"If enabled, the AI does not generate a continuation of the entered prompt. Instead, you must perform an action first.",varName:"user_nopromptgen"}),c.jsx(Te,{label:"Prefilled Memory",title:"If enabled, the Memory box in Random Story will be filled with the memory of the current story instead of being empty.",varName:"user_rngpersist"}),c.jsx(Te,{label:"Alt Text Gen",title:"Inserts World Info entries behind text that first triggers them for better context with unlimited depth.",varName:"system_alt_gen"}),c.jsx(Te,{label:"Alt Multi Gen",title:"Runs Gens per Action one at a time so you can select one if you like it without having to wait.",varName:"model_alt_multi_gen"}),c.jsx(Te,{label:"Full Determinism",varName:"system_full_determinism",title:"Causes generation to be fully deterministic. The model will always generate the same thing as long as your story, settings and RNG seed are the same. If disabled, only the sequence of outputs the model generates is deterministic."}),c.jsx(Te,{label:"Use Seed",title:"If enabled, a specific seed will be used for the random generator on text generation",varName:"system_seed_specified"}),c.jsx(Te,{label:"Token Streaming",title:"Shows tokens as they are generated.",varName:"user_output_streaming"}),c.jsx(Te,{label:"Stop on EOS",title:"Fix for EOS tokens followed by nonsense in some Yi models",varName:"user_stop_on_eos"}),((N=e.system)==null?void 0:N.seed_specified)&&c.jsx(Fl,{label:"Seed",varName:"system_seed",type:"number"})]})]}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mt-4",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0}),c.jsx("div",{className:"collapse-title h-8 text-md",children:"Modifiers"}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx("div",{className:"min-w-1/2 p-2",children:c.jsx("button",{title:"Influence the likelihood for the AI to output certain phrases.",onClick:()=>{l(me({name:"biasing"}))},className:"btn btn-primary w-full",children:"Biasing"})}),c.jsx("div",{className:"min-w-1/2 p-2",children:c.jsx("button",{title:"Automatically replaces phrases that you or the AI insert.",onClick:()=>{l(me({name:"substitutions"}))},className:"btn btn-primary w-full",children:"Substitutions"})}),c.jsx("div",{className:"min-w-1/2 p-2",children:c.jsx("button",{title:"Allows to activate userscripts that modify the game's functionality.",onClick:()=>{o==null||o.loadUserscriptsList(),l(me({name:"addUserscript"}))},className:"btn btn-primary w-full",children:"Add Userscript"})}),c.jsx(Te,{title:"Disables the userscripts' ability to edit output.",label:"No Genmod",varName:"user_nogenmod"}),c.jsx("ul",{className:"w-full",children:(b=(T=e.system)==null?void 0:T.userscripts)==null?void 0:b.map(A=>c.jsxs("li",{className:"flex justify-between p-2 rounded bg-base-200",children:[c.jsx("span",{className:"self-center",children:A})," ",c.jsx("button",{className:"btn btn-error",onClick:()=>{o==null||o.removeUserscript(A)},children:c.jsx(co,{size:"1.5em"})})]},A))})]})]}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mt-4",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0}),c.jsx("div",{className:"collapse-title h-8 text-md",children:"Formatting"}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx(Te,{label:"Trim Sentences",varName:"user_frmttriminc",title:"Deletes the text after the last sentence closure. If no closure is found, all tokens are returned."}),c.jsx(Te,{label:"No Blank Lines",varName:"user_frmtrmblln",title:"Replaces double newlines (\\n\\n) with single ones to avoid blank lines."}),c.jsx(Te,{label:"No Special Chars",varName:"user_frmtrmspch",title:"Removes special characters (@,#,%,^, etc)."}),c.jsx(Te,{label:"Auto Spacing",varName:"user_frmtadsnsp",title:"Adds spaces automatically if necessary."}),c.jsx(Te,{label:"Single Line",varName:"user_singleline",title:"Allows the AI to generate an output only before the enter."}),c.jsx(Te,{label:"No Double Spaces",varName:"user_remove_double_space",title:"Removes any double spaces in the output."})]})]})]})},Hj=e=>fetch("/ghostpad/api/update_config",{method:"POST",body:JSON.stringify({configUpdate:e})}),iS=w.createContext({voicesByLanguage:{},speechSynthesisSupported:!1}),Wj=({children:e})=>{const[t,n]=w.useState(!1),[r,i]=w.useState({});return w.useEffect(()=>{const o=typeof window<"u"&&"speechSynthesis"in window,l=()=>{const s=o?speechSynthesis.getVoices():[];i(s.reduce((a,u)=>(u.lang in a?a[u.lang].push(u):a[u.lang]=[u],a),{}))};return n(o),o&&speechSynthesis.addEventListener("voiceschanged",l),()=>{o&&speechSynthesis.removeEventListener("voiceschanged",l)}},[]),c.jsx(iS.Provider,{value:{speechSynthesisSupported:t,voicesByLanguage:r},children:e})},Uj=["acid","aqua","autumn","black","bumblebee","business","corporate","cupcake","dark","dracula","emerald","fantasy","garden","halloween","lemonade","light","lofi","night","retro","synthwave","valentine","winter","wireframe"],Vj=[{name:"Serif",items:[{linkFamily:"Rasa",cssFamily:"Rasa"},{linkFamily:"Lora",cssFamily:"Lora"},{linkFamily:"Alegreya",cssFamily:"Alegreya"},{linkFamily:"Roboto+Slab",cssFamily:"Roboto Slab"},{linkFamily:"Merriweather",cssFamily:"Merriweather"},{linkFamily:"PT+Serif",cssFamily:"PT Serif"},{linkFamily:"Noto+Serif",cssFamily:"Noto Serif"},{linkFamily:"Libre+Baskerville",cssFamily:"Libre Baskerville"},{linkFamily:"Source+Serif+Pro",cssFamily:"Source Serif Pro"},{linkFamily:"Bitter",cssFamily:"Bitter"},{linkFamily:"EB+Garamond",cssFamily:"EB Garamond"},{linkFamily:"Crimson+Text",cssFamily:"Crimson Text"}]},{name:"Sans-Serif",items:[{linkFamily:"Roboto",cssFamily:"Roboto"},{linkFamily:"Lato",cssFamily:"Lato"},{linkFamily:"Manrope",cssFamily:"Manrope"},{linkFamily:"Geologica",cssFamily:"Geologica"},{linkFamily:"Open+Sans",cssFamily:"Open Sans"},{linkFamily:"Source+Sans+Pro",cssFamily:"Source Sans Pro"},{linkFamily:"Inter",cssFamily:"Inter"},{linkFamily:"Noto+Sans",cssFamily:"Noto Sans"},{linkFamily:"Rubik",cssFamily:"Rubik"},{linkFamily:"Heebo",cssFamily:"Heebo"},{linkFamily:"IBM+Plex+Sans",cssFamily:"IBM Plex Sans"}]},{name:"Monospaced",items:[{linkFamily:"Inconsolata",cssFamily:"Inconsolata"},{linkFamily:"VT323",cssFamily:"VT323"},{linkFamily:"Anonymous+Pro",cssFamily:"Anonymous Pro"},{linkFamily:"Roboto+Mono",cssFamily:"Roboto Mono"},{linkFamily:"Fira+Code",cssFamily:"Fira Code"},{linkFamily:"Source+Code+Pro",cssFamily:"Source Code Pro"},{linkFamily:"IBM+Plex+Mono",cssFamily:"IBM Plex Mono"},{linkFamily:"Cousine",cssFamily:"Cousine"},{linkFamily:"Courier+Prime",cssFamily:"Courier Prime"},{linkFamily:"JetBrains+Mono",cssFamily:"JetBrains Mono"},{linkFamily:"Noto+Sans+Mono",cssFamily:"Noto Sans Mono"}]}],Kj=dh(async(e,t)=>{const r=await(await Hj(e)).json();t(ih(r)),"host"in e&&t(tl({socketState:Ut.READY_TO_CONNECT}))},500),qj=()=>{var h;const{speechSynthesisSupported:e,voicesByLanguage:t}=w.useContext(iS),n=z(f=>f.config.ghostpadConfig),r=q(),i=async f=>{r(ih({...n,...f})),await Kj(f,r)},o=async f=>{await i({host:f.target.value})},l=async f=>{await i({editorLocalFont:f.target.value})},s=f=>{i({theme:f.target.value})},a=f=>{var p;i({editorGoogleFont:{linkFamily:f.target.value,cssFamily:((p=f.target.options[f.target.selectedIndex])==null?void 0:p.text)||""}})},u=f=>{i({useGoogleFont:f.target.checked})},d=f=>{i({editorFontSize:parseInt(f.target.value)})};return c.jsxs("div",{className:"px-6 py-3",children:[c.jsx("h2",{className:"px-6 pb-3 font-bold text-center",children:"Ghostpad Settings"}),c.jsxs("div",{className:"form-control w-full max-w-xs mb-2",title:"Switch between different DaisyUI themes.",children:[c.jsx("label",{className:"label pt-0 pl-0",children:c.jsx("span",{className:"label-text",children:"Theme"})}),c.jsx("select",{onChange:s,className:"select select-bordered bg-base-200 w-full max-w-xs",value:n.theme,children:Uj.map(f=>c.jsx("option",{children:f},f))})]}),c.jsxs("div",{className:"form-control w-full max-w-xs mb-2",children:[c.jsxs("div",{title:"When enabled, you will be presented with a curated list of Google Fonts. When disabled, you will instead see a text input where you can enter a local font name.",children:[c.jsx("label",{className:"label pt-0 pl-0",children:c.jsx("span",{className:"label-text",children:"Enable Google Fonts"})}),c.jsx("input",{type:"checkbox",defaultChecked:n.useGoogleFont,onChange:u,className:"toggle mb-2 ml-1"})]}),c.jsx("label",{className:"label pt-0 pl-0",children:c.jsx("span",{className:"label-text",children:"Editor Font"})}),n.useGoogleFont&&c.jsx("select",{title:"Select a font from a curated list of Google Fonts.",onChange:a,value:n.editorGoogleFont.linkFamily,className:"select select-bordered bg-base-200 w-full max-w-xs",children:Vj.map(f=>c.jsxs(w.Fragment,{children:[c.jsx("option",{className:"font-bold italic",disabled:!0,children:f.name}),f.items.map(p=>c.jsx("option",{value:p.linkFamily,children:p.cssFamily},p.linkFamily))]},f.name))}),!n.useGoogleFont&&c.jsx("input",{title:"Enter the name of a font installed on your system.",type:"text",className:"input input-bordered input-md w-full bg-base-200",defaultValue:n.editorLocalFont,onChange:l})]}),c.jsxs("div",{className:"form-control w-full max-w-xs mb-2",title:"The size of the text in the story editor, defined in px.",children:[c.jsx("label",{className:"label pt-0 pl-0",htmlFor:"settings-fontsize",children:c.jsx("span",{className:"label-text",children:"Editor Font Size"})}),c.jsx("input",{id:"settings-fontsize",type:"number",min:1,max:99,step:1,defaultValue:n.editorFontSize,className:"input input-bordered bg-base-200",onChange:d})]}),c.jsxs("div",{className:"form-control w-full mb-2",children:[c.jsx("label",{className:"label pt-0 pl-0",children:c.jsx("span",{className:"label-text",children:"Font Preview"})}),c.jsx("p",{className:"border border-neutral rounded p-4 bg-base-200",children:c.jsx("span",{className:"font-preview",children:"The quick brown fox jumps over the lazy dog."})})]}),e&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-2",children:[c.jsx("label",{className:"label pt-0 pl-0",children:c.jsx("span",{className:"label-text",children:"Speech Synthesis Language"})}),c.jsxs("select",{className:"select select-bordered bg-base-200 w-full max-w-xs",value:n.speechSynthesisLanguage||"",onChange:f=>i({speechSynthesisLanguage:f.target.value}),children:[c.jsx("option",{value:"",children:"None"}),Object.entries(t).sort().map(([f])=>c.jsx("option",{value:f,children:f},f))]})]}),n.speechSynthesisLanguage&&c.jsxs("div",{className:"mb-2",children:[c.jsx("label",{className:"label pt-0 pl-0",children:c.jsx("span",{className:"label-text",children:"Speech Synthesis Voice"})}),c.jsxs("select",{className:"select select-bordered bg-base-200 w-full max-w-xs",value:n.speechSynthesisVoice||"",onChange:f=>i({speechSynthesisVoice:f.target.value}),children:[c.jsx("option",{value:"",children:"None"}),(h=t[n.speechSynthesisLanguage])==null?void 0:h.map(f=>c.jsxs("option",{value:f.voiceURI,children:[!f.localService&&"[Non-Local] ",f.name]},f.voiceURI))]})]}),c.jsxs("div",{className:"form-control w-full max-w-xs mb-2",title:'The hostname of the currently running KoboldAI server, specified in the format "host:port"',children:[c.jsx("label",{className:"label pt-0 pl-0",htmlFor:"settings-hostname",children:c.jsx("span",{className:"label-text",children:"Hostname Override"})}),c.jsx("input",{id:"settings-hostname",className:"input input-bordered input-md w-full bg-base-200",type:"text",defaultValue:n.host,onChange:o})]})]})]})};function Yj(e){return V({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V288H216c-13.3 0-24 10.7-24 24s10.7 24 24 24H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM384 336V288H494.1l-39-39c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l80 80c9.4 9.4 9.4 24.6 0 33.9l-80 80c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l39-39H384zm0-208H256V0L384 128z"}}]})(e)}function Gj(e){return V({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M128 64c0-35.3 28.7-64 64-64H352V128c0 17.7 14.3 32 32 32H512V448c0 35.3-28.7 64-64 64H192c-35.3 0-64-28.7-64-64V336H302.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39H128V64zm0 224v48H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H128zM512 128H384V0L512 128z"}}]})(e)}function Qj(e){return V({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 0c17.7 0 32 14.3 32 32V96H472c39.8 0 72 32.2 72 72V440c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72H288V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H208zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H304zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H400zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224H64V416H48c-26.5 0-48-21.5-48-48V272c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H576V224h16z"}}]})(e)}const Df=({value:e,isSynced:t,onChange:n,label:r,disabled:i,title:o})=>{const[l,s]=w.useState(e),a=t?e:l;return c.jsxs("div",{className:"mb-2 flex-grow min-w-1/2",title:o,children:[r&&c.jsx("div",{className:"flex mb-2",children:c.jsx("span",{className:"text-sm",children:r})}),c.jsx("textarea",{disabled:i,value:a,onChange:u=>{n==null||n(u),s(u.target.value)},className:"textarea textarea-bordered h-24 bg-base-200 min-w-full max-w-lg p-3 text-sm"})]})},Jj=({sequenceNumber:e,isSynced:t,value:n,worldInfoEntry:r})=>{const[i,o]=w.useState([]),[l,s]=w.useState([]),a=q(),u=i,d=w.useMemo(()=>Object.keys(n),[n]),h=w.useContext(Q);w.useEffect(()=>{const y=d.map(_=>[_,n[_]]);o(y),s(y)},[d,n]);const f=(y,_)=>g=>{const v=g.target.value,x=Object.entries(n),S=Object.fromEntries(_<i.length?x.map(([N,T],b)=>[b===_?v:N,T]):[...x,[v,[]]]),C=l.map(([N,T])=>[N===y?v:N,T]);s(C),!n[v]&&(h==null||h.editWorldInfoEntry({...r,wpp:{...r.wpp,attributes:S}}),a(X({key:"story_worldinfo",sequenceNumber:e+1})))},p=(y,_)=>g=>{const v=g.target.value,x=r.wpp.attributes[y],S=_<=x.length-1?x.map((T,b)=>b===_?v:T):[...x,v],C=Object.fromEntries(Object.entries(n).map(([T,b])=>[T,T===y?S:b])),N=l.map(([T,b])=>[T,T===y?S:b]);s(N),h==null||h.editWorldInfoEntry({...r,wpp:{...r.wpp,attributes:C}}),a(X({key:"story_worldinfo",sequenceNumber:e+1}))},m=()=>{const y=l.filter(([_])=>_.length).map(([_,g])=>[_,g.filter(v=>v.length)]);s(y),JSON.stringify(y)!==JSON.stringify(l)&&(h==null||h.editWorldInfoEntry({...r,wpp:{...r.wpp,attributes:Object.fromEntries(y)}}))};return c.jsx(c.Fragment,{children:[...u,["",[]]].map(([y,_],g)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex my-4",children:[c.jsx($b,{size:"1.5em",className:"self-center mr-2"}),c.jsx(sr,{isSynced:t,placeholder:"New Key",className:"flex-grow font-bold",value:y,onBlur:m,onChange:f(y,g)})]}),c.jsx("div",{className:"space-y-2",children:(g<u.length?[..._,""]:_).map((v,x)=>c.jsx(sr,{isSynced:t,className:"my-2 ml-8",placeholder:"New Value",value:v,onBlur:m,onChange:p(y,x)},x))})]},g))})},Xj=({worldInfoEntry:e})=>{const t=w.useContext(Q),n=q(),{sequenceNumbers:r}=z(d=>d.config),{hiddenEntries:i,loadedFile:o,isGeneratingWI:l}=z(d=>d.ui.sidebarState),[s,a]=Pe("story_worldinfo",r),u=i.includes(e.uid);return w.useEffect(()=>{if(o&&(o==null?void 0:o.target)===`wi-${e.uid}`){if(o.fileType==="text"){const{manual_text:d}=e;t==null||t.editWorldInfoEntry({...e,manual_text:d+(d.length?`

`:"")+o.content})}else if(o.fileType==="wi"){const{attributes:d}=e.wpp,h=QT(DT,d,o.content.wpp.attributes);t==null||t.editWorldInfoEntry({...e,wpp:{...e.wpp,attributes:h}})}n(Pl(null))}},[n,o,t,e]),c.jsxs("li",{className:"bg-base-300/80 p-4 mx-4 border border-neutral-focus rounded-lg",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("div",{className:"ml-2 dropdown dropdown-bottom dropdown-end order-3",children:[c.jsx("label",{tabIndex:0,className:"btn btn-sm",children:c.jsx(gx,{size:"1.5em"})}),c.jsxs("ul",{tabIndex:0,className:"dropdown-content menu menu-md p-2 shadow rounded-box w-52 bg-base-100 z-[1]",children:[c.jsx("li",{children:c.jsxs("button",{className:"flex flex-row justify-start",onClick:()=>{document.activeElement.blur(),n(ux(e.uid))},children:[c.jsx(Mb,{size:"1.5em"})," Move Entry"]})}),c.jsx("li",{children:c.jsxs("button",{className:"flex flex-row justify-start",onClick:()=>{document.activeElement.blur(),n(me({name:"confirmDeleteEntry",data:e}))},children:[c.jsx(ju,{size:"1.5em"})," Delete Entry"]})})]})]}),c.jsx("button",{className:"btn btn-sm btn-ghost px-0",onClick:()=>{n(cb(e.uid))},children:u?c.jsx(Lj,{size:"1.5em",className:"self-center"}):c.jsx(Rj,{size:"1.5em",className:"self-center"})}),c.jsx(sr,{value:e.title,isSynced:a,className:"flex-grow ml-2 font-semibold",inputClassname:"input input-sm bg-transparent border-0 text-sm w-full",onChange:d=>{t==null||t.editWorldInfoEntry({...e,title:d.target.value,wpp:{...e.wpp,name:d.target.value}}),n(X({key:"story_worldinfo",sequenceNumber:s+1}))}})]}),!u&&c.jsxs("div",{children:[c.jsx(sr,{className:"my-2",isSynced:a,value:e.object_type||e.wpp.type||"",label:"Type",onChange:d=>{t==null||t.editWorldInfoEntry({...e,object_type:d.target.value,wpp:{...e.wpp,type:d.target.value}}),n(X({key:"story_worldinfo",sequenceNumber:s+1}))}}),c.jsx("div",{className:"flex mb-2",children:c.jsx("span",{className:"text-sm",children:"Trigger"})}),c.jsx("select",{className:"select select-sm select-bordered bg-base-200 w-full max-w-xs",onChange:d=>{t==null||t.editWorldInfoEntry({...e,constant:d.target.value!=="wi",type:d.target.value}),n(X({key:"story_worldinfo",sequenceNumber:s+1}))},value:e.type,children:[["constant","Always On"],["chatcharacter","Chat Character"],["wi","Keywords"],["commentator","Commentator"]].map(d=>c.jsx("option",{value:d[0],children:d[1]},d[0]))}),c.jsxs("button",{onClick:()=>{n(me({name:"saveToLibrary",data:{fileType:"wi",content:e}}))},className:"btn btn-sm btn-primary w-full mt-4",children:[c.jsx(mx,{size:"1.5em"})," Save Entry"]}),c.jsxs("div",{className:"mt-4 flex",children:[c.jsx(rS,{isSynced:a,label:"Use Traits",className:"flex-1",value:e.use_wpp,onChange:d=>{t==null||t.editWorldInfoEntry({...e,use_wpp:d.target.checked}),n(X({key:"story_worldinfo",sequenceNumber:s+1}))}}),c.jsx("div",{className:"flex flex-1",children:c.jsxs("div",{className:"w-full mb-4",children:[c.jsx("div",{className:"mb-2",children:c.jsx("span",{className:"text-sm",children:"Format"})}),c.jsxs("select",{className:"select select-bordered bg-base-200 select-sm w-full max-w-full",value:e.wpp.format,onChange:d=>{t==null||t.editWorldInfoEntry({...e,wpp:{...e.wpp,format:d.target.value}}),n(X({key:"story_worldinfo",sequenceNumber:s+1}))},children:[c.jsx("option",{value:"W++",children:"W++"}),c.jsx("option",{value:"Square Bracket Format (SBF)",children:"SBF"})]})]})})]}),e.type==="wi"&&c.jsxs("div",{className:"space-y-4 py-2",children:[c.jsx(sr,{label:"Primary Keywords (Comma Separated)",value:e.key.join(","),isSynced:a,onChange:d=>{t==null||t.editWorldInfoEntry({...e,key:d.target.value.split(",")}),n(X({key:"story_worldinfo",sequenceNumber:s+1}))}}),c.jsx(sr,{label:"Secondary Keywords (Comma Separated)",value:e.keysecondary.join(","),isSynced:a,onChange:d=>{t==null||t.editWorldInfoEntry({...e,keysecondary:d.target.value.split(",")}),n(X({key:"story_worldinfo",sequenceNumber:s+1}))}})]}),!e.use_wpp&&c.jsxs(c.Fragment,{children:[c.jsx(Df,{value:e.manual_text,disabled:e.use_wpp,isSynced:a,onChange:d=>{t==null||t.editWorldInfoEntry({...e,manual_text:d.target.value}),n(X({key:"story_worldinfo",sequenceNumber:s+1}))},label:"Text"}),c.jsxs("div",{className:"flex space-y-4 mb-2 flex-wrap",children:[c.jsx("button",{onClick:()=>{n(ax(!0)),t==null||t.generateWI(e)},className:"btn btn-sm btn-neutral w-full flex-grow",disabled:l,children:l?c.jsx("span",{className:"loading loading-spinner loading-md"}):c.jsxs(c.Fragment,{children:[c.jsx(Qj,{size:"1.5em"})," Generate Text"]})}),c.jsxs("button",{onClick:()=>{n(me({name:"loadFromLibrary",data:{fileType:"text",target:`wi-${e.uid}`}}))},className:"btn btn-sm btn-neutral w-full flex-grow",children:[c.jsx(Ur,{size:"1.5em"})," Load Text"]}),c.jsxs("button",{onClick:()=>{n(me({name:"saveToLibrary",data:{fileType:"text",content:e.manual_text}}))},className:"btn btn-sm btn-neutral w-full flex-grow",children:[c.jsx(Ur,{size:"1.5em"})," Save Text"]})]})]}),e.use_wpp&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>{t==null||t.editWorldInfoEntry({...e,manual_text:`${e.content}

${e.manual_text}`,use_wpp:!1}),n(X({key:"story_worldinfo",sequenceNumber:s+1}))},disabled:!e.use_wpp,className:"btn btn-sm btn-neutral w-full mb-4",children:"Insert Traits In Text"}),c.jsx("div",{className:"flex space-x-2 mb-4",children:c.jsxs("button",{onClick:()=>{n(me({name:"loadFromLibrary",data:{fileType:"wi",target:`wi-${e.uid}`}}))},className:"btn btn-sm btn-neutral flex-1",children:[c.jsx(Pj,{size:"1.5em"})," Load Traits"]})}),c.jsx(Jj,{sequenceNumber:s,isSynced:a,value:e.wpp.attributes,worldInfoEntry:e})]}),c.jsx(Df,{value:e.comment,isSynced:a,onChange:d=>{t==null||t.editWorldInfoEntry({...e,comment:d.target.value}),n(X({key:"story_worldinfo",sequenceNumber:s+1}))},label:"Comment"})]})]})},Zj=({uids:e,worldInfoEntries:t,folderName:n})=>c.jsxs("ul",{className:"my-2 space-y-2",children:[(e==null?void 0:e.length)===0&&n!=="root"&&c.jsx("div",{className:"p-4 pb-4 text-center",children:"No entries."}),e==null?void 0:e.map(r=>{const i=t[r];return i?c.jsx(Xj,{worldInfoEntry:i},i.uid):null})]}),ek=({folderName:e,folderUid:t,uids:n,worldInfoEntries:r})=>{const i=w.useContext(Q),o=q(),{sequenceNumbers:l}=z(h=>h.config),[s,a]=Pe("story_worldinfo",l),{movingWIEntry:u,loadedFile:d}=z(h=>h.ui.sidebarState);return w.useEffect(()=>{d&&(d==null?void 0:d.target)===`wifolder-${t}`&&(i==null||i.createWorldInfoEntry({...d.content,folder:e}),o(Pl(null)))},[o,e,t,d,i]),c.jsxs("details",{className:"collapse collapse-arrow bg-base-200 mb-2 relative overflow-visible border border-neutral",open:!0,children:[u!==null&&c.jsx("button",{className:"absolute inset-0 p-2 bg-black/70 text-center z-50",onClick:()=>{i==null||i.moveWorldInfoEntry(u,e),o(ux(null))},children:c.jsx(jb,{className:"inline text-white",size:"4.5em"})}),c.jsxs("summary",{onKeyUp:h=>{h.key===" "&&document.querySelectorAll("input:focus").length&&h.preventDefault()},className:"collapse-title !flex items-center",children:[c.jsx(Nj,{size:"1.5em",className:"inline pr-2 flex-shrink-0"}),c.jsx(sr,{disabled:t==="-1",isSynced:a,value:t==="-1"?"Main Entries":e,onChange:t==="-1"?void 0:(h,f)=>{i==null||i.renameWorldInfoFolder(f,h.target.value),o(X({key:"story_worldinfo",sequenceNumber:s+1}))}})]}),c.jsxs("div",{className:"collapse-content px-0 pt-8 border-t border-neutral",children:[c.jsx("div",{className:"flex px-4 mb-4 space-x-2",children:c.jsxs("div",{className:"dropdown dropdown-bottom dropdown-end flex-1",title:"Import or export JSON files containing world info folders.",children:[c.jsxs("label",{tabIndex:1,className:"btn btn-sm btn-neutral mb-2 w-full",children:[c.jsx(Cj,{size:"1.5em"})," Folder Options"]}),c.jsx("ul",{tabIndex:0,className:"dropdown-content menu menu-md p-2 shadow rounded-box w-72 bg-base-100 z-[1]",children:c.jsxs("li",{children:[c.jsxs("label",{htmlFor:`json-import-${t}`,className:"flex flex-row justify-start",children:[c.jsx(Gj,{size:"1.5em"})," Import"]}),c.jsx("input",{type:"file",className:"hidden",id:`json-import-${t}`,name:`json-import-${t}`,accept:"application/json",onChange:h=>{const{files:f}=h.target;if(f)for(const p of f){const m=new FileReader;m.onload=y=>{var _;(_=y==null?void 0:y.target)!=null&&_.result&&(i==null||i.uploadWorldInfoFolder(e,p.name,y.target.result))},m.readAsArrayBuffer(p)}}}),c.jsxs("button",{onClick:()=>{document.location.href=`//${window.location.host}/export_world_info_folder?folder=${e}`},className:"flex flex-row justify-start",children:[c.jsx(Yj,{size:"1.5em"})," Export"]}),t!=="-1"&&c.jsxs("button",{className:"flex flex-row justify-start",onClick:()=>{i==null||i.deleteWorldInfoFolder(e)},children:[c.jsx(ju,{size:"1.5em"})," Delete Folder And Entries"]})]})})]})}),c.jsxs("div",{className:"text-center space-x-2 px-4 mb-4 flex",children:[c.jsxs("button",{className:"btn btn-sm btn-neutral px-4 w-1/2",title:"Load a world info entry from the library.",onClick:()=>{o(me({name:"loadFromLibrary",data:{fileType:"wi",target:`wifolder-${t}`}}))},children:[c.jsx(mx,{size:"1.5em"})," Load"]}),c.jsxs("button",{className:"btn btn-sm btn-primary px-4 w-1/2",title:"Create a new world info entry.",onClick:()=>{i==null||i.createWorldInfoEntry({folder:e,type:"constant",constant:!0})},children:[c.jsx(Ub,{size:"1.5em"}),"New"]})]}),c.jsx("div",{className:"flex space-x-2 px-4 mb-4"}),c.jsx(Zj,{folderName:e,uids:n,worldInfoEntries:r})]})]})},tk=()=>{const{wiFolderInfo:e,wiFolderIds:t}=z(s=>{var a,u;return{wiFolderInfo:(a=s.config.koboldConfig.story)==null?void 0:a.wifolders_d,wiFolderIds:(u=s.config.koboldConfig.story)==null?void 0:u.wifolders_l}},cn),{worldInfoFolders:n,worldInfoEntries:r}=z(s=>s.worldInfo),i=w.useContext(Q),o=w.useMemo(()=>Object.keys(n),[n]),l=w.useMemo(()=>Object.keys(r).length,[r]);return c.jsxs("div",{className:"px-6 py-3",children:[c.jsx("h2",{className:"px-6 pb-3 font-bold text-center",children:"World Info"}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mb-3",children:[c.jsx("input",{type:"checkbox"}),c.jsx("div",{className:"collapse-title h-8",children:c.jsx("span",{className:"text-sm",children:"World Info Settings"})}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx(Se,{label:"WI Depth",varName:"user_widepth",min:1,max:5,step:1,title:"Number of actions from the end of the story to scan for World Info keys."}),c.jsx(Te,{label:"Dynamic WI Scan",varName:"story_dynamicscan",title:"Scans the AI's output for World Info keys as it is generating one."}),c.jsx(Se,{label:"WI Gen Amount",varName:"user_wigen_amount",min:25,max:125,step:1,title:"How many tokens the World Info Generator creates."}),c.jsx(Te,{label:"Native WI Gen",varName:"user_wigen_use_own_wi",title:"Uses your existing applicable (has title,type,content) World Info entries as inspiration for generated ones."}),c.jsx(Se,{label:"Story Commentary Chance",varName:"story_commentary_chance",min:0,max:100,step:1,title:"Chance that the AI will add commentary to the story."}),c.jsx(Te,{label:"Story Commentary Enabled",varName:"story_commentary_enabled",title:"Allow custom characters to comment on the story."})]})]}),c.jsx("div",{className:"flex px-4 mb-3 space-x-2",children:c.jsxs("button",{onClick:()=>{i==null||i.createWorldInfoFolder()},className:"btn btn-sm btn-primary flex-1",title:"Create a folder to group world info entries.",children:[c.jsx(wj,{size:"1.5em"})," New Folder"]})}),l===0&&o.length===1&&c.jsx("div",{className:"p-4 pb-4 text-center",children:"No entries."}),[-1,...t||[]].map(s=>{var u;const a=s===-1?"root":(u=e==null?void 0:e[s])==null?void 0:u.name;return typeof a!="string"?null:c.jsx("div",{className:"pb-4",children:c.jsx(ek,{folderUid:`${s}`,folderName:a,uids:n[a],worldInfoEntries:r})},a==="root"?"-1":s)})]})},Qc=({varName:e,label:t,title:n})=>{var p;const r=w.useContext(Q),{koboldConfig:i,sequenceNumbers:o}=z(m=>m.config),l=q(),[s,a]=Pe(e,o),[u,...d]=e.split("_"),h=d.join("_"),f=((p=i[u])==null?void 0:p[h])||"";return c.jsx(Df,{value:f,isSynced:a,onChange:m=>{r==null||r.varChange(e,m.target.value,s+1),l(X({key:e,sequenceNumber:s+1}))},label:t,title:n})},nk=()=>{const e=q(),t=w.useContext(Q),{memory:n,authornote:r,loadedFile:i,sequenceNumbers:o}=z(l=>{var s,a;return{memory:((s=l.config.koboldConfig.story)==null?void 0:s.memory)||"",authornote:((a=l.config.koboldConfig.story)==null?void 0:a.authornote)||"",loadedFile:l.ui.sidebarState.loadedFile,sequenceNumbers:l.config.sequenceNumbers}},cn);return w.useEffect(()=>{if(!i)return;const[l]=Pe("story_memory",o),[s]=Pe("story_authornote",o);(i==null?void 0:i.target)==="memory"&&(t==null||t.varChange("story_memory",n+(n.length?`

`:"")+i.content,l+1),e(X({key:"story_memory",sequenceNumber:l+1})),e(Pl(null))),(i==null?void 0:i.target)==="authornote"&&(t==null||t.varChange("story_authornote",r+(r.length?`

`:"")+i.content,s+1),e(X({key:"story_authornote",sequenceNumber:s+1})),e(Pl(null)))},[r,e,i,n,t,o.story_memory,o.story_authornote]),c.jsxs("div",{className:"flex-grow px-6 py-3",children:[c.jsx("h2",{className:"px-6 pb-3 font-bold text-center",children:"Story Settings"}),c.jsx(Qc,{varName:"story_memory",label:"Memory",title:"Important information the AI should always keep in mind."}),c.jsxs("div",{className:"flex justify-between space-x-2",children:[c.jsxs("button",{className:"btn flex-1",onClick:()=>{e(me({name:"loadFromLibrary",data:{fileType:"text",target:"memory"}}))},title:"Load a memory from the text library. This will append it to the current text, so you can combine multiple items.",children:[c.jsx(Ur,{size:"1.5em"}),"Load"]}),c.jsxs("button",{className:"btn flex-1",onClick:()=>{e(me({name:"saveToLibrary",data:{fileType:"text",content:n}}))},title:"Save the memory to the text library.",children:[c.jsx(Ur,{size:"1.5em"}),"Save"]})]}),c.jsx(Fl,{varName:"story_authornotetemplate",label:"Author's Note Template",title:"This is how your author's note will be formatted when it is submitted to the AI. Use <|> as a placeholder for the author's note itself."}),c.jsx(Qc,{varName:"story_authornote",label:"Author's Note",title:"Notes to influence the writing style, story plot, or AI behavior."}),c.jsxs("div",{className:"flex justify-between space-x-2",children:[c.jsxs("button",{className:"btn flex-1",onClick:()=>{e(me({name:"loadFromLibrary",data:{fileType:"text",target:"authornote"}}))},title:"Load an author's note from the text library. This will append it to the current text, so you can combine multiple items.",children:[c.jsx(Ur,{size:"1.5em"}),"Load"]}),c.jsxs("button",{className:"btn flex-1",onClick:()=>{e(me({name:"saveToLibrary",data:{fileType:"text",content:r}}))},title:"Save the author's note to the text library.",children:[c.jsx(Ur,{size:"1.5em"}),"Save"]})]}),c.jsx(Se,{max:5,min:1,step:1,varName:"story_andepth",label:"Author's Note Depth",title:"Number of actions from the end of the story to insert Author's Note info."}),c.jsx(Fl,{title:"Styles the AI will attempt to imitate. Effectiveness depends on model.",varName:"story_genres",label:"Genres (Comma Separated)"}),c.jsx(Qc,{varName:"story_notes",label:"Personal Notes (Not Read By AI)"}),c.jsx(Te,{className:"!p-0",varName:"story_autosave",label:"Auto Save",title:"Whether the story is saved after each action."})]})},Io=({section:e,Icon:t})=>{const n=z(i=>i.ui.sidebarState.selectedSection),r=q();return c.jsx("button",{className:`btn btn-ghost btn-sm rounded-btn px-0 flex-grow ${e===n?"text-secondary":""}`,onClick:()=>r(cx(e)),children:c.jsx(t,{size:"2em"})})},Iy={[Ct.Home]:Fj,[Ct.ModelSettings]:Bj,[Ct.Settings]:qj,[Ct.WorldInfo]:tk,[Ct.Memory]:nk},rk=()=>{var n;const[e,t]=z(r=>[r.config.koboldConfig,r.connection.socketState],cn);return c.jsxs("div",{className:"text-center py-3",children:[c.jsx("span",{className:Qt("inline-block rounded w-2 h-2 mx-2",t===Ut.CONNECTED&&"bg-success",t===Ut.DISCONNECTED&&"bg-error",t===Ut.READY_TO_CONNECT&&"bg-warning")}),t===Ut.CONNECTED?(n=e.model)==null?void 0:n.model:"[Not Connected]"]})},ik=()=>{const e=z(r=>r.ui.sidebarState.selectedSection),t=Object.keys(Iy).includes(e)?Iy[e]:null,n=q();return c.jsxs("div",{className:"drawer-side",children:[c.jsx("label",{className:"drawer-overlay",onClick:()=>{n(sx()),n(cx(Ct.Home))}}),c.jsxs("div",{className:"w-[88%] min-h-full h-full bg-base-100 text-base-content flex flex-col max-w-md",children:[c.jsx(rk,{}),c.jsxs("div",{className:"px-4 drawer-subnav text-center py-2 border-y border-neutral flex flex-wrap",children:[c.jsx(Io,{section:Ct.Home,Icon:Ej}),c.jsx(Io,{section:Ct.ModelSettings,Icon:zb}),c.jsx(Io,{section:Ct.WorldInfo,Icon:Kb}),c.jsx(Io,{section:Ct.Memory,Icon:Ur}),c.jsx(Io,{section:Ct.Settings,Icon:Tj})]}),t&&c.jsx("div",{className:"overflow-y-auto flex flex-col flex-grow",children:c.jsx(t,{})})]})]})},ok=()=>{const{koboldConfig:e,sequenceNumbers:t}=z(u=>u.config),n=e.story,[r]=Pe("story_story_name",t),i=z(u=>u.ui.modalState),o=(n==null?void 0:n.story_name)||"New Story",l=w.useContext(Q),[,s]=w.useState(o),a=q();return i.saveStory.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"save-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Save Story"}),c.jsx("p",{className:"py-4",children:c.jsx("input",{type:"text",onChange:u=>{s(u.target.value),l==null||l.varChange("story_story_name",u.target.value,r+1),a(X({key:"story_story_name",sequenceNumber:r+1}))},className:"input input-bordered w-full",placeholder:"Story Name",defaultValue:o})}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{a(te("saveStory"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{l==null||l.saveStoryWithCallback(u=>{u==="overwrite?"&&a(me({name:"overwriteStory"})),a(te("saveStory"))})},className:"btn",children:"Save"})]})]})})]}):null},lk=()=>{const e=w.useContext(Q),t=z(r=>r.ui.modalState),n=q();return t.overwriteStory.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"overwrite-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Save Story"}),c.jsx("p",{className:"py-4",children:"A story with this name already exists. Do you want to overwrite it?"}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{n(te("overwriteStory"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{e==null||e.overwriteStory(),n(te("overwriteStory"))},className:"btn",children:"Overwrite"})]})]})})]}):null},sk=()=>{var i;const e=w.useContext(Q),t=z(o=>o.ui.modalState),n=q(),r=(i=t.confirmDeleteStory)==null?void 0:i.data;return t.confirmDeleteStory.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"confirm-delete-story-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Delete Story?"}),c.jsxs("p",{className:"py-4",children:["Please confirm that you would like to permanently delete"," ",c.jsx("i",{children:r==null?void 0:r.name}),"."]}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{n(te("confirmDeleteStory"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{e==null||e.deleteStory(r.path),n(te("confirmDeleteStory"))},className:"btn",children:"Delete"})]})]})})]}):null},ak=()=>{const e=z(s=>s.ui.modalState),t=w.useContext(Q),n=q(),[r,i]=w.useState(""),[o,l]=w.useState("");return e.savePreset.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"save-preset-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("input",{type:"text",className:"input input-bordered w-full mb-4",placeholder:"Name",onChange:s=>{i(s.target.value)}}),c.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Description",onChange:s=>{l(s.target.value)}}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>n(te("savePreset")),className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{t==null||t.saveNewPreset(r,o),n(te("savePreset"))},className:"btn",children:"Save"})]})]})})]}):null},uk=()=>{const e=z(p=>p.ui.modalState),{koboldConfig:t,sequenceNumbers:n}=z(p=>p.config),[r]=Pe("model_sampler_order",n),i=w.useContext(Q),o=q(),l=["Top K","Top A","Top P","Tail Free Sampling","Typical Sampling","Temperature","Repetition Penalty"],{sampler_order:s}=t.model||{},[a,u]=w.useState(null),[d,h]=w.useState(null),f=a===null?s:a;return e.samplerOrder.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"sampler-order-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box flex flex-col",children:[c.jsx("ul",{className:"menu overflow-auto flex-row",children:f==null?void 0:f.map(p=>c.jsx("li",{className:"justify-between flex flex-row w-full",onClick:()=>{h(d===p?null:p)},children:c.jsx("a",{className:Qt(d===p&&"active","flex items-center text-lg w-full py-4"),children:l[p]})},p))}),c.jsxs("div",{className:"modal-action justify-between",children:[c.jsxs("div",{className:"text-right space-x-2",children:[c.jsx("button",{className:"btn",onClick:()=>{if(d===null)return;const p=[...a||s||[]],m=p.indexOf(d),y=m===0?p.length-1:m-1;[p[m],p[y]]=[p[y],p[m]],u(p)},children:c.jsx(Bb,{size:"1.5em"})}),c.jsx("button",{className:"btn",onClick:()=>{if(d===null)return;const p=[...a||s||[]],m=p.indexOf(d),y=m===p.length-1?0:m+1;[p[m],p[y]]=[p[y],p[m]],u(p)},children:c.jsx(kb,{size:"1.5em"})})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("label",{onClick:()=>{o(te("samplerOrder")),u(null),h(null)},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{a!==null&&(i==null||i.varChange("model_sampler_order",a,r+1),o(X({key:"story_story_name",sequenceNumber:r+1}))),o(te("samplerOrder")),u(null),h(null)},className:"btn",children:"Save"})]})]})]})})]}):null},ck=()=>{var a;const e=z(u=>u.ui.modalState),t=w.useContext(Q),n=q(),r=e.selectOption.data,i=z(u=>{var d;return(d=u.config.koboldConfig.story)==null?void 0:d.actions}),o=!(i!=null&&i.length)||typeof(r==null?void 0:r.actionId)!="number"?[]:((a=i[r.actionId])==null?void 0:a.action.Options)||[],l=z(u=>{var d;return(d=u.config.koboldConfig.system)==null?void 0:d.aibusy}),s=u=>{l&&(t==null||t.abort()),t==null||t.useOptionText(r.actionId,u),n(te("selectOption"))};return e.selectOption.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"first-run-modal",className:"modal-toggle"}),c.jsx("div",{className:Qt("modal",e.selectOption.active&&"modal-open"),children:c.jsxs("div",{className:"modal-box flex flex-col",children:[c.jsx("ul",{className:"menu overflow-auto flex-row",children:o.map((u,d)=>c.jsx("li",{className:"w-full border border-neutral rounded mb-2",children:c.jsx("a",{onClick:()=>s(d),children:u.text})},d))}),c.jsx("div",{className:"modal-action",children:c.jsx("label",{onClick:()=>{n(te("selectOption"))},className:"btn",children:"Cancel"})})]})})]}):null},dk=()=>{const e=w.useContext(Q),{modalState:t,availableUserscripts:n}=z(l=>({modalState:l.ui.modalState,availableUserscripts:l.ui.availableUserscripts}),cn),r=q(),[i,o]=w.useState(null);return t.addUserscript.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"add-userscript-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box flex flex-col",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Add Userscript"}),n.length===0&&c.jsx("div",{className:"text-center mt-6",children:"No userscripts found."}),!!n.length&&c.jsx("ul",{className:"menu menu-md overflow-auto flex-row",children:n.map(l=>c.jsx("li",{className:Qt("w-full",l.path===i&&"bg-primary text-primary-content"),onClick:()=>{const s=i===l.path?null:l.path;o(s)},children:c.jsxs("div",{className:"block",children:[c.jsx("div",{className:"font-bold",children:l.name}),c.jsx("div",{children:l.description})]})},l.path))}),c.jsxs("div",{className:"modal-action",children:[c.jsx("button",{onClick:()=>{r(te("addUserscript"))},className:"btn",children:"Cancel"}),c.jsx("button",{disabled:!i,onClick:()=>{e==null||e.addUserscript(i),r(te("addUserscript"))},className:"btn btn-primary",children:"Add"})]})]})})]}):null},fk=e=>e.reduce((t,n)=>n.phrase.length?{...t,[n.phrase]:[n.bias,n.completionThreshold]}:t,{}),pk=e=>e?Object.entries(e).map(([t,[n,r]])=>({phrase:t,bias:n,completionThreshold:r})):[],hk=({phrase:e,bias:t,completionThreshold:n,onClose:r,onChange:i})=>c.jsxs("li",{className:"p-4 space-y-2 border border-neutral rounded my-2",children:[c.jsxs("div",{className:"flex flex-row",children:[c.jsx("input",{placeholder:"Phrase",className:"input input-bordered input-md mr-2 w-full",type:"text",onChange:o=>{i("phrase",o)},value:e}),c.jsx("button",{onClick:r,className:"btn btn-md btn-error",children:c.jsx(co,{size:"1.5em"})})]}),c.jsxs("div",{className:"form-control",children:[c.jsx("label",{className:"label",children:c.jsx("span",{className:"label-text",children:"Bias"})}),c.jsx("input",{type:"range",step:.01,min:-50,max:50,value:t,onChange:o=>{i("bias",o)},className:"range range-primary"})]}),c.jsxs("div",{className:"form-control",children:[c.jsx("label",{className:"label",children:c.jsx("span",{className:"label-text",children:"Completion Threshold"})}),c.jsx("input",{type:"range",step:1,min:0,max:10,value:n,onChange:o=>{i("completionThreshold",o)},className:"range range-primary"})]})]}),Ay=(e,t,n)=>{n==null||n.phraseBiasUpdate(fk(e),t)},mk=()=>{var d;const{socket:e}=w.useContext(Yl),t=w.useContext(Q),n=q(),{koboldConfig:r,sequenceNumbers:i}=z(h=>h.config),o=(d=r.story)==null?void 0:d.biases,{modalState:l,localBiases:s}=z(h=>({modalState:h.ui.modalState,localBiases:h.ui.localBiases}),cn),[a,u]=Pe("story_biases",i);return w.useEffect(()=>{const h=Zt.startListening({actionCreator:bu,effect:f=>{if(f.payload.classname==="story"&&f.payload.name==="biases"){const p=pk(f.payload.value);s.reduce((y,_,g)=>(_.phrase===""&&y.push({bias:_,idx:g}),y),[]).forEach(({bias:y,idx:_})=>{p.splice(_,0,y)}),n(Es(p))}}});return()=>{h()}},[o,n,s,u]),!e||!l.biasing.active?null:c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"biasing-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box flex flex-col",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Biasing"}),!s.length&&c.jsx("div",{className:"text-center mt-6",children:"No biases."}),!!s.length&&c.jsx("ul",{className:"overflow-auto flex-row",children:s.map((h,f)=>c.jsx(hk,{onChange:(p,m)=>{const y=[...s.map(_=>({..._}))];p==="phrase"?y[f].phrase=m.target.value:p==="bias"?y[f].bias=parseFloat(m.target.value):p==="completionThreshold"&&(y[f].completionThreshold=parseInt(m.target.value)),n(Es(y)),n(X({key:"story_biases",sequenceNumber:a+1})),Ay(y,a+1,t)},onClose:()=>{const p=s.filter((m,y)=>y!==f);n(Es(p)),n(X({key:"story_biases",sequenceNumber:a+1})),Ay(p,a+1,t)},...h},f))}),c.jsxs("div",{className:"modal-action",children:[c.jsx("button",{onClick:()=>{n(te("biasing"))},className:"btn",children:"Close"}),c.jsx("button",{onClick:()=>{n(Es([...s,{phrase:"",bias:0,completionThreshold:10}]))},className:"btn btn-primary",children:"Add New"})]})]})})]})},gk=()=>{const{socket:e}=w.useContext(Yl),t=w.useContext(Q),{modalState:n,substitutions:r,localSubstitutions:i,sequenceNumbers:o}=z(f=>{var p,m;return{modalState:f.ui.modalState,substitutions:(m=(p=f.config.koboldConfig)==null?void 0:p.story)==null?void 0:m.substitutions,localSubstitutions:f.ui.localSubstitutions,sequenceNumbers:f.config.sequenceNumbers}},cn),l=q(),[s,a]=Pe("story_substitutions",o);w.useEffect(()=>{const f=Zt.startListening({actionCreator:bu,effect:p=>{if(p.payload.classname==="story"&&p.payload.name==="substitutions"){const m=[...p.payload.value||[]];i.reduce((_,g,v)=>(g.target===""&&_.push({substitution:g,idx:v}),_),[]).forEach(({substitution:_,idx:g})=>{m.splice(g,0,_)}),l(Lo(m))}}});return()=>{f()}},[l,i,r,a]);const u=(f,p,m)=>{if(!e)return;const y=i.map(g=>({...g}));f==="target"?y[p].trueTarget=y[p].target=(m==null?void 0:m.target.value)||"":f==="substitution"?y[p].substitution=(m==null?void 0:m.target.value)||"":f==="enabled"&&(y[p].enabled=(m==null?void 0:m.target.checked)||!1),l(Lo(y));const _=y.filter(g=>g.target!=="");l(X({key:"story_substitutions",sequenceNumber:s+1})),t==null||t.substitutionUpdate(_,s+1)},d=f=>{if(!e)return;const p=i.map(y=>({...y}));p.splice(f,1),l(Lo(p));const m=p.filter(y=>y.target!=="");l(X({key:"story_substitutions",sequenceNumber:s+1})),t==null||t.substitutionUpdate(m,s+1)},h=f=>{if(!e)return;const p=i.map(y=>({...y}));p[f].enabled=!p[f].enabled,l(Lo(p));const m=p.filter(y=>y.target!=="");l(X({key:"story_substitutions",sequenceNumber:s+1})),t==null||t.substitutionUpdate(m,s+1)};return n.substitutions.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"substitutions-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box flex flex-col",children:[c.jsx("h3",{className:"font-bold text-lg mb-6",children:"Substitutions"}),c.jsxs("div",{className:"overflow-y-auto",children:[!i.length&&c.jsx("div",{className:"text-center",children:"No substitutions."}),i.map((f,p)=>c.jsxs("div",{className:"w-full rounded mb-2 flex space-x-2",children:[c.jsx("button",{className:"btn btn-ghost",onClick:()=>h(p),children:c.jsx(ch,{size:"1.5em",className:f.enabled?"text-primary":"text-error"})}),c.jsx("input",{className:"input input-bordered w-full",type:"text",placeholder:"Target",value:f.target,onChange:m=>u("target",p,m)}),c.jsx("input",{className:"input input-bordered w-full",type:"text",placeholder:"Substitution",value:f.substitution,onChange:m=>u("substitution",p,m)}),c.jsx("button",{className:"btn btn-error",onClick:()=>d(p),children:c.jsx(co,{size:"1.5em"})})]},p))]}),c.jsxs("div",{className:"modal-action",children:[c.jsx("button",{onClick:()=>{l(te("substitutions"))},className:"btn",children:"Close"}),c.jsx("button",{onClick:()=>{l(Lo([...i,{target:"",trueTarget:"",substitution:"",enabled:!0}]))},className:"btn btn-primary",children:"Add New"})]})]})})]}):null},yk=()=>{const e=w.useContext(Q),t=z(r=>r.ui.modalState),n=q();return t.confirmResetEditor.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"confirm-reset-editor-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Clear story?"}),c.jsx("p",{className:"py-4",children:"Please confirm that you would like to clear the story. Unsaved changes will be lost."}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{n(te("confirmResetEditor"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{e==null||e.newStory(),n(te("confirmResetEditor"))},className:"btn",children:"Delete"})]})]})})]}):null},vk=()=>{var i;const e=w.useContext(Q),t=z(o=>o.ui.modalState),n=q(),r=(i=t.confirmDeleteEntry)==null?void 0:i.data;return t.confirmDeleteEntry.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"confirm-delete-entry-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Delete entry?"}),c.jsxs("p",{className:"py-4",children:["Please confirm that you would like to permanently delete"," ",c.jsx("i",{children:r==null?void 0:r.title}),"."]}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{n(te("confirmDeleteEntry"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{e==null||e.deleteWorldInfoEntry(r.uid),n(te("confirmDeleteEntry"))},className:"btn",children:"Delete"})]})]})})]}):null},Ff=e=>e.replace(/[/\\?%*:|"<>]/g,"-"),oS=(e,t,n,r)=>fetch("/ghostpad/api/library/save",{method:"POST",body:JSON.stringify({filename:e,fileType:t,content:n,overwrite:r})}),xk=()=>{const e=z(l=>l.ui.modalState),t=q(),n=e.saveToLibrary.data,[r,i]=w.useState("");if(w.useEffect(()=>{(n==null?void 0:n.fileType)==="wi"&&typeof n.content!="string"?i(`${Ff(n.content.title)}`):i("")},[n==null?void 0:n.content,n==null?void 0:n.fileType]),!n)return null;const o=typeof n.content=="string"?n.content:JSON.stringify(n.content,null,2);return e.saveToLibrary.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"save-to-library-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("input",{type:"text",className:"input input-bordered w-full mb-4",placeholder:"Filename (No extension)",value:r,onChange:l=>{i(Ff(l.target.value))}}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>t(te("saveToLibrary")),className:"btn",children:"Cancel"}),c.jsx("label",{onClick:async()=>{const l=await oS(r,n.fileType,o,!1);l.status===409?t(me({name:"confirmOverwriteLibraryFile",data:{filename:r,content:o,fileType:n.fileType}})):l.status!==200&&console.error("Failed to save to library"),t(te("saveToLibrary"))},className:"btn",children:"Save"})]})]})})]}):null},_k=()=>{var o;const e=z(l=>l.ui.modalState),t=q();if(!e.confirmOverwriteLibraryFile.data)return null;const{filename:n,content:r,fileType:i}=(o=e.confirmOverwriteLibraryFile)==null?void 0:o.data;return e.confirmOverwriteLibraryFile.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"confirm-overwrite-library-file-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Overwrite existing file?"}),c.jsxs("p",{className:"py-4",children:["Please confirm that you would like to overwrite ",c.jsx("i",{children:n}),"."]}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{t(te("confirmOverwriteLibraryFile"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:async()=>{(await oS(n,i,r,!0)).status!==200&&alert("Error overwriting file."),t(te("confirmOverwriteLibraryFile"))},className:"btn",children:"Overwrite"})]})]})})]}):null},Sk=e=>fetch(`/ghostpad/api/library/list?${new URLSearchParams({fileType:e})}`,{method:"GET"}),Ah=async e=>{if(!e)return;const n=await(await Sk(e)).json();tt.dispatch(pb(n))},wk=(e,t,n)=>fetch("/ghostpad/api/library/rename",{method:"POST",body:JSON.stringify({filename:e,newName:t,fileType:n})}),Ck=(e,t)=>fetch(`/ghostpad/api/library/load?${new URLSearchParams({fileType:e,filename:t})}`,{method:"GET"}),Nk=({item:e,fileType:t,setEditingItem:n})=>{const r=w.useRef(null),[i,o]=w.useState(e.name);return w.useEffect(()=>{var l;(l=r.current)==null||l.focus()},[]),c.jsxs(c.Fragment,{children:[c.jsx("input",{className:"input input-sm bg-base-200 py-0 pl-4 border-0 max-w-none w-full !cursor-text",type:"text",value:i,onChange:l=>o(Ff(l.target.value)),ref:r}),c.jsx("button",{className:"px-4 py-2",onClick:()=>{n(null)},children:c.jsx(co,{size:"1.5em"})}),c.jsx("button",{className:"px-4 py-2",onClick:async()=>{i.length&&(await wk(e.filename,i,t)).status==200&&Ah(t).catch(s=>{console.error(s)}),n(null)},children:c.jsx(ch,{size:"1.5em"})})]})},Ek=()=>{const{modalState:e,libraryItems:t}=z(u=>({modalState:u.ui.modalState,libraryItems:u.ui.libraryItems}),cn),n=q(),[r,i]=w.useState(null),[o,l]=w.useState(null),{fileType:s,target:a}={...e.loadFromLibrary.data?e.loadFromLibrary.data:{}};return w.useEffect(()=>{Ah(s).catch(u=>{console.error(u)})},[s]),!s||!a?null:e.loadFromLibrary.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"load-from-library-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box flex flex-col",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Load From Library"}),!t.length&&c.jsx("div",{className:"text-center mt-6",children:"No entries found."}),!!t.length&&c.jsx("ul",{className:"menu menu-md overflow-y-auto flex-nowrap ",children:t.map(u=>c.jsxs("li",{className:"w-full flex flex-row flex-nowrap h-10 items-center",children:[r===u.filename&&c.jsx(Nk,{item:u,fileType:s,setEditingItem:i},u.filename),r!==u.filename&&c.jsxs(c.Fragment,{children:[c.jsx("label",{onClick:()=>{l(o===u?null:u)},className:Qt("flex-grow block py-0 h-10 leading-10 content-center whitespace-nowrap overflow-hidden overflow-ellipsis",o===u&&"active"),children:u.name}),c.jsx("button",{onClick:()=>{i(u.filename)},children:c.jsx(hx,{size:"1.5em"})}),c.jsx("button",{onClick:()=>{n(me({name:"confirmDeleteLibraryItem",data:{itemToDelete:u,fileType:s}}))},children:c.jsx(ju,{size:"1.5em"})})]})]},u.filename))}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{n(te("loadFromLibrary"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:async()=>{if(o&&s&&o.filename&&a){const u=await Ck(s,o.filename);if(u.status!==200){console.error("Failed to load from library");return}const{fileContents:d}=await u.json();n(Pl({name:o.name,filename:o.filename,content:d,fileType:s,target:a}))}n(te("loadFromLibrary"))},className:"btn",children:"Load"})]})]})})]}):null},Tk=(e,t)=>fetch("/ghostpad/api/library/remove",{method:"POST",body:JSON.stringify({filename:e,fileType:t})}),bk=()=>{const e=z(i=>i.ui.modalState),t=q();if(!e.confirmDeleteLibraryItem.data)return null;const{itemToDelete:n,fileType:r}=e.confirmDeleteLibraryItem.data;return e.confirmDeleteLibraryItem.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"confirm-delete-entry-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Delete entry?"}),c.jsxs("p",{className:"py-4",children:["Please confirm that you would like to permanently delete"," ",c.jsx("i",{children:n==null?void 0:n.name}),"."]}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{t(te("confirmDeleteLibraryItem"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:async()=>{(await Tk(n.name,r)).status===200&&Ah(r).catch(o=>{console.error(o)}),t(te("confirmDeleteLibraryItem"))},className:"btn",children:"Delete"})]})]})})]}):null},Ok=()=>c.jsxs(c.Fragment,{children:[c.jsx(mk,{}),c.jsx(ck,{}),c.jsx(ok,{}),c.jsx(lk,{}),c.jsx(sk,{}),c.jsx(ak,{}),c.jsx(uk,{}),c.jsx(dk,{}),c.jsx(gk,{}),c.jsx(vk,{}),c.jsx(yk,{}),c.jsx(xk,{}),c.jsx(_k,{}),c.jsx(Ek,{}),c.jsx(bk,{})]}),jk=()=>{const e=z(t=>t.config.ghostpadConfig);return c.jsxs(qd,{children:[c.jsx("title",{children:"GhostPad"}),";",c.jsx("meta",{name:"description",content:"AI text generation tool"}),c.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover, user-scalable=no, shrink-to-fit=no"}),c.jsx("meta",{name:"HandheldFriendly",content:"true"}),e&&c.jsx("style",{children:`
            :root {
              --editor-font: '${e.useGoogleFont?e.editorGoogleFont.cssFamily:e.editorLocalFont}';
              --editor-font-size: ${e.editorFontSize}px;
            }
          `})]})},kk=({textAreaRef:e})=>{const t=z(i=>i.config.koboldConfig.system),n=z(i=>i.config.koboldConfig.story),r=w.useContext(Q);return c.jsx("button",{className:Qt("btn w-16 mx-4",(t==null?void 0:t.aibusy)&&"hover:bg-error-content"),onClick:()=>{var i,o,l;if(t!=null&&t.aibusy)r==null||r.abort();else{const s=e==null?void 0:e.current;if(s){const a=(n==null?void 0:n.prompt_wi_highlighted_text.length)==0||((i=n==null?void 0:n.prompt_wi_highlighted_text[0])==null?void 0:i.text)=="",u=n==null?void 0:n.actions.filter(m=>{var y;return((y=m==null?void 0:m.action)==null?void 0:y["Selected Text"].length)>0}),d=u==null?void 0:u[u.length-1],h=d?d==null?void 0:d.action["Selected Text"]:(o=n==null?void 0:n.prompt_wi_highlighted_text[0])==null?void 0:o.text,p=(((l=h==null?void 0:h.slice(-1))==null?void 0:l[0])||"")==`
`;(n==null?void 0:n.storymode)!==0||!s.value.length||a||p?r==null||r.submit(s.value):(h!=null&&h.endsWith(`

`)&&(r==null||r.submit(s.value.slice(0,-1))),r==null||r.submit(`
${s.value}`)),s.value=""}}},children:t!=null&&t.aibusy?c.jsx(Ib,{size:"1.5em"}):c.jsx(Ab,{size:"1.5em"})})},Pk=()=>{const e=z(t=>t.ui);return c.jsx("input",{id:"sidebar-drawer",type:"checkbox",checked:e.sidebarState.active,className:"drawer-toggle",readOnly:!0})};function $k(){const e=q(),{socket:t}=w.useContext(Yl),n=z(i=>i.config.ghostpadConfig),r=w.useRef(null);return w.useEffect(()=>{(async()=>await(await fetch("/ghostpad/api/config")).json())().then(o=>{e(ih(o))}).catch(o=>{console.error(o)})},[e]),w.useEffect(()=>{Tb(e,t)},[t,e]),n?c.jsxs(c.Fragment,{children:[c.jsx(jk,{}),c.jsxs("main",{"data-theme":(n==null?void 0:n.theme)||"garden",children:[n.useGoogleFont&&c.jsxs(c.Fragment,{children:[c.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),c.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),c.jsx("link",{href:`https://fonts.googleapis.com/css2?family=${n.editorGoogleFont.linkFamily}:wght@400;700&&display=swap`,rel:"stylesheet"})]}),c.jsxs("div",{className:"drawer",children:[c.jsx(Pk,{}),c.jsxs("div",{className:"drawer-content h-screen-dvh flex flex-col",children:[c.jsx(O4,{}),c.jsx(_j,{}),c.jsx(Sj,{}),c.jsxs("div",{className:"h-36 flex justify-center items-center bg-base-300",children:[c.jsx("textarea",{ref:r,id:"user-input",className:"resize-none textarea textarea-bordered h-24 bg-base-200 w-full max-w-lg p-3 text-sm mx-4 my-2"}),c.jsx(kk,{textAreaRef:r})]})]}),c.jsx(ik,{}),c.jsx(Ok,{})]})]})]}):null}Jc.createRoot(document.getElementById("root")).render(c.jsx(SN,{store:tt,children:c.jsx(aT,{children:c.jsx(b4,{children:c.jsx(Wj,{children:c.jsx($k,{})})})})}));
