var mS=Object.defineProperty;var gS=(e,t,n)=>t in e?mS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Kh=(e,t,n)=>(gS(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function no(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fy={exports:{}},Ka={},zy={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hl=Symbol.for("react.element"),yS=Symbol.for("react.portal"),vS=Symbol.for("react.fragment"),xS=Symbol.for("react.strict_mode"),_S=Symbol.for("react.profiler"),SS=Symbol.for("react.provider"),wS=Symbol.for("react.context"),CS=Symbol.for("react.forward_ref"),NS=Symbol.for("react.suspense"),ES=Symbol.for("react.memo"),TS=Symbol.for("react.lazy"),Gh=Symbol.iterator;function OS(e){return e===null||typeof e!="object"?null:(e=Gh&&e[Gh]||e["@@iterator"],typeof e=="function"?e:null)}var By={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wy=Object.assign,Hy={};function ro(e,t,n){this.props=e,this.context=t,this.refs=Hy,this.updater=n||By}ro.prototype.isReactComponent={};ro.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ro.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Uy(){}Uy.prototype=ro.prototype;function Wf(e,t,n){this.props=e,this.context=t,this.refs=Hy,this.updater=n||By}var Hf=Wf.prototype=new Uy;Hf.constructor=Wf;Wy(Hf,ro.prototype);Hf.isPureReactComponent=!0;var Yh=Array.isArray,Vy=Object.prototype.hasOwnProperty,Uf={current:null},Ky={key:!0,ref:!0,__self:!0,__source:!0};function Gy(e,t,n){var r,i={},o=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)Vy.call(t,r)&&!Ky.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),u=0;u<s;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Hl,type:e,key:o,ref:l,props:i,_owner:Uf.current}}function bS(e,t){return{$$typeof:Hl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Vf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hl}function jS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Qh=/\/+/g;function Zu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jS(""+e.key):t.toString(36)}function Rs(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Hl:case yS:l=!0}}if(l)return l=e,i=i(l),e=r===""?"."+Zu(l,0):r,Yh(i)?(n="",e!=null&&(n=e.replace(Qh,"$&/")+"/"),Rs(i,t,n,"",function(u){return u})):i!=null&&(Vf(i)&&(i=bS(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Qh,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=r===""?".":r+":",Yh(e))for(var s=0;s<e.length;s++){o=e[s];var a=r+Zu(o,s);l+=Rs(o,t,n,a,i)}else if(a=OS(e),typeof a=="function")for(e=a.call(e),s=0;!(o=e.next()).done;)o=o.value,a=r+Zu(o,s++),l+=Rs(o,t,n,a,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function ss(e,t,n){if(e==null)return e;var r=[],i=0;return Rs(e,r,"","",function(o){return t.call(n,o,i++)}),r}function PS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ct={current:null},Ls={transition:null},kS={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:Ls,ReactCurrentOwner:Uf};Y.Children={map:ss,forEach:function(e,t,n){ss(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ss(e,function(){t++}),t},toArray:function(e){return ss(e,function(t){return t})||[]},only:function(e){if(!Vf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Y.Component=ro;Y.Fragment=vS;Y.Profiler=_S;Y.PureComponent=Wf;Y.StrictMode=xS;Y.Suspense=NS;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kS;Y.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Wy({},e.props),i=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=Uf.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(a in t)Vy.call(t,a)&&!Ky.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&s!==void 0?s[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){s=Array(a);for(var u=0;u<a;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Hl,type:e.type,key:i,ref:o,props:r,_owner:l}};Y.createContext=function(e){return e={$$typeof:wS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:SS,_context:e},e.Consumer=e};Y.createElement=Gy;Y.createFactory=function(e){var t=Gy.bind(null,e);return t.type=e,t};Y.createRef=function(){return{current:null}};Y.forwardRef=function(e){return{$$typeof:CS,render:e}};Y.isValidElement=Vf;Y.lazy=function(e){return{$$typeof:TS,_payload:{_status:-1,_result:e},_init:PS}};Y.memo=function(e,t){return{$$typeof:ES,type:e,compare:t===void 0?null:t}};Y.startTransition=function(e){var t=Ls.transition;Ls.transition={};try{e()}finally{Ls.transition=t}};Y.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Y.useCallback=function(e,t){return ct.current.useCallback(e,t)};Y.useContext=function(e){return ct.current.useContext(e)};Y.useDebugValue=function(){};Y.useDeferredValue=function(e){return ct.current.useDeferredValue(e)};Y.useEffect=function(e,t){return ct.current.useEffect(e,t)};Y.useId=function(){return ct.current.useId()};Y.useImperativeHandle=function(e,t,n){return ct.current.useImperativeHandle(e,t,n)};Y.useInsertionEffect=function(e,t){return ct.current.useInsertionEffect(e,t)};Y.useLayoutEffect=function(e,t){return ct.current.useLayoutEffect(e,t)};Y.useMemo=function(e,t){return ct.current.useMemo(e,t)};Y.useReducer=function(e,t,n){return ct.current.useReducer(e,t,n)};Y.useRef=function(e){return ct.current.useRef(e)};Y.useState=function(e){return ct.current.useState(e)};Y.useSyncExternalStore=function(e,t,n){return ct.current.useSyncExternalStore(e,t,n)};Y.useTransition=function(){return ct.current.useTransition()};Y.version="18.2.0";zy.exports=Y;var w=zy.exports;const Wt=no(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $S=w,RS=Symbol.for("react.element"),LS=Symbol.for("react.fragment"),AS=Object.prototype.hasOwnProperty,MS=$S.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IS={key:!0,ref:!0,__self:!0,__source:!0};function Yy(e,t,n){var r,i={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)AS.call(t,r)&&!IS.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:RS,type:e,key:o,ref:l,props:i,_owner:MS.current}}Ka.Fragment=LS;Ka.jsx=Yy;Ka.jsxs=Yy;Fy.exports=Ka;var c=Fy.exports,Zc={},Qy={exports:{}},jt={},Jy={exports:{}},qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,W){var V=R.length;R.push(W);e:for(;0<V;){var oe=V-1>>>1,we=R[oe];if(0<i(we,W))R[oe]=W,R[V]=we,V=oe;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var W=R[0],V=R.pop();if(V!==W){R[0]=V;e:for(var oe=0,we=R.length,un=we>>>1;oe<un;){var $t=2*(oe+1)-1,Pr=R[$t],Nn=$t+1,Vn=R[Nn];if(0>i(Pr,V))Nn<we&&0>i(Vn,Pr)?(R[oe]=Vn,R[Nn]=V,oe=Nn):(R[oe]=Pr,R[$t]=V,oe=$t);else if(Nn<we&&0>i(Vn,V))R[oe]=Vn,R[Nn]=V,oe=Nn;else break e}}return W}function i(R,W){var V=R.sortIndex-W.sortIndex;return V!==0?V:R.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,s=l.now();e.unstable_now=function(){return l.now()-s}}var a=[],u=[],f=1,d=null,p=3,h=!1,m=!1,g=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=R)r(u),W.sortIndex=W.expirationTime,t(a,W);else break;W=n(u)}}function S(R){if(g=!1,x(R),!m)if(n(a)!==null)m=!0,ai(C);else{var W=n(u);W!==null&&ui(S,W.startTime-R)}}function C(R,W){m=!1,g&&(g=!1,v(b),b=-1),h=!0;var V=p;try{for(x(W),d=n(a);d!==null&&(!(d.expirationTime>W)||R&&!G());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,p=d.priorityLevel;var we=oe(d.expirationTime<=W);W=e.unstable_now(),typeof we=="function"?d.callback=we:d===n(a)&&r(a),x(W)}else r(a);d=n(a)}if(d!==null)var un=!0;else{var $t=n(u);$t!==null&&ui(S,$t.startTime-W),un=!1}return un}finally{d=null,p=V,h=!1}}var T=!1,N=null,b=-1,z=5,L=-1;function G(){return!(e.unstable_now()-L<z)}function Be(){if(N!==null){var R=e.unstable_now();L=R;var W=!0;try{W=N(!0,R)}finally{W?Yt():(T=!1,N=null)}}else T=!1}var Yt;if(typeof y=="function")Yt=function(){y(Be)};else if(typeof MessageChannel<"u"){var _o=new MessageChannel,Ju=_o.port2;_o.port1.onmessage=Be,Yt=function(){Ju.postMessage(null)}}else Yt=function(){_(Be,0)};function ai(R){N=R,T||(T=!0,Yt())}function ui(R,W){b=_(function(){R(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,ai(C))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(R){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var V=p;p=W;try{return R()}finally{p=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,W){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var V=p;p=R;try{return W()}finally{p=V}},e.unstable_scheduleCallback=function(R,W,V){var oe=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?oe+V:oe):V=oe,R){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=V+we,R={id:f++,callback:W,priorityLevel:R,startTime:V,expirationTime:we,sortIndex:-1},V>oe?(R.sortIndex=V,t(u,R),n(a)===null&&R===n(u)&&(g?(v(b),b=-1):g=!0,ui(S,V-oe))):(R.sortIndex=we,t(a,R),m||h||(m=!0,ai(C))),R},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(R){var W=p;return function(){var V=p;p=W;try{return R.apply(this,arguments)}finally{p=V}}}})(qy);Jy.exports=qy;var DS=Jy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy=w,Tt=DS;function j(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zy=new Set,cl={};function ri(e,t){Vi(e,t),Vi(e+"Capture",t)}function Vi(e,t){for(cl[e]=t,e=0;e<t.length;e++)Zy.add(t[e])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ed=Object.prototype.hasOwnProperty,FS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jh={},qh={};function zS(e){return ed.call(qh,e)?!0:ed.call(Jh,e)?!1:FS.test(e)?qh[e]=!0:(Jh[e]=!0,!1)}function BS(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function WS(e,t,n,r){if(t===null||typeof t>"u"||BS(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dt(e,t,n,r,i,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ke[e]=new dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ke[t]=new dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ke[e]=new dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ke[e]=new dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ke[e]=new dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ke[e]=new dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ke[e]=new dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ke[e]=new dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ke[e]=new dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Kf=/[\-:]([a-z])/g;function Gf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Kf,Gf);Ke[t]=new dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Kf,Gf);Ke[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Kf,Gf);Ke[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ke[e]=new dt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ke[e]=new dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yf(e,t,n,r){var i=Ke.hasOwnProperty(t)?Ke[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(WS(t,n,i,r)&&(n=null),r||i===null?zS(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Bn=Xy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,as=Symbol.for("react.element"),gi=Symbol.for("react.portal"),yi=Symbol.for("react.fragment"),Qf=Symbol.for("react.strict_mode"),td=Symbol.for("react.profiler"),e0=Symbol.for("react.provider"),t0=Symbol.for("react.context"),Jf=Symbol.for("react.forward_ref"),nd=Symbol.for("react.suspense"),rd=Symbol.for("react.suspense_list"),qf=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),n0=Symbol.for("react.offscreen"),Xh=Symbol.iterator;function wo(e){return e===null||typeof e!="object"?null:(e=Xh&&e[Xh]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,ec;function Io(e){if(ec===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ec=t&&t[1]||""}return`
`+ec+e}var tc=!1;function nc(e,t){if(!e||tc)return"";tc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),l=i.length-1,s=o.length-1;1<=l&&0<=s&&i[l]!==o[s];)s--;for(;1<=l&&0<=s;l--,s--)if(i[l]!==o[s]){if(l!==1||s!==1)do if(l--,s--,0>s||i[l]!==o[s]){var a=`
`+i[l].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=l&&0<=s);break}}}finally{tc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Io(e):""}function HS(e){switch(e.tag){case 5:return Io(e.type);case 16:return Io("Lazy");case 13:return Io("Suspense");case 19:return Io("SuspenseList");case 0:case 2:case 15:return e=nc(e.type,!1),e;case 11:return e=nc(e.type.render,!1),e;case 1:return e=nc(e.type,!0),e;default:return""}}function id(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yi:return"Fragment";case gi:return"Portal";case td:return"Profiler";case Qf:return"StrictMode";case nd:return"Suspense";case rd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case t0:return(e.displayName||"Context")+".Consumer";case e0:return(e._context.displayName||"Context")+".Provider";case Jf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qf:return t=e.displayName||null,t!==null?t:id(e.type)||"Memo";case Jn:t=e._payload,e=e._init;try{return id(e(t))}catch{}}return null}function US(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return id(t);case 8:return t===Qf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function r0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function VS(e){var t=r0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function us(e){e._valueTracker||(e._valueTracker=VS(e))}function i0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=r0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Zs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function od(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Zh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=vr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function o0(e,t){t=t.checked,t!=null&&Yf(e,"checked",t,!1)}function ld(e,t){o0(e,t);var n=vr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sd(e,t.type,n):t.hasOwnProperty("defaultValue")&&sd(e,t.type,vr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function em(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function sd(e,t,n){(t!=="number"||Zs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Do=Array.isArray;function Pi(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+vr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ad(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(j(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(j(92));if(Do(n)){if(1<n.length)throw Error(j(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:vr(n)}}function l0(e,t){var n=vr(t.value),r=vr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function nm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function s0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ud(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?s0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var cs,a0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(cs=cs||document.createElement("div"),cs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=cs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function dl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KS=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(e){KS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ko[t]=Ko[e]})});function u0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ko.hasOwnProperty(e)&&Ko[e]?(""+t).trim():t+"px"}function c0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=u0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var GS=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cd(e,t){if(t){if(GS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(j(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(j(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(j(61))}if(t.style!=null&&typeof t.style!="object")throw Error(j(62))}}function dd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fd=null;function Xf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pd=null,ki=null,$i=null;function rm(e){if(e=Kl(e)){if(typeof pd!="function")throw Error(j(280));var t=e.stateNode;t&&(t=qa(t),pd(e.stateNode,e.type,t))}}function d0(e){ki?$i?$i.push(e):$i=[e]:ki=e}function f0(){if(ki){var e=ki,t=$i;if($i=ki=null,rm(e),t)for(e=0;e<t.length;e++)rm(t[e])}}function p0(e,t){return e(t)}function h0(){}var rc=!1;function m0(e,t,n){if(rc)return e(t,n);rc=!0;try{return p0(e,t,n)}finally{rc=!1,(ki!==null||$i!==null)&&(h0(),f0())}}function fl(e,t){var n=e.stateNode;if(n===null)return null;var r=qa(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(j(231,t,typeof n));return n}var hd=!1;if(Mn)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){hd=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{hd=!1}function YS(e,t,n,r,i,o,l,s,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var Go=!1,ea=null,ta=!1,md=null,QS={onError:function(e){Go=!0,ea=e}};function JS(e,t,n,r,i,o,l,s,a){Go=!1,ea=null,YS.apply(QS,arguments)}function qS(e,t,n,r,i,o,l,s,a){if(JS.apply(this,arguments),Go){if(Go){var u=ea;Go=!1,ea=null}else throw Error(j(198));ta||(ta=!0,md=u)}}function ii(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function g0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function im(e){if(ii(e)!==e)throw Error(j(188))}function XS(e){var t=e.alternate;if(!t){if(t=ii(e),t===null)throw Error(j(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return im(i),e;if(o===r)return im(i),t;o=o.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=o;else{for(var l=!1,s=i.child;s;){if(s===n){l=!0,n=i,r=o;break}if(s===r){l=!0,r=i,n=o;break}s=s.sibling}if(!l){for(s=o.child;s;){if(s===n){l=!0,n=o,r=i;break}if(s===r){l=!0,r=o,n=i;break}s=s.sibling}if(!l)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?e:t}function y0(e){return e=XS(e),e!==null?v0(e):null}function v0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=v0(e);if(t!==null)return t;e=e.sibling}return null}var x0=Tt.unstable_scheduleCallback,om=Tt.unstable_cancelCallback,ZS=Tt.unstable_shouldYield,ew=Tt.unstable_requestPaint,Ne=Tt.unstable_now,tw=Tt.unstable_getCurrentPriorityLevel,Zf=Tt.unstable_ImmediatePriority,_0=Tt.unstable_UserBlockingPriority,na=Tt.unstable_NormalPriority,nw=Tt.unstable_LowPriority,S0=Tt.unstable_IdlePriority,Ga=null,hn=null;function rw(e){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Ga,e,void 0,(e.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:lw,iw=Math.log,ow=Math.LN2;function lw(e){return e>>>=0,e===0?32:31-(iw(e)/ow|0)|0}var ds=64,fs=4194304;function Fo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ra(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var s=l&~i;s!==0?r=Fo(s):(o&=l,o!==0&&(r=Fo(o)))}else l=n&~i,l!==0?r=Fo(l):o!==0&&(r=Fo(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-on(t),i=1<<n,r|=e[n],t&=~i;return r}function sw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aw(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-on(o),s=1<<l,a=i[l];a===-1?(!(s&n)||s&r)&&(i[l]=sw(s,t)):a<=t&&(e.expiredLanes|=s),o&=~s}}function gd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function w0(){var e=ds;return ds<<=1,!(ds&4194240)&&(ds=64),e}function ic(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ul(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-on(t),e[t]=n}function uw(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-on(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function ep(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-on(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Z=0;function C0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var N0,tp,E0,T0,O0,yd=!1,ps=[],sr=null,ar=null,ur=null,pl=new Map,hl=new Map,Zn=[],cw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lm(e,t){switch(e){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":pl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(t.pointerId)}}function No(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Kl(t),t!==null&&tp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function dw(e,t,n,r,i){switch(t){case"focusin":return sr=No(sr,e,t,n,r,i),!0;case"dragenter":return ar=No(ar,e,t,n,r,i),!0;case"mouseover":return ur=No(ur,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return pl.set(o,No(pl.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,hl.set(o,No(hl.get(o)||null,e,t,n,r,i)),!0}return!1}function b0(e){var t=Ir(e.target);if(t!==null){var n=ii(t);if(n!==null){if(t=n.tag,t===13){if(t=g0(n),t!==null){e.blockedOn=t,O0(e.priority,function(){E0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function As(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=vd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fd=r,n.target.dispatchEvent(r),fd=null}else return t=Kl(n),t!==null&&tp(t),e.blockedOn=n,!1;t.shift()}return!0}function sm(e,t,n){As(e)&&n.delete(t)}function fw(){yd=!1,sr!==null&&As(sr)&&(sr=null),ar!==null&&As(ar)&&(ar=null),ur!==null&&As(ur)&&(ur=null),pl.forEach(sm),hl.forEach(sm)}function Eo(e,t){e.blockedOn===t&&(e.blockedOn=null,yd||(yd=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,fw)))}function ml(e){function t(i){return Eo(i,e)}if(0<ps.length){Eo(ps[0],e);for(var n=1;n<ps.length;n++){var r=ps[n];r.blockedOn===e&&(r.blockedOn=null)}}for(sr!==null&&Eo(sr,e),ar!==null&&Eo(ar,e),ur!==null&&Eo(ur,e),pl.forEach(t),hl.forEach(t),n=0;n<Zn.length;n++)r=Zn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Zn.length&&(n=Zn[0],n.blockedOn===null);)b0(n),n.blockedOn===null&&Zn.shift()}var Ri=Bn.ReactCurrentBatchConfig,ia=!0;function pw(e,t,n,r){var i=Z,o=Ri.transition;Ri.transition=null;try{Z=1,np(e,t,n,r)}finally{Z=i,Ri.transition=o}}function hw(e,t,n,r){var i=Z,o=Ri.transition;Ri.transition=null;try{Z=4,np(e,t,n,r)}finally{Z=i,Ri.transition=o}}function np(e,t,n,r){if(ia){var i=vd(e,t,n,r);if(i===null)hc(e,t,r,oa,n),lm(e,r);else if(dw(i,e,t,n,r))r.stopPropagation();else if(lm(e,r),t&4&&-1<cw.indexOf(e)){for(;i!==null;){var o=Kl(i);if(o!==null&&N0(o),o=vd(e,t,n,r),o===null&&hc(e,t,r,oa,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else hc(e,t,r,null,n)}}var oa=null;function vd(e,t,n,r){if(oa=null,e=Xf(r),e=Ir(e),e!==null)if(t=ii(e),t===null)e=null;else if(n=t.tag,n===13){if(e=g0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return oa=e,null}function j0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tw()){case Zf:return 1;case _0:return 4;case na:case nw:return 16;case S0:return 536870912;default:return 16}default:return 16}}var nr=null,rp=null,Ms=null;function P0(){if(Ms)return Ms;var e,t=rp,n=t.length,r,i="value"in nr?nr.value:nr.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===i[o-r];r++);return Ms=i.slice(e,1<r?1-r:void 0)}function Is(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hs(){return!0}function am(){return!1}function Pt(e){function t(n,r,i,o,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?hs:am,this.isPropagationStopped=am,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),t}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ip=Pt(io),Vl=_e({},io,{view:0,detail:0}),mw=Pt(Vl),oc,lc,To,Ya=_e({},Vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:op,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==To&&(To&&e.type==="mousemove"?(oc=e.screenX-To.screenX,lc=e.screenY-To.screenY):lc=oc=0,To=e),oc)},movementY:function(e){return"movementY"in e?e.movementY:lc}}),um=Pt(Ya),gw=_e({},Ya,{dataTransfer:0}),yw=Pt(gw),vw=_e({},Vl,{relatedTarget:0}),sc=Pt(vw),xw=_e({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),_w=Pt(xw),Sw=_e({},io,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ww=Pt(Sw),Cw=_e({},io,{data:0}),cm=Pt(Cw),Nw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ew={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ow(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Tw[e])?!!t[e]:!1}function op(){return Ow}var bw=_e({},Vl,{key:function(e){if(e.key){var t=Nw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Is(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ew[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:op,charCode:function(e){return e.type==="keypress"?Is(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Is(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jw=Pt(bw),Pw=_e({},Ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dm=Pt(Pw),kw=_e({},Vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:op}),$w=Pt(kw),Rw=_e({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lw=Pt(Rw),Aw=_e({},Ya,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mw=Pt(Aw),Iw=[9,13,27,32],lp=Mn&&"CompositionEvent"in window,Yo=null;Mn&&"documentMode"in document&&(Yo=document.documentMode);var Dw=Mn&&"TextEvent"in window&&!Yo,k0=Mn&&(!lp||Yo&&8<Yo&&11>=Yo),fm=String.fromCharCode(32),pm=!1;function $0(e,t){switch(e){case"keyup":return Iw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vi=!1;function Fw(e,t){switch(e){case"compositionend":return R0(t);case"keypress":return t.which!==32?null:(pm=!0,fm);case"textInput":return e=t.data,e===fm&&pm?null:e;default:return null}}function zw(e,t){if(vi)return e==="compositionend"||!lp&&$0(e,t)?(e=P0(),Ms=rp=nr=null,vi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return k0&&t.locale!=="ko"?null:t.data;default:return null}}var Bw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bw[e.type]:t==="textarea"}function L0(e,t,n,r){d0(r),t=la(t,"onChange"),0<t.length&&(n=new ip("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qo=null,gl=null;function Ww(e){V0(e,0)}function Qa(e){var t=Si(e);if(i0(t))return e}function Hw(e,t){if(e==="change")return t}var A0=!1;if(Mn){var ac;if(Mn){var uc="oninput"in document;if(!uc){var mm=document.createElement("div");mm.setAttribute("oninput","return;"),uc=typeof mm.oninput=="function"}ac=uc}else ac=!1;A0=ac&&(!document.documentMode||9<document.documentMode)}function gm(){Qo&&(Qo.detachEvent("onpropertychange",M0),gl=Qo=null)}function M0(e){if(e.propertyName==="value"&&Qa(gl)){var t=[];L0(t,gl,e,Xf(e)),m0(Ww,t)}}function Uw(e,t,n){e==="focusin"?(gm(),Qo=t,gl=n,Qo.attachEvent("onpropertychange",M0)):e==="focusout"&&gm()}function Vw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qa(gl)}function Kw(e,t){if(e==="click")return Qa(t)}function Gw(e,t){if(e==="input"||e==="change")return Qa(t)}function Yw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sn=typeof Object.is=="function"?Object.is:Yw;function yl(e,t){if(sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ed.call(t,i)||!sn(e[i],t[i]))return!1}return!0}function ym(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vm(e,t){var n=ym(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ym(n)}}function I0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?I0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function D0(){for(var e=window,t=Zs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Zs(e.document)}return t}function sp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Qw(e){var t=D0(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&I0(n.ownerDocument.documentElement,n)){if(r!==null&&sp(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=vm(n,o);var l=vm(n,r);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jw=Mn&&"documentMode"in document&&11>=document.documentMode,xi=null,xd=null,Jo=null,_d=!1;function xm(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_d||xi==null||xi!==Zs(r)||(r=xi,"selectionStart"in r&&sp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jo&&yl(Jo,r)||(Jo=r,r=la(xd,"onSelect"),0<r.length&&(t=new ip("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=xi)))}function ms(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _i={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionend:ms("Transition","TransitionEnd")},cc={},F0={};Mn&&(F0=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);function Ja(e){if(cc[e])return cc[e];if(!_i[e])return e;var t=_i[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in F0)return cc[e]=t[n];return e}var z0=Ja("animationend"),B0=Ja("animationiteration"),W0=Ja("animationstart"),H0=Ja("transitionend"),U0=new Map,_m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){U0.set(e,t),ri(t,[e])}for(var dc=0;dc<_m.length;dc++){var fc=_m[dc],qw=fc.toLowerCase(),Xw=fc[0].toUpperCase()+fc.slice(1);Tr(qw,"on"+Xw)}Tr(z0,"onAnimationEnd");Tr(B0,"onAnimationIteration");Tr(W0,"onAnimationStart");Tr("dblclick","onDoubleClick");Tr("focusin","onFocus");Tr("focusout","onBlur");Tr(H0,"onTransitionEnd");Vi("onMouseEnter",["mouseout","mouseover"]);Vi("onMouseLeave",["mouseout","mouseover"]);Vi("onPointerEnter",["pointerout","pointerover"]);Vi("onPointerLeave",["pointerout","pointerover"]);ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ri("onBeforeInput",["compositionend","keypress","textInput","paste"]);ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zw=new Set("cancel close invalid load scroll toggle".split(" ").concat(zo));function Sm(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,qS(r,t,void 0,e),e.currentTarget=null}function V0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var l=r.length-1;0<=l;l--){var s=r[l],a=s.instance,u=s.currentTarget;if(s=s.listener,a!==o&&i.isPropagationStopped())break e;Sm(i,s,u),o=a}else for(l=0;l<r.length;l++){if(s=r[l],a=s.instance,u=s.currentTarget,s=s.listener,a!==o&&i.isPropagationStopped())break e;Sm(i,s,u),o=a}}}if(ta)throw e=md,ta=!1,md=null,e}function le(e,t){var n=t[Ed];n===void 0&&(n=t[Ed]=new Set);var r=e+"__bubble";n.has(r)||(K0(t,e,2,!1),n.add(r))}function pc(e,t,n){var r=0;t&&(r|=4),K0(n,e,r,t)}var gs="_reactListening"+Math.random().toString(36).slice(2);function vl(e){if(!e[gs]){e[gs]=!0,Zy.forEach(function(n){n!=="selectionchange"&&(Zw.has(n)||pc(n,!1,e),pc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gs]||(t[gs]=!0,pc("selectionchange",!1,t))}}function K0(e,t,n,r){switch(j0(t)){case 1:var i=pw;break;case 4:i=hw;break;default:i=np}n=i.bind(null,t,n,e),i=void 0,!hd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function hc(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;s!==null;){if(l=Ir(s),l===null)return;if(a=l.tag,a===5||a===6){r=o=l;continue e}s=s.parentNode}}r=r.return}m0(function(){var u=o,f=Xf(n),d=[];e:{var p=U0.get(e);if(p!==void 0){var h=ip,m=e;switch(e){case"keypress":if(Is(n)===0)break e;case"keydown":case"keyup":h=jw;break;case"focusin":m="focus",h=sc;break;case"focusout":m="blur",h=sc;break;case"beforeblur":case"afterblur":h=sc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=um;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=yw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=$w;break;case z0:case B0:case W0:h=_w;break;case H0:h=Lw;break;case"scroll":h=mw;break;case"wheel":h=Mw;break;case"copy":case"cut":case"paste":h=ww;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=dm}var g=(t&4)!==0,_=!g&&e==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var y=u,x;y!==null;){x=y;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,v!==null&&(S=fl(y,v),S!=null&&g.push(xl(y,S,x)))),_)break;y=y.return}0<g.length&&(p=new h(p,m,null,n,f),d.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&n!==fd&&(m=n.relatedTarget||n.fromElement)&&(Ir(m)||m[In]))break e;if((h||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=u,m=m?Ir(m):null,m!==null&&(_=ii(m),m!==_||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(g=um,S="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=dm,S="onPointerLeave",v="onPointerEnter",y="pointer"),_=h==null?p:Si(h),x=m==null?p:Si(m),p=new g(S,y+"leave",h,n,f),p.target=_,p.relatedTarget=x,S=null,Ir(f)===u&&(g=new g(v,y+"enter",m,n,f),g.target=x,g.relatedTarget=_,S=g),_=S,h&&m)t:{for(g=h,v=m,y=0,x=g;x;x=ci(x))y++;for(x=0,S=v;S;S=ci(S))x++;for(;0<y-x;)g=ci(g),y--;for(;0<x-y;)v=ci(v),x--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=ci(g),v=ci(v)}g=null}else g=null;h!==null&&wm(d,p,h,g,!1),m!==null&&_!==null&&wm(d,_,m,g,!0)}}e:{if(p=u?Si(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var C=Hw;else if(hm(p))if(A0)C=Gw;else{C=Vw;var T=Uw}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=Kw);if(C&&(C=C(e,u))){L0(d,C,n,f);break e}T&&T(e,p,u),e==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&sd(p,"number",p.value)}switch(T=u?Si(u):window,e){case"focusin":(hm(T)||T.contentEditable==="true")&&(xi=T,xd=u,Jo=null);break;case"focusout":Jo=xd=xi=null;break;case"mousedown":_d=!0;break;case"contextmenu":case"mouseup":case"dragend":_d=!1,xm(d,n,f);break;case"selectionchange":if(Jw)break;case"keydown":case"keyup":xm(d,n,f)}var N;if(lp)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else vi?$0(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(k0&&n.locale!=="ko"&&(vi||b!=="onCompositionStart"?b==="onCompositionEnd"&&vi&&(N=P0()):(nr=f,rp="value"in nr?nr.value:nr.textContent,vi=!0)),T=la(u,b),0<T.length&&(b=new cm(b,e,null,n,f),d.push({event:b,listeners:T}),N?b.data=N:(N=R0(n),N!==null&&(b.data=N)))),(N=Dw?Fw(e,n):zw(e,n))&&(u=la(u,"onBeforeInput"),0<u.length&&(f=new cm("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=N))}V0(d,t)})}function xl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function la(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=fl(e,n),o!=null&&r.unshift(xl(e,o,i)),o=fl(e,t),o!=null&&r.push(xl(e,o,i))),e=e.return}return r}function ci(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wm(e,t,n,r,i){for(var o=t._reactName,l=[];n!==null&&n!==r;){var s=n,a=s.alternate,u=s.stateNode;if(a!==null&&a===r)break;s.tag===5&&u!==null&&(s=u,i?(a=fl(n,o),a!=null&&l.unshift(xl(n,a,s))):i||(a=fl(n,o),a!=null&&l.push(xl(n,a,s)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var eC=/\r\n?/g,tC=/\u0000|\uFFFD/g;function Cm(e){return(typeof e=="string"?e:""+e).replace(eC,`
`).replace(tC,"")}function ys(e,t,n){if(t=Cm(t),Cm(e)!==t&&n)throw Error(j(425))}function sa(){}var Sd=null,wd=null;function Cd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nd=typeof setTimeout=="function"?setTimeout:void 0,nC=typeof clearTimeout=="function"?clearTimeout:void 0,Nm=typeof Promise=="function"?Promise:void 0,rC=typeof queueMicrotask=="function"?queueMicrotask:typeof Nm<"u"?function(e){return Nm.resolve(null).then(e).catch(iC)}:Nd;function iC(e){setTimeout(function(){throw e})}function mc(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ml(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ml(t)}function cr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Em(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var oo=Math.random().toString(36).slice(2),pn="__reactFiber$"+oo,_l="__reactProps$"+oo,In="__reactContainer$"+oo,Ed="__reactEvents$"+oo,oC="__reactListeners$"+oo,lC="__reactHandles$"+oo;function Ir(e){var t=e[pn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[In]||n[pn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Em(e);e!==null;){if(n=e[pn])return n;e=Em(e)}return t}e=n,n=e.parentNode}return null}function Kl(e){return e=e[pn]||e[In],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Si(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(j(33))}function qa(e){return e[_l]||null}var Td=[],wi=-1;function Or(e){return{current:e}}function ce(e){0>wi||(e.current=Td[wi],Td[wi]=null,wi--)}function ie(e,t){wi++,Td[wi]=e.current,e.current=t}var xr={},tt=Or(xr),mt=Or(!1),Gr=xr;function Ki(e,t){var n=e.type.contextTypes;if(!n)return xr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function gt(e){return e=e.childContextTypes,e!=null}function aa(){ce(mt),ce(tt)}function Tm(e,t,n){if(tt.current!==xr)throw Error(j(168));ie(tt,t),ie(mt,n)}function G0(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(j(108,US(e)||"Unknown",i));return _e({},n,r)}function ua(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xr,Gr=tt.current,ie(tt,e),ie(mt,mt.current),!0}function Om(e,t,n){var r=e.stateNode;if(!r)throw Error(j(169));n?(e=G0(e,t,Gr),r.__reactInternalMemoizedMergedChildContext=e,ce(mt),ce(tt),ie(tt,e)):ce(mt),ie(mt,n)}var bn=null,Xa=!1,gc=!1;function Y0(e){bn===null?bn=[e]:bn.push(e)}function sC(e){Xa=!0,Y0(e)}function br(){if(!gc&&bn!==null){gc=!0;var e=0,t=Z;try{var n=bn;for(Z=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}bn=null,Xa=!1}catch(i){throw bn!==null&&(bn=bn.slice(e+1)),x0(Zf,br),i}finally{Z=t,gc=!1}}return null}var Ci=[],Ni=0,ca=null,da=0,Mt=[],It=0,Yr=null,kn=1,$n="";function Lr(e,t){Ci[Ni++]=da,Ci[Ni++]=ca,ca=e,da=t}function Q0(e,t,n){Mt[It++]=kn,Mt[It++]=$n,Mt[It++]=Yr,Yr=e;var r=kn;e=$n;var i=32-on(r)-1;r&=~(1<<i),n+=1;var o=32-on(t)+i;if(30<o){var l=i-i%5;o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,kn=1<<32-on(t)+i|n<<i|r,$n=o+e}else kn=1<<o|n<<i|r,$n=e}function ap(e){e.return!==null&&(Lr(e,1),Q0(e,1,0))}function up(e){for(;e===ca;)ca=Ci[--Ni],Ci[Ni]=null,da=Ci[--Ni],Ci[Ni]=null;for(;e===Yr;)Yr=Mt[--It],Mt[It]=null,$n=Mt[--It],Mt[It]=null,kn=Mt[--It],Mt[It]=null}var Et=null,Ct=null,he=!1,en=null;function J0(e,t){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function bm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Et=e,Ct=cr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Et=e,Ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yr!==null?{id:kn,overflow:$n}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Et=e,Ct=null,!0):!1;default:return!1}}function Od(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bd(e){if(he){var t=Ct;if(t){var n=t;if(!bm(e,t)){if(Od(e))throw Error(j(418));t=cr(n.nextSibling);var r=Et;t&&bm(e,t)?J0(r,n):(e.flags=e.flags&-4097|2,he=!1,Et=e)}}else{if(Od(e))throw Error(j(418));e.flags=e.flags&-4097|2,he=!1,Et=e}}}function jm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Et=e}function vs(e){if(e!==Et)return!1;if(!he)return jm(e),he=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Cd(e.type,e.memoizedProps)),t&&(t=Ct)){if(Od(e))throw q0(),Error(j(418));for(;t;)J0(e,t),t=cr(t.nextSibling)}if(jm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(j(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ct=cr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ct=null}}else Ct=Et?cr(e.stateNode.nextSibling):null;return!0}function q0(){for(var e=Ct;e;)e=cr(e.nextSibling)}function Gi(){Ct=Et=null,he=!1}function cp(e){en===null?en=[e]:en.push(e)}var aC=Bn.ReactCurrentBatchConfig;function Jt(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var fa=Or(null),pa=null,Ei=null,dp=null;function fp(){dp=Ei=pa=null}function pp(e){var t=fa.current;ce(fa),e._currentValue=t}function jd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Li(e,t){pa=e,dp=Ei=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function Ut(e){var t=e._currentValue;if(dp!==e)if(e={context:e,memoizedValue:t,next:null},Ei===null){if(pa===null)throw Error(j(308));Ei=e,pa.dependencies={lanes:0,firstContext:e}}else Ei=Ei.next=e;return t}var Dr=null;function hp(e){Dr===null?Dr=[e]:Dr.push(e)}function X0(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,hp(t)):(n.next=i.next,i.next=n),t.interleaved=n,Dn(e,r)}function Dn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qn=!1;function mp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Z0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ln(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,q&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Dn(e,n)}return i=r.interleaved,i===null?(t.next=t,hp(r)):(t.next=i.next,i.next=t),r.interleaved=t,Dn(e,n)}function Ds(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ep(e,n)}}function Pm(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ha(e,t,n,r){var i=e.updateQueue;qn=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var a=s,u=a.next;a.next=null,l===null?o=u:l.next=u,l=a;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==l&&(s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=a))}if(o!==null){var d=i.baseState;l=0,f=u=a=null,s=o;do{var p=s.lane,h=s.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,g=s;switch(p=t,h=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(h,d,p);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,p=typeof m=="function"?m.call(h,d,p):m,p==null)break e;d=_e({},d,p);break e;case 2:qn=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[s]:p.push(s))}else h={eventTime:h,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(u=f=h,a=d):f=f.next=h,l|=p;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(f===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Jr|=l,e.lanes=l,e.memoizedState=d}}function km(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(j(191,i));i.call(r)}}}var ev=new Xy.Component().refs;function Pd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Za={isMounted:function(e){return(e=e._reactInternals)?ii(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ut(),i=pr(e),o=Ln(r,i);o.payload=t,n!=null&&(o.callback=n),t=dr(e,o,i),t!==null&&(ln(t,e,i,r),Ds(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ut(),i=pr(e),o=Ln(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=dr(e,o,i),t!==null&&(ln(t,e,i,r),Ds(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ut(),r=pr(e),i=Ln(n,r);i.tag=2,t!=null&&(i.callback=t),t=dr(e,i,r),t!==null&&(ln(t,e,r,n),Ds(t,e,r))}};function $m(e,t,n,r,i,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,l):t.prototype&&t.prototype.isPureReactComponent?!yl(n,r)||!yl(i,o):!0}function tv(e,t,n){var r=!1,i=xr,o=t.contextType;return typeof o=="object"&&o!==null?o=Ut(o):(i=gt(t)?Gr:tt.current,r=t.contextTypes,o=(r=r!=null)?Ki(e,i):xr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Za,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Rm(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Za.enqueueReplaceState(t,t.state,null)}function kd(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ev,mp(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Ut(o):(o=gt(t)?Gr:tt.current,i.context=Ki(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Pd(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Za.enqueueReplaceState(i,i.state,null),ha(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Oo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var s=i.refs;s===ev&&(s=i.refs={}),l===null?delete s[o]:s[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,e))}return e}function xs(e,t){throw e=Object.prototype.toString.call(t),Error(j(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lm(e){var t=e._init;return t(e._payload)}function nv(e){function t(v,y){if(e){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=hr(v,y),v.index=0,v.sibling=null,v}function o(v,y,x){return v.index=x,e?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function l(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,y,x,S){return y===null||y.tag!==6?(y=Cc(x,v.mode,S),y.return=v,y):(y=i(y,x),y.return=v,y)}function a(v,y,x,S){var C=x.type;return C===yi?f(v,y,x.props.children,S,x.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Jn&&Lm(C)===y.type)?(S=i(y,x.props),S.ref=Oo(v,y,x),S.return=v,S):(S=Us(x.type,x.key,x.props,null,v.mode,S),S.ref=Oo(v,y,x),S.return=v,S)}function u(v,y,x,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Nc(x,v.mode,S),y.return=v,y):(y=i(y,x.children||[]),y.return=v,y)}function f(v,y,x,S,C){return y===null||y.tag!==7?(y=Wr(x,v.mode,S,C),y.return=v,y):(y=i(y,x),y.return=v,y)}function d(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Cc(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case as:return x=Us(y.type,y.key,y.props,null,v.mode,x),x.ref=Oo(v,null,y),x.return=v,x;case gi:return y=Nc(y,v.mode,x),y.return=v,y;case Jn:var S=y._init;return d(v,S(y._payload),x)}if(Do(y)||wo(y))return y=Wr(y,v.mode,x,null),y.return=v,y;xs(v,y)}return null}function p(v,y,x,S){var C=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:s(v,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case as:return x.key===C?a(v,y,x,S):null;case gi:return x.key===C?u(v,y,x,S):null;case Jn:return C=x._init,p(v,y,C(x._payload),S)}if(Do(x)||wo(x))return C!==null?null:f(v,y,x,S,null);xs(v,x)}return null}function h(v,y,x,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(x)||null,s(y,v,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case as:return v=v.get(S.key===null?x:S.key)||null,a(y,v,S,C);case gi:return v=v.get(S.key===null?x:S.key)||null,u(y,v,S,C);case Jn:var T=S._init;return h(v,y,x,T(S._payload),C)}if(Do(S)||wo(S))return v=v.get(x)||null,f(y,v,S,C,null);xs(y,S)}return null}function m(v,y,x,S){for(var C=null,T=null,N=y,b=y=0,z=null;N!==null&&b<x.length;b++){N.index>b?(z=N,N=null):z=N.sibling;var L=p(v,N,x[b],S);if(L===null){N===null&&(N=z);break}e&&N&&L.alternate===null&&t(v,N),y=o(L,y,b),T===null?C=L:T.sibling=L,T=L,N=z}if(b===x.length)return n(v,N),he&&Lr(v,b),C;if(N===null){for(;b<x.length;b++)N=d(v,x[b],S),N!==null&&(y=o(N,y,b),T===null?C=N:T.sibling=N,T=N);return he&&Lr(v,b),C}for(N=r(v,N);b<x.length;b++)z=h(N,v,b,x[b],S),z!==null&&(e&&z.alternate!==null&&N.delete(z.key===null?b:z.key),y=o(z,y,b),T===null?C=z:T.sibling=z,T=z);return e&&N.forEach(function(G){return t(v,G)}),he&&Lr(v,b),C}function g(v,y,x,S){var C=wo(x);if(typeof C!="function")throw Error(j(150));if(x=C.call(x),x==null)throw Error(j(151));for(var T=C=null,N=y,b=y=0,z=null,L=x.next();N!==null&&!L.done;b++,L=x.next()){N.index>b?(z=N,N=null):z=N.sibling;var G=p(v,N,L.value,S);if(G===null){N===null&&(N=z);break}e&&N&&G.alternate===null&&t(v,N),y=o(G,y,b),T===null?C=G:T.sibling=G,T=G,N=z}if(L.done)return n(v,N),he&&Lr(v,b),C;if(N===null){for(;!L.done;b++,L=x.next())L=d(v,L.value,S),L!==null&&(y=o(L,y,b),T===null?C=L:T.sibling=L,T=L);return he&&Lr(v,b),C}for(N=r(v,N);!L.done;b++,L=x.next())L=h(N,v,b,L.value,S),L!==null&&(e&&L.alternate!==null&&N.delete(L.key===null?b:L.key),y=o(L,y,b),T===null?C=L:T.sibling=L,T=L);return e&&N.forEach(function(Be){return t(v,Be)}),he&&Lr(v,b),C}function _(v,y,x,S){if(typeof x=="object"&&x!==null&&x.type===yi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case as:e:{for(var C=x.key,T=y;T!==null;){if(T.key===C){if(C=x.type,C===yi){if(T.tag===7){n(v,T.sibling),y=i(T,x.props.children),y.return=v,v=y;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Jn&&Lm(C)===T.type){n(v,T.sibling),y=i(T,x.props),y.ref=Oo(v,T,x),y.return=v,v=y;break e}n(v,T);break}else t(v,T);T=T.sibling}x.type===yi?(y=Wr(x.props.children,v.mode,S,x.key),y.return=v,v=y):(S=Us(x.type,x.key,x.props,null,v.mode,S),S.ref=Oo(v,y,x),S.return=v,v=S)}return l(v);case gi:e:{for(T=x.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=i(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else t(v,y);y=y.sibling}y=Nc(x,v.mode,S),y.return=v,v=y}return l(v);case Jn:return T=x._init,_(v,y,T(x._payload),S)}if(Do(x))return m(v,y,x,S);if(wo(x))return g(v,y,x,S);xs(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,x),y.return=v,v=y):(n(v,y),y=Cc(x,v.mode,S),y.return=v,v=y),l(v)):n(v,y)}return _}var Yi=nv(!0),rv=nv(!1),Gl={},mn=Or(Gl),Sl=Or(Gl),wl=Or(Gl);function Fr(e){if(e===Gl)throw Error(j(174));return e}function gp(e,t){switch(ie(wl,t),ie(Sl,e),ie(mn,Gl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ud(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ud(t,e)}ce(mn),ie(mn,t)}function Qi(){ce(mn),ce(Sl),ce(wl)}function iv(e){Fr(wl.current);var t=Fr(mn.current),n=ud(t,e.type);t!==n&&(ie(Sl,e),ie(mn,n))}function yp(e){Sl.current===e&&(ce(mn),ce(Sl))}var ye=Or(0);function ma(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yc=[];function vp(){for(var e=0;e<yc.length;e++)yc[e]._workInProgressVersionPrimary=null;yc.length=0}var Fs=Bn.ReactCurrentDispatcher,vc=Bn.ReactCurrentBatchConfig,Qr=0,ve=null,ke=null,Le=null,ga=!1,qo=!1,Cl=0,uC=0;function Ye(){throw Error(j(321))}function xp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sn(e[n],t[n]))return!1;return!0}function _p(e,t,n,r,i,o){if(Qr=o,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fs.current=e===null||e.memoizedState===null?pC:hC,e=n(r,i),qo){o=0;do{if(qo=!1,Cl=0,25<=o)throw Error(j(301));o+=1,Le=ke=null,t.updateQueue=null,Fs.current=mC,e=n(r,i)}while(qo)}if(Fs.current=ya,t=ke!==null&&ke.next!==null,Qr=0,Le=ke=ve=null,ga=!1,t)throw Error(j(300));return e}function Sp(){var e=Cl!==0;return Cl=0,e}function fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?ve.memoizedState=Le=e:Le=Le.next=e,Le}function Vt(){if(ke===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var t=Le===null?ve.memoizedState:Le.next;if(t!==null)Le=t,ke=e;else{if(e===null)throw Error(j(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Le===null?ve.memoizedState=Le=e:Le=Le.next=e}return Le}function Nl(e,t){return typeof t=="function"?t(e):t}function xc(e){var t=Vt(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var r=ke,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=l=null,a=null,u=o;do{var f=u.lane;if((Qr&f)===f)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(s=a=d,l=r):a=a.next=d,ve.lanes|=f,Jr|=f}u=u.next}while(u!==null&&u!==o);a===null?l=r:a.next=s,sn(r,t.memoizedState)||(ht=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,ve.lanes|=o,Jr|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _c(e){var t=Vt(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do o=e(o,l.action),l=l.next;while(l!==i);sn(o,t.memoizedState)||(ht=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ov(){}function lv(e,t){var n=ve,r=Vt(),i=t(),o=!sn(r.memoizedState,i);if(o&&(r.memoizedState=i,ht=!0),r=r.queue,wp(uv.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,El(9,av.bind(null,n,r,i,t),void 0,null),De===null)throw Error(j(349));Qr&30||sv(n,t,i)}return i}function sv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function av(e,t,n,r){t.value=n,t.getSnapshot=r,cv(t)&&dv(e)}function uv(e,t,n){return n(function(){cv(t)&&dv(e)})}function cv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sn(e,n)}catch{return!0}}function dv(e){var t=Dn(e,1);t!==null&&ln(t,e,1,-1)}function Am(e){var t=fn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nl,lastRenderedState:e},t.queue=e,e=e.dispatch=fC.bind(null,ve,e),[t.memoizedState,e]}function El(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function fv(){return Vt().memoizedState}function zs(e,t,n,r){var i=fn();ve.flags|=e,i.memoizedState=El(1|t,n,void 0,r===void 0?null:r)}function eu(e,t,n,r){var i=Vt();r=r===void 0?null:r;var o=void 0;if(ke!==null){var l=ke.memoizedState;if(o=l.destroy,r!==null&&xp(r,l.deps)){i.memoizedState=El(t,n,o,r);return}}ve.flags|=e,i.memoizedState=El(1|t,n,o,r)}function Mm(e,t){return zs(8390656,8,e,t)}function wp(e,t){return eu(2048,8,e,t)}function pv(e,t){return eu(4,2,e,t)}function hv(e,t){return eu(4,4,e,t)}function mv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gv(e,t,n){return n=n!=null?n.concat([e]):null,eu(4,4,mv.bind(null,t,e),n)}function Cp(){}function yv(e,t){var n=Vt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vv(e,t){var n=Vt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function xv(e,t,n){return Qr&21?(sn(n,t)||(n=w0(),ve.lanes|=n,Jr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=n)}function cC(e,t){var n=Z;Z=n!==0&&4>n?n:4,e(!0);var r=vc.transition;vc.transition={};try{e(!1),t()}finally{Z=n,vc.transition=r}}function _v(){return Vt().memoizedState}function dC(e,t,n){var r=pr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Sv(e))wv(t,n);else if(n=X0(e,t,n,r),n!==null){var i=ut();ln(n,e,r,i),Cv(n,t,r)}}function fC(e,t,n){var r=pr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sv(e))wv(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,s=o(l,n);if(i.hasEagerState=!0,i.eagerState=s,sn(s,l)){var a=t.interleaved;a===null?(i.next=i,hp(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=X0(e,t,i,r),n!==null&&(i=ut(),ln(n,e,r,i),Cv(n,t,r))}}function Sv(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function wv(e,t){qo=ga=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Cv(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ep(e,n)}}var ya={readContext:Ut,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},pC={readContext:Ut,useCallback:function(e,t){return fn().memoizedState=[e,t===void 0?null:t],e},useContext:Ut,useEffect:Mm,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,zs(4194308,4,mv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zs(4194308,4,e,t)},useInsertionEffect:function(e,t){return zs(4,2,e,t)},useMemo:function(e,t){var n=fn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=fn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=dC.bind(null,ve,e),[r.memoizedState,e]},useRef:function(e){var t=fn();return e={current:e},t.memoizedState=e},useState:Am,useDebugValue:Cp,useDeferredValue:function(e){return fn().memoizedState=e},useTransition:function(){var e=Am(!1),t=e[0];return e=cC.bind(null,e[1]),fn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ve,i=fn();if(he){if(n===void 0)throw Error(j(407));n=n()}else{if(n=t(),De===null)throw Error(j(349));Qr&30||sv(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Mm(uv.bind(null,r,o,e),[e]),r.flags|=2048,El(9,av.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=fn(),t=De.identifierPrefix;if(he){var n=$n,r=kn;n=(r&~(1<<32-on(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Cl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=uC++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hC={readContext:Ut,useCallback:yv,useContext:Ut,useEffect:wp,useImperativeHandle:gv,useInsertionEffect:pv,useLayoutEffect:hv,useMemo:vv,useReducer:xc,useRef:fv,useState:function(){return xc(Nl)},useDebugValue:Cp,useDeferredValue:function(e){var t=Vt();return xv(t,ke.memoizedState,e)},useTransition:function(){var e=xc(Nl)[0],t=Vt().memoizedState;return[e,t]},useMutableSource:ov,useSyncExternalStore:lv,useId:_v,unstable_isNewReconciler:!1},mC={readContext:Ut,useCallback:yv,useContext:Ut,useEffect:wp,useImperativeHandle:gv,useInsertionEffect:pv,useLayoutEffect:hv,useMemo:vv,useReducer:_c,useRef:fv,useState:function(){return _c(Nl)},useDebugValue:Cp,useDeferredValue:function(e){var t=Vt();return ke===null?t.memoizedState=e:xv(t,ke.memoizedState,e)},useTransition:function(){var e=_c(Nl)[0],t=Vt().memoizedState;return[e,t]},useMutableSource:ov,useSyncExternalStore:lv,useId:_v,unstable_isNewReconciler:!1};function Ji(e,t){try{var n="",r=t;do n+=HS(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Sc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $d(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var gC=typeof WeakMap=="function"?WeakMap:Map;function Nv(e,t,n){n=Ln(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){xa||(xa=!0,Wd=r),$d(e,t)},n}function Ev(e,t,n){n=Ln(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){$d(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){$d(e,t),typeof r!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Im(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new gC;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=PC.bind(null,e,t,n),t.then(e,e))}function Dm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fm(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ln(-1,1),t.tag=2,dr(n,t,1))),n.lanes|=1),e)}var yC=Bn.ReactCurrentOwner,ht=!1;function it(e,t,n,r){t.child=e===null?rv(t,null,n,r):Yi(t,e.child,n,r)}function zm(e,t,n,r,i){n=n.render;var o=t.ref;return Li(t,i),r=_p(e,t,n,r,o,i),n=Sp(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Fn(e,t,i)):(he&&n&&ap(t),t.flags|=1,it(e,t,r,i),t.child)}function Bm(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!kp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Tv(e,t,o,r,i)):(e=Us(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:yl,n(l,r)&&e.ref===t.ref)return Fn(e,t,i)}return t.flags|=1,e=hr(o,r),e.ref=t.ref,e.return=t,t.child=e}function Tv(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(yl(o,r)&&e.ref===t.ref)if(ht=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,Fn(e,t,i)}return Rd(e,t,n,r,i)}function Ov(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(Oi,_t),_t|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ie(Oi,_t),_t|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ie(Oi,_t),_t|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ie(Oi,_t),_t|=r;return it(e,t,i,n),t.child}function bv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Rd(e,t,n,r,i){var o=gt(n)?Gr:tt.current;return o=Ki(t,o),Li(t,i),n=_p(e,t,n,r,o,i),r=Sp(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Fn(e,t,i)):(he&&r&&ap(t),t.flags|=1,it(e,t,n,i),t.child)}function Wm(e,t,n,r,i){if(gt(n)){var o=!0;ua(t)}else o=!1;if(Li(t,i),t.stateNode===null)Bs(e,t),tv(t,n,r),kd(t,n,r,i),r=!0;else if(e===null){var l=t.stateNode,s=t.memoizedProps;l.props=s;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ut(u):(u=gt(n)?Gr:tt.current,u=Ki(t,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(s!==r||a!==u)&&Rm(t,l,r,u),qn=!1;var p=t.memoizedState;l.state=p,ha(t,r,l,i),a=t.memoizedState,s!==r||p!==a||mt.current||qn?(typeof f=="function"&&(Pd(t,n,f,r),a=t.memoizedState),(s=qn||$m(t,n,s,r,p,a,u))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),l.props=r,l.state=a,l.context=u,r=s):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Z0(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Jt(t.type,s),l.props=u,d=t.pendingProps,p=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ut(a):(a=gt(n)?Gr:tt.current,a=Ki(t,a));var h=n.getDerivedStateFromProps;(f=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(s!==d||p!==a)&&Rm(t,l,r,a),qn=!1,p=t.memoizedState,l.state=p,ha(t,r,l,i);var m=t.memoizedState;s!==d||p!==m||mt.current||qn?(typeof h=="function"&&(Pd(t,n,h,r),m=t.memoizedState),(u=qn||$m(t,n,u,r,p,m,a)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,m,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,m,a)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),l.props=r,l.state=m,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Ld(e,t,n,r,o,i)}function Ld(e,t,n,r,i,o){bv(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return i&&Om(t,n,!1),Fn(e,t,o);r=t.stateNode,yC.current=t;var s=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Yi(t,e.child,null,o),t.child=Yi(t,null,s,o)):it(e,t,s,o),t.memoizedState=r.state,i&&Om(t,n,!0),t.child}function jv(e){var t=e.stateNode;t.pendingContext?Tm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Tm(e,t.context,!1),gp(e,t.containerInfo)}function Hm(e,t,n,r,i){return Gi(),cp(i),t.flags|=256,it(e,t,n,r),t.child}var Ad={dehydrated:null,treeContext:null,retryLane:0};function Md(e){return{baseLanes:e,cachePool:null,transitions:null}}function Pv(e,t,n){var r=t.pendingProps,i=ye.current,o=!1,l=(t.flags&128)!==0,s;if((s=l)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ie(ye,i&1),e===null)return bd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=ru(l,r,0,null),e=Wr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Md(n),t.memoizedState=Ad,e):Np(t,l));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return vC(e,t,l,r,s,i,n);if(o){o=r.fallback,l=t.mode,i=e.child,s=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=hr(i,a),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=hr(s,o):(o=Wr(o,l,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=e.child.memoizedState,l=l===null?Md(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ad,r}return o=e.child,e=o.sibling,r=hr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Np(e,t){return t=ru({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _s(e,t,n,r){return r!==null&&cp(r),Yi(t,e.child,null,n),e=Np(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vC(e,t,n,r,i,o,l){if(n)return t.flags&256?(t.flags&=-257,r=Sc(Error(j(422))),_s(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=ru({mode:"visible",children:r.children},i,0,null),o=Wr(o,i,l,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Yi(t,e.child,null,l),t.child.memoizedState=Md(l),t.memoizedState=Ad,o);if(!(t.mode&1))return _s(e,t,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(j(419)),r=Sc(o,r,void 0),_s(e,t,l,r)}if(s=(l&e.childLanes)!==0,ht||s){if(r=De,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Dn(e,i),ln(r,e,i,-1))}return Pp(),r=Sc(Error(j(421))),_s(e,t,l,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=kC.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ct=cr(i.nextSibling),Et=t,he=!0,en=null,e!==null&&(Mt[It++]=kn,Mt[It++]=$n,Mt[It++]=Yr,kn=e.id,$n=e.overflow,Yr=t),t=Np(t,r.children),t.flags|=4096,t)}function Um(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),jd(e.return,t,n)}function wc(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function kv(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(it(e,t,r.children,n),r=ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Um(e,n,t);else if(e.tag===19)Um(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ie(ye,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&ma(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),wc(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ma(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}wc(t,!0,n,null,o);break;case"together":wc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Fn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Jr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(j(153));if(t.child!==null){for(e=t.child,n=hr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=hr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xC(e,t,n){switch(t.tag){case 3:jv(t),Gi();break;case 5:iv(t);break;case 1:gt(t.type)&&ua(t);break;case 4:gp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ie(fa,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ie(ye,ye.current&1),t.flags|=128,null):n&t.child.childLanes?Pv(e,t,n):(ie(ye,ye.current&1),e=Fn(e,t,n),e!==null?e.sibling:null);ie(ye,ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return kv(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ie(ye,ye.current),r)break;return null;case 22:case 23:return t.lanes=0,Ov(e,t,n)}return Fn(e,t,n)}var $v,Id,Rv,Lv;$v=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Id=function(){};Rv=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Fr(mn.current);var o=null;switch(n){case"input":i=od(e,i),r=od(e,r),o=[];break;case"select":i=_e({},i,{value:void 0}),r=_e({},r,{value:void 0}),o=[];break;case"textarea":i=ad(e,i),r=ad(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=sa)}cd(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(l in s)s.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(cl.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var a=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==s&&(a!=null||s!=null))if(u==="style")if(s){for(l in s)!s.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&s[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(o||(o=[]),o.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,s=s?s.__html:void 0,a!=null&&s!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(cl.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&le("scroll",e),o||s===a||(o=[])):(o=o||[]).push(u,a))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Lv=function(e,t,n,r){n!==r&&(t.flags|=4)};function bo(e,t){if(!he)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _C(e,t,n){var r=t.pendingProps;switch(up(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return gt(t.type)&&aa(),Qe(t),null;case 3:return r=t.stateNode,Qi(),ce(mt),ce(tt),vp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(vs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,en!==null&&(Vd(en),en=null))),Id(e,t),Qe(t),null;case 5:yp(t);var i=Fr(wl.current);if(n=t.type,e!==null&&t.stateNode!=null)Rv(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(j(166));return Qe(t),null}if(e=Fr(mn.current),vs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[pn]=t,r[_l]=o,e=(t.mode&1)!==0,n){case"dialog":le("cancel",r),le("close",r);break;case"iframe":case"object":case"embed":le("load",r);break;case"video":case"audio":for(i=0;i<zo.length;i++)le(zo[i],r);break;case"source":le("error",r);break;case"img":case"image":case"link":le("error",r),le("load",r);break;case"details":le("toggle",r);break;case"input":Zh(r,o),le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},le("invalid",r);break;case"textarea":tm(r,o),le("invalid",r)}cd(n,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var s=o[l];l==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&ys(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&ys(r.textContent,s,e),i=["children",""+s]):cl.hasOwnProperty(l)&&s!=null&&l==="onScroll"&&le("scroll",r)}switch(n){case"input":us(r),em(r,o,!0);break;case"textarea":us(r),nm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=sa)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=s0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[pn]=t,e[_l]=r,$v(e,t,!1,!1),t.stateNode=e;e:{switch(l=dd(n,r),n){case"dialog":le("cancel",e),le("close",e),i=r;break;case"iframe":case"object":case"embed":le("load",e),i=r;break;case"video":case"audio":for(i=0;i<zo.length;i++)le(zo[i],e);i=r;break;case"source":le("error",e),i=r;break;case"img":case"image":case"link":le("error",e),le("load",e),i=r;break;case"details":le("toggle",e),i=r;break;case"input":Zh(e,r),i=od(e,r),le("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=_e({},r,{value:void 0}),le("invalid",e);break;case"textarea":tm(e,r),i=ad(e,r),le("invalid",e);break;default:i=r}cd(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="style"?c0(e,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&a0(e,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&dl(e,a):typeof a=="number"&&dl(e,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(cl.hasOwnProperty(o)?a!=null&&o==="onScroll"&&le("scroll",e):a!=null&&Yf(e,o,a,l))}switch(n){case"input":us(e),em(e,r,!1);break;case"textarea":us(e),nm(e);break;case"option":r.value!=null&&e.setAttribute("value",""+vr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Pi(e,!!r.multiple,o,!1):r.defaultValue!=null&&Pi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=sa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qe(t),null;case 6:if(e&&t.stateNode!=null)Lv(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(j(166));if(n=Fr(wl.current),Fr(mn.current),vs(t)){if(r=t.stateNode,n=t.memoizedProps,r[pn]=t,(o=r.nodeValue!==n)&&(e=Et,e!==null))switch(e.tag){case 3:ys(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ys(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=t,t.stateNode=r}return Qe(t),null;case 13:if(ce(ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(he&&Ct!==null&&t.mode&1&&!(t.flags&128))q0(),Gi(),t.flags|=98560,o=!1;else if(o=vs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(j(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(j(317));o[pn]=t}else Gi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qe(t),o=!1}else en!==null&&(Vd(en),en=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ye.current&1?$e===0&&($e=3):Pp())),t.updateQueue!==null&&(t.flags|=4),Qe(t),null);case 4:return Qi(),Id(e,t),e===null&&vl(t.stateNode.containerInfo),Qe(t),null;case 10:return pp(t.type._context),Qe(t),null;case 17:return gt(t.type)&&aa(),Qe(t),null;case 19:if(ce(ye),o=t.memoizedState,o===null)return Qe(t),null;if(r=(t.flags&128)!==0,l=o.rendering,l===null)if(r)bo(o,!1);else{if($e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ma(e),l!==null){for(t.flags|=128,bo(o,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ie(ye,ye.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ne()>qi&&(t.flags|=128,r=!0,bo(o,!1),t.lanes=4194304)}else{if(!r)if(e=ma(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),bo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!he)return Qe(t),null}else 2*Ne()-o.renderingStartTime>qi&&n!==1073741824&&(t.flags|=128,r=!0,bo(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ne(),t.sibling=null,n=ye.current,ie(ye,r?n&1|2:n&1),t):(Qe(t),null);case 22:case 23:return jp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_t&1073741824&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),null;case 24:return null;case 25:return null}throw Error(j(156,t.tag))}function SC(e,t){switch(up(t),t.tag){case 1:return gt(t.type)&&aa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qi(),ce(mt),ce(tt),vp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yp(t),null;case 13:if(ce(ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(j(340));Gi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(ye),null;case 4:return Qi(),null;case 10:return pp(t.type._context),null;case 22:case 23:return jp(),null;case 24:return null;default:return null}}var Ss=!1,Ze=!1,wC=typeof WeakSet=="function"?WeakSet:Set,M=null;function Ti(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Se(e,t,r)}else n.current=null}function Dd(e,t,n){try{n()}catch(r){Se(e,t,r)}}var Vm=!1;function CC(e,t){if(Sd=ia,e=D0(),sp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,s=-1,a=-1,u=0,f=0,d=e,p=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(s=l+i),d!==o||r!==0&&d.nodeType!==3||(a=l+r),d.nodeType===3&&(l+=d.nodeValue.length),(h=d.firstChild)!==null;)p=d,d=h;for(;;){if(d===e)break t;if(p===n&&++u===i&&(s=l),p===o&&++f===r&&(a=l),(h=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=h}n=s===-1||a===-1?null:{start:s,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(wd={focusedElem:e,selectionRange:n},ia=!1,M=t;M!==null;)if(t=M,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,M=e;else for(;M!==null;){t=M;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,_=m.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Jt(t.type,g),_);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(S){Se(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,M=e;break}M=t.return}return m=Vm,Vm=!1,m}function Xo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Dd(t,n,o)}i=i.next}while(i!==r)}}function tu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Fd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Av(e){var t=e.alternate;t!==null&&(e.alternate=null,Av(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pn],delete t[_l],delete t[Ed],delete t[oC],delete t[lC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Mv(e){return e.tag===5||e.tag===3||e.tag===4}function Km(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=sa));else if(r!==4&&(e=e.child,e!==null))for(zd(e,t,n),e=e.sibling;e!==null;)zd(e,t,n),e=e.sibling}function Bd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Bd(e,t,n),e=e.sibling;e!==null;)Bd(e,t,n),e=e.sibling}var We=null,Xt=!1;function Yn(e,t,n){for(n=n.child;n!==null;)Iv(e,t,n),n=n.sibling}function Iv(e,t,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Ga,n)}catch{}switch(n.tag){case 5:Ze||Ti(n,t);case 6:var r=We,i=Xt;We=null,Yn(e,t,n),We=r,Xt=i,We!==null&&(Xt?(e=We,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):We.removeChild(n.stateNode));break;case 18:We!==null&&(Xt?(e=We,n=n.stateNode,e.nodeType===8?mc(e.parentNode,n):e.nodeType===1&&mc(e,n),ml(e)):mc(We,n.stateNode));break;case 4:r=We,i=Xt,We=n.stateNode.containerInfo,Xt=!0,Yn(e,t,n),We=r,Xt=i;break;case 0:case 11:case 14:case 15:if(!Ze&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Dd(n,t,l),i=i.next}while(i!==r)}Yn(e,t,n);break;case 1:if(!Ze&&(Ti(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Se(n,t,s)}Yn(e,t,n);break;case 21:Yn(e,t,n);break;case 22:n.mode&1?(Ze=(r=Ze)||n.memoizedState!==null,Yn(e,t,n),Ze=r):Yn(e,t,n);break;default:Yn(e,t,n)}}function Gm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new wC),t.forEach(function(r){var i=$C.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,l=t,s=l;e:for(;s!==null;){switch(s.tag){case 5:We=s.stateNode,Xt=!1;break e;case 3:We=s.stateNode.containerInfo,Xt=!0;break e;case 4:We=s.stateNode.containerInfo,Xt=!0;break e}s=s.return}if(We===null)throw Error(j(160));Iv(o,l,i),We=null,Xt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){Se(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Dv(t,e),t=t.sibling}function Dv(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qt(t,e),dn(e),r&4){try{Xo(3,e,e.return),tu(3,e)}catch(g){Se(e,e.return,g)}try{Xo(5,e,e.return)}catch(g){Se(e,e.return,g)}}break;case 1:Qt(t,e),dn(e),r&512&&n!==null&&Ti(n,n.return);break;case 5:if(Qt(t,e),dn(e),r&512&&n!==null&&Ti(n,n.return),e.flags&32){var i=e.stateNode;try{dl(i,"")}catch(g){Se(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,s=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&o0(i,o),dd(s,l);var u=dd(s,o);for(l=0;l<a.length;l+=2){var f=a[l],d=a[l+1];f==="style"?c0(i,d):f==="dangerouslySetInnerHTML"?a0(i,d):f==="children"?dl(i,d):Yf(i,f,d,u)}switch(s){case"input":ld(i,o);break;case"textarea":l0(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Pi(i,!!o.multiple,h,!1):p!==!!o.multiple&&(o.defaultValue!=null?Pi(i,!!o.multiple,o.defaultValue,!0):Pi(i,!!o.multiple,o.multiple?[]:"",!1))}i[_l]=o}catch(g){Se(e,e.return,g)}}break;case 6:if(Qt(t,e),dn(e),r&4){if(e.stateNode===null)throw Error(j(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Se(e,e.return,g)}}break;case 3:if(Qt(t,e),dn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ml(t.containerInfo)}catch(g){Se(e,e.return,g)}break;case 4:Qt(t,e),dn(e);break;case 13:Qt(t,e),dn(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Op=Ne())),r&4&&Gm(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Ze=(u=Ze)||f,Qt(t,e),Ze=u):Qt(t,e),dn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(M=e,f=e.child;f!==null;){for(d=M=f;M!==null;){switch(p=M,h=p.child,p.tag){case 0:case 11:case 14:case 15:Xo(4,p,p.return);break;case 1:Ti(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Se(r,n,g)}}break;case 5:Ti(p,p.return);break;case 22:if(p.memoizedState!==null){Qm(d);continue}}h!==null?(h.return=p,M=h):Qm(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,a=d.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,s.style.display=u0("display",l))}catch(g){Se(e,e.return,g)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Se(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qt(t,e),dn(e),r&4&&Gm(e);break;case 21:break;default:Qt(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Mv(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(dl(i,""),r.flags&=-33);var o=Km(e);Bd(e,o,i);break;case 3:case 4:var l=r.stateNode.containerInfo,s=Km(e);zd(e,s,l);break;default:throw Error(j(161))}}catch(a){Se(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function NC(e,t,n){M=e,Fv(e)}function Fv(e,t,n){for(var r=(e.mode&1)!==0;M!==null;){var i=M,o=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Ss;if(!l){var s=i.alternate,a=s!==null&&s.memoizedState!==null||Ze;s=Ss;var u=Ze;if(Ss=l,(Ze=a)&&!u)for(M=i;M!==null;)l=M,a=l.child,l.tag===22&&l.memoizedState!==null?Jm(i):a!==null?(a.return=l,M=a):Jm(i);for(;o!==null;)M=o,Fv(o),o=o.sibling;M=i,Ss=s,Ze=u}Ym(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,M=o):Ym(e)}}function Ym(e){for(;M!==null;){var t=M;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ze||tu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ze)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Jt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&km(t,o,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}km(t,l,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&ml(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}Ze||t.flags&512&&Fd(t)}catch(p){Se(t,t.return,p)}}if(t===e){M=null;break}if(n=t.sibling,n!==null){n.return=t.return,M=n;break}M=t.return}}function Qm(e){for(;M!==null;){var t=M;if(t===e){M=null;break}var n=t.sibling;if(n!==null){n.return=t.return,M=n;break}M=t.return}}function Jm(e){for(;M!==null;){var t=M;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{tu(4,t)}catch(a){Se(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){Se(t,i,a)}}var o=t.return;try{Fd(t)}catch(a){Se(t,o,a)}break;case 5:var l=t.return;try{Fd(t)}catch(a){Se(t,l,a)}}}catch(a){Se(t,t.return,a)}if(t===e){M=null;break}var s=t.sibling;if(s!==null){s.return=t.return,M=s;break}M=t.return}}var EC=Math.ceil,va=Bn.ReactCurrentDispatcher,Ep=Bn.ReactCurrentOwner,Ht=Bn.ReactCurrentBatchConfig,q=0,De=null,Oe=null,Ve=0,_t=0,Oi=Or(0),$e=0,Tl=null,Jr=0,nu=0,Tp=0,Zo=null,pt=null,Op=0,qi=1/0,On=null,xa=!1,Wd=null,fr=null,ws=!1,rr=null,_a=0,el=0,Hd=null,Ws=-1,Hs=0;function ut(){return q&6?Ne():Ws!==-1?Ws:Ws=Ne()}function pr(e){return e.mode&1?q&2&&Ve!==0?Ve&-Ve:aC.transition!==null?(Hs===0&&(Hs=w0()),Hs):(e=Z,e!==0||(e=window.event,e=e===void 0?16:j0(e.type)),e):1}function ln(e,t,n,r){if(50<el)throw el=0,Hd=null,Error(j(185));Ul(e,n,r),(!(q&2)||e!==De)&&(e===De&&(!(q&2)&&(nu|=n),$e===4&&er(e,Ve)),yt(e,r),n===1&&q===0&&!(t.mode&1)&&(qi=Ne()+500,Xa&&br()))}function yt(e,t){var n=e.callbackNode;aw(e,t);var r=ra(e,e===De?Ve:0);if(r===0)n!==null&&om(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&om(n),t===1)e.tag===0?sC(qm.bind(null,e)):Y0(qm.bind(null,e)),rC(function(){!(q&6)&&br()}),n=null;else{switch(C0(r)){case 1:n=Zf;break;case 4:n=_0;break;case 16:n=na;break;case 536870912:n=S0;break;default:n=na}n=Gv(n,zv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zv(e,t){if(Ws=-1,Hs=0,q&6)throw Error(j(327));var n=e.callbackNode;if(Ai()&&e.callbackNode!==n)return null;var r=ra(e,e===De?Ve:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Sa(e,r);else{t=r;var i=q;q|=2;var o=Wv();(De!==e||Ve!==t)&&(On=null,qi=Ne()+500,Br(e,t));do try{bC();break}catch(s){Bv(e,s)}while(1);fp(),va.current=o,q=i,Oe!==null?t=0:(De=null,Ve=0,t=$e)}if(t!==0){if(t===2&&(i=gd(e),i!==0&&(r=i,t=Ud(e,i))),t===1)throw n=Tl,Br(e,0),er(e,r),yt(e,Ne()),n;if(t===6)er(e,r);else{if(i=e.current.alternate,!(r&30)&&!TC(i)&&(t=Sa(e,r),t===2&&(o=gd(e),o!==0&&(r=o,t=Ud(e,o))),t===1))throw n=Tl,Br(e,0),er(e,r),yt(e,Ne()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(j(345));case 2:Ar(e,pt,On);break;case 3:if(er(e,r),(r&130023424)===r&&(t=Op+500-Ne(),10<t)){if(ra(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ut(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Nd(Ar.bind(null,e,pt,On),t);break}Ar(e,pt,On);break;case 4:if(er(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-on(r);o=1<<l,l=t[l],l>i&&(i=l),r&=~o}if(r=i,r=Ne()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EC(r/1960))-r,10<r){e.timeoutHandle=Nd(Ar.bind(null,e,pt,On),r);break}Ar(e,pt,On);break;case 5:Ar(e,pt,On);break;default:throw Error(j(329))}}}return yt(e,Ne()),e.callbackNode===n?zv.bind(null,e):null}function Ud(e,t){var n=Zo;return e.current.memoizedState.isDehydrated&&(Br(e,t).flags|=256),e=Sa(e,t),e!==2&&(t=pt,pt=n,t!==null&&Vd(t)),e}function Vd(e){pt===null?pt=e:pt.push.apply(pt,e)}function TC(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sn(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function er(e,t){for(t&=~Tp,t&=~nu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-on(t),r=1<<n;e[n]=-1,t&=~r}}function qm(e){if(q&6)throw Error(j(327));Ai();var t=ra(e,0);if(!(t&1))return yt(e,Ne()),null;var n=Sa(e,t);if(e.tag!==0&&n===2){var r=gd(e);r!==0&&(t=r,n=Ud(e,r))}if(n===1)throw n=Tl,Br(e,0),er(e,t),yt(e,Ne()),n;if(n===6)throw Error(j(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ar(e,pt,On),yt(e,Ne()),null}function bp(e,t){var n=q;q|=1;try{return e(t)}finally{q=n,q===0&&(qi=Ne()+500,Xa&&br())}}function qr(e){rr!==null&&rr.tag===0&&!(q&6)&&Ai();var t=q;q|=1;var n=Ht.transition,r=Z;try{if(Ht.transition=null,Z=1,e)return e()}finally{Z=r,Ht.transition=n,q=t,!(q&6)&&br()}}function jp(){_t=Oi.current,ce(Oi)}function Br(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,nC(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(up(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&aa();break;case 3:Qi(),ce(mt),ce(tt),vp();break;case 5:yp(r);break;case 4:Qi();break;case 13:ce(ye);break;case 19:ce(ye);break;case 10:pp(r.type._context);break;case 22:case 23:jp()}n=n.return}if(De=e,Oe=e=hr(e.current,null),Ve=_t=t,$e=0,Tl=null,Tp=nu=Jr=0,pt=Zo=null,Dr!==null){for(t=0;t<Dr.length;t++)if(n=Dr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=i,r.next=l}n.pending=r}Dr=null}return e}function Bv(e,t){do{var n=Oe;try{if(fp(),Fs.current=ya,ga){for(var r=ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ga=!1}if(Qr=0,Le=ke=ve=null,qo=!1,Cl=0,Ep.current=null,n===null||n.return===null){$e=1,Tl=t,Oe=null;break}e:{var o=e,l=n.return,s=n,a=t;if(t=Ve,s.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=Dm(l);if(h!==null){h.flags&=-257,Fm(h,l,s,o,t),h.mode&1&&Im(o,u,t),t=h,a=u;var m=t.updateQueue;if(m===null){var g=new Set;g.add(a),t.updateQueue=g}else m.add(a);break e}else{if(!(t&1)){Im(o,u,t),Pp();break e}a=Error(j(426))}}else if(he&&s.mode&1){var _=Dm(l);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Fm(_,l,s,o,t),cp(Ji(a,s));break e}}o=a=Ji(a,s),$e!==4&&($e=2),Zo===null?Zo=[o]:Zo.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=Nv(o,a,t);Pm(o,v);break e;case 1:s=a;var y=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(fr===null||!fr.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=Ev(o,s,t);Pm(o,S);break e}}o=o.return}while(o!==null)}Uv(n)}catch(C){t=C,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(1)}function Wv(){var e=va.current;return va.current=ya,e===null?ya:e}function Pp(){($e===0||$e===3||$e===2)&&($e=4),De===null||!(Jr&268435455)&&!(nu&268435455)||er(De,Ve)}function Sa(e,t){var n=q;q|=2;var r=Wv();(De!==e||Ve!==t)&&(On=null,Br(e,t));do try{OC();break}catch(i){Bv(e,i)}while(1);if(fp(),q=n,va.current=r,Oe!==null)throw Error(j(261));return De=null,Ve=0,$e}function OC(){for(;Oe!==null;)Hv(Oe)}function bC(){for(;Oe!==null&&!ZS();)Hv(Oe)}function Hv(e){var t=Kv(e.alternate,e,_t);e.memoizedProps=e.pendingProps,t===null?Uv(e):Oe=t,Ep.current=null}function Uv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=SC(n,t),n!==null){n.flags&=32767,Oe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$e=6,Oe=null;return}}else if(n=_C(n,t,_t),n!==null){Oe=n;return}if(t=t.sibling,t!==null){Oe=t;return}Oe=t=e}while(t!==null);$e===0&&($e=5)}function Ar(e,t,n){var r=Z,i=Ht.transition;try{Ht.transition=null,Z=1,jC(e,t,n,r)}finally{Ht.transition=i,Z=r}return null}function jC(e,t,n,r){do Ai();while(rr!==null);if(q&6)throw Error(j(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(j(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(uw(e,o),e===De&&(Oe=De=null,Ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ws||(ws=!0,Gv(na,function(){return Ai(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ht.transition,Ht.transition=null;var l=Z;Z=1;var s=q;q|=4,Ep.current=null,CC(e,n),Dv(n,e),Qw(wd),ia=!!Sd,wd=Sd=null,e.current=n,NC(n),ew(),q=s,Z=l,Ht.transition=o}else e.current=n;if(ws&&(ws=!1,rr=e,_a=i),o=e.pendingLanes,o===0&&(fr=null),rw(n.stateNode),yt(e,Ne()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xa)throw xa=!1,e=Wd,Wd=null,e;return _a&1&&e.tag!==0&&Ai(),o=e.pendingLanes,o&1?e===Hd?el++:(el=0,Hd=e):el=0,br(),null}function Ai(){if(rr!==null){var e=C0(_a),t=Ht.transition,n=Z;try{if(Ht.transition=null,Z=16>e?16:e,rr===null)var r=!1;else{if(e=rr,rr=null,_a=0,q&6)throw Error(j(331));var i=q;for(q|=4,M=e.current;M!==null;){var o=M,l=o.child;if(M.flags&16){var s=o.deletions;if(s!==null){for(var a=0;a<s.length;a++){var u=s[a];for(M=u;M!==null;){var f=M;switch(f.tag){case 0:case 11:case 15:Xo(8,f,o)}var d=f.child;if(d!==null)d.return=f,M=d;else for(;M!==null;){f=M;var p=f.sibling,h=f.return;if(Av(f),f===u){M=null;break}if(p!==null){p.return=h,M=p;break}M=h}}}var m=o.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(g!==null)}}M=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,M=l;else e:for(;M!==null;){if(o=M,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Xo(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,M=v;break e}M=o.return}}var y=e.current;for(M=y;M!==null;){l=M;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,M=x;else e:for(l=y;M!==null;){if(s=M,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:tu(9,s)}}catch(C){Se(s,s.return,C)}if(s===l){M=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,M=S;break e}M=s.return}}if(q=i,br(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Ga,e)}catch{}r=!0}return r}finally{Z=n,Ht.transition=t}}return!1}function Xm(e,t,n){t=Ji(n,t),t=Nv(e,t,1),e=dr(e,t,1),t=ut(),e!==null&&(Ul(e,1,t),yt(e,t))}function Se(e,t,n){if(e.tag===3)Xm(e,e,n);else for(;t!==null;){if(t.tag===3){Xm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fr===null||!fr.has(r))){e=Ji(n,e),e=Ev(t,e,1),t=dr(t,e,1),e=ut(),t!==null&&(Ul(t,1,e),yt(t,e));break}}t=t.return}}function PC(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ut(),e.pingedLanes|=e.suspendedLanes&n,De===e&&(Ve&n)===n&&($e===4||$e===3&&(Ve&130023424)===Ve&&500>Ne()-Op?Br(e,0):Tp|=n),yt(e,t)}function Vv(e,t){t===0&&(e.mode&1?(t=fs,fs<<=1,!(fs&130023424)&&(fs=4194304)):t=1);var n=ut();e=Dn(e,t),e!==null&&(Ul(e,t,n),yt(e,n))}function kC(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Vv(e,n)}function $C(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(t),Vv(e,n)}var Kv;Kv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ht=!1,xC(e,t,n);ht=!!(e.flags&131072)}else ht=!1,he&&t.flags&1048576&&Q0(t,da,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bs(e,t),e=t.pendingProps;var i=Ki(t,tt.current);Li(t,n),i=_p(null,t,r,e,i,n);var o=Sp();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(r)?(o=!0,ua(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mp(t),i.updater=Za,t.stateNode=i,i._reactInternals=t,kd(t,r,e,n),t=Ld(null,t,r,!0,o,n)):(t.tag=0,he&&o&&ap(t),it(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bs(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=LC(r),e=Jt(r,e),i){case 0:t=Rd(null,t,r,e,n);break e;case 1:t=Wm(null,t,r,e,n);break e;case 11:t=zm(null,t,r,e,n);break e;case 14:t=Bm(null,t,r,Jt(r.type,e),n);break e}throw Error(j(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jt(r,i),Rd(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jt(r,i),Wm(e,t,r,i,n);case 3:e:{if(jv(t),e===null)throw Error(j(387));r=t.pendingProps,o=t.memoizedState,i=o.element,Z0(e,t),ha(t,r,null,n);var l=t.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Ji(Error(j(423)),t),t=Hm(e,t,r,n,i);break e}else if(r!==i){i=Ji(Error(j(424)),t),t=Hm(e,t,r,n,i);break e}else for(Ct=cr(t.stateNode.containerInfo.firstChild),Et=t,he=!0,en=null,n=rv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gi(),r===i){t=Fn(e,t,n);break e}it(e,t,r,n)}t=t.child}return t;case 5:return iv(t),e===null&&bd(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,l=i.children,Cd(r,i)?l=null:o!==null&&Cd(r,o)&&(t.flags|=32),bv(e,t),it(e,t,l,n),t.child;case 6:return e===null&&bd(t),null;case 13:return Pv(e,t,n);case 4:return gp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Yi(t,null,r,n):it(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jt(r,i),zm(e,t,r,i,n);case 7:return it(e,t,t.pendingProps,n),t.child;case 8:return it(e,t,t.pendingProps.children,n),t.child;case 12:return it(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,l=i.value,ie(fa,r._currentValue),r._currentValue=l,o!==null)if(sn(o.value,l)){if(o.children===i.children&&!mt.current){t=Fn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){l=o.child;for(var a=s.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Ln(-1,n&-n),a.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jd(o.return,n,t),s.lanes|=n;break}a=a.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(j(341));l.lanes|=n,s=l.alternate,s!==null&&(s.lanes|=n),jd(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}it(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Li(t,n),i=Ut(i),r=r(i),t.flags|=1,it(e,t,r,n),t.child;case 14:return r=t.type,i=Jt(r,t.pendingProps),i=Jt(r.type,i),Bm(e,t,r,i,n);case 15:return Tv(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jt(r,i),Bs(e,t),t.tag=1,gt(r)?(e=!0,ua(t)):e=!1,Li(t,n),tv(t,r,i),kd(t,r,i,n),Ld(null,t,r,!0,e,n);case 19:return kv(e,t,n);case 22:return Ov(e,t,n)}throw Error(j(156,t.tag))};function Gv(e,t){return x0(e,t)}function RC(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(e,t,n,r){return new RC(e,t,n,r)}function kp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function LC(e){if(typeof e=="function")return kp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Jf)return 11;if(e===qf)return 14}return 2}function hr(e,t){var n=e.alternate;return n===null?(n=Bt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Us(e,t,n,r,i,o){var l=2;if(r=e,typeof e=="function")kp(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case yi:return Wr(n.children,i,o,t);case Qf:l=8,i|=8;break;case td:return e=Bt(12,n,t,i|2),e.elementType=td,e.lanes=o,e;case nd:return e=Bt(13,n,t,i),e.elementType=nd,e.lanes=o,e;case rd:return e=Bt(19,n,t,i),e.elementType=rd,e.lanes=o,e;case n0:return ru(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case e0:l=10;break e;case t0:l=9;break e;case Jf:l=11;break e;case qf:l=14;break e;case Jn:l=16,r=null;break e}throw Error(j(130,e==null?e:typeof e,""))}return t=Bt(l,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Wr(e,t,n,r){return e=Bt(7,e,r,t),e.lanes=n,e}function ru(e,t,n,r){return e=Bt(22,e,r,t),e.elementType=n0,e.lanes=n,e.stateNode={isHidden:!1},e}function Cc(e,t,n){return e=Bt(6,e,null,t),e.lanes=n,e}function Nc(e,t,n){return t=Bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function AC(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ic(0),this.expirationTimes=ic(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ic(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $p(e,t,n,r,i,o,l,s,a){return e=new AC(e,t,n,s,a),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Bt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mp(o),e}function MC(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Yv(e){if(!e)return xr;e=e._reactInternals;e:{if(ii(e)!==e||e.tag!==1)throw Error(j(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(j(171))}if(e.tag===1){var n=e.type;if(gt(n))return G0(e,n,t)}return t}function Qv(e,t,n,r,i,o,l,s,a){return e=$p(n,r,!0,e,i,o,l,s,a),e.context=Yv(null),n=e.current,r=ut(),i=pr(n),o=Ln(r,i),o.callback=t??null,dr(n,o,i),e.current.lanes=i,Ul(e,i,r),yt(e,r),e}function iu(e,t,n,r){var i=t.current,o=ut(),l=pr(i);return n=Yv(n),t.context===null?t.context=n:t.pendingContext=n,t=Ln(o,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=dr(i,t,l),e!==null&&(ln(e,i,l,o),Ds(e,i,l)),l}function wa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Rp(e,t){Zm(e,t),(e=e.alternate)&&Zm(e,t)}function IC(){return null}var Jv=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lp(e){this._internalRoot=e}ou.prototype.render=Lp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(j(409));iu(e,t,null,null)};ou.prototype.unmount=Lp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qr(function(){iu(null,e,null,null)}),t[In]=null}};function ou(e){this._internalRoot=e}ou.prototype.unstable_scheduleHydration=function(e){if(e){var t=T0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zn.length&&t!==0&&t<Zn[n].priority;n++);Zn.splice(n,0,e),n===0&&b0(e)}};function Ap(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function lu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function eg(){}function DC(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=wa(l);o.call(u)}}var l=Qv(t,r,e,0,null,!1,!1,"",eg);return e._reactRootContainer=l,e[In]=l.current,vl(e.nodeType===8?e.parentNode:e),qr(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=wa(a);s.call(u)}}var a=$p(e,0,!1,null,null,!1,!1,"",eg);return e._reactRootContainer=a,e[In]=a.current,vl(e.nodeType===8?e.parentNode:e),qr(function(){iu(t,a,n,r)}),a}function su(e,t,n,r,i){var o=n._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var s=i;i=function(){var a=wa(l);s.call(a)}}iu(t,l,e,i)}else l=DC(n,t,e,i,r);return wa(l)}N0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fo(t.pendingLanes);n!==0&&(ep(t,n|1),yt(t,Ne()),!(q&6)&&(qi=Ne()+500,br()))}break;case 13:qr(function(){var r=Dn(e,1);if(r!==null){var i=ut();ln(r,e,1,i)}}),Rp(e,1)}};tp=function(e){if(e.tag===13){var t=Dn(e,134217728);if(t!==null){var n=ut();ln(t,e,134217728,n)}Rp(e,134217728)}};E0=function(e){if(e.tag===13){var t=pr(e),n=Dn(e,t);if(n!==null){var r=ut();ln(n,e,t,r)}Rp(e,t)}};T0=function(){return Z};O0=function(e,t){var n=Z;try{return Z=e,t()}finally{Z=n}};pd=function(e,t,n){switch(t){case"input":if(ld(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=qa(r);if(!i)throw Error(j(90));i0(r),ld(r,i)}}}break;case"textarea":l0(e,n);break;case"select":t=n.value,t!=null&&Pi(e,!!n.multiple,t,!1)}};p0=bp;h0=qr;var FC={usingClientEntryPoint:!1,Events:[Kl,Si,qa,d0,f0,bp]},jo={findFiberByHostInstance:Ir,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zC={bundleType:jo.bundleType,version:jo.version,rendererPackageName:jo.rendererPackageName,rendererConfig:jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=y0(e),e===null?null:e.stateNode},findFiberByHostInstance:jo.findFiberByHostInstance||IC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cs.isDisabled&&Cs.supportsFiber)try{Ga=Cs.inject(zC),hn=Cs}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FC;jt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ap(t))throw Error(j(200));return MC(e,t,null,n)};jt.createRoot=function(e,t){if(!Ap(e))throw Error(j(299));var n=!1,r="",i=Jv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=$p(e,1,!1,null,null,n,!1,r,i),e[In]=t.current,vl(e.nodeType===8?e.parentNode:e),new Lp(t)};jt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(j(188)):(e=Object.keys(e).join(","),Error(j(268,e)));return e=y0(t),e=e===null?null:e.stateNode,e};jt.flushSync=function(e){return qr(e)};jt.hydrate=function(e,t,n){if(!lu(t))throw Error(j(200));return su(null,e,t,!0,n)};jt.hydrateRoot=function(e,t,n){if(!Ap(e))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",l=Jv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Qv(t,null,e,1,n??null,i,!1,o,l),e[In]=t.current,vl(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ou(t)};jt.render=function(e,t,n){if(!lu(t))throw Error(j(200));return su(null,e,t,!1,n)};jt.unmountComponentAtNode=function(e){if(!lu(e))throw Error(j(40));return e._reactRootContainer?(qr(function(){su(null,null,e,!1,function(){e._reactRootContainer=null,e[In]=null})}),!0):!1};jt.unstable_batchedUpdates=bp;jt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!lu(n))throw Error(j(200));if(e==null||e._reactInternals===void 0)throw Error(j(38));return su(e,t,n,!1,r)};jt.version="18.2.0-next-9e3b772b8-20220608";function qv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qv)}catch(e){console.error(e)}}qv(),Qy.exports=jt;var Mp=Qy.exports,tg=Mp;Zc.createRoot=tg.createRoot,Zc.hydrateRoot=tg.hydrateRoot;var Xv={exports:{}},Zv={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xi=w;function BC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var WC=typeof Object.is=="function"?Object.is:BC,HC=Xi.useState,UC=Xi.useEffect,VC=Xi.useLayoutEffect,KC=Xi.useDebugValue;function GC(e,t){var n=t(),r=HC({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return VC(function(){i.value=n,i.getSnapshot=t,Ec(i)&&o({inst:i})},[e,n,t]),UC(function(){return Ec(i)&&o({inst:i}),e(function(){Ec(i)&&o({inst:i})})},[e]),KC(n),n}function Ec(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!WC(e,n)}catch{return!0}}function YC(e,t){return t()}var QC=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?YC:GC;Zv.useSyncExternalStore=Xi.useSyncExternalStore!==void 0?Xi.useSyncExternalStore:QC;Xv.exports=Zv;var JC=Xv.exports,e1={exports:{}},t1={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=w,qC=JC;function XC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ZC=typeof Object.is=="function"?Object.is:XC,eN=qC.useSyncExternalStore,tN=au.useRef,nN=au.useEffect,rN=au.useMemo,iN=au.useDebugValue;t1.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=tN(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=rN(function(){function a(h){if(!u){if(u=!0,f=h,h=r(h),i!==void 0&&l.hasValue){var m=l.value;if(i(m,h))return d=m}return d=h}if(m=d,ZC(f,h))return m;var g=r(h);return i!==void 0&&i(m,g)?m:(f=h,d=g)}var u=!1,f,d,p=n===void 0?null:n;return[function(){return a(t())},p===null?void 0:function(){return a(p())}]},[t,n,r,i]);var s=eN(e,o[0],o[1]);return nN(function(){l.hasValue=!0,l.value=s},[s]),iN(s),s};e1.exports=t1;var oN=e1.exports;function lN(e){e()}let n1=lN;const sN=e=>n1=e,aN=()=>n1,ng=Symbol.for("react-redux-context"),rg=typeof globalThis<"u"?globalThis:{};function uN(){var e;if(!w.createContext)return{};const t=(e=rg[ng])!=null?e:rg[ng]=new Map;let n=t.get(w.createContext);return n||(n=w.createContext(null),t.set(w.createContext,n)),n}const _r=uN();function Ip(e=_r){return function(){return w.useContext(e)}}const r1=Ip(),cN=()=>{throw new Error("uSES not initialized!")};let i1=cN;const dN=e=>{i1=e},fN=(e,t)=>e===t;function pN(e=_r){const t=e===_r?r1:Ip(e);return function(r,i={}){const{equalityFn:o=fN,stabilityCheck:l=void 0,noopCheck:s=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:f,stabilityCheck:d,noopCheck:p}=t();w.useRef(!0);const h=w.useCallback({[r.name](g){return r(g)}}[r.name],[r,d,l]),m=i1(u.addNestedSub,a.getState,f||a.getState,h,o);return w.useDebugValue(m),m}}const F=pN();var o1={exports:{}},ee={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fe=typeof Symbol=="function"&&Symbol.for,Dp=Fe?Symbol.for("react.element"):60103,Fp=Fe?Symbol.for("react.portal"):60106,uu=Fe?Symbol.for("react.fragment"):60107,cu=Fe?Symbol.for("react.strict_mode"):60108,du=Fe?Symbol.for("react.profiler"):60114,fu=Fe?Symbol.for("react.provider"):60109,pu=Fe?Symbol.for("react.context"):60110,zp=Fe?Symbol.for("react.async_mode"):60111,hu=Fe?Symbol.for("react.concurrent_mode"):60111,mu=Fe?Symbol.for("react.forward_ref"):60112,gu=Fe?Symbol.for("react.suspense"):60113,hN=Fe?Symbol.for("react.suspense_list"):60120,yu=Fe?Symbol.for("react.memo"):60115,vu=Fe?Symbol.for("react.lazy"):60116,mN=Fe?Symbol.for("react.block"):60121,gN=Fe?Symbol.for("react.fundamental"):60117,yN=Fe?Symbol.for("react.responder"):60118,vN=Fe?Symbol.for("react.scope"):60119;function kt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Dp:switch(e=e.type,e){case zp:case hu:case uu:case du:case cu:case gu:return e;default:switch(e=e&&e.$$typeof,e){case pu:case mu:case vu:case yu:case fu:return e;default:return t}}case Fp:return t}}}function l1(e){return kt(e)===hu}ee.AsyncMode=zp;ee.ConcurrentMode=hu;ee.ContextConsumer=pu;ee.ContextProvider=fu;ee.Element=Dp;ee.ForwardRef=mu;ee.Fragment=uu;ee.Lazy=vu;ee.Memo=yu;ee.Portal=Fp;ee.Profiler=du;ee.StrictMode=cu;ee.Suspense=gu;ee.isAsyncMode=function(e){return l1(e)||kt(e)===zp};ee.isConcurrentMode=l1;ee.isContextConsumer=function(e){return kt(e)===pu};ee.isContextProvider=function(e){return kt(e)===fu};ee.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dp};ee.isForwardRef=function(e){return kt(e)===mu};ee.isFragment=function(e){return kt(e)===uu};ee.isLazy=function(e){return kt(e)===vu};ee.isMemo=function(e){return kt(e)===yu};ee.isPortal=function(e){return kt(e)===Fp};ee.isProfiler=function(e){return kt(e)===du};ee.isStrictMode=function(e){return kt(e)===cu};ee.isSuspense=function(e){return kt(e)===gu};ee.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===uu||e===hu||e===du||e===cu||e===gu||e===hN||typeof e=="object"&&e!==null&&(e.$$typeof===vu||e.$$typeof===yu||e.$$typeof===fu||e.$$typeof===pu||e.$$typeof===mu||e.$$typeof===gN||e.$$typeof===yN||e.$$typeof===vN||e.$$typeof===mN)};ee.typeOf=kt;o1.exports=ee;var xN=o1.exports,s1=xN,_N={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},SN={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a1={};a1[s1.ForwardRef]=_N;a1[s1.Memo]=SN;var ne={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bp=Symbol.for("react.element"),Wp=Symbol.for("react.portal"),xu=Symbol.for("react.fragment"),_u=Symbol.for("react.strict_mode"),Su=Symbol.for("react.profiler"),wu=Symbol.for("react.provider"),Cu=Symbol.for("react.context"),wN=Symbol.for("react.server_context"),Nu=Symbol.for("react.forward_ref"),Eu=Symbol.for("react.suspense"),Tu=Symbol.for("react.suspense_list"),Ou=Symbol.for("react.memo"),bu=Symbol.for("react.lazy"),CN=Symbol.for("react.offscreen"),u1;u1=Symbol.for("react.module.reference");function Kt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Bp:switch(e=e.type,e){case xu:case Su:case _u:case Eu:case Tu:return e;default:switch(e=e&&e.$$typeof,e){case wN:case Cu:case Nu:case bu:case Ou:case wu:return e;default:return t}}case Wp:return t}}}ne.ContextConsumer=Cu;ne.ContextProvider=wu;ne.Element=Bp;ne.ForwardRef=Nu;ne.Fragment=xu;ne.Lazy=bu;ne.Memo=Ou;ne.Portal=Wp;ne.Profiler=Su;ne.StrictMode=_u;ne.Suspense=Eu;ne.SuspenseList=Tu;ne.isAsyncMode=function(){return!1};ne.isConcurrentMode=function(){return!1};ne.isContextConsumer=function(e){return Kt(e)===Cu};ne.isContextProvider=function(e){return Kt(e)===wu};ne.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bp};ne.isForwardRef=function(e){return Kt(e)===Nu};ne.isFragment=function(e){return Kt(e)===xu};ne.isLazy=function(e){return Kt(e)===bu};ne.isMemo=function(e){return Kt(e)===Ou};ne.isPortal=function(e){return Kt(e)===Wp};ne.isProfiler=function(e){return Kt(e)===Su};ne.isStrictMode=function(e){return Kt(e)===_u};ne.isSuspense=function(e){return Kt(e)===Eu};ne.isSuspenseList=function(e){return Kt(e)===Tu};ne.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===xu||e===Su||e===_u||e===Eu||e===Tu||e===CN||typeof e=="object"&&e!==null&&(e.$$typeof===bu||e.$$typeof===Ou||e.$$typeof===wu||e.$$typeof===Cu||e.$$typeof===Nu||e.$$typeof===u1||e.getModuleId!==void 0)};ne.typeOf=Kt;function NN(){const e=aN();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,o=n={callback:r,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}const ig={notify(){},get:()=>[]};function EN(e,t){let n,r=ig,i=0,o=!1;function l(g){f();const _=r.subscribe(g);let v=!1;return()=>{v||(v=!0,_(),d())}}function s(){r.notify()}function a(){m.onStateChange&&m.onStateChange()}function u(){return o}function f(){i++,n||(n=t?t.addNestedSub(a):e.subscribe(a),r=NN())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=ig)}function p(){o||(o=!0,f())}function h(){o&&(o=!1,d())}const m={addNestedSub:l,notifyNestedSubs:s,handleChangeWrapper:a,isSubscribed:u,trySubscribe:p,tryUnsubscribe:h,getListeners:()=>r};return m}const TN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ON=TN?w.useLayoutEffect:w.useEffect;function og(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function an(e,t){if(og(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!og(e[n[i]],t[n[i]]))return!1;return!0}function bN({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",noopCheck:o="once"}){const l=w.useMemo(()=>{const u=EN(e);return{store:e,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:o}},[e,r,i,o]),s=w.useMemo(()=>e.getState(),[e]);ON(()=>{const{subscription:u}=l;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),s!==e.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[l,s]);const a=t||_r;return w.createElement(a.Provider,{value:l},n)}function c1(e=_r){const t=e===_r?r1:Ip(e);return function(){const{store:r}=t();return r}}const jN=c1();function PN(e=_r){const t=e===_r?jN:c1(e);return function(){return t().dispatch}}const X=PN();dN(oN.useSyncExternalStoreWithSelector);sN(Mp.unstable_batchedUpdates);var d1={exports:{}},kN="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$N=kN,RN=$N;function f1(){}function p1(){}p1.resetWarningCache=f1;var LN=function(){function e(r,i,o,l,s,a){if(a!==RN){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:p1,resetWarningCache:f1};return n.PropTypes=n,n};d1.exports=LN();var AN=d1.exports;const de=no(AN);function MN(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var h1=w,IN=MN(h1);function lg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DN(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var FN=!!(typeof window<"u"&&window.document&&window.document.createElement);function zN(e,t,n){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof n<"u"&&typeof n!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(i){return i.displayName||i.name||"Component"}return function(o){if(typeof o!="function")throw new Error("Expected WrappedComponent to be a React component.");var l=[],s;function a(){s=e(l.map(function(f){return f.props})),u.canUseDOM?t(s):n&&(s=n(s))}var u=function(f){DN(d,f);function d(){return f.apply(this,arguments)||this}d.peek=function(){return s},d.rewind=function(){if(d.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var m=s;return s=void 0,l=[],m};var p=d.prototype;return p.UNSAFE_componentWillMount=function(){l.push(this),a()},p.componentDidUpdate=function(){a()},p.componentWillUnmount=function(){var m=l.indexOf(this);l.splice(m,1),a()},p.render=function(){return IN.createElement(o,this.props)},d}(h1.PureComponent);return lg(u,"displayName","SideEffect("+r(o)+")"),lg(u,"canUseDOM",FN),u}}var BN=zN;const WN=no(BN);var HN=typeof Element<"u",UN=typeof Map=="function",VN=typeof Set=="function",KN=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Vs(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Vs(e[r],t[r]))return!1;return!0}var o;if(UN&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;for(o=e.entries();!(r=o.next()).done;)if(!Vs(r.value[1],t.get(r.value[0])))return!1;return!0}if(VN&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(KN&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(HN&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!Vs(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var GN=function(t,n){try{return Vs(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const YN=no(GN);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var sg=Object.getOwnPropertySymbols,QN=Object.prototype.hasOwnProperty,JN=Object.prototype.propertyIsEnumerable;function qN(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function XN(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var ZN=XN()?Object.assign:function(e,t){for(var n,r=qN(e),i,o=1;o<arguments.length;o++){n=Object(arguments[o]);for(var l in n)QN.call(n,l)&&(r[l]=n[l]);if(sg){i=sg(n);for(var s=0;s<i.length;s++)JN.call(n,i[s])&&(r[i[s]]=n[i[s]])}}return r};const e2=no(ZN);var Hr={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},U={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(U).map(function(e){return U[e]});var fe={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Ca={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Ol={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},t2=Object.keys(Ca).reduce(function(e,t){return e[Ca[t]]=t,e},{}),n2=[U.NOSCRIPT,U.SCRIPT,U.STYLE],nn="data-react-helmet",r2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i2=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o2=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l2=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ag=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},s2=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Kd=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},a2=function(t){var n=Mi(t,U.TITLE),r=Mi(t,Ol.TITLE_TEMPLATE);if(r&&n)return r.replace(/%s/g,function(){return Array.isArray(n)?n.join(""):n});var i=Mi(t,Ol.DEFAULT_TITLE);return n||i||void 0},u2=function(t){return Mi(t,Ol.ON_CHANGE_CLIENT_STATE)||function(){}},Tc=function(t,n){return n.filter(function(r){return typeof r[t]<"u"}).map(function(r){return r[t]}).reduce(function(r,i){return ft({},r,i)},{})},c2=function(t,n){return n.filter(function(r){return typeof r[U.BASE]<"u"}).map(function(r){return r[U.BASE]}).reverse().reduce(function(r,i){if(!r.length)for(var o=Object.keys(i),l=0;l<o.length;l++){var s=o[l],a=s.toLowerCase();if(t.indexOf(a)!==-1&&i[a])return r.concat(i)}return r},[])},Po=function(t,n,r){var i={};return r.filter(function(o){return Array.isArray(o[t])?!0:(typeof o[t]<"u"&&h2("Helmet: "+t+' should be of type "Array". Instead found type "'+r2(o[t])+'"'),!1)}).map(function(o){return o[t]}).reverse().reduce(function(o,l){var s={};l.filter(function(p){for(var h=void 0,m=Object.keys(p),g=0;g<m.length;g++){var _=m[g],v=_.toLowerCase();n.indexOf(v)!==-1&&!(h===fe.REL&&p[h].toLowerCase()==="canonical")&&!(v===fe.REL&&p[v].toLowerCase()==="stylesheet")&&(h=v),n.indexOf(_)!==-1&&(_===fe.INNER_HTML||_===fe.CSS_TEXT||_===fe.ITEM_PROP)&&(h=_)}if(!h||!p[h])return!1;var y=p[h].toLowerCase();return i[h]||(i[h]={}),s[h]||(s[h]={}),i[h][y]?!1:(s[h][y]=!0,!0)}).reverse().forEach(function(p){return o.push(p)});for(var a=Object.keys(s),u=0;u<a.length;u++){var f=a[u],d=e2({},i[f],s[f]);i[f]=d}return o},[]).reverse()},Mi=function(t,n){for(var r=t.length-1;r>=0;r--){var i=t[r];if(i.hasOwnProperty(n))return i[n]}return null},d2=function(t){return{baseTag:c2([fe.HREF,fe.TARGET],t),bodyAttributes:Tc(Hr.BODY,t),defer:Mi(t,Ol.DEFER),encode:Mi(t,Ol.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Tc(Hr.HTML,t),linkTags:Po(U.LINK,[fe.REL,fe.HREF],t),metaTags:Po(U.META,[fe.NAME,fe.CHARSET,fe.HTTPEQUIV,fe.PROPERTY,fe.ITEM_PROP],t),noscriptTags:Po(U.NOSCRIPT,[fe.INNER_HTML],t),onChangeClientState:u2(t),scriptTags:Po(U.SCRIPT,[fe.SRC,fe.INNER_HTML],t),styleTags:Po(U.STYLE,[fe.CSS_TEXT],t),title:a2(t),titleAttributes:Tc(Hr.TITLE,t)}},Gd=function(){var e=Date.now();return function(t){var n=Date.now();n-e>16?(e=n,t(n)):setTimeout(function(){Gd(t)},0)}}(),ug=function(t){return clearTimeout(t)},f2=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Gd:global.requestAnimationFrame||Gd,p2=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||ug:global.cancelAnimationFrame||ug,h2=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},ko=null,m2=function(t){ko&&p2(ko),t.defer?ko=f2(function(){cg(t,function(){ko=null})}):(cg(t),ko=null)},cg=function(t,n){var r=t.baseTag,i=t.bodyAttributes,o=t.htmlAttributes,l=t.linkTags,s=t.metaTags,a=t.noscriptTags,u=t.onChangeClientState,f=t.scriptTags,d=t.styleTags,p=t.title,h=t.titleAttributes;Yd(U.BODY,i),Yd(U.HTML,o),g2(p,h);var m={baseTag:di(U.BASE,r),linkTags:di(U.LINK,l),metaTags:di(U.META,s),noscriptTags:di(U.NOSCRIPT,a),scriptTags:di(U.SCRIPT,f),styleTags:di(U.STYLE,d)},g={},_={};Object.keys(m).forEach(function(v){var y=m[v],x=y.newTags,S=y.oldTags;x.length&&(g[v]=x),S.length&&(_[v]=m[v].oldTags)}),n&&n(),u(t,g,_)},m1=function(t){return Array.isArray(t)?t.join(""):t},g2=function(t,n){typeof t<"u"&&document.title!==t&&(document.title=m1(t)),Yd(U.TITLE,n)},Yd=function(t,n){var r=document.getElementsByTagName(t)[0];if(r){for(var i=r.getAttribute(nn),o=i?i.split(","):[],l=[].concat(o),s=Object.keys(n),a=0;a<s.length;a++){var u=s[a],f=n[u]||"";r.getAttribute(u)!==f&&r.setAttribute(u,f),o.indexOf(u)===-1&&o.push(u);var d=l.indexOf(u);d!==-1&&l.splice(d,1)}for(var p=l.length-1;p>=0;p--)r.removeAttribute(l[p]);o.length===l.length?r.removeAttribute(nn):r.getAttribute(nn)!==s.join(",")&&r.setAttribute(nn,s.join(","))}},di=function(t,n){var r=document.head||document.querySelector(U.HEAD),i=r.querySelectorAll(t+"["+nn+"]"),o=Array.prototype.slice.call(i),l=[],s=void 0;return n&&n.length&&n.forEach(function(a){var u=document.createElement(t);for(var f in a)if(a.hasOwnProperty(f))if(f===fe.INNER_HTML)u.innerHTML=a.innerHTML;else if(f===fe.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=a.cssText:u.appendChild(document.createTextNode(a.cssText));else{var d=typeof a[f]>"u"?"":a[f];u.setAttribute(f,d)}u.setAttribute(nn,"true"),o.some(function(p,h){return s=h,u.isEqualNode(p)})?o.splice(s,1):l.push(u)}),o.forEach(function(a){return a.parentNode.removeChild(a)}),l.forEach(function(a){return r.appendChild(a)}),{oldTags:o,newTags:l}},g1=function(t){return Object.keys(t).reduce(function(n,r){var i=typeof t[r]<"u"?r+'="'+t[r]+'"':""+r;return n?n+" "+i:i},"")},y2=function(t,n,r,i){var o=g1(r),l=m1(n);return o?"<"+t+" "+nn+'="true" '+o+">"+Kd(l,i)+"</"+t+">":"<"+t+" "+nn+'="true">'+Kd(l,i)+"</"+t+">"},v2=function(t,n,r){return n.reduce(function(i,o){var l=Object.keys(o).filter(function(u){return!(u===fe.INNER_HTML||u===fe.CSS_TEXT)}).reduce(function(u,f){var d=typeof o[f]>"u"?f:f+'="'+Kd(o[f],r)+'"';return u?u+" "+d:d},""),s=o.innerHTML||o.cssText||"",a=n2.indexOf(t)===-1;return i+"<"+t+" "+nn+'="true" '+l+(a?"/>":">"+s+"</"+t+">")},"")},y1=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,i){return r[Ca[i]||i]=t[i],r},n)},x2=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,i){return r[t2[i]||i]=t[i],r},n)},_2=function(t,n,r){var i,o=(i={key:n},i[nn]=!0,i),l=y1(r,o);return[Wt.createElement(U.TITLE,l,n)]},S2=function(t,n){return n.map(function(r,i){var o,l=(o={key:i},o[nn]=!0,o);return Object.keys(r).forEach(function(s){var a=Ca[s]||s;if(a===fe.INNER_HTML||a===fe.CSS_TEXT){var u=r.innerHTML||r.cssText;l.dangerouslySetInnerHTML={__html:u}}else l[a]=r[s]}),Wt.createElement(t,l)})},En=function(t,n,r){switch(t){case U.TITLE:return{toComponent:function(){return _2(t,n.title,n.titleAttributes)},toString:function(){return y2(t,n.title,n.titleAttributes,r)}};case Hr.BODY:case Hr.HTML:return{toComponent:function(){return y1(n)},toString:function(){return g1(n)}};default:return{toComponent:function(){return S2(t,n)},toString:function(){return v2(t,n,r)}}}},v1=function(t){var n=t.baseTag,r=t.bodyAttributes,i=t.encode,o=t.htmlAttributes,l=t.linkTags,s=t.metaTags,a=t.noscriptTags,u=t.scriptTags,f=t.styleTags,d=t.title,p=d===void 0?"":d,h=t.titleAttributes;return{base:En(U.BASE,n,i),bodyAttributes:En(Hr.BODY,r,i),htmlAttributes:En(Hr.HTML,o,i),link:En(U.LINK,l,i),meta:En(U.META,s,i),noscript:En(U.NOSCRIPT,a,i),script:En(U.SCRIPT,u,i),style:En(U.STYLE,f,i),title:En(U.TITLE,{title:p,titleAttributes:h},i)}},w2=function(t){var n,r;return r=n=function(i){l2(o,i);function o(){return i2(this,o),s2(this,i.apply(this,arguments))}return o.prototype.shouldComponentUpdate=function(s){return!YN(this.props,s)},o.prototype.mapNestedChildrenToProps=function(s,a){if(!a)return null;switch(s.type){case U.SCRIPT:case U.NOSCRIPT:return{innerHTML:a};case U.STYLE:return{cssText:a}}throw new Error("<"+s.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},o.prototype.flattenArrayTypeChildren=function(s){var a,u=s.child,f=s.arrayTypeChildren,d=s.newChildProps,p=s.nestedChildren;return ft({},f,(a={},a[u.type]=[].concat(f[u.type]||[],[ft({},d,this.mapNestedChildrenToProps(u,p))]),a))},o.prototype.mapObjectTypeChildren=function(s){var a,u,f=s.child,d=s.newProps,p=s.newChildProps,h=s.nestedChildren;switch(f.type){case U.TITLE:return ft({},d,(a={},a[f.type]=h,a.titleAttributes=ft({},p),a));case U.BODY:return ft({},d,{bodyAttributes:ft({},p)});case U.HTML:return ft({},d,{htmlAttributes:ft({},p)})}return ft({},d,(u={},u[f.type]=ft({},p),u))},o.prototype.mapArrayTypeChildrenToProps=function(s,a){var u=ft({},a);return Object.keys(s).forEach(function(f){var d;u=ft({},u,(d={},d[f]=s[f],d))}),u},o.prototype.warnOnInvalidChildren=function(s,a){return!0},o.prototype.mapChildrenToProps=function(s,a){var u=this,f={};return Wt.Children.forEach(s,function(d){if(!(!d||!d.props)){var p=d.props,h=p.children,m=ag(p,["children"]),g=x2(m);switch(u.warnOnInvalidChildren(d,h),d.type){case U.LINK:case U.META:case U.NOSCRIPT:case U.SCRIPT:case U.STYLE:f=u.flattenArrayTypeChildren({child:d,arrayTypeChildren:f,newChildProps:g,nestedChildren:h});break;default:a=u.mapObjectTypeChildren({child:d,newProps:a,newChildProps:g,nestedChildren:h});break}}}),a=this.mapArrayTypeChildrenToProps(f,a),a},o.prototype.render=function(){var s=this.props,a=s.children,u=ag(s,["children"]),f=ft({},u);return a&&(f=this.mapChildrenToProps(a,f)),Wt.createElement(t,f)},o2(o,null,[{key:"canUseDOM",set:function(s){t.canUseDOM=s}}]),o}(Wt.Component),n.propTypes={base:de.object,bodyAttributes:de.object,children:de.oneOfType([de.arrayOf(de.node),de.node]),defaultTitle:de.string,defer:de.bool,encodeSpecialCharacters:de.bool,htmlAttributes:de.object,link:de.arrayOf(de.object),meta:de.arrayOf(de.object),noscript:de.arrayOf(de.object),onChangeClientState:de.func,script:de.arrayOf(de.object),style:de.arrayOf(de.object),title:de.string,titleAttributes:de.object,titleTemplate:de.string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=t.peek,n.rewind=function(){var i=t.rewind();return i||(i=v1({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},r},C2=function(){return null},N2=WN(d2,m2,v1)(C2),Qd=w2(N2);Qd.renderStatic=Qd.rewind;function tn(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Sr(e){return!!e&&!!e[pe]}function zn(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===R2}(e)||Array.isArray(e)||!!e[yg]||!!(!((t=e.constructor)===null||t===void 0)&&t[yg])||Hp(e)||Up(e))}function Xr(e,t,n){n===void 0&&(n=!1),lo(e)===0?(n?Object.keys:Di)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function lo(e){var t=e[pe];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Hp(e)?2:Up(e)?3:0}function Ii(e,t){return lo(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function E2(e,t){return lo(e)===2?e.get(t):e[t]}function x1(e,t,n){var r=lo(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function _1(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Hp(e){return k2&&e instanceof Map}function Up(e){return $2&&e instanceof Set}function Mr(e){return e.o||e.t}function Vp(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=w1(e);delete t[pe];for(var n=Di(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Kp(e,t){return t===void 0&&(t=!1),Gp(e)||Sr(e)||!zn(e)||(lo(e)>1&&(e.set=e.add=e.clear=e.delete=T2),Object.freeze(e),t&&Xr(e,function(n,r){return Kp(r,!0)},!0)),e}function T2(){tn(2)}function Gp(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function gn(e){var t=Zd[e];return t||tn(18,e),t}function O2(e,t){Zd[e]||(Zd[e]=t)}function Jd(){return bl}function Oc(e,t){t&&(gn("Patches"),e.u=[],e.s=[],e.v=t)}function Na(e){qd(e),e.p.forEach(b2),e.p=null}function qd(e){e===bl&&(bl=e.l)}function dg(e){return bl={p:[],l:bl,h:e,m:!0,_:0}}function b2(e){var t=e[pe];t.i===0||t.i===1?t.j():t.g=!0}function bc(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||gn("ES5").S(t,e,r),r?(n[pe].P&&(Na(t),tn(4)),zn(e)&&(e=Ea(t,e),t.l||Ta(t,e)),t.u&&gn("Patches").M(n[pe].t,e,t.u,t.s)):e=Ea(t,n,[]),Na(t),t.u&&t.v(t.u,t.s),e!==S1?e:void 0}function Ea(e,t,n){if(Gp(t))return t;var r=t[pe];if(!r)return Xr(t,function(s,a){return fg(e,r,t,s,a,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Ta(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Vp(r.k):r.o,o=i,l=!1;r.i===3&&(o=new Set(i),i.clear(),l=!0),Xr(o,function(s,a){return fg(e,r,i,s,a,n,l)}),Ta(e,i,!1),n&&e.u&&gn("Patches").N(r,n,e.u,e.s)}return r.o}function fg(e,t,n,r,i,o,l){if(Sr(i)){var s=Ea(e,i,o&&t&&t.i!==3&&!Ii(t.R,r)?o.concat(r):void 0);if(x1(n,r,s),!Sr(s))return;e.m=!1}else l&&n.add(i);if(zn(i)&&!Gp(i)){if(!e.h.D&&e._<1)return;Ea(e,i),t&&t.A.l||Ta(e,i)}}function Ta(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Kp(t,n)}function jc(e,t){var n=e[pe];return(n?Mr(n):e)[t]}function pg(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function tr(e){e.P||(e.P=!0,e.l&&tr(e.l))}function Pc(e){e.o||(e.o=Vp(e.t))}function Xd(e,t,n){var r=Hp(t)?gn("MapSet").F(t,n):Up(t)?gn("MapSet").T(t,n):e.O?function(i,o){var l=Array.isArray(i),s={i:l?1:0,A:o?o.A:Jd(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},a=s,u=jl;l&&(a=[s],u=Bo);var f=Proxy.revocable(a,u),d=f.revoke,p=f.proxy;return s.k=p,s.j=d,p}(t,n):gn("ES5").J(t,n);return(n?n.A:Jd()).p.push(r),r}function j2(e){return Sr(e)||tn(22,e),function t(n){if(!zn(n))return n;var r,i=n[pe],o=lo(n);if(i){if(!i.P&&(i.i<4||!gn("ES5").K(i)))return i.t;i.I=!0,r=hg(n,o),i.I=!1}else r=hg(n,o);return Xr(r,function(l,s){i&&E2(i.t,l)===s||x1(r,l,t(s))}),o===3?new Set(r):r}(e)}function hg(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Vp(e)}function P2(){function e(o,l){var s=i[o];return s?s.enumerable=l:i[o]=s={configurable:!0,enumerable:l,get:function(){var a=this[pe];return jl.get(a,o)},set:function(a){var u=this[pe];jl.set(u,o,a)}},s}function t(o){for(var l=o.length-1;l>=0;l--){var s=o[l][pe];if(!s.P)switch(s.i){case 5:r(s)&&tr(s);break;case 4:n(s)&&tr(s)}}}function n(o){for(var l=o.t,s=o.k,a=Di(s),u=a.length-1;u>=0;u--){var f=a[u];if(f!==pe){var d=l[f];if(d===void 0&&!Ii(l,f))return!0;var p=s[f],h=p&&p[pe];if(h?h.t!==d:!_1(p,d))return!0}}var m=!!l[pe];return a.length!==Di(l).length+(m?0:1)}function r(o){var l=o.k;if(l.length!==o.t.length)return!0;var s=Object.getOwnPropertyDescriptor(l,l.length-1);if(s&&!s.get)return!0;for(var a=0;a<l.length;a++)if(!l.hasOwnProperty(a))return!0;return!1}var i={};O2("ES5",{J:function(o,l){var s=Array.isArray(o),a=function(f,d){if(f){for(var p=Array(d.length),h=0;h<d.length;h++)Object.defineProperty(p,""+h,e(h,!0));return p}var m=w1(d);delete m[pe];for(var g=Di(m),_=0;_<g.length;_++){var v=g[_];m[v]=e(v,f||!!m[v].enumerable)}return Object.create(Object.getPrototypeOf(d),m)}(s,o),u={i:s?5:4,A:l?l.A:Jd(),P:!1,I:!1,R:{},l,t:o,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,pe,{value:u,writable:!0}),a},S:function(o,l,s){s?Sr(l)&&l[pe].A===o&&t(o.p):(o.u&&function a(u){if(u&&typeof u=="object"){var f=u[pe];if(f){var d=f.t,p=f.k,h=f.R,m=f.i;if(m===4)Xr(p,function(x){x!==pe&&(d[x]!==void 0||Ii(d,x)?h[x]||a(p[x]):(h[x]=!0,tr(f)))}),Xr(d,function(x){p[x]!==void 0||Ii(p,x)||(h[x]=!1,tr(f))});else if(m===5){if(r(f)&&(tr(f),h.length=!0),p.length<d.length)for(var g=p.length;g<d.length;g++)h[g]=!1;else for(var _=d.length;_<p.length;_++)h[_]=!0;for(var v=Math.min(p.length,d.length),y=0;y<v;y++)p.hasOwnProperty(y)||(h[y]=!0),h[y]===void 0&&a(p[y])}}}}(o.p[0]),t(o.p))},K:function(o){return o.i===4?n(o):r(o)}})}var mg,bl,Yp=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",k2=typeof Map<"u",$2=typeof Set<"u",gg=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",S1=Yp?Symbol.for("immer-nothing"):((mg={})["immer-nothing"]=!0,mg),yg=Yp?Symbol.for("immer-draftable"):"__$immer_draftable",pe=Yp?Symbol.for("immer-state"):"__$immer_state",R2=""+Object.prototype.constructor,Di=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,w1=Object.getOwnPropertyDescriptors||function(e){var t={};return Di(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Zd={},jl={get:function(e,t){if(t===pe)return e;var n=Mr(e);if(!Ii(n,t))return function(i,o,l){var s,a=pg(o,l);return a?"value"in a?a.value:(s=a.get)===null||s===void 0?void 0:s.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!zn(r)?r:r===jc(e.t,t)?(Pc(e),e.o[t]=Xd(e.A.h,r,e)):r},has:function(e,t){return t in Mr(e)},ownKeys:function(e){return Reflect.ownKeys(Mr(e))},set:function(e,t,n){var r=pg(Mr(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=jc(Mr(e),t),o=i==null?void 0:i[pe];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(_1(n,i)&&(n!==void 0||Ii(e.t,t)))return!0;Pc(e),tr(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return jc(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Pc(e),tr(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Mr(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){tn(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){tn(12)}},Bo={};Xr(jl,function(e,t){Bo[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Bo.deleteProperty=function(e,t){return Bo.set.call(this,e,t,void 0)},Bo.set=function(e,t,n){return jl.set.call(this,e[0],t,n,e[0])};var L2=function(){function e(n){var r=this;this.O=gg,this.D=!0,this.produce=function(i,o,l){if(typeof i=="function"&&typeof o!="function"){var s=o;o=i;var a=r;return function(g){var _=this;g===void 0&&(g=s);for(var v=arguments.length,y=Array(v>1?v-1:0),x=1;x<v;x++)y[x-1]=arguments[x];return a.produce(g,function(S){var C;return(C=o).call.apply(C,[_,S].concat(y))})}}var u;if(typeof o!="function"&&tn(6),l!==void 0&&typeof l!="function"&&tn(7),zn(i)){var f=dg(r),d=Xd(r,i,void 0),p=!0;try{u=o(d),p=!1}finally{p?Na(f):qd(f)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(g){return Oc(f,l),bc(g,f)},function(g){throw Na(f),g}):(Oc(f,l),bc(u,f))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===S1&&(u=void 0),r.D&&Kp(u,!0),l){var h=[],m=[];gn("Patches").M(i,u,h,m),l(h,m)}return u}tn(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var f=arguments.length,d=Array(f>1?f-1:0),p=1;p<f;p++)d[p-1]=arguments[p];return r.produceWithPatches(u,function(h){return i.apply(void 0,[h].concat(d))})};var l,s,a=r.produce(i,o,function(u,f){l=u,s=f});return typeof Promise<"u"&&a instanceof Promise?a.then(function(u){return[u,l,s]}):[a,l,s]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){zn(n)||tn(8),Sr(n)&&(n=j2(n));var r=dg(this),i=Xd(this,n,void 0);return i[pe].C=!0,qd(r),i},t.finishDraft=function(n,r){var i=n&&n[pe],o=i.A;return Oc(o,r),bc(void 0,o)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!gg&&tn(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var l=gn("Patches").$;return Sr(n)?l(n,r):this.produce(n,function(s){return l(s,r)})},e}(),Ot=new L2,C1=Ot.produce;Ot.produceWithPatches.bind(Ot);Ot.setAutoFreeze.bind(Ot);Ot.setUseProxies.bind(Ot);Ot.applyPatches.bind(Ot);Ot.createDraft.bind(Ot);Ot.finishDraft.bind(Ot);function Pl(e){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pl(e)}function A2(e,t){if(Pl(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M2(e){var t=A2(e,"string");return Pl(t)==="symbol"?t:String(t)}function I2(e,t,n){return t=M2(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vg(Object(n),!0).forEach(function(r){I2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vg(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var _g=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),kc=function(){return Math.random().toString(36).substring(7).split("").join(".")},Oa={INIT:"@@redux/INIT"+kc(),REPLACE:"@@redux/REPLACE"+kc(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+kc()}};function D2(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function N1(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(qe(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(qe(1));return n(N1)(e,t)}if(typeof e!="function")throw new Error(qe(2));var i=e,o=t,l=[],s=l,a=!1;function u(){s===l&&(s=l.slice())}function f(){if(a)throw new Error(qe(3));return o}function d(g){if(typeof g!="function")throw new Error(qe(4));if(a)throw new Error(qe(5));var _=!0;return u(),s.push(g),function(){if(_){if(a)throw new Error(qe(6));_=!1,u();var y=s.indexOf(g);s.splice(y,1),l=null}}}function p(g){if(!D2(g))throw new Error(qe(7));if(typeof g.type>"u")throw new Error(qe(8));if(a)throw new Error(qe(9));try{a=!0,o=i(o,g)}finally{a=!1}for(var _=l=s,v=0;v<_.length;v++){var y=_[v];y()}return g}function h(g){if(typeof g!="function")throw new Error(qe(10));i=g,p({type:Oa.REPLACE})}function m(){var g,_=d;return g={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(qe(11));function x(){y.next&&y.next(f())}x();var S=_(x);return{unsubscribe:S}}},g[_g]=function(){return this},g}return p({type:Oa.INIT}),r={dispatch:p,subscribe:d,getState:f,replaceReducer:h},r[_g]=m,r}function F2(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:Oa.INIT});if(typeof r>"u")throw new Error(qe(12));if(typeof n(void 0,{type:Oa.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(qe(13))})}function z2(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var o=Object.keys(n),l;try{F2(n)}catch(s){l=s}return function(a,u){if(a===void 0&&(a={}),l)throw l;for(var f=!1,d={},p=0;p<o.length;p++){var h=o[p],m=n[h],g=a[h],_=m(g,u);if(typeof _>"u")throw u&&u.type,new Error(qe(14));d[h]=_,f=f||_!==g}return f=f||o.length!==Object.keys(a).length,f?d:a}}function ba(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function B2(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),o=function(){throw new Error(qe(15))},l={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=t.map(function(a){return a(l)});return o=ba.apply(void 0,s)(i.dispatch),xg(xg({},i),{},{dispatch:o})}}}function E1(e){var t=function(r){var i=r.dispatch,o=r.getState;return function(l){return function(s){return typeof s=="function"?s(i,o,e):l(s)}}};return t}var T1=E1();T1.withExtraArgument=E1;const Sg=T1;var O1=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yl=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function s(u){return function(f){return a([u,f])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(f){u=[6,f],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Zr=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},W2=Object.defineProperty,H2=Object.defineProperties,U2=Object.getOwnPropertyDescriptors,wg=Object.getOwnPropertySymbols,V2=Object.prototype.hasOwnProperty,K2=Object.prototype.propertyIsEnumerable,Cg=function(e,t,n){return t in e?W2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},mr=function(e,t){for(var n in t||(t={}))V2.call(t,n)&&Cg(e,n,t[n]);if(wg)for(var r=0,i=wg(t);r<i.length;r++){var n=i[r];K2.call(t,n)&&Cg(e,n,t[n])}return e},$c=function(e,t){return H2(e,U2(t))},Ql=function(e,t,n){return new Promise(function(r,i){var o=function(a){try{s(n.next(a))}catch(u){i(u)}},l=function(a){try{s(n.throw(a))}catch(u){i(u)}},s=function(a){return a.done?r(a.value):Promise.resolve(a.value).then(o,l)};s((n=n.apply(e,t)).next())})},G2=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ba:ba.apply(null,arguments)};function b1(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}function An(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var o=t.apply(void 0,r);if(!o)throw new Error("prepareAction did not return an object");return mr(mr({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function Y2(e){return b1(e)&&"type"in e}var Q2=function(e){O1(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Zr([void 0],n[0].concat(this)))):new(t.bind.apply(t,Zr([void 0],n.concat(this))))},t}(Array),J2=function(e){O1(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Zr([void 0],n[0].concat(this)))):new(t.bind.apply(t,Zr([void 0],n.concat(this))))},t}(Array);function ef(e){return zn(e)?C1(e,function(){}):e}function q2(e){return typeof e=="boolean"}function X2(){return function(t){return Z2(t)}}function Z2(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new Q2;return n&&(q2(n)?r.push(Sg):r.push(Sg.withExtraArgument(n.extraArgument))),r}var eE=!0;function tE(e){var t=X2(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,o=n.middleware,l=o===void 0?t():o,s=n.devTools,a=s===void 0?!0:s,u=n.preloadedState,f=u===void 0?void 0:u,d=n.enhancers,p=d===void 0?void 0:d,h;if(typeof i=="function")h=i;else if(b1(i))h=z2(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=l;typeof m=="function"&&(m=m(t));var g=B2.apply(void 0,m),_=ba;a&&(_=G2(mr({trace:!eE},typeof a=="object"&&a)));var v=new J2(g),y=v;Array.isArray(p)?y=Zr([g],p):typeof p=="function"&&(y=p(v));var x=_.apply(void 0,y);return N1(h,f,x)}function j1(e){var t={},n=[],r,i={addCase:function(o,l){var s=typeof o=="string"?o:o.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[s]=l,i},addMatcher:function(o,l){return n.push({matcher:o,reducer:l}),i},addDefaultCase:function(o){return r=o,i}};return e(i),[t,n,r]}function nE(e){return typeof e=="function"}function rE(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?j1(t):[t,n,r],o=i[0],l=i[1],s=i[2],a;if(nE(e))a=function(){return ef(e())};else{var u=ef(e);a=function(){return u}}function f(d,p){d===void 0&&(d=a());var h=Zr([o[p.type]],l.filter(function(m){var g=m.matcher;return g(p)}).map(function(m){var g=m.reducer;return g}));return h.filter(function(m){return!!m}).length===0&&(h=[s]),h.reduce(function(m,g){if(g)if(Sr(m)){var _=m,v=g(_,p);return v===void 0?m:v}else{if(zn(m))return C1(m,function(y){return g(y,p)});var v=g(m,p);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return m},d)}return f.getInitialState=a,f}function iE(e,t){return e+"/"+t}function ju(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:ef(e.initialState),r=e.reducers||{},i=Object.keys(r),o={},l={},s={};i.forEach(function(f){var d=r[f],p=iE(t,f),h,m;"reducer"in d?(h=d.reducer,m=d.prepare):h=d,o[f]=h,l[p]=h,s[f]=m?An(p,m):An(p)});function a(){var f=typeof e.extraReducers=="function"?j1(e.extraReducers):[e.extraReducers],d=f[0],p=d===void 0?{}:d,h=f[1],m=h===void 0?[]:h,g=f[2],_=g===void 0?void 0:g,v=mr(mr({},p),l);return rE(n,function(y){for(var x in v)y.addCase(x,v[x]);for(var S=0,C=m;S<C.length;S++){var T=C[S];y.addMatcher(T.matcher,T.reducer)}_&&y.addDefaultCase(_)})}var u;return{name:t,reducer:function(f,d){return u||(u=a()),u(f,d)},actions:s,caseReducers:o,getInitialState:function(){return u||(u=a()),u.getInitialState()}}}var oE="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",P1=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=oE[Math.random()*64|0];return t},lE=["name","message","stack","code"],Rc=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Ng=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),sE=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=lE;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=An(t+"/fulfilled",function(u,f,d,p){return{payload:u,meta:$c(mr({},p||{}),{arg:d,requestId:f,requestStatus:"fulfilled"})}}),o=An(t+"/pending",function(u,f,d){return{payload:void 0,meta:$c(mr({},d||{}),{arg:f,requestId:u,requestStatus:"pending"})}}),l=An(t+"/rejected",function(u,f,d,p,h){return{payload:p,error:(r&&r.serializeError||sE)(u||"Rejected"),meta:$c(mr({},h||{}),{arg:d,requestId:f,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function a(u){return function(f,d,p){var h=r!=null&&r.idGenerator?r.idGenerator(u):P1(),m=new s,g;function _(y){g=y,m.abort()}var v=function(){return Ql(this,null,function(){var y,x,S,C,T,N,b;return Yl(this,function(z){switch(z.label){case 0:return z.trys.push([0,4,,5]),C=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,u,{getState:d,extra:p}),uE(C)?[4,C]:[3,2];case 1:C=z.sent(),z.label=2;case 2:if(C===!1||m.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(L,G){return m.signal.addEventListener("abort",function(){return G({name:"AbortError",message:g||"Aborted"})})}),f(o(h,u,(x=r==null?void 0:r.getPendingMeta)==null?void 0:x.call(r,{requestId:h,arg:u},{getState:d,extra:p}))),[4,Promise.race([T,Promise.resolve(n(u,{dispatch:f,getState:d,extra:p,requestId:h,signal:m.signal,abort:_,rejectWithValue:function(L,G){return new Rc(L,G)},fulfillWithValue:function(L,G){return new Ng(L,G)}})).then(function(L){if(L instanceof Rc)throw L;return L instanceof Ng?i(L.payload,h,u,L.meta):i(L,h,u)})])];case 3:return S=z.sent(),[3,5];case 4:return N=z.sent(),S=N instanceof Rc?l(null,h,u,N.payload,N.meta):l(N,h,u),[3,5];case 5:return b=r&&!r.dispatchConditionRejection&&l.match(S)&&S.meta.condition,b||f(S),[2,S]}})})}();return Object.assign(v,{abort:_,requestId:h,arg:u,unwrap:function(){return v.then(aE)}})}}return Object.assign(a,{pending:o,rejected:l,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function aE(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function uE(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Qp=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},tf=function(){},k1=function(e,t){return t===void 0&&(t=tf),e.catch(t),e},$1=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Fi=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},cE="task",R1="listener",L1="completed",Jp="cancelled",dE="task-"+Jp,fE="task-"+L1,A1=R1+"-"+Jp,pE=R1+"-"+L1,Pu=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=cE+" "+Jp+" (reason: "+t+")"}return e}(),zi=function(e){if(e.aborted)throw new Pu(e.reason)};function M1(e,t){var n=tf;return new Promise(function(r,i){var o=function(){return i(new Pu(e.reason))};if(e.aborted){o();return}n=$1(e,o),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=tf})}var hE=function(e,t){return Ql(void 0,null,function(){var n,r;return Yl(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof Pu?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},ja=function(e){return function(t){return k1(M1(e,t).then(function(n){return zi(e),n}))}},I1=function(e){var t=ja(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},mE=Object.assign,Eg={},Jl="listenerMiddleware",gE=function(e,t){var n=function(r){return $1(e,function(){return Fi(r,e.reason)})};return function(r,i){Qp(r,"taskExecutor");var o=new AbortController;n(o);var l=hE(function(){return Ql(void 0,null,function(){var s;return Yl(this,function(a){switch(a.label){case 0:return zi(e),zi(o.signal),[4,r({pause:ja(o.signal),delay:I1(o.signal),signal:o.signal})];case 1:return s=a.sent(),zi(o.signal),[2,s]}})})},function(){return Fi(o,fE)});return i!=null&&i.autoJoin&&t.push(l),{result:ja(e)(l),cancel:function(){Fi(o,dE)}}}},yE=function(e,t){var n=function(r,i){return Ql(void 0,null,function(){var o,l,s,a;return Yl(this,function(u){switch(u.label){case 0:zi(t),o=function(){},l=new Promise(function(f,d){var p=e({predicate:r,effect:function(h,m){m.unsubscribe(),f([h,m.getState(),m.getOriginalState()])}});o=function(){p(),d()}}),s=[l],i!=null&&s.push(new Promise(function(f){return setTimeout(f,i,null)})),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,M1(t,Promise.race(s))];case 2:return a=u.sent(),zi(t),[2,a];case 3:return o(),[7];case 4:return[2]}})})};return function(r,i){return k1(n(r,i))}},D1=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,o=e.effect;if(t)i=An(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Qp(o,"options.listener"),{predicate:i,type:t,effect:o}},vE=function(e){var t=D1(e),n=t.type,r=t.predicate,i=t.effect,o=P1(),l={id:o,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return l},nf=function(e){e.pending.forEach(function(t){Fi(t,A1)})},xE=function(e){return function(){e.forEach(nf),e.clear()}},Tg=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},_E=An(Jl+"/add"),SE=An(Jl+"/removeAll"),wE=An(Jl+"/remove"),CE=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Zr([Jl+"/error"],e))};function NE(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,o=i===void 0?CE:i;Qp(o,"onError");var l=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(m){h.unsubscribe(),m!=null&&m.cancelActive&&nf(h)}},s=function(h){for(var m=0,g=Array.from(n.values());m<g.length;m++){var _=g[m];if(h(_))return _}},a=function(h){var m=s(function(g){return g.effect===h.effect});return m||(m=vE(h)),l(m)},u=function(h){var m=D1(h),g=m.type,_=m.effect,v=m.predicate,y=s(function(x){var S=typeof g=="string"?x.type===g:x.predicate===v;return S&&x.effect===_});return y&&(y.unsubscribe(),h.cancelActive&&nf(y)),!!y},f=function(h,m,g,_){return Ql(t,null,function(){var v,y,x,S;return Yl(this,function(C){switch(C.label){case 0:v=new AbortController,y=yE(a,v.signal),x=[],C.label=1;case 1:return C.trys.push([1,3,4,6]),h.pending.add(v),[4,Promise.resolve(h.effect(m,mE({},g,{getOriginalState:_,condition:function(T,N){return y(T,N).then(Boolean)},take:y,delay:I1(v.signal),pause:ja(v.signal),extra:r,signal:v.signal,fork:gE(v.signal,x),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,N,b){T!==v&&(Fi(T,A1),b.delete(T))})}})))];case 2:return C.sent(),[3,6];case 3:return S=C.sent(),S instanceof Pu||Tg(o,S,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(x)];case 5:return C.sent(),Fi(v,pE),h.pending.delete(v),[7];case 6:return[2]}})})},d=xE(n),p=function(h){return function(m){return function(g){if(!Y2(g))return m(g);if(_E.match(g))return a(g.payload);if(SE.match(g)){d();return}if(wE.match(g))return u(g.payload);var _=h.getState(),v=function(){if(_===Eg)throw new Error(Jl+": getOriginalState can only be called synchronously");return _},y;try{if(y=m(g),n.size>0)for(var x=h.getState(),S=Array.from(n.values()),C=0,T=S;C<T.length;C++){var N=T[C],b=!1;try{b=N.predicate(g,x,_)}catch(z){b=!1,Tg(o,z,{raisedBy:"predicate"})}b&&f(N,g,h,v)}}finally{_=Eg}return y}}};return{middleware:p,startListening:a,stopListening:u,clearListeners:d}}var Og;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);P2();var wt=(e=>(e.LOADING="LOADING",e.CONNECTED="CONNECTED",e.DISCONNECTED="DISCONNECTED",e.READY_TO_CONNECT="READY_TO_CONNECT",e))(wt||{});const F1=ju({name:"connection",initialState:{socketState:"LOADING"},reducers:{updateSocketState:(e,t)=>t.payload}}),{updateSocketState:tl}=F1.actions,EE=F1.reducer,vn=Object.create(null);vn.open="0";vn.close="1";vn.ping="2";vn.pong="3";vn.message="4";vn.upgrade="5";vn.noop="6";const Ks=Object.create(null);Object.keys(vn).forEach(e=>{Ks[vn[e]]=e});const rf={type:"error",data:"parser error"},z1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",B1=typeof ArrayBuffer=="function",W1=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,qp=({type:e,data:t},n,r)=>z1&&t instanceof Blob?n?r(t):bg(t,r):B1&&(t instanceof ArrayBuffer||W1(t))?n?r(t):bg(new Blob([t]),r):r(vn[e]+(t||"")),bg=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function jg(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Lc;function TE(e,t){if(z1&&e.data instanceof Blob)return e.data.arrayBuffer().then(jg).then(t);if(B1&&(e.data instanceof ArrayBuffer||W1(e.data)))return t(jg(e.data));qp(e,!1,n=>{Lc||(Lc=new TextEncoder),t(Lc.encode(n))})}const Pg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Pg.length;e++)Wo[Pg.charCodeAt(e)]=e;const OE=e=>{let t=e.length*.75,n=e.length,r,i=0,o,l,s,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),f=new Uint8Array(u);for(r=0;r<n;r+=4)o=Wo[e.charCodeAt(r)],l=Wo[e.charCodeAt(r+1)],s=Wo[e.charCodeAt(r+2)],a=Wo[e.charCodeAt(r+3)],f[i++]=o<<2|l>>4,f[i++]=(l&15)<<4|s>>2,f[i++]=(s&3)<<6|a&63;return u},bE=typeof ArrayBuffer=="function",Xp=(e,t)=>{if(typeof e!="string")return{type:"message",data:H1(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:jE(e.substring(1),t)}:Ks[n]?e.length>1?{type:Ks[n],data:e.substring(1)}:{type:Ks[n]}:rf},jE=(e,t)=>{if(bE){const n=OE(e);return H1(n,t)}else return{base64:!0,data:e}},H1=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},U1=String.fromCharCode(30),PE=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((o,l)=>{qp(o,!1,s=>{r[l]=s,++i===n&&t(r.join(U1))})})},kE=(e,t)=>{const n=e.split(U1),r=[];for(let i=0;i<n.length;i++){const o=Xp(n[i],t);if(r.push(o),o.type==="error")break}return r};function $E(){return new TransformStream({transform(e,t){TE(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let Ac;function Ns(e){return e.reduce((t,n)=>t+n.length,0)}function Es(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function RE(e,t){Ac||(Ac=new TextDecoder);const n=[];let r=0,i=-1,o=!1;return new TransformStream({transform(l,s){for(n.push(l);;){if(r===0){if(Ns(n)<1)break;const a=Es(n,1);o=(a[0]&128)===128,i=a[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Ns(n)<2)break;const a=Es(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(Ns(n)<8)break;const a=Es(n,8),u=new DataView(a.buffer,a.byteOffset,a.length),f=u.getUint32(0);if(f>Math.pow(2,53-32)-1){s.enqueue(rf);break}i=f*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Ns(n)<i)break;const a=Es(n,i);s.enqueue(Xp(o?a:Ac.decode(a),t)),r=0}if(i===0||i>e){s.enqueue(rf);break}}}})}const V1=4;function be(e){if(e)return LE(e)}function LE(e){for(var t in be.prototype)e[t]=be.prototype[t];return e}be.prototype.on=be.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};be.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};be.prototype.off=be.prototype.removeListener=be.prototype.removeAllListeners=be.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};be.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};be.prototype.emitReserved=be.prototype.emit;be.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};be.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Dt=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function K1(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const AE=Dt.setTimeout,ME=Dt.clearTimeout;function ku(e,t){t.useNativeTimers?(e.setTimeoutFn=AE.bind(Dt),e.clearTimeoutFn=ME.bind(Dt)):(e.setTimeoutFn=Dt.setTimeout.bind(Dt),e.clearTimeoutFn=Dt.clearTimeout.bind(Dt))}const IE=1.33;function DE(e){return typeof e=="string"?FE(e):Math.ceil((e.byteLength||e.size)*IE)}function FE(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function zE(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function BE(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class WE extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Zp extends be{constructor(t){super(),this.writable=!1,ku(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,n,r){return super.emitReserved("error",new WE(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Xp(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=zE(t);return n.length?"?"+n:""}}const G1="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),of=64,HE={};let kg=0,Ts=0,$g;function Rg(e){let t="";do t=G1[e%of]+t,e=Math.floor(e/of);while(e>0);return t}function Y1(){const e=Rg(+new Date);return e!==$g?(kg=0,$g=e):e+"."+Rg(kg++)}for(;Ts<of;Ts++)HE[G1[Ts]]=Ts;let Q1=!1;try{Q1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const UE=Q1;function J1(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||UE))return new XMLHttpRequest}catch{}if(!t)try{return new Dt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function VE(){}const KE=function(){return new J1({xdomain:!1}).responseType!=null}();class GE extends Zp{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}const n=t&&t.forceBase64;this.supportsBinary=KE&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};kE(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,PE(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Y1()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new yn(this.uri(),t)}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class yn extends be{constructor(t,n){super(),ku(this,n),this.opts=n,this.method=n.method||"GET",this.uri=t,this.data=n.data!==void 0?n.data:null,this.create()}create(){var t;const n=K1(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new J1(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=yn.requestsCount++,yn.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=VE,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete yn.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}yn.requestsCount=0;yn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Lg);else if(typeof addEventListener=="function"){const e="onpagehide"in Dt?"pagehide":"unload";addEventListener(e,Lg,!1)}}function Lg(){for(let e in yn.requests)yn.requests.hasOwnProperty(e)&&yn.requests[e].abort()}const eh=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0))(),Os=Dt.WebSocket||Dt.MozWebSocket,Ag=!0,YE="arraybuffer",Mg=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class QE extends Zp{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),n=this.opts.protocols,r=Mg?{}:K1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=Ag&&!Mg?n?new Os(t,n):new Os(t):new Os(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;qp(r,this.supportsBinary,o=>{const l={};try{Ag&&this.ws.send(o)}catch{}i&&eh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Y1()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}check(){return!!Os}}class JE extends Zp{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const n=RE(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=$E();i.readable.pipeTo(t.writable),this.writer=i.writable.getWriter();const o=()=>{r.read().then(({done:s,value:a})=>{s||(this.onPacket(a),o())}).catch(s=>{})};o();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this.writer.write(l).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this.writer.write(r).then(()=>{i&&eh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const qE={websocket:QE,webtransport:JE,polling:GE},XE=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ZE=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function lf(e){const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=XE.exec(e||""),o={},l=14;for(;l--;)o[ZE[l]]=i[l]||"";return n!=-1&&r!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=eT(o,o.path),o.queryKey=tT(o,o.query),o}function eT(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function tT(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,o){i&&(n[i]=o)}),n}let q1=class hi extends be{constructor(t,n={}){super(),this.binaryType=YE,this.writeBuffer=[],t&&typeof t=="object"&&(n=t,t=null),t?(t=lf(t),n.hostname=t.host,n.secure=t.protocol==="https"||t.protocol==="wss",n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=lf(n.host).host),ku(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=BE(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=V1,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new qE[t](r)}open(){let t;if(this.opts.rememberUpgrade&&hi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(t){let n=this.createTransport(t),r=!1;hi.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;hi.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function o(){r||(r=!0,f(),n.close(),n=null)}const l=d=>{const p=new Error("probe error: "+d);p.transport=n.name,o(),this.emitReserved("upgradeError",p)};function s(){l("transport closed")}function a(){l("socket closed")}function u(d){n&&d.name!==n.name&&o()}const f=()=>{n.removeListener("open",i),n.removeListener("error",l),n.removeListener("close",s),this.off("close",a),this.off("upgrading",u)};n.once("open",i),n.once("error",l),n.once("close",s),this.once("close",a),this.once("upgrading",u),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",hi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const n=this.upgrades.length;for(;t<n;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=t.data,this.onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=DE(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(t,n,r){return this.sendPacket("message",t,n,r),this}send(t,n,r){return this.sendPacket("message",t,n,r),this}sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:t,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}onError(t){hi.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const n=[];let r=0;const i=t.length;for(;r<i;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}};q1.protocol=V1;function nT(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=lf(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const rT=typeof ArrayBuffer=="function",iT=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,X1=Object.prototype.toString,oT=typeof Blob=="function"||typeof Blob<"u"&&X1.call(Blob)==="[object BlobConstructor]",lT=typeof File=="function"||typeof File<"u"&&X1.call(File)==="[object FileConstructor]";function th(e){return rT&&(e instanceof ArrayBuffer||iT(e))||oT&&e instanceof Blob||lT&&e instanceof File}function Gs(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(Gs(e[n]))return!0;return!1}if(th(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Gs(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Gs(e[n]))return!0;return!1}function sT(e){const t=[],n=e.data,r=e;return r.data=sf(n,t),r.attachments=t.length,{packet:r,buffers:t}}function sf(e,t){if(!e)return e;if(th(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=sf(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=sf(e[r],t));return n}return e}function aT(e,t){return e.data=af(e.data,t),delete e.attachments,e}function af(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=af(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=af(e[n],t));return e}const uT=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],cT=5;var Q;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Q||(Q={}));class dT{constructor(t){this.replacer=t}encode(t){return(t.type===Q.EVENT||t.type===Q.ACK)&&Gs(t)?this.encodeAsBinary({type:t.type===Q.EVENT?Q.BINARY_EVENT:Q.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===Q.BINARY_EVENT||t.type===Q.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=sT(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function Ig(e){return Object.prototype.toString.call(e)==="[object Object]"}class nh extends be{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===Q.BINARY_EVENT;r||n.type===Q.BINARY_ACK?(n.type=r?Q.EVENT:Q.ACK,this.reconstructor=new fT(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(th(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(Q[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Q.BINARY_EVENT||r.type===Q.BINARY_ACK){const o=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const l=t.substring(o,n);if(l!=Number(l)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(t.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(o,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const o=n+1;for(;++n;){const l=t.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===t.length)break}r.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(nh.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case Q.CONNECT:return Ig(n);case Q.DISCONNECT:return n===void 0;case Q.CONNECT_ERROR:return typeof n=="string"||Ig(n);case Q.EVENT:case Q.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&uT.indexOf(n[0])===-1);case Q.ACK:case Q.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class fT{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=aT(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const pT=Object.freeze(Object.defineProperty({__proto__:null,Decoder:nh,Encoder:dT,get PacketType(){return Q},protocol:cT},Symbol.toStringTag,{value:"Module"}));function Zt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const hT=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Z1 extends be{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Zt(t,"open",this.onopen.bind(this)),Zt(t,"packet",this.onpacket.bind(this)),Zt(t,"error",this.onerror.bind(this)),Zt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){if(hT.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:Q.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const l=this.ids++,s=n.pop();this._registerAckCallback(l,s),r.id=l}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i);this.acks[t]=(...l)=>{this.io.clearTimeoutFn(o),n.apply(this,[null,...l])}}emitWithAck(t,...n){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((i,o)=>{n.push((l,s)=>r?l?o(l):i(s):i(l)),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...o)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Q.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Q.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Q.EVENT:case Q.BINARY_EVENT:this.onevent(t);break;case Q.ACK:case Q.BINARY_ACK:this.onack(t);break;case Q.DISCONNECT:this.ondisconnect();break;case Q.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Q.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(n.apply(this,t.data),delete this.acks[t.id])}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Q.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function so(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}so.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};so.prototype.reset=function(){this.attempts=0};so.prototype.setMin=function(e){this.ms=e};so.prototype.setMax=function(e){this.max=e};so.prototype.setJitter=function(e){this.jitter=e};class uf extends be{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,ku(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new so({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||pT;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new q1(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Zt(n,"open",function(){r.onopen(),t&&t()}),o=s=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",s),t?t(s):this.maybeReconnectOnOpen()},l=Zt(n,"error",o);if(this._timeout!==!1){const s=this._timeout,a=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),n.close()},s);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Zt(t,"ping",this.onping.bind(this)),Zt(t,"data",this.ondata.bind(this)),Zt(t,"error",this.onerror.bind(this)),Zt(t,"close",this.onclose.bind(this)),Zt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){eh(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new Z1(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const $o={};function Ys(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=nT(e,t.path||"/socket.io"),r=n.source,i=n.id,o=n.path,l=$o[i]&&o in $o[i].nsps,s=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let a;return s?a=new uf(r,t):($o[i]||($o[i]=new uf(r,t)),a=$o[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(Ys,{Manager:uf,Socket:Z1,io:Ys,connect:Ys});const ql=w.createContext({}),mT=({children:e})=>{const[t,n]=w.useState(),r=X(),{ghostpadConfig:i,socketState:o}=F(l=>{var s;return{ghostpadConfig:(s=l==null?void 0:l.config)==null?void 0:s.ghostpadConfig,socketState:l==null?void 0:l.connection.socketState}},an);return w.useEffect(()=>{const l=()=>{const s=Ys((i==null?void 0:i.host)||window.location.host,{transports:["polling","websocket"],closeOnBeforeunload:!1,query:{ui:"2"}});s.on("disconnect",()=>{r(tl({socketState:wt.DISCONNECTED}))}),s.on("connect",()=>{r(tl({socketState:wt.CONNECTED}))}),n(s),r(tl({socketState:wt.DISCONNECTED}))};return o===wt.READY_TO_CONNECT&&l(),()=>{o===wt.READY_TO_CONNECT&&(t==null||t.disconnect())}},[t,n,o,i==null?void 0:i.host,r]),c.jsx(ql.Provider,{value:{socket:t,setSocket:n},children:e})};function se(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function Nt(e){return function t(n){return arguments.length===0||se(n)?t:e.apply(this,arguments)}}function He(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return se(n)?t:Nt(function(i){return e(n,i)});default:return se(n)&&se(r)?t:se(n)?Nt(function(i){return e(i,r)}):se(r)?Nt(function(i){return e(n,i)}):e(n,r)}}}function gT(e,t){e=e||[],t=t||[];var n,r=e.length,i=t.length,o=[];for(n=0;n<r;)o[o.length]=e[n],n+=1;for(n=0;n<i;)o[o.length]=t[n],n+=1;return o}function rh(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(n){return t.apply(this,arguments)};case 2:return function(n,r){return t.apply(this,arguments)};case 3:return function(n,r,i){return t.apply(this,arguments)};case 4:return function(n,r,i,o){return t.apply(this,arguments)};case 5:return function(n,r,i,o,l){return t.apply(this,arguments)};case 6:return function(n,r,i,o,l,s){return t.apply(this,arguments)};case 7:return function(n,r,i,o,l,s,a){return t.apply(this,arguments)};case 8:return function(n,r,i,o,l,s,a,u){return t.apply(this,arguments)};case 9:return function(n,r,i,o,l,s,a,u,f){return t.apply(this,arguments)};case 10:return function(n,r,i,o,l,s,a,u,f,d){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function ex(e,t,n){return function(){for(var r=[],i=0,o=e,l=0,s=!1;l<t.length||i<arguments.length;){var a;l<t.length&&(!se(t[l])||i>=arguments.length)?a=t[l]:(a=arguments[i],i+=1),r[l]=a,se(a)?s=!0:o-=1,l+=1}return!s&&o<=0?n.apply(this,r):rh(Math.max(0,o),ex(e,r,n))}}var yT=He(function(t,n){return t===1?Nt(n):rh(t,ex(t,[],n))});const vT=yT;function ih(e){return function t(n,r,i){switch(arguments.length){case 0:return t;case 1:return se(n)?t:He(function(o,l){return e(n,o,l)});case 2:return se(n)&&se(r)?t:se(n)?He(function(o,l){return e(o,r,l)}):se(r)?He(function(o,l){return e(n,o,l)}):Nt(function(o){return e(n,r,o)});default:return se(n)&&se(r)&&se(i)?t:se(n)&&se(r)?He(function(o,l){return e(o,l,i)}):se(n)&&se(i)?He(function(o,l){return e(o,r,l)}):se(r)&&se(i)?He(function(o,l){return e(n,o,l)}):se(n)?Nt(function(o){return e(o,r,i)}):se(r)?Nt(function(o){return e(n,o,i)}):se(i)?Nt(function(o){return e(n,r,o)}):e(n,r,i)}}}const cf=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function xT(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function _T(e,t,n){return function(){if(arguments.length===0)return n();var r=arguments[arguments.length-1];if(!cf(r)){for(var i=0;i<e.length;){if(typeof r[e[i]]=="function")return r[e[i]].apply(r,Array.prototype.slice.call(arguments,0,-1));i+=1}if(xT(r)){var o=t.apply(null,Array.prototype.slice.call(arguments,0,-1));return o(r)}}return n.apply(this,arguments)}}const Dg={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};function Fg(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}function zg(e,t,n){for(var r=0,i=n.length;r<i;){if(e(t,n[r]))return!0;r+=1}return!1}function ST(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function Rn(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function wT(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const Mc=typeof Object.is=="function"?Object.is:wT;var Bg=Object.prototype.toString,CT=function(){return Bg.call(arguments)==="[object Arguments]"?function(t){return Bg.call(t)==="[object Arguments]"}:function(t){return Rn("callee",t)}}();const NT=CT;var ET=!{toString:null}.propertyIsEnumerable("toString"),Wg=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Hg=function(){return arguments.propertyIsEnumerable("length")}(),TT=function(t,n){for(var r=0;r<t.length;){if(t[r]===n)return!0;r+=1}return!1},OT=Nt(typeof Object.keys=="function"&&!Hg?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var n,r,i=[],o=Hg&&NT(t);for(n in t)Rn(n,t)&&(!o||n!=="length")&&(i[i.length]=n);if(ET)for(r=Wg.length-1;r>=0;)n=Wg[r],Rn(n,t)&&!TT(i,n)&&(i[i.length]=n),r-=1;return i});const Zi=OT;var bT=Nt(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});const Ug=bT;function Vg(e,t,n,r){var i=Fg(e),o=Fg(t);function l(s,a){return oh(s,a,n.slice(),r.slice())}return!zg(function(s,a){return!zg(l,a,s)},o,i)}function oh(e,t,n,r){if(Mc(e,t))return!0;var i=Ug(e);if(i!==Ug(t))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(i){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&ST(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&Mc(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!Mc(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var o=n.length-1;o>=0;){if(n[o]===e)return r[o]===t;o-=1}switch(i){case"Map":return e.size!==t.size?!1:Vg(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size!==t.size?!1:Vg(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var l=Zi(e);if(l.length!==Zi(t).length)return!1;var s=n.concat([e]),a=r.concat([t]);for(o=l.length-1;o>=0;){var u=l[o];if(!(Rn(u,t)&&oh(t[u],e[u],s,a)))return!1;o-=1}return!0}var jT=He(function(t,n){return oh(t,n,[],[])});const PT=jT;function kT(e,t,n){var r,i;if(typeof e.indexOf=="function")switch(typeof t){case"number":if(t===0){for(r=1/t;n<e.length;){if(i=e[n],i===0&&1/i===r)return n;n+=1}return-1}else if(t!==t){for(;n<e.length;){if(i=e[n],typeof i=="number"&&i!==i)return n;n+=1}return-1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(t===null)return e.indexOf(t,n)}for(;n<e.length;){if(PT(e[n],t))return n;n+=1}return-1}function $T(e,t){return kT(t,e,0)>=0}function Ic(e,t){for(var n=0,r=t.length,i=Array(r);n<r;)i[n]=e(t[n]),n+=1;return i}function Dc(e){var t=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+t.replace(/"/g,'\\"')+'"'}var Ro=function(t){return(t<10?"0":"")+t},RT=typeof Date.prototype.toISOString=="function"?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+Ro(t.getUTCMonth()+1)+"-"+Ro(t.getUTCDate())+"T"+Ro(t.getUTCHours())+":"+Ro(t.getUTCMinutes())+":"+Ro(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};const LT=RT;function AT(e){return function(){return!e.apply(this,arguments)}}function tx(e,t,n){for(var r=0,i=n.length;r<i;)t=e(t,n[r]),r+=1;return t}function MT(e,t){for(var n=0,r=t.length,i=[];n<r;)e(t[n])&&(i[i.length]=t[n]),n+=1;return i}function df(e){return Object.prototype.toString.call(e)==="[object Object]"}var IT=function(){function e(t,n){this.xf=n,this.f=t}return e.prototype["@@transducer/init"]=Dg.init,e.prototype["@@transducer/result"]=Dg.result,e.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t},e}();function DT(e){return function(t){return new IT(e,t)}}var FT=He(_T(["fantasy-land/filter","filter"],DT,function(e,t){return df(t)?tx(function(n,r){return e(t[r])&&(n[r]=t[r]),n},{},Zi(t)):MT(e,t)}));const zT=FT;var BT=He(function(t,n){return zT(AT(t),n)});const WT=BT;function nx(e,t){var n=function(l){var s=t.concat([e]);return $T(l,s)?"<Circular>":nx(l,s)},r=function(o,l){return Ic(function(s){return Dc(s)+": "+n(o[s])},l.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+Ic(n,e).join(", ")+"))";case"[object Array]":return"["+Ic(n,e).concat(r(e,WT(function(o){return/^\d+$/.test(o)},Zi(e)))).join(", ")+"]";case"[object Boolean]":return typeof e=="object"?"new Boolean("+n(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?n(NaN):Dc(LT(e)))+")";case"[object Map]":return"new Map("+n(Array.from(e))+")";case"[object Null]":return"null";case"[object Number]":return typeof e=="object"?"new Number("+n(e.valueOf())+")":1/e===-1/0?"-0":e.toString(10);case"[object Set]":return"new Set("+n(Array.from(e).sort())+")";case"[object String]":return typeof e=="object"?"new String("+n(e.valueOf())+")":Dc(e);case"[object Undefined]":return"undefined";default:if(typeof e.toString=="function"){var i=e.toString();if(i!=="[object Object]")return i}return"{"+r(e,Zi(e)).join(", ")+"}"}}var HT=Nt(function(t){return nx(t,[])});const Fc=HT;function Kg(e){return Object.prototype.toString.call(e)==="[object String]"}function Gg(e){var t=Object.prototype.toString.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"}var UT=He(function(t,n){if(cf(t)){if(cf(n))return t.concat(n);throw new TypeError(Fc(n)+" is not an array")}if(Kg(t)){if(Kg(n))return t+n;throw new TypeError(Fc(n)+" is not a string")}if(t!=null&&Gg(t["fantasy-land/concat"]))return t["fantasy-land/concat"](n);if(t!=null&&Gg(t.concat))return t.concat(n);throw new TypeError(Fc(t)+' does not have a method named "concat" or "fantasy-land/concat"')});const VT=UT;var KT=Nt(function(t){return vT(t.length,function(n,r){var i=Array.prototype.slice.call(arguments,0);return i[0]=r,i[1]=n,t.apply(this,i)})});const GT=KT;function YT(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,r=arguments.length;n<r;){var i=arguments[n];if(i!=null)for(var o in i)Rn(o,i)&&(t[o]=i[o]);n+=1}return t}const QT=typeof Object.assign=="function"?Object.assign:YT;function Yg(e){return Object.prototype.toString.call(e)==="[object Number]"}var JT=He(function(t,n){return tx(function(r,i){return r[i]=t(n[i],i,n),r},{},Zi(n))});const qT=JT;var XT=ih(function(t,n,r){var i={},o;n=n||{},r=r||{};for(o in n)Rn(o,n)&&(i[o]=Rn(o,r)?t(o,n[o],r[o]):n[o]);for(o in r)Rn(o,r)&&!Rn(o,i)&&(i[o]=r[o]);return i});const ZT=XT;var e4=ih(function e(t,n,r){return ZT(function(i,o,l){return df(o)&&df(l)?e(t,o,l):t(i,o,l)},n,r)});const rx=e4;var t4=He(function(t,n){return rx(function(r,i,o){return o},t,n)});const n4=t4;var r4=ih(function(t,n,r){return rx(function(i,o,l){return t(o,l)},n,r)});const i4=r4;var o4=He(function(t,n){return QT({},t,n)});const Qg=o4;var l4=He(function(t,n){for(var r={},i={},o=0,l=t.length;o<l;)i[t[o]]=1,o+=1;for(var s in n)i.hasOwnProperty(s)||(r[s]=n[s]);return r});const s4=l4;function a4(e){return He(function(t,n){return rh(Math.max(0,t.length-n.length),function(){return t.apply(this,e(n,arguments))})})}var u4=a4(GT(gT));const c4=u4;var d4=He(function(t,n){if(!(Yg(t)&&Yg(n)))throw new TypeError("Both arguments to range must be numbers");for(var r=[],i=t;i<n;)r.push(i),i+=1;return r});const f4=d4,p4={ghostpadConfig:null,koboldConfig:{},timestamps:{},lastNodeCount:0,ownActions:[],pendingInsertion:!1,pendingRetry:!1,reinsertQueue:[],reinsertHistory:null,audioInEnabled:!1,audioOutEnabled:!1,utteranceStart:null,utteranceInProgress:!1,speechSynthesisLanguage:null,speechSynthesisVoice:null,loadState:{prompt:!1,actions:!1}},ix=ju({name:"config",initialState:p4,reducers:{updateGhostpadConfig:(e,t)=>({...e,ghostpadConfig:t.payload}),setAudioInEnabled:(e,t)=>({...e,audioInEnabled:t.payload}),setAudioOutEnabled:(e,t)=>({...e,audioOutEnabled:t.payload}),setUtteranceStart:(e,t)=>({...e,utteranceStart:t.payload}),setSpeechSynthesisLanguage:(e,t)=>e.ghostpadConfig?{...e,ghostpadConfig:{...e.ghostpadConfig,speechSynthesisLanguage:t.payload}}:e,setSpeechSynthesisVoice:(e,t)=>e.ghostpadConfig?{...e,ghostpadConfig:{...e.ghostpadConfig,speechSynthesisVoice:t.payload}}:e,resetStory:e=>({...e,timestamps:{},loadState:{prompt:!1,actions:!1},lastNodeCount:0,ownActions:[]}),setNodeCount:(e,t)=>({...e,lastNodeCount:t.payload}),setUtteranceInProgress:(e,t)=>({...e,utteranceInProgress:t.payload}),updateEditorGoogleFont:(e,t)=>e.ghostpadConfig?{...e,ghostpadConfig:{...e.ghostpadConfig,editorGoogleFont:t.payload}}:e,updateEditorFont:(e,t)=>e.ghostpadConfig?{...e,ghostpadConfig:{...e.ghostpadConfig,editorFont:t.payload}}:e,updateEditorFontSize:(e,t)=>e.ghostpadConfig?{...e,ghostpadConfig:{...e.ghostpadConfig,editorFontSize:t.payload}}:e,updateUseGoogleFont:(e,t)=>e.ghostpadConfig?{...e,ghostpadConfig:{...e.ghostpadConfig,useGoogleFont:t.payload}}:e,updateReinsertHistory:(e,t)=>({...e,reinsertHistory:t.payload}),updatePendingInsertion:(e,t)=>({...e,pendingInsertion:t.payload}),updatePendingRetry:(e,t)=>({...e,pendingRetry:t.payload}),updateReinsertQueue:(e,t)=>({...e,reinsertQueue:t.payload}),updateKoboldConfigTimestamp:(e,t)=>{var n;return{...e,timestamps:{...e.timestamps,story:{...e.timestamps.story||{},actions:{...(n=e.timestamps.story)==null?void 0:n.actions,[t.payload.id]:t.payload.timestamp}}}}},updateOwnActions:(e,t)=>({...e,ownActions:t.payload.filter(n=>Date.now()-n.timestamp<5e3)}),updateKoboldVar:(e,t)=>{var x,S,C,T;const{koboldConfig:n,timestamps:r,lastNodeCount:i,loadState:o,ownActions:l}=e,s=[...l],a=t.payload.classname==="story"&&t.payload.name==="actions",u=t.payload.classname==="story"&&t.payload.name==="prompt_wi_highlighted_text",f=t.payload.classname==="system"&&t.payload.name==="aibusy",[d,p]=t.payload.transmit_time.split("."),h=Date.parse(d)+parseInt(p)/1e3;if(f){if(t.payload.value===!1&&((x=n.system)==null?void 0:x.noai)===!1){if((S=n.story)!=null&&S.actions.length)return{...e,koboldConfig:{...n,system:{...n.system,aibusy:!1}}}}else if(t.payload.value===!0)return{...e,koboldConfig:{...n,system:{...n.system,aibusy:!0}},ownActions:[]}}if((a||u)&&u&&t.payload.old_value!==null)return e;const m={[t.payload.classname]:{[t.payload.name]:t.payload.value}},g={[t.payload.classname]:{[t.payload.name]:h}};if(a&&typeof t.payload.value=="object"&&m.story){const N=t.payload.value;if(!Array.isArray(N)&&typeof N.id=="number"){m.story.actions=[...((C=n.story)==null?void 0:C.actions)||[]];const b=m.story.actions.findIndex(L=>L.id===N.id),z=m.story.actions[b]||{};z.id>=0?m.story.actions[b]={...z,action:N.action}:m.story.actions.push(N),g.story||(g.story={}),g.story.actions={...((T=r.story)==null?void 0:T.actions)||{},[N.id]:h}}}const _=Qg(n[t.payload.classname]||{},m[t.payload.classname]||{}),v=Qg(n,{[t.payload.classname]:_}),y=n4(r,g);return{...e,koboldConfig:v,timestamps:y,loadState:{prompt:u?!0:o.prompt,actions:a?!0:o.actions},lastNodeCount:i??0,ownActions:s}}}}),{updateGhostpadConfig:lh,updateReinsertQueue:$u,updateKoboldVar:Ru,setNodeCount:h4,updateKoboldConfigTimestamp:AP,updateOwnActions:Pa,updatePendingInsertion:sh,updatePendingRetry:ah,updateReinsertHistory:uh,updateEditorFont:MP,updateEditorFontSize:IP,updateEditorGoogleFont:DP,updateUseGoogleFont:FP,resetStory:ox,setAudioInEnabled:lx,setAudioOutEnabled:m4,setUtteranceStart:Jg,setUtteranceInProgress:qg,setSpeechSynthesisLanguage:zP,setSpeechSynthesisVoice:BP}=ix.actions,g4=ix.reducer;var St=(e=>(e.Home="Home",e.ModelSettings="ModelSettings",e.Settings="Settings",e.WorldInfo="WorldInfo",e.Memory="Memory",e))(St||{});const Xg={lastPopup:null,availableUserscripts:[],streamTokens:[],libraryItems:[],localBiases:[],localSubstitutions:[],modalState:{substitutions:{active:!1},biasing:{active:!1},samplerOrder:{active:!1},savePreset:{active:!1},saveStory:{active:!1},overwriteStory:{active:!1},selectOption:{active:!1,data:{actionId:null,options:[]}},confirmDeleteLibraryItem:{active:!1,data:null},confirmDeleteStory:{active:!1,data:null},confirmDeleteEntry:{active:!1,data:null},confirmResetEditor:{active:!1},addUserscript:{active:!1},saveToLibrary:{active:!1,data:null},confirmOverwriteLibraryFile:{active:!1,data:null},loadFromLibrary:{active:!1,data:null}},sidebarState:{active:!1,hiddenEntries:[],hfDefaultResults:[],hfSearchResults:null,isGeneratingWI:!1,localModels:[],localModelInfo:null,savedStories:[],selectedModel:null,selectedModelBackends:[],selectedSubsection:null,selectedSection:St.Home,movingWIEntry:null,loadedFile:null}},sx=ju({name:"ui",initialState:{...Xg},reducers:{toggleEntryVisibility:(e,t)=>{e.sidebarState.hiddenEntries.includes(t.payload)?e.sidebarState.hiddenEntries=e.sidebarState.hiddenEntries.filter(n=>n!==t.payload):e.sidebarState.hiddenEntries.push(t.payload)},updateLocalBiases:(e,t)=>{e.localBiases=t.payload},addLocalBias:(e,t)=>{e.localBiases.push(t.payload)},removeLocalBias:(e,t)=>{e.localBiases.splice(t.payload,1)},updateLocalSubstitutions:(e,t)=>{e.localSubstitutions=t.payload},addLocalSubstitution:(e,t)=>{e.localSubstitutions.push(t.payload)},removeLocalSubstitution:(e,t)=>{e.localSubstitutions.splice(t.payload,1)},updateLibraryItems:(e,t)=>{e.libraryItems=t.payload},updateLastPopup:(e,t)=>{e.lastPopup=t.payload},addStreamTokens:(e,t)=>{Array.isArray(t.payload)&&(e.streamTokens=[...e.streamTokens,...t.payload])},clearStreamTokens:e=>{e.streamTokens=[]},setIsLoadingWi:(e,t)=>{e.sidebarState.isGeneratingWI=t.payload},updateHfDefaultResults:(e,t)=>{e.sidebarState.hfDefaultResults=t.payload},updateHfSearchResults:(e,t)=>{e.sidebarState.hfSearchResults=t.payload},updateLocalModelInfo:(e,t)=>{const{model_backends:n}=t.payload,r=Object.keys(n).map(i=>{const o=n[i],l=o.find(s=>s.uitype==="Valid Display");return{name:i,loadParameterControls:o,totalLayers:(l==null?void 0:l.check.value)||0,layerSliders:(l==null?void 0:l.check.sum)||[]}});e.sidebarState.selectedModelBackends=r},updateLocalModels:(e,t)=>{e.sidebarState.localModels=t.payload.filter(n=>n.isMenu===!1)},updatePopupItems:(e,t)=>{if(e.lastPopup==="load_story")return{...e,sidebarState:{...e.sidebarState,savedStories:t.payload.items.map(n=>{const r=n[4];return{name:r[0],actionCount:r[1],timestamp:r[2],path:n[1],isValid:n[3]}})}};if(e.lastPopup==="load_userscripts")return{...e,availableUserscripts:t.payload.items.map(n=>{const r=n[4];return{name:r[0],description:r[1],path:n[1]}})}},updateSelectedModel:(e,t)=>{e.sidebarState.selectedModel=t.payload,e.sidebarState.selectedModelBackends=[]},updateSelectedSubsection:(e,t)=>{e.sidebarState.selectedSubsection=t.payload},updateSelectedSection:(e,t)=>{e.sidebarState.selectedSection=t.payload,e.sidebarState.selectedSubsection=null},updateMovingWIEntry:(e,t)=>{e.sidebarState.movingWIEntry=t.payload},updateLoadedFile:(e,t)=>{e.sidebarState.loadedFile=t.payload},openSidebar:e=>{e.sidebarState.active=!0},closeSidebar:e=>{e.sidebarState=Xg.sidebarState},openModal:(e,t)=>{const n=e.modalState[t.payload.name];n.active=!0,n.data=t.payload.data},closeModal:(e,t)=>{e.modalState[t.payload].active=!1,e.modalState[t.payload].data=null}}}),{addStreamTokens:ax,clearStreamTokens:Lu,openModal:me,closeModal:te,openSidebar:y4,closeSidebar:ux,setIsLoadingWi:cx,toggleEntryVisibility:v4,updateHfDefaultResults:x4,updateHfSearchResults:Zg,updateLastPopup:_4,updateLibraryItems:S4,updateLoadedFile:kl,updateLocalModels:w4,updateLocalModelInfo:C4,updateMovingWIEntry:dx,updatePopupItems:N4,updateSelectedModel:gr,updateSelectedSubsection:ch,updateSelectedSection:fx,updateLocalBiases:bs,updateLocalSubstitutions:Lo}=sx.actions,E4=sx.reducer,px=ju({name:"worldInfo",initialState:{worldInfoFolders:{},worldInfoEntries:{},storyCommentary:null},reducers:{resetWorldInfo:()=>({worldInfoFolders:{},worldInfoEntries:{},storyCommentary:null}),deleteWorldInfoEntry:(e,t)=>{const n=t.payload,r=s4([n.toString()],e.worldInfoEntries);return{...e,worldInfoEntries:r}},updateStoryCommentary:(e,t)=>({...e,storyCommentary:t.payload}),updateWorldInfoEntry:(e,t)=>{if(Array.isArray(t.payload)){const n=t.payload.reduce((r,i)=>{const{uid:o}=i;return{...r,[o]:i}},{});return{...e,worldInfoEntries:{...e.worldInfoEntries,...n}}}else{const n=t.payload,{uid:r}=n;return{...e,worldInfoEntries:{...e.worldInfoEntries,[r]:n}}}},updateWorldInfoFolders:(e,t)=>{const n=t.payload,r={...e.worldInfoEntries};return Object.entries(n).forEach(([i,o])=>{o.forEach(l=>{typeof r[l]>"u"||(r[l]={...r[l],folder:i})})}),{...e,worldInfoEntries:r,worldInfoFolders:n}}}}),{updateWorldInfoEntry:T4,updateWorldInfoFolders:O4,updateStoryCommentary:b4,deleteWorldInfoEntry:j4,resetWorldInfo:P4}=px.actions,k4=px.reducer,qt=NE(),Ee=tE({reducer:{config:g4,connection:EE,worldInfo:k4,ui:E4},middleware:e=>e().prepend(qt.middleware)}),$4=(e,t)=>{t==null||t.on("stream_tokens",n=>{e(ax(n))}),t==null||t.on("world_info_folder",n=>{e(O4(n))}),t==null||t.on("delete_world_info_entry",n=>{e(j4(n))}),t==null||t.on("world_info_entry",n=>{e(T4(n))}),t==null||t.on("generated_wi",()=>{e(cx(!1))}),t==null||t.on("reset_story",()=>{e(ox()),e(P4())}),t==null||t.on("var_changed",n=>{var u,f,d;const[r,i]=n.transmit_time.split("."),o=n.classname==="story"&&n.name==="actions",l=Date.parse(r)+parseInt(i)/1e3,{timestamps:s}=Ee.getState().config,a=o?(f=(u=s.story)==null?void 0:u.actions)==null?void 0:f[n.value.id]:(d=s[n.classname])==null?void 0:d[n.name];l<(a||0)||e(Ru(n))}),t==null||t.on("show_options",()=>{const{actions:n,model:r}=Ee.getState().config.koboldConfig,i=(n==null?void 0:n["Action Count"])||0;((r==null?void 0:r.numseqs)??0)>1&&e(me({name:"selectOption",data:{actionId:i+1}}))}),t==null||t.on("load_popup",({call_back:n})=>{e(_4(n))}),t==null||t.on("popup_items",n=>{e(N4(n))}),t==null||t.on("open_model_load_menu",({items:n})=>{e(w4(n))}),t==null||t.on("selected_model_info",n=>{e(C4(n))}),t==null||t.on("show_story_review",n=>{e(b4(n))})};var hx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ey=Wt.createContext&&Wt.createContext(hx),yr=globalThis&&globalThis.__assign||function(){return yr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},yr.apply(this,arguments)},R4=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function mx(e){return e&&e.map(function(t,n){return Wt.createElement(t.tag,yr({key:n},t.attr),mx(t.child))})}function K(e){return function(t){return Wt.createElement(L4,yr({attr:yr({},e.attr)},t),mx(e.child))}}function L4(e){var t=function(n){var r=e.attr,i=e.size,o=e.title,l=R4(e,["attr","size","title"]),s=i||n.size||"1em",a;return n.className&&(a=n.className),e.className&&(a=(a?a+" ":"")+e.className),Wt.createElement("svg",yr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,l,{className:a,style:yr(yr({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&Wt.createElement("title",null,o),e.children)};return ey!==void 0?Wt.createElement(ey.Consumer,null,function(n){return t(n)}):t(hx)}function A4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 4h12v2H6zm6 16.414 6.707-6.707-1.414-1.414L13 16.586V8h-2v8.586l-4.293-4.293-1.414 1.414z"}}]})(e)}function dh(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m10 15.586-3.293-3.293-1.414 1.414L10 18.414l9.707-9.707-1.414-1.414z"}}]})(e)}function M4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m18.707 12.707-1.414-1.414L13 15.586V6h-2v9.586l-4.293-4.293-1.414 1.414L12 19.414z"}}]})(e)}function I4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m2.586 15.408 4.299 4.299a.996.996 0 0 0 .707.293h12.001v-2h-6.958l7.222-7.222c.78-.779.78-2.049 0-2.828L14.906 3a2.003 2.003 0 0 0-2.828 0l-4.75 4.749-4.754 4.843a2.007 2.007 0 0 0 .012 2.816zM13.492 4.414l4.95 4.95-2.586 2.586L10.906 7l2.586-2.586zM8.749 9.156l.743-.742 4.95 4.95-4.557 4.557a1.026 1.026 0 0 0-.069.079h-1.81l-4.005-4.007 4.748-4.837z"}}]})(e)}function D4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 17a5.007 5.007 0 0 0 4.898-4H14v2h2v-2h2v3h2v-3h1v-2h-9.102A5.007 5.007 0 0 0 7 7c-2.757 0-5 2.243-5 5s2.243 5 5 5zm0-8c1.654 0 3 1.346 3 3s-1.346 3-3 3-3-1.346-3-3 1.346-3 3-3z"}}]})(e)}function F4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.707 17.293 8.414 13H18v-2H8.414l4.293-4.293-1.414-1.414L4.586 12l6.707 6.707z"}}]})(e)}function z4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"}}]})(e)}function B4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 11h-5V6h3l-4-4-4 4h3v5H6V8l-4 4 4 4v-3h5v5H8l4 4 4-4h-3v-5h5v3l4-4-4-4z"}}]})(e)}function zr(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 4h-3V2h-2v2h-4V2H8v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zM5 20V7h14V6l.002 14H5z"}},{tag:"path",attr:{d:"M7 9h10v2H7zm0 4h5v2H7z"}}]})(e)}function W4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M8 7h3v10H8zm5 0h3v10h-3z"}}]})(e)}function gx(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 21a1 1 0 0 0 .24 0l4-1a1 1 0 0 0 .47-.26L21 7.41a2 2 0 0 0 0-2.82L19.42 3a2 2 0 0 0-2.83 0L4.3 15.29a1.06 1.06 0 0 0-.27.47l-1 4A1 1 0 0 0 3.76 21 1 1 0 0 0 4 21zM18 4.41 19.59 6 18 7.59 16.42 6zM5.91 16.51 15 7.41 16.59 9l-9.1 9.1-2.11.52z"}}]})(e)}function H4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 6v12l10-6z"}}]})(e)}function U4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 11H7.101l.001-.009a4.956 4.956 0 0 1 .752-1.787 5.054 5.054 0 0 1 2.2-1.811c.302-.128.617-.226.938-.291a5.078 5.078 0 0 1 2.018 0 4.978 4.978 0 0 1 2.525 1.361l1.416-1.412a7.036 7.036 0 0 0-2.224-1.501 6.921 6.921 0 0 0-1.315-.408 7.079 7.079 0 0 0-2.819 0 6.94 6.94 0 0 0-1.316.409 7.04 7.04 0 0 0-3.08 2.534 6.978 6.978 0 0 0-1.054 2.505c-.028.135-.043.273-.063.41H2l4 4 4-4zm4 2h2.899l-.001.008a4.976 4.976 0 0 1-2.103 3.138 4.943 4.943 0 0 1-1.787.752 5.073 5.073 0 0 1-2.017 0 4.956 4.956 0 0 1-1.787-.752 5.072 5.072 0 0 1-.74-.61L7.05 16.95a7.032 7.032 0 0 0 2.225 1.5c.424.18.867.317 1.315.408a7.07 7.07 0 0 0 2.818 0 7.031 7.031 0 0 0 4.395-2.945 6.974 6.974 0 0 0 1.053-2.503c.027-.135.043-.273.063-.41H22l-4-4-4 4z"}}]})(e)}function V4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m11.293 17.293 1.414 1.414L19.414 12l-6.707-6.707-1.414 1.414L15.586 11H6v2h9.586z"}}]})(e)}function K4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7.5 14.5c-1.58 0-2.903 1.06-3.337 2.5H2v2h2.163c.434 1.44 1.757 2.5 3.337 2.5s2.903-1.06 3.337-2.5H22v-2H10.837c-.434-1.44-1.757-2.5-3.337-2.5zm0 5c-.827 0-1.5-.673-1.5-1.5s.673-1.5 1.5-1.5S9 17.173 9 18s-.673 1.5-1.5 1.5zm9-11c-1.58 0-2.903 1.06-3.337 2.5H2v2h11.163c.434 1.44 1.757 2.5 3.337 2.5s2.903-1.06 3.337-2.5H22v-2h-2.163c-.434-1.44-1.757-2.5-3.337-2.5zm0 5c-.827 0-1.5-.673-1.5-1.5s.673-1.5 1.5-1.5 1.5.673 1.5 1.5-.673 1.5-1.5 1.5z"}},{tag:"path",attr:{d:"M12.837 5C12.403 3.56 11.08 2.5 9.5 2.5S6.597 3.56 6.163 5H2v2h4.163C6.597 8.44 7.92 9.5 9.5 9.5s2.903-1.06 3.337-2.5h9.288V5h-9.288zM9.5 7.5C8.673 7.5 8 6.827 8 6s.673-1.5 1.5-1.5S11 5.173 11 6s-.673 1.5-1.5 1.5z"}}]})(e)}function Au(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z"}},{tag:"path",attr:{d:"M9 10h2v8H9zm4 0h2v8h-2z"}}]})(e)}function G4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11 8.414V18h2V8.414l4.293 4.293 1.414-1.414L12 4.586l-6.707 6.707 1.414 1.414z"}}]})(e)}function Y4(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zM4 12c0-.899.156-1.762.431-2.569L6 11l2 2v2l2 2 1 1v1.931C7.061 19.436 4 16.072 4 12zm14.33 4.873C17.677 16.347 16.687 16 16 16v-1a2 2 0 0 0-2-2h-4v-3a2 2 0 0 0 2-2V7h1a2 2 0 0 0 2-2v-.411C17.928 5.778 20 8.65 20 12a7.947 7.947 0 0 1-1.67 4.873z"}}]})(e)}function ao(e){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m16.192 6.344-4.243 4.242-4.242-4.242-1.414 1.414L10.535 12l-4.242 4.242 1.414 1.414 4.242-4.242 4.243 4.242 1.414-1.414L13.364 12l4.242-4.242z"}}]})(e)}function Q4(e){return K({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0V3z"}},{tag:"path",attr:{d:"M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5z"}}]})(e)}function yx(e){return K({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}}]})(e)}function J4(e){return K({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}},{tag:"path",attr:{fillRule:"evenodd",d:"M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"}}]})(e)}function Mu(e){return K({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12zm-4.5-6.5H5.707l2.147-2.146a.5.5 0 1 0-.708-.708l-3 3a.5.5 0 0 0 0 .708l3 3a.5.5 0 0 0 .708-.708L5.707 8.5H11.5a.5.5 0 0 0 0-1z"}}]})(e)}function q4(e){return K({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"}},{tag:"path",attr:{fillRule:"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"}}]})(e)}function X4(e){return K({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm4-2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5ZM9 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4A.5.5 0 0 1 9 8Zm1 2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Z"}},{tag:"path",attr:{d:"M2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2ZM1 4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H8.96c.026-.163.04-.33.04-.5C9 10.567 7.21 9 5 9c-2.086 0-3.8 1.398-3.984 3.181A1.006 1.006 0 0 1 1 12V4Z"}}]})(e)}function Z4(e){return K({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9 4a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-2.5 6.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0z"}},{tag:"path",attr:{d:"M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm6 4a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 7a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7z"}}]})(e)}function vx(e){return K({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"}}]})(e)}const eO=e=>{e==null||e.emit("redo",{})},fh=(e,t)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>e(...r),t)}},xx=(e,t,n=null,r)=>{r==null||r.emit("var_change",{ID:e,value:t},()=>{n==null||n()})},_x=(e,t,n)=>xx(e,t,null,n),tO=fh(_x,200),nO=e=>{e==null||e.emit("new_story","")},rO=e=>{e==null||e.emit("back",{})},iO=(e,t,n)=>{n==null||n.emit("Set Selected Text",{text:t,id:e})},oO=e=>{e==null||e.emit("retry",{})},lO=(e,t)=>{t==null||t.emit("submit",{data:e,theme:""})},sO=(e,t)=>{t==null||t.emit("load_userscripts",e)},aO=(e,t)=>{t==null||t.emit("popup_delete",e)},uO=(e,t)=>{t==null||t.emit("save_story",null,n=>{e(n)})},cO=e=>{e==null||e.emit("save_story","overwrite")},dO=(e,t,n)=>{n==null||n.emit("save_new_preset",{preset:e,description:t})},fO=e=>{e==null||e.emit("abort",{})},pO=(e,t,n)=>{n==null||n.emit("Use Option Text",{chunk:e,option:t})},hO=(e,t)=>{t==null||t.emit("load_story",e)},mO=e=>{e==null||e.emit("load_story_list","")},gO=e=>{e==null||e.emit("load_userscripts_list","")},yO=(e,t)=>{t==null||t.emit("unload_userscripts",e)},vO=(e,t)=>{t==null||t.emit("load_model",e)},xO=(e,t)=>{t==null||t.emit("select_model",e)},_O=e=>{e==null||e.emit("create_world_info_folder",{})},SO={uid:-1,title:"New World Info Entry",key:[],keysecondary:[],folder:"root",constant:!1,content:"",manual_text:"",comment:"",token_length:0,selective:!1,wpp:{name:"",type:"",format:"W++",attributes:{}},use_wpp:!1,object_type:null},wO=e=>({...SO,...e,uid:-1}),Sx=(e,t)=>{t==null||t.emit("edit_world_info",e)},CO=(e,t)=>{const n=wO(e);Sx(n,t)},NO=(e,t)=>{t==null||t.emit("delete_wi_folder",e)},EO=(e,t,n)=>{n==null||n.emit("Rename_World_Info_Folder",{old_folder:e,new_folder:t})},TO=(e,t)=>{t==null||t.emit("delete_world_info",e)},OO=(e,t,n)=>{n==null||n.emit("wi_set_folder",{dragged_id:e.toString(),folder:t})},bO=(e,t,n,r)=>{r==null||r.emit("upload_world_info_folder",{folder:e,filename:t,data:n})},jO=(e,t)=>{t==null||t.emit("resubmit_model_info",e)},PO=(e,t)=>{const n={existing:{desc:null,title:e.title,type:e.object_type},field:"desc",genAmount:50,uid:e.uid};t==null||t.emit("generate_wi",n)},kO=(e,t,n)=>{n==null||n.emit("popup_rename_story",{file:e,new_name:t})},$O=(e,t,n)=>{n==null||n.emit("upload_file",{filename:e,data:t,upload_no_save:!1})},RO=(e,t)=>{t==null||t.emit("phrase_bias_update",e)},LO=(e,t)=>{t==null||t.emit("substitution_update",e)},AO={redo:eO,varChange:_x,varChangeWithCallback:xx,debouncedVarChange:tO,newStory:nO,back:rO,setSelectedText:iO,retry:oO,submit:lO,addUserscript:sO,removeUserscript:yO,deleteStory:aO,saveStoryWithCallback:uO,overwriteStory:cO,saveNewPreset:dO,abort:fO,useOptionText:pO,loadStory:hO,loadStoryList:mO,loadUserscriptsList:gO,loadModel:vO,selectModel:xO,createWorldInfoFolder:_O,deleteWorldInfoFolder:NO,createWorldInfoEntry:CO,editWorldInfoEntry:Sx,renameWorldInfoFolder:EO,deleteWorldInfoEntry:TO,moveWorldInfoEntry:OO,uploadFile:$O,uploadWorldInfoFolder:bO,resubmitModelInfo:jO,generateWI:PO,renameStory:kO,phraseBiasUpdate:RO,substitutionUpdate:LO},J=w.createContext(null),MO=({children:e})=>{const{socket:t}=w.useContext(ql),[n,r]=w.useState(null);return w.useEffect(()=>{if(!t)return;r(qT(o=>c4(o,[t]),AO))},[t]),c.jsx(J.Provider,{value:n,children:e})},IO=()=>{var l,s,a,u,f;const e=X(),{koboldConfig:t,audioInEnabled:n,audioOutEnabled:r}=F(d=>({koboldConfig:d.config.koboldConfig,audioInEnabled:d.config.audioInEnabled,audioOutEnabled:d.config.audioOutEnabled}),an),i=w.useContext(J),o=()=>{var m,g;const d=(m=t.actions)==null?void 0:m["Action Count"];if(typeof d!="number")return;const p=(g=t.story)==null?void 0:g.actions[d+1];!!p&&p.action.Options.length>1?e(me({name:"selectOption",data:{actionId:p.id}})):i==null||i.redo()};return c.jsxs("div",{className:"h-16 flex justify-between items-center bg-base-300",children:[c.jsx("div",{className:"left-icons",children:c.jsx("label",{className:"btn drawer-button ml-4",onClick:()=>{e(y4())},children:c.jsx(z4,{size:"1.5em"})})}),c.jsxs("div",{className:"right-icons flex",children:[c.jsx("button",{className:"btn btn-error mr-4",title:"Clear the story and start over",disabled:((l=t.system)==null?void 0:l.aibusy)||!1,onClick:()=>{e(me({name:"confirmResetEditor"}))},children:c.jsx(I4,{size:"1.5em"})}),c.jsx("button",{className:"btn mr-4",disabled:((s=t.system)==null?void 0:s.aibusy)||!1,onClick:()=>{e(ah(!0))},children:c.jsx(U4,{size:"1.5em"})}),c.jsxs("div",{className:"dropdown dropdown-bottom dropdown-end",children:[c.jsx("label",{tabIndex:0,className:"btn mr-4",children:c.jsx(vx,{size:"1.5em"})}),c.jsxs("ul",{tabIndex:0,className:"dropdown-content menu menu-md p-2 shadow rounded-box w-52 bg-base-100",children:[c.jsx("li",{children:c.jsxs("button",{title:"Undo on the Kobold backend. Different from CTRL+Z and may not be compatible with all Ghostpad features.",disabled:((a=t.system)==null?void 0:a.aibusy)||!1,onClick:()=>{i==null||i.back()},className:"flex flex-row justify-start",children:[c.jsx(F4,{size:"1.5em"}),c.jsx("span",{children:"Undo Generation"})]})}),c.jsx("li",{children:c.jsxs("button",{disabled:((u=t.system)==null?void 0:u.aibusy)||!1,onClick:o,className:"flex flex-row justify-start",title:"Redo on the Kobold backend. Different from CTRL+Shift+Z and may not be compatible with all Ghostpad features.",children:[c.jsx(V4,{size:"1.5em"}),c.jsx("span",{children:"Redo Generation"})]})}),c.jsx("li",{children:c.jsxs("button",{title:"Generate from the cursor position",disabled:((f=t.system)==null?void 0:f.aibusy)||!1,onClick:()=>{e(sh(!0))},className:"flex flex-row justify-start",children:[c.jsx(q4,{size:"1.5em"}),c.jsx("span",{children:"Continue"})]})}),c.jsxs("li",{children:[c.jsxs("button",{title:"Toggle microphone speech recognition",onClick:()=>{e(lx(!n))},className:"flex flex-row justify-start",children:[c.jsx(Q4,{size:"1.5em"}),c.jsxs("span",{children:[n?"Disable":"Enable"," Audio In"]})]}),c.jsxs("button",{title:"Toggle audio-only communication",onClick:()=>{e(m4(!r))},className:"flex flex-row justify-start",children:[c.jsx(Z4,{size:"1.5em"}),c.jsxs("span",{children:[r?"Disable":"Enable"," Audio Out"]})]})]})]})]})]})]})};var wx={},Iu={},Cx=w;function DO(e){let t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let Nx=Cx.createContext(null);Iu.LexicalComposerContext=Nx;Iu.createLexicalComposerContext=function(e,t){let n=null;return e!=null&&(n=e[1]),{getTheme:function(){return t??(n!=null?n.getTheme():null)}}};Iu.useLexicalComposerContext=function(){let e=Cx.useContext(Nx);return e==null&&DO(8),e};const FO=Iu;var Wn=FO,E={};let Du={},Ex={},$l={},nl={},ff={},Bi={},ph={},pf={},Rl={},Ll={},ir={},hh={},mh={},Tx={},Ox={},bx={},jx={},Px={},kx={},$x={},ka={},Rx={},Lx={},Ax={},Mx={},Ix={},Dx={},Fx={},zx={},Bx={},gh={},yh={},hf={},Wx={},Hx={},Ux={};function k(e){let t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let Hn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zO=Hn&&"documentMode"in document?document.documentMode:null,Je=Hn&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),wr=Hn&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),$a=Hn&&"InputEvent"in window&&!zO?"getTargetRanges"in new window.InputEvent("input"):!1,vh=Hn&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Fu=Hn&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,BO=Hn&&/^(?=.*Chrome).*/i.test(navigator.userAgent),xh=Hn&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!BO,zu=vh||Fu||xh?" ":"​",WO=wr?" ":zu,HO=/^[^A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]/,UO=/^[^\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]*[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,Ur={bold:1,code:16,highlight:128,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},VO={directionless:1,unmergeable:2},ty={center:2,end:6,justify:4,left:1,right:3,start:5},KO={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},GO={normal:0,segmented:2,token:1},YO={0:"normal",2:"segmented",1:"token"},mf=!1,_h=0;function QO(e){_h=e.timeStamp}function zc(e,t,n){return t.__lexicalLineBreak===e||e[`__lexicalKey_${n._key}`]!==void 0}function JO(e){return e.getEditorState().read(()=>{let t=ue();return t!==null?t.clone():null})}function Vx(e,t,n){mf=!0;let r=100<performance.now()-_h;try{bt(e,()=>{let i=ue()||JO(e);var o=new Map,l=e.getRootElement(),s=e._editorState,a=e._blockCursorElement;let u=!1,f="";for(var d=0;d<t.length;d++){var p=t[d],h=p.type,m=p.target,g=Zl(m,s);if(!(g===null&&m!==l||ae(g))){if(h==="characterData"){if(p=r&&A(g))e:{p=i,h=m;var _=g;if(H(p)){var v=p.anchor.getNode();if(v.is(_)&&p.format!==v.getFormat()){p=!1;break e}}p=h.nodeType===3&&_.isAttached()}p&&(_=wn(e._window),h=p=null,_!==null&&_.anchorNode===m&&(p=_.anchorOffset,h=_.focusOffset),m=m.nodeValue,m!==null&&Th(g,m,p,h,!1))}else if(h==="childList"){for(u=!0,h=p.addedNodes,_=0;_<h.length;_++){v=h[_];var y=Xx(v),x=v.parentNode;x==null||v===a||y!==null||v.nodeName==="BR"&&zc(v,x,e)||(wr&&(y=v.innerText||v.nodeValue)&&(f+=y),x.removeChild(v))}if(p=p.removedNodes,h=p.length,0<h){for(_=0,v=0;v<h;v++)x=p[v],(x.nodeName==="BR"&&zc(x,m,e)||a===x)&&(m.appendChild(x),_++);h!==_&&(m===l&&(g=s._nodeMap.get("root")),o.set(m,g))}}}}if(0<o.size)for(let[S,C]of o)if(O(C))for(o=C.getChildrenKeys(),l=S.firstChild,s=0;s<o.length;s++)a=e.getElementByKey(o[s]),a!==null&&(l==null?(S.appendChild(a),l=a):l!==a&&S.replaceChild(a,l),l=l.nextSibling);else A(C)&&C.markDirty();if(o=n.takeRecords(),0<o.length){for(l=0;l<o.length;l++)for(a=o[l],s=a.addedNodes,a=a.target,d=0;d<s.length;d++)g=s[d],m=g.parentNode,m==null||g.nodeName!=="BR"||zc(g,a,e)||m.removeChild(g);n.takeRecords()}i!==null&&(u&&(i.dirty=!0,xn(i)),wr&&n_(e)&&i.insertRawText(f))})}finally{mf=!1}}function Kx(e){let t=e._observer;if(t!==null){let n=t.takeRecords();Vx(e,n,t)}}function Gx(e){_h===0&&Wu(e).addEventListener("textInput",QO,!0),e._observer=new MutationObserver((t,n)=>{Vx(e,t,n)})}function ny(e,t){let n=e.__mode,r=e.__format;e=e.__style;let i=t.__mode,o=t.__format;return t=t.__style,(n===null||n===i)&&(r===null||r===o)&&(e===null||e===t)}function ry(e,t){let n=e.mergeWithSibling(t),r=xe()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function Yx(e){if(e.__text===""&&e.isSimpleText()&&!e.isUnmergeable())e.remove();else{for(var t;(t=e.getPreviousSibling())!==null&&A(t)&&t.isSimpleText()&&!t.isUnmergeable();)if(t.__text==="")t.remove();else{ny(t,e)&&(e=ry(t,e));break}for(var n;(n=e.getNextSibling())!==null&&A(n)&&n.isSimpleText()&&!n.isUnmergeable();)if(n.__text==="")n.remove();else{ny(e,n)&&ry(e,n);break}}}function Sh(e){return iy(e.anchor),iy(e.focus),e}function iy(e){for(;e.type==="element";){var t=e.getNode(),n=e.offset;if(n===t.getChildrenSize()?(t=t.getChildAtIndex(n-1),n=!0):(t=t.getChildAtIndex(n),n=!1),A(t)){e.set(t.__key,n?t.getTextContentSize():0,"text");break}else if(!O(t))break;e.set(t.__key,n?t.getChildrenSize():0,"element")}}let qO=1,XO=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function wh(e){let t=document.activeElement;if(t===null)return!1;let n=t.nodeName;return ae(Zl(e))&&(n==="INPUT"||n==="TEXTAREA"||t.contentEditable==="true"&&t.__lexicalEditor==null)}function Xl(e,t,n){let r=e.getRootElement();try{return r!==null&&r.contains(t)&&r.contains(n)&&t!==null&&!wh(t)&&Ch(t)===e}catch{return!1}}function Ch(e){for(;e!=null;){let t=e.__lexicalEditor;if(t!=null)return t;e=Bu(e)}return null}function gf(e){return e.isToken()||e.isSegmented()}function Ra(e){for(;e!=null;){if(e.nodeType===3)return e;e=e.firstChild}return null}function Qx(e,t,n){return t=Ur[t],e&t&&(n===null||!(n&t))?e^t:n===null||n&t?e|t:e}function Jx(e){return A(e)||Dl(e)||ae(e)}function qx(e,t){if(t!=null)e.__key=t;else{st(),99<Fl&&k(14),t=xe();var n=Cn(),r=""+qO++;n._nodeMap.set(r,e),O(e)?t._dirtyElements.set(r,!0):t._dirtyLeaves.add(r),t._cloneNotNeeded.add(r),t._dirtyType=1,e.__key=r}}function Vr(e){var t=e.getParent();if(t!==null){let i=e.getWritable();t=t.getWritable();var n=e.getPreviousSibling();if(e=e.getNextSibling(),n===null)if(e!==null){var r=e.getWritable();t.__first=e.__key,r.__prev=null}else t.__first=null;else{if(r=n.getWritable(),e!==null){let o=e.getWritable();o.__prev=r.__key,r.__next=o.__key}else r.__next=null;i.__prev=null}e===null?n!==null?(e=n.getWritable(),t.__last=n.__key,e.__next=null):t.__last=null:(e=e.getWritable(),n!==null?(n=n.getWritable(),n.__next=e.__key,e.__prev=n.__key):e.__prev=null,i.__next=null),t.__size--,i.__parent=null}}function La(e){99<Fl&&k(14);var t=e.getLatest(),n=t.__parent,r=Cn();let i=xe(),o=r._nodeMap;if(r=i._dirtyElements,n!==null)e:for(;n!==null;){if(r.has(n))break e;let l=o.get(n);if(l===void 0)break;r.set(n,!1),n=l.__parent}t=t.__key,i._dirtyType=1,O(e)?r.set(t,!0):i._dirtyLeaves.add(t)}function Ue(e){st();var t=xe();let n=t._compositionKey;e!==n&&(t._compositionKey=e,n!==null&&(t=Ae(n),t!==null&&t.getWritable()),e!==null&&(e=Ae(e),e!==null&&e.getWritable()))}function or(){return ho()?null:xe()._compositionKey}function Ae(e,t){return e=(t||Cn())._nodeMap.get(e),e===void 0?null:e}function Xx(e,t){let n=xe();return e=e[`__lexicalKey_${n._key}`],e!==void 0?Ae(e,t):null}function Zl(e,t){for(;e!=null;){let n=Xx(e,t);if(n!==null)return n;e=Bu(e)}return null}function Zx(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t}function oy(e){return e.read(()=>Sn().getTextContent())}function ZO(e,t){bt(e,()=>{var n=Cn();if(!n.isEmpty())if(t==="root")Sn().markDirty();else{n=n._nodeMap;for(let[,r]of n)r.markDirty()}},e._pendingEditorState===null?{tag:"history-merge"}:void 0)}function Sn(){return Cn()._nodeMap.get("root")}function xn(e){st();let t=Cn();e!==null&&(e.dirty=!0,e._cachedNodes=null),t._selection=e}function bi(e){var t=xe(),n;e:{for(n=e;n!=null;){let r=n[`__lexicalKey_${t._key}`];if(r!==void 0){n=r;break e}n=Bu(n)}n=null}return n===null?(t=t.getRootElement(),e===t?Ae("root"):null):Ae(n)}function e_(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function Nh(e){let t=[];for(;e!==null;)t.push(e),e=e._parentEditor;return t}function t_(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function Eh(e,t,n){if(t=wn(t._window),t!==null){var r=t.anchorNode,{anchorOffset:i,focusOffset:o}=t;if(r!==null&&(t=r.nodeType===3?r.nodeValue:null,r=Zl(r),t!==null&&A(r))){if(t===zu&&n){let l=n.length;t=n,o=i=l}t!==null&&Th(r,t,i,o,e)}}}function Th(e,t,n,r,i){let o=e;if(o.isAttached()&&(i||!o.isDirty())){let u=o.isComposing(),f=t;if((u||i)&&t[t.length-1]===zu&&(f=t.slice(0,-1)),t=o.getTextContent(),i||f!==t)if(f==="")if(Ue(null),vh||Fu||xh)o.remove();else{let d=xe();setTimeout(()=>{d.update(()=>{o.isAttached()&&o.remove()})},20)}else{i=o.getParent(),t=po();var l=o.getTextContentSize(),s=or(),a=o.getKey();o.isToken()||s!==null&&a===s&&!u||H(t)&&(i!==null&&!i.canInsertTextBefore()&&t.anchor.offset===0||t.anchor.key===e.__key&&t.anchor.offset===0&&!o.canInsertTextBefore()||t.focus.key===e.__key&&t.focus.offset===l&&!o.canInsertTextAfter())?o.markDirty():(e=ue(),H(e)&&n!==null&&r!==null&&(e.setTextNodeRange(o,n,o,r),o.isSegmented()&&(n=o.getTextContent(),n=Re(n),o.replace(n),o=n)),o.setTextContent(f))}}}function eb(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;e=e.anchor.offset;let n=t.getParentOrThrow(),r=t.isToken();return e===0?((e=!t.canInsertTextBefore()||!n.canInsertTextBefore()||r)||(t=t.getPreviousSibling(),e=(A(t)||O(t)&&t.isInline())&&!t.canInsertTextAfter()),e):e===t.getTextContentSize()?!t.canInsertTextAfter()||!n.canInsertTextAfter()||r:!1}function rl(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});let n=e.__lexicalClassNameCache,r=n[t];return r!==void 0?r:(e=e[t],typeof e=="string"?(e=e.split(" "),n[t]=e):e)}function Oh(e,t,n,r,i){n.size!==0&&(n=r.__type,r=r.__key,t=t.get(n),t===void 0&&k(33,n),n=t.klass,t=e.get(n),t===void 0&&(t=new Map,e.set(n,t)),e=t.get(r),n=e==="destroyed"&&i==="created",(e===void 0||n)&&t.set(r,n?"updated":i))}function ly(e,t,n){let r=e.getParent(),i=n;return r!==null&&(t&&n===0?(i=e.getIndexWithinParent(),e=r):t||n!==e.getChildrenSize()||(i=e.getIndexWithinParent()+1,e=r)),e.getChildAtIndex(t?i-1:i)}function yf(e,t){var n=e.offset;return e.type==="element"?(e=e.getNode(),ly(e,t,n)):(e=e.getNode(),t&&n===0||!t&&n===e.getTextContentSize()?(n=t?e.getPreviousSibling():e.getNextSibling(),n===null?ly(e.getParentOrThrow(),t,e.getIndexWithinParent()+(t?0:1)):n):null)}function n_(e){return e=(e=Wu(e).event)&&e.inputType,e==="insertFromPaste"||e==="insertFromPasteAsQuotation"}function Aa(e){return!at(e)&&!e.isLastChild()&&!e.isInline()}function Ma(e,t){return e=e._keyToDOMMap.get(t),e===void 0&&k(75,t),e}function Bu(e){return e=e.assignedSlot||e.parentElement,e!==null&&e.nodeType===11?e.host:e}function Ia(e,t){for(e=e.getParent();e!==null;){if(e.is(t))return!0;e=e.getParent()}return!1}function Wu(e){return e=e._window,e===null&&k(78),e}function r_(e){for(e=e.getParentOrThrow();e!==null&&!rn(e);)e=e.getParentOrThrow();return e}function rn(e){return at(e)||O(e)&&e.isShadowRoot()}function i_(e){return e=e.constructor.clone(e),qx(e,null),e}function es(e){var t=xe();let n=e.constructor.getType();return t=t._nodes.get(n),t===void 0&&k(97),t=t.replace,t!==null?(t=t(e),t instanceof e.constructor||k(98),t):e}function Bc(e,t){e=e.getParent(),!at(e)||O(t)||ae(t)||k(99)}function Wc(e){return(ae(e)||O(e)&&!e.canBeEmpty())&&!e.isInline()}function vf(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null,t=e.parentElement,t!==null&&t.removeChild(e)}function wn(e){return Hn?(e||window).getSelection():null}function o_(e,t){let n=e.getChildAtIndex(t);n==null&&(n=e),rn(e)&&k(102);let r=l=>{const s=l.getParentOrThrow(),a=rn(s),u=l!==n||a?i_(l):l;if(a)return l.insertAfter(u),[l,u,u];const[f,d,p]=r(s);return l=l.getNextSiblings(),p.append(u,...l),[f,d,u]},[i,o]=r(n);return[i,o]}function Da(e,t){for(;e!==Sn()&&e!=null;){if(t(e))return e;e=e.getParent()}return null}function tb(e){let t=[],n=[e];for(;0<n.length;){let r=n.pop();r===void 0&&k(112),O(r)&&n.unshift(...r.getChildren()),r!==e&&t.push(r)}return t}function Hu(e){return e.nodeType===1}function l_(e,t,n,r,i,o){for(e=e.getFirstChild();e!==null;){let l=e.__key;e.__parent===t&&(O(e)&&l_(e,l,n,r,i,o),n.has(l)||o.delete(l),i.push(l)),e=e.getNextSibling()}}function nb(e,t,n,r){e=e._nodeMap,t=t._nodeMap;let i=[];for(let[o]of r){let l=t.get(o);l===void 0||l.isAttached()||(O(l)&&l_(l,o,e,t,i,r),e.has(o)||r.delete(o),i.push(o))}for(let o of i)t.delete(o);for(let o of n)r=t.get(o),r===void 0||r.isAttached()||(e.has(o)||n.delete(o),t.delete(o))}let Pe="",lt="",jn="",Cr,et,Al,s_=!1,bh=!1,Uu,Qs=null,xf,_f,ei,Nr,Sf,Ml;function Js(e,t){let n=ei.get(e);if(t!==null){let r=Nf(e);r.parentNode===t&&t.removeChild(r)}Nr.has(e)||et._keyToDOMMap.delete(e),O(n)&&(e=Fa(n,ei),wf(e,0,e.length-1,null)),n!==void 0&&Oh(Ml,Al,Uu,n,"destroyed")}function wf(e,t,n,r){for(;t<=n;++t){let i=e[t];i!==void 0&&Js(i,r)}}function Rr(e,t){e.setProperty("text-align",t)}function a_(e,t){var n=Cr.theme.indent;if(typeof n=="string"){let r=e.classList.contains(n);0<t&&!r?e.classList.add(n):1>t&&r&&e.classList.remove(n)}n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px",e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function u_(e,t){e=e.style,t===0?Rr(e,""):t===1?Rr(e,"left"):t===2?Rr(e,"center"):t===3?Rr(e,"right"):t===4?Rr(e,"justify"):t===5?Rr(e,"start"):t===6&&Rr(e,"end")}function qs(e,t,n){let r=Nr.get(e);r===void 0&&k(60);let i=r.createDOM(Cr,et);var o=et._keyToDOMMap;if(i["__lexicalKey_"+et._key]=e,o.set(e,i),A(r)?i.setAttribute("data-lexical-text","true"):ae(r)&&i.setAttribute("data-lexical-decorator","true"),O(r)){if(e=r.__indent,o=r.__size,e!==0&&a_(i,e),o!==0){--o,e=Fa(r,Nr);var l=lt;lt="",Cf(e,r,0,o,i,null),d_(r,i),lt=l}e=r.__format,e!==0&&u_(i,e),r.isInline()||c_(null,r,i),Aa(r)&&(Pe+=`

`,jn+=`

`)}else o=r.getTextContent(),ae(r)?(l=r.decorate(et,Cr),l!==null&&f_(e,l),i.contentEditable="false"):A(r)&&(r.isDirectionless()||(lt+=o)),Pe+=o,jn+=o;return t!==null&&(n!=null?t.insertBefore(i,n):(n=t.__lexicalLineBreak,n!=null?t.insertBefore(i,n):t.appendChild(i))),Oh(Ml,Al,Uu,r,"created"),i}function Cf(e,t,n,r,i,o){let l=Pe;for(Pe="";n<=r;++n)qs(e[n],i,o);Aa(t)&&(Pe+=`

`),i.__lexicalTextContent=Pe,Pe=l+Pe}function sy(e,t){return e=t.get(e),Dl(e)||ae(e)&&e.isInline()}function c_(e,t,n){e=e!==null&&(e.__size===0||sy(e.__last,ei)),t=t.__size===0||sy(t.__last,Nr),e?t||(t=n.__lexicalLineBreak,t!=null&&n.removeChild(t),n.__lexicalLineBreak=null):t&&(t=document.createElement("br"),n.__lexicalLineBreak=t,n.appendChild(t))}function d_(e,t){var n=t.__lexicalDir;if(t.__lexicalDirTextContent!==lt||n!==Qs){let o=lt==="";if(o)var r=Qs;else r=lt,r=HO.test(r)?"rtl":UO.test(r)?"ltr":null;if(r!==n){let l=t.classList,s=Cr.theme;var i=n!==null?s[n]:void 0;let a=r!==null?s[r]:void 0;i!==void 0&&(typeof i=="string"&&(i=i.split(" "),i=s[n]=i),l.remove(...i)),r===null||o&&r==="ltr"?t.removeAttribute("dir"):(a!==void 0&&(typeof a=="string"&&(n=a.split(" "),a=s[r]=n),a!==void 0&&l.add(...a)),t.dir=r),bh||(e.getWritable().__dir=r)}Qs=r,t.__lexicalDirTextContent=lt,t.__lexicalDir=r}}function Fa(e,t){let n=[];for(e=e.__first;e!==null;){let r=t.get(e);r===void 0&&k(101),n.push(e),e=r.__next}return n}function Ho(e,t){var n=ei.get(e),r=Nr.get(e);n!==void 0&&r!==void 0||k(61);var i=s_||_f.has(e)||xf.has(e);let o=Ma(et,e);if(n===r&&!i)return O(n)?(r=o.__lexicalTextContent,r!==void 0&&(Pe+=r,jn+=r),r=o.__lexicalDirTextContent,r!==void 0&&(lt+=r)):(r=n.getTextContent(),A(n)&&!n.isDirectionless()&&(lt+=r),jn+=r,Pe+=r),o;if(n!==r&&i&&Oh(Ml,Al,Uu,r,"updated"),r.updateDOM(n,o,Cr))return r=qs(e,null,null),t===null&&k(62),t.replaceChild(r,o),Js(e,null),r;if(O(n)&&O(r)){if(e=r.__indent,e!==n.__indent&&a_(o,e),e=r.__format,e!==n.__format&&u_(o,e),i){e=r,i=lt,lt="",t=Pe;var l=n.__size,s=e.__size;if(Pe="",l===1&&s===1){var a=n.__first,u=e.__first;if(a===u)Ho(a,o);else{var f=Nf(a);u=qs(u,null,null),o.replaceChild(u,f),Js(a,null)}}else{u=Fa(n,ei);var d=Fa(e,Nr);if(l===0)s!==0&&Cf(d,e,0,s-1,o,null);else if(s===0)l!==0&&(a=o.__lexicalLineBreak==null,wf(u,0,l-1,a?null:o),a&&(o.textContent=""));else{var p=u;u=d,d=l-1,l=s-1;let m=o.firstChild,g=0;for(s=0;g<=d&&s<=l;){var h=p[g];let _=u[s];if(h===_)m=Hc(Ho(_,o)),g++,s++;else{a===void 0&&(a=new Set(p)),f===void 0&&(f=new Set(u));let v=f.has(h),y=a.has(_);v?(y?(h=Ma(et,_),h===m?m=Hc(Ho(_,o)):(m!=null?o.insertBefore(h,m):o.appendChild(h),Ho(_,o)),g++):qs(_,o,m),s++):(m=Hc(Nf(h)),Js(h,o),g++)}}a=g>d,f=s>l,a&&!f?(a=u[l+1],a=a===void 0?null:et.getElementByKey(a),Cf(u,e,s,l,o,a)):f&&!a&&wf(p,g,d,o)}}Aa(e)&&(Pe+=`

`),o.__lexicalTextContent=Pe,Pe=t+Pe,d_(e,o),lt=i,at(r)||r.isInline()||c_(n,r,o)}Aa(r)&&(Pe+=`

`,jn+=`

`)}else n=r.getTextContent(),ae(r)?(i=r.decorate(et,Cr),i!==null&&f_(e,i)):A(r)&&!r.isDirectionless()&&(lt+=n),Pe+=n,jn+=n;return!bh&&at(r)&&r.__cachedText!==jn&&(r=r.getWritable(),r.__cachedText=jn),o}function f_(e,t){let n=et._pendingDecorators,r=et._decorators;if(n===null){if(r[e]===t)return;n=Zx(et)}n[e]=t}function Hc(e){return e=e.nextSibling,e!==null&&e===et._blockCursorElement&&(e=e.nextSibling),e}function Nf(e){let t=Sf.get(e);return t===void 0&&k(75,e),t}let Tn=Object.freeze({}),Ef=[["keydown",cb],["pointerdown",ib],["compositionstart",ab],["compositionend",ub],["input",sb],["click",rb],["cut",Tn],["copy",Tn],["dragstart",Tn],["dragover",Tn],["dragend",Tn],["paste",Tn],["focus",Tn],["blur",Tn],["drop",Tn]];$a&&Ef.push(["beforeinput",(e,t)=>lb(e,t)]);let Il=0,p_=0,h_=0,mi=null,il=0,Tf=!1,Of=!1,ol=!1,Uo=!1,m_=[0,"",0,"root",0];function g_(e,t,n,r,i){let o=e.anchor,l=e.focus,s=o.getNode();var a=xe();let u=wn(a._window),f=u!==null?u.anchorNode:null,d=o.key;a=a.getElementByKey(d);let p=n.length;return d!==l.key||!A(s)||(!i&&(!$a||h_<r+50)||s.isDirty()&&2>p||e_(n))&&o.offset!==l.offset&&!s.isComposing()||gf(s)||s.isDirty()&&1<p||(i||!$a)&&a!==null&&!s.isComposing()&&f!==Ra(a)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||s.getFormat()!==e.format||s.getStyle()!==e.style||eb(e,s)}function ay(e,t){return e!==null&&e.nodeValue!==null&&e.nodeType===3&&t!==0&&t!==e.nodeValue.length}function uy(e,t,n){let{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:l}=e;Tf&&(Tf=!1,ay(r,i)&&ay(o,l))||bt(t,()=>{if(!n)xn(null);else if(Xl(t,r,o)){var s=ue();if(H(s)){var a=s.anchor,u=a.getNode();if(s.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(s.dirty=!0);var f=Wu(t).event;f=f?f.timeStamp:performance.now();let[d,p,h,m,g]=m_;f<g+200&&a.offset===h&&a.key===m?(s.format=d,s.style=p):a.type==="text"?(s.format=u.getFormat(),s.style=u.getStyle()):a.type==="element"&&(s.format=0,s.style="")}else{a=255,u=!1,f=s.getNodes();let d=f.length;for(let p=0;p<d;p++){let h=f[p];if(A(h)&&(u=!0,a&=h.getFormat(),a===0))break}s.format=u?a:0}}$(t,Du,void 0)}})}function rb(e,t){bt(t,()=>{let n=ue();var r=wn(t._window);let i=po();if(r)if(H(n)){let l=n.anchor;var o=l.getNode();l.type==="element"&&l.offset===0&&n.isCollapsed()&&!at(o)&&Sn().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&i!==null&&n.is(i)?(r.removeAllRanges(),n.dirty=!0):e.detail!==3||n.isCollapsed()||(r=n.focus.getNode(),o!==r&&(O(o)?o.select(0):o.getParentOrThrow().select(0)))}else e.pointerType==="touch"&&(o=r.anchorNode,o!==null&&(o=o.nodeType,o===1||o===3))&&(r=Ph(i,r,t),xn(r));$(t,Ex,e)})}function ib(e,t){let n=e.target;e=e.pointerType,n instanceof Node&&e!=="touch"&&bt(t,()=>{ae(Zl(n))||(Of=!0)})}function y_(e){return e.getTargetRanges?(e=e.getTargetRanges(),e.length===0?null:e[0]):null}function ob(e,t){return e!==t||O(e)||O(t)||!e.isToken()||!t.isToken()}function lb(e,t){let n=e.inputType,r=y_(e);n==="deleteCompositionText"||wr&&n_(t)||n!=="insertCompositionText"&&bt(t,()=>{let i=ue();if(n==="deleteContentBackward"){if(i===null){var o=po();if(!H(o))return;xn(o.clone())}if(H(i)){p_===229&&e.timeStamp<Il+30&&t.isComposing()&&i.anchor.key===i.focus.key?(Ue(null),Il=0,setTimeout(()=>{bt(t,()=>{Ue(null)})},30),H(i)&&(o=i.anchor.getNode(),o.markDirty(),i.format=o.getFormat(),i.style=o.getStyle())):(e.preventDefault(),$(t,$l,!0));return}}if(H(i)){o=e.data,mi!==null&&Eh(!1,t,mi),i.dirty&&mi===null||!i.isCollapsed()||at(i.anchor.getNode())||r===null||i.applyDOMRange(r),mi=null;var l=i.focus,s=i.anchor.getNode();if(l=l.getNode(),n==="insertText"||n==="insertTranspose")o===`
`?(e.preventDefault(),$(t,nl,!1)):o===`

`?(e.preventDefault(),$(t,ff,void 0)):o==null&&e.dataTransfer?(o=e.dataTransfer.getData("text/plain"),e.preventDefault(),i.insertRawText(o)):o!=null&&g_(i,r,o,e.timeStamp,!0)?(e.preventDefault(),$(t,Bi,o)):mi=o,h_=e.timeStamp;else switch(e.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":$(t,Bi,e);break;case"insertFromComposition":Ue(null),$(t,Bi,e);break;case"insertLineBreak":Ue(null),$(t,nl,!1);break;case"insertParagraph":Ue(null),ol&&!Fu?(ol=!1,$(t,nl,!1)):$(t,ff,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":$(t,ph,e);break;case"deleteByComposition":ob(s,l)&&$(t,pf,e);break;case"deleteByDrag":case"deleteByCut":$(t,pf,e);break;case"deleteContent":$(t,$l,!1);break;case"deleteWordBackward":$(t,Rl,!0);break;case"deleteWordForward":$(t,Rl,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":$(t,Ll,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":$(t,Ll,!1);break;case"formatStrikeThrough":$(t,ir,"strikethrough");break;case"formatBold":$(t,ir,"bold");break;case"formatItalic":$(t,ir,"italic");break;case"formatUnderline":$(t,ir,"underline");break;case"historyUndo":$(t,hh,void 0);break;case"historyRedo":$(t,mh,void 0)}}})}function sb(e,t){e.stopPropagation(),bt(t,()=>{var n=ue(),r=e.data,i=y_(e);if(r!=null&&H(n)&&g_(n,i,r,e.timeStamp,!1)){Uo&&(bf(t,r),Uo=!1);var o=n.anchor,l=o.getNode();if(i=wn(t._window),i===null)return;let s=o.offset;(o=$a&&!n.isCollapsed()&&A(l)&&i.anchorNode!==null)&&(l=l.getTextContent().slice(0,s)+r+l.getTextContent().slice(s+n.focus.offset),i=i.anchorNode,o=l===(i.nodeType===3?i.nodeValue:null)),o||$(t,Bi,r),r=r.length,wr&&1<r&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(n.anchor.offset-=r),vh||Fu||xh||!t.isComposing()||(Il=0,Ue(null))}else Eh(!1,t,r!==null?r:void 0),Uo&&(bf(t,r||void 0),Uo=!1);st(),n=xe(),Kx(n)}),mi=null}function ab(e,t){bt(t,()=>{let n=ue();if(H(n)&&!t.isComposing()){let r=n.anchor,i=n.anchor.getNode();Ue(r.key),(e.timeStamp<Il+30||r.type==="element"||!n.isCollapsed()||i.getFormat()!==n.format||i.getStyle()!==n.style)&&$(t,Bi,WO)}})}function bf(e,t){var n=e._compositionKey;if(Ue(null),n!==null&&t!=null){if(t===""){t=Ae(n),e=Ra(e.getElementByKey(n)),e!==null&&e.nodeValue!==null&&A(t)&&Th(t,e.nodeValue,null,null,!0);return}if(t[t.length-1]===`
`&&(n=ue(),H(n))){t=n.focus,n.anchor.set(t.key,t.offset,t.type),$(e,ka,null);return}}Eh(!0,e,t)}function ub(e,t){wr?Uo=!0:bt(t,()=>{bf(t,e.data)})}function cb(e,t){if(Il=e.timeStamp,p_=e.keyCode,!t.isComposing()){var{keyCode:n,shiftKey:r,ctrlKey:i,metaKey:o,altKey:l}=e;if(!$(t,Tx,e)){if(n!==39||i||o||l)if(n!==39||l||r||!i&&!o)if(n!==37||i||o||l)if(n!==37||l||r||!i&&!o)if(n!==38||i||o)if(n!==40||i||o)if(n===13&&r)ol=!0,$(t,ka,e);else if(n===32)$(t,Rx,e);else if(Je&&i&&n===79)e.preventDefault(),ol=!0,$(t,nl,!0);else if(n!==13||r){var s=Je?l||o?!1:n===8||n===72&&i:i||l||o?!1:n===8;s?n===8?$(t,Lx,e):(e.preventDefault(),$(t,$l,!0)):n===27?$(t,Ax,e):(s=Je?r||l||o?!1:n===46||n===68&&i:i||l||o?!1:n===46,s?n===46?$(t,Mx,e):(e.preventDefault(),$(t,$l,!1)):n===8&&(Je?l:i)?(e.preventDefault(),$(t,Rl,!0)):n===46&&(Je?l:i)?(e.preventDefault(),$(t,Rl,!1)):Je&&o&&n===8?(e.preventDefault(),$(t,Ll,!0)):Je&&o&&n===46?(e.preventDefault(),$(t,Ll,!1)):n===66&&!l&&(Je?o:i)?(e.preventDefault(),$(t,ir,"bold")):n===85&&!l&&(Je?o:i)?(e.preventDefault(),$(t,ir,"underline")):n===73&&!l&&(Je?o:i)?(e.preventDefault(),$(t,ir,"italic")):n!==9||l||i||o?n===90&&!r&&(Je?o:i)?(e.preventDefault(),$(t,hh,void 0)):(s=Je?n===90&&o&&r:n===89&&i||n===90&&i&&r,s?(e.preventDefault(),$(t,mh,void 0)):fo(t._editorState._selection)?(s=r?!1:n===67?Je?o:i:!1,s?(e.preventDefault(),$(t,gh,e)):(s=r?!1:n===88?Je?o:i:!1,s?(e.preventDefault(),$(t,yh,e)):n===65&&(Je?o:i)&&(e.preventDefault(),$(t,hf,e)))):!wr&&n===65&&(Je?o:i)&&(e.preventDefault(),$(t,hf,e))):$(t,Ix,e))}else ol=!1,$(t,ka,e);else $(t,$x,e);else $(t,kx,e);else $(t,Px,e);else $(t,jx,e);else $(t,bx,e);else $(t,Ox,e);(i||r||l||o)&&$(t,Ux,e)}}}function v_(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}let Wi=new Map;function x_(e){e=e.target;let t=wn(e==null?null:e.nodeType===9?e.defaultView:e.ownerDocument.defaultView);if(t!==null){var n=Ch(t.anchorNode);if(n!==null){Of&&(Of=!1,bt(n,()=>{var l=po(),s=t.anchorNode;s!==null&&(s=s.nodeType,s===1||s===3)&&(l=Ph(l,t,n),xn(l))})),e=Nh(n),e=e[e.length-1];var r=e._key,i=Wi.get(r),o=i||e;o!==n&&uy(t,o,!1),uy(t,n,!0),n!==e?Wi.set(r,n):i&&Wi.delete(r)}}}function db(e,t){il===0&&e.ownerDocument.addEventListener("selectionchange",x_),il++,e.__lexicalEditor=t;let n=v_(e);for(let r=0;r<Ef.length;r++){let[i,o]=Ef[r],l=typeof o=="function"?s=>{s._lexicalHandled!==!0&&(s._lexicalHandled=!0,t.isEditable()&&o(s,t))}:s=>{if(s._lexicalHandled!==!0&&(s._lexicalHandled=!0,t.isEditable()))switch(i){case"cut":return $(t,yh,s);case"copy":return $(t,gh,s);case"paste":return $(t,ph,s);case"dragstart":return $(t,Fx,s);case"dragover":return $(t,zx,s);case"dragend":return $(t,Bx,s);case"focus":return $(t,Wx,s);case"blur":return $(t,Hx,s);case"drop":return $(t,Dx,s)}};e.addEventListener(i,l),n.push(()=>{e.removeEventListener(i,l)})}}function jf(e,t,n){st();var r=e.__key;let i=e.getParent();if(i!==null){var o=ue();if(H(o)&&O(e)){var{anchor:l,focus:s}=o,a=l.getNode(),u=s.getNode();Ia(a,e)&&l.set(e.__key,0,"element"),Ia(u,e)&&s.set(e.__key,0,"element")}if(a=o,u=!1,H(a)&&t){o=a.anchor;let f=a.focus;o.key===r&&(Ba(o,e,i,e.getPreviousSibling(),e.getNextSibling()),u=!0),f.key===r&&(Ba(f,e,i,e.getPreviousSibling(),e.getNextSibling()),u=!0)}else fo(a)&&t&&e.isSelected()&&e.selectPrevious();H(a)&&t&&!u?(r=e.getIndexWithinParent(),Vr(e),za(a,i,r,-1)):Vr(e),n||rn(i)||i.canBeEmpty()||!i.isEmpty()||jf(i,t),t&&at(i)&&i.isEmpty()&&i.selectEnd()}}class ts{static getType(){k(64,this.name)}static clone(){k(65,this.name)}constructor(t){this.__type=this.constructor.getType(),this.__next=this.__prev=this.__parent=null,qx(this,t)}getType(){return this.__type}isAttached(){for(var t=this.__key;t!==null;){if(t==="root")return!0;if(t=Ae(t),t===null)break;t=t.__parent}return!1}isSelected(t){if(t=t||ue(),t==null)return!1;let n=t.getNodes().some(r=>r.__key===this.__key);return A(this)?n:H(t)&&t.anchor.type==="element"&&t.focus.type==="element"&&t.anchor.key===t.focus.key&&t.anchor.offset===t.focus.offset?!1:n}getKey(){return this.__key}getIndexWithinParent(){var t=this.getParent();if(t===null)return-1;t=t.getFirstChild();let n=0;for(;t!==null;){if(this.is(t))return n;n++,t=t.getNextSibling()}return-1}getParent(){let t=this.getLatest().__parent;return t===null?null:Ae(t)}getParentOrThrow(){let t=this.getParent();return t===null&&k(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){let n=t.getParent();if(rn(n))return t;t=n}return null}getTopLevelElementOrThrow(){let t=this.getTopLevelElement();return t===null&&k(67,this.__key),t}getParents(){let t=[],n=this.getParent();for(;n!==null;)t.push(n),n=n.getParent();return t}getParentKeys(){let t=[],n=this.getParent();for(;n!==null;)t.push(n.__key),n=n.getParent();return t}getPreviousSibling(){let t=this.getLatest().__prev;return t===null?null:Ae(t)}getPreviousSiblings(){let t=[];var n=this.getParent();if(n===null)return t;for(n=n.getFirstChild();n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){let t=this.getLatest().__next;return t===null?null:Ae(t)}getNextSiblings(){let t=[],n=this.getNextSibling();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getCommonAncestor(t){let n=this.getParents();var r=t.getParents();O(this)&&n.unshift(this),O(t)&&r.unshift(t),t=n.length;var i=r.length;if(t===0||i===0||n[t-1]!==r[i-1])return null;for(r=new Set(r),i=0;i<t;i++){let o=n[i];if(r.has(o))return o}return null}is(t){return t==null?!1:this.__key===t.__key}isBefore(t){if(this===t)return!1;if(t.isParentOf(this))return!0;if(this.isParentOf(t))return!1;var n=this.getCommonAncestor(t);let r=this;for(;;){var i=r.getParentOrThrow();if(i===n){i=r.getIndexWithinParent();break}r=i}for(r=t;;){if(t=r.getParentOrThrow(),t===n){n=r.getIndexWithinParent();break}r=t}return i<n}isParentOf(t){let n=this.__key;if(n===t.__key)return!1;for(;t!==null;){if(t.__key===n)return!0;t=t.getParent()}return!1}getNodesBetween(t){let n=this.isBefore(t),r=[],i=new Set;for(var o=this;;){var l=o.__key;if(i.has(l)||(i.add(l),r.push(o)),o===t)break;if(l=O(o)?n?o.getFirstChild():o.getLastChild():null,l!==null)o=l;else if(l=n?o.getNextSibling():o.getPreviousSibling(),l!==null)o=l;else{if(o=o.getParentOrThrow(),i.has(o.__key)||r.push(o),o===t)break;l=o;do l===null&&k(68),o=n?l.getNextSibling():l.getPreviousSibling(),l=l.getParent(),l!==null&&(o!==null||i.has(l.__key)||r.push(l));while(o===null)}}return n||r.reverse(),r}isDirty(){let t=xe()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){let t=Ae(this.__key);return t===null&&k(113),t}getWritable(){st();var t=Cn(),n=xe();t=t._nodeMap;let r=this.__key,i=this.getLatest(),o=i.__parent;n=n._cloneNotNeeded;var l=ue();return l!==null&&(l._cachedNodes=null),n.has(r)?(La(i),i):(l=i.constructor.clone(i),l.__parent=o,l.__next=i.__next,l.__prev=i.__prev,O(i)&&O(l)?(l.__first=i.__first,l.__last=i.__last,l.__size=i.__size,l.__indent=i.__indent,l.__format=i.__format,l.__dir=i.__dir):A(i)&&A(l)&&(l.__format=i.__format,l.__style=i.__style,l.__mode=i.__mode,l.__detail=i.__detail),n.add(r),l.__key=r,La(l),t.set(r,l),l)}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(){k(70)}updateDOM(){k(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){k(72)}static importJSON(){k(18,this.name)}static transform(){return null}remove(t){jf(this,!0,t)}replace(t,n){st();var r=ue();r!==null&&(r=r.clone()),Bc(this,t);let i=this.getLatest(),o=this.__key,l=t.__key,s=t.getWritable();t=this.getParentOrThrow().getWritable();let a=t.__size;Vr(s);let u=i.getPreviousSibling(),f=i.getNextSibling(),d=i.__prev,p=i.__next,h=i.__parent;return jf(i,!1,!0),u===null?t.__first=l:u.getWritable().__next=l,s.__prev=d,f===null?t.__last=l:f.getWritable().__prev=l,s.__next=p,s.__parent=h,t.__size=a,n&&this.getChildren().forEach(m=>{s.append(m)}),H(r)&&(xn(r),n=r.anchor,r=r.focus,n.key===o&&fy(n,s),r.key===o&&fy(r,s)),or()===o&&Ue(l),s}insertAfter(t,n=!0){st(),Bc(this,t);var r=this.getWritable();let i=t.getWritable();var o=i.getParent();let l=ue();var s=!1,a=!1;if(o!==null){var u=t.getIndexWithinParent();Vr(i),H(l)&&(a=o.__key,s=l.anchor,o=l.focus,s=s.type==="element"&&s.key===a&&s.offset===u+1,a=o.type==="element"&&o.key===a&&o.offset===u+1)}o=this.getNextSibling(),u=this.getParentOrThrow().getWritable();let f=i.__key,d=r.__next;return o===null?u.__last=f:o.getWritable().__prev=f,u.__size++,r.__next=f,i.__next=d,i.__prev=r.__key,i.__parent=r.__parent,n&&H(l)&&(n=this.getIndexWithinParent(),za(l,u,n+1),r=u.__key,s&&l.anchor.set(r,n+2,"element"),a&&l.focus.set(r,n+2,"element")),t}insertBefore(t,n=!0){st(),Bc(this,t);var r=this.getWritable();let i=t.getWritable(),o=i.__key;Vr(i);let l=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),a=r.__prev,u=this.getIndexWithinParent();return l===null?s.__first=o:l.getWritable().__next=o,s.__size++,r.__prev=o,i.__prev=a,i.__next=r.__key,i.__parent=r.__parent,r=ue(),n&&H(r)&&(n=this.getParentOrThrow(),za(r,n,u)),t}isParentRequired(){return!1}createParentElementNode(){return ti()}selectPrevious(t,n){st();let r=this.getPreviousSibling(),i=this.getParentOrThrow();return r===null?i.select(0,0):O(r)?r.select():A(r)?r.select(t,n):(t=r.getIndexWithinParent()+1,i.select(t,t))}selectNext(t,n){st();let r=this.getNextSibling(),i=this.getParentOrThrow();return r===null?i.select():O(r)?r.select(0,0):A(r)?r.select(t,n):(t=r.getIndexWithinParent(),i.select(t,t))}markDirty(){this.getWritable()}}class uo extends ts{static getType(){return"linebreak"}static clone(t){return new uo(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:t=>{let n=t.parentElement,r,i;return n!==null&&((r=n.firstChild)===t||r.nextSibling===t&&r.nodeType===3&&(r.textContent||"").match(/^( |\t|\r?\n)+$/)!==null)&&((i=n.lastChild)===t||i.previousSibling===t&&i.nodeType===3&&(i.textContent||"").match(/^( |\t|\r?\n)+$/)!==null)?null:{conversion:fb,priority:0}}}}static importJSON(){return eo()}exportJSON(){return{type:"linebreak",version:1}}}function fb(){return{node:eo()}}function eo(){return es(new uo)}function Dl(e){return e instanceof uo}function Uc(e,t){return t&16?"code":t&128?"mark":t&32?"sub":t&64?"sup":null}function Vc(e,t){return t&1?"strong":t&2?"em":"span"}function Kc(e,t,n,r,i){e=r.classList,r=rl(i,"base"),r!==void 0&&e.add(...r),r=rl(i,"underlineStrikethrough");let o=!1,l=t&8&&t&4;var s=n&8&&n&4;r!==void 0&&(s?(o=!0,l||e.add(...r)):l&&e.remove(...r));for(let a in Ur)s=Ur[a],r=rl(i,a),r!==void 0&&(n&s?!o||a!=="underline"&&a!=="strikethrough"?(!(t&s)||l&&a==="underline"||a==="strikethrough")&&e.add(...r):t&s&&e.remove(...r):t&s&&e.remove(...r))}function Gc(e,t,n){let r=t.firstChild;if(n=n.isComposing(),e+=n?zu:"",r==null)t.textContent=e;else if(t=r.nodeValue,t!==e)if(n||wr){n=t.length;let i=e.length,o=0,l=0;for(;o<n&&o<i&&t[o]===e[o];)o++;for(;l+o<n&&l+o<i&&t[n-l-1]===e[i-l-1];)l++;e=[o,n-o-l,e.slice(o,i-l)];let[s,a,u]=e;a!==0&&r.deleteData(s,a),r.insertData(s,u)}else r.nodeValue=e}function js(e,t){return t=document.createElement(t),t.appendChild(e),t}class oi extends ts{static getType(){return"text"}static clone(t){return new oi(t.__text,t.__key)}constructor(t,n){super(n),this.__text=t,this.__format=0,this.__style="",this.__detail=this.__mode=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){let t=this.getLatest();return YO[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===or()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return(this.getLatest().__detail&1)!==0}isUnmergeable(){return(this.getLatest().__detail&2)!==0}hasFormat(t){return t=Ur[t],(this.getFormat()&t)!==0}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,n){let r=this.getLatest().__format;return Qx(r,t,n)}createDOM(t){var n=this.__format,r=Uc(this,n);let i=Vc(this,n),o=document.createElement(r===null?i:r),l=o;return this.hasFormat("code")&&o.setAttribute("spellcheck","false"),r!==null&&(l=document.createElement(i),o.appendChild(l)),r=l,Gc(this.__text,r,this),t=t.theme.text,t!==void 0&&Kc(i,0,n,r,t),n=this.__style,n!==""&&(o.style.cssText=n),o}updateDOM(t,n,r){let i=this.__text;var o=t.__format,l=this.__format,s=Uc(this,o);let a=Uc(this,l);var u=Vc(this,o);let f=Vc(this,l);return(s===null?u:s)!==(a===null?f:a)?!0:s===a&&u!==f?(o=n.firstChild,o==null&&k(48),t=s=document.createElement(f),Gc(i,t,this),r=r.theme.text,r!==void 0&&Kc(f,0,l,t,r),n.replaceChild(s,o),!1):(u=n,a!==null&&s!==null&&(u=n.firstChild,u==null&&k(49)),Gc(i,u,this),r=r.theme.text,r!==void 0&&o!==l&&Kc(f,o,l,u,r),l=this.__style,t.__style!==l&&(n.style.cssText=l),!1)}static importDOM(){return{"#text":()=>({conversion:mb,priority:0}),b:()=>({conversion:hb,priority:0}),code:()=>({conversion:Qn,priority:0}),em:()=>({conversion:Qn,priority:0}),i:()=>({conversion:Qn,priority:0}),s:()=>({conversion:Qn,priority:0}),span:()=>({conversion:pb,priority:0}),strong:()=>({conversion:Qn,priority:0}),sub:()=>({conversion:Qn,priority:0}),sup:()=>({conversion:Qn,priority:0}),u:()=>({conversion:Qn,priority:0})}}static importJSON(t){let n=Re(t.text);return n.setFormat(t.format),n.setDetail(t.detail),n.setMode(t.mode),n.setStyle(t.style),n}exportDOM(t){return{element:t}=super.exportDOM(t),t!==null&&Hu(t)||k(132),t.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(t=js(t,"b")),this.hasFormat("italic")&&(t=js(t,"i")),this.hasFormat("strikethrough")&&(t=js(t,"s")),this.hasFormat("underline")&&(t=js(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(){}setFormat(t){let n=this.getWritable();return n.__format=typeof t=="string"?Ur[t]:t,n}setDetail(t){let n=this.getWritable();return n.__detail=typeof t=="string"?VO[t]:t,n}setStyle(t){let n=this.getWritable();return n.__style=t,n}toggleFormat(t){return t=Ur[t],this.setFormat(this.getFormat()^t)}toggleDirectionless(){let t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){let t=this.getWritable();return t.__detail^=2,t}setMode(t){if(t=GO[t],this.__mode===t)return this;let n=this.getWritable();return n.__mode=t,n}setTextContent(t){if(this.__text===t)return this;let n=this.getWritable();return n.__text=t,n}select(t,n){st();let r=ue();var i=this.getTextContent();let o=this.__key;if(typeof i=="string"?(i=i.length,t===void 0&&(t=i),n===void 0&&(n=i)):n=t=0,H(r))i=or(),i!==r.anchor.key&&i!==r.focus.key||Ue(o),r.setTextNodeRange(this,t,this,n);else return w_(o,t,o,n,"text","text");return r}spliceText(t,n,r,i){let o=this.getWritable(),l=o.__text,s=r.length,a=t;0>a&&(a=s+a,0>a&&(a=0));let u=ue();return i&&H(u)&&(t+=s,u.setTextNodeRange(o,t,o,t)),n=l.slice(0,a)+r+l.slice(a+n),o.__text=n,o}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){st();var n=this.getLatest(),r=n.getTextContent(),i=n.__key,o=or(),l=new Set(t);t=[];for(var s=r.length,a="",u=0;u<s;u++)a!==""&&l.has(u)&&(t.push(a),a=""),a+=r[u];if(a!==""&&t.push(a),l=t.length,l===0)return[];if(t[0]===r)return[n];var f=t[0];r=n.getParentOrThrow(),u=n.getFormat();let d=n.getStyle(),p=n.__detail;s=!1,n.isSegmented()?(a=Re(f),a.__format=u,a.__style=d,a.__detail=p,s=!0):(a=n.getWritable(),a.__text=f),n=ue(),a=[a],f=f.length;for(let g=1;g<l;g++){var h=t[g],m=h.length;h=Re(h).getWritable(),h.__format=u,h.__style=d,h.__detail=p;let _=h.__key;if(m=f+m,H(n)){let v=n.anchor,y=n.focus;v.key===i&&v.type==="text"&&v.offset>f&&v.offset<=m&&(v.key=_,v.offset-=f,n.dirty=!0),y.key===i&&y.type==="text"&&y.offset>f&&y.offset<=m&&(y.key=_,y.offset-=f,n.dirty=!0)}o===i&&Ue(_),f=m,a.push(h)}return i=this.getPreviousSibling(),o=this.getNextSibling(),i!==null&&La(i),o!==null&&La(o),i=r.getWritable(),o=this.getIndexWithinParent(),s?(i.splice(o,0,a),this.remove()):i.splice(o,1,a),H(n)&&za(n,r,o,l-1),a}mergeWithSibling(t){var n=t===this.getPreviousSibling();n||t===this.getNextSibling()||k(50);var r=this.__key;let i=t.__key,o=this.__text,l=o.length;or()===i&&Ue(r);let s=ue();if(H(s)){let a=s.anchor,u=s.focus;a!==null&&a.key===i&&(xy(a,n,r,t,l),s.dirty=!0),u!==null&&u.key===i&&(xy(u,n,r,t,l),s.dirty=!0)}return r=t.__text,this.setTextContent(n?r+o:o+r),n=this.getWritable(),t.remove(),n}isTextEntity(){return!1}}function pb(e){let t=e.style.fontWeight==="700",n=e.style.textDecoration==="line-through",r=e.style.fontStyle==="italic",i=e.style.textDecoration==="underline",o=e.style.verticalAlign;return{forChild:l=>(A(l)&&(t&&l.toggleFormat("bold"),n&&l.toggleFormat("strikethrough"),r&&l.toggleFormat("italic"),i&&l.toggleFormat("underline"),o==="sub"&&l.toggleFormat("subscript"),o==="super"&&l.toggleFormat("superscript")),l),node:null}}function hb(e){let t=e.style.fontWeight==="normal";return{forChild:n=>(A(n)&&!t&&n.toggleFormat("bold"),n),node:null}}let cy=new WeakMap;function mb(e){e.parentElement===null&&k(129);for(var t=e.textContent||"",n,r=e.parentNode,i=[e];r!==null&&(n=cy.get(r))===void 0&&!(r.nodeName==="PRE"||r.nodeType===1&&r.style.whiteSpace.startsWith("pre"));)i.push(r),r=r.parentNode;for(n=n===void 0?r:n,r=0;r<i.length;r++)cy.set(i[r],n);if(n!==null){for(t=t.split(/(\r?\n|\t)/),e=[],i=t.length,n=0;n<i;n++)r=t[n],r===`
`||r===`\r
`?e.push(eo()):r==="	"?e.push(Vu()):r!==""&&e.push(Re(r));return{node:e}}if(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," "),t==="")return{node:null};if(t[0]===" "){for(i=e,n=!0;i!==null&&(i=dy(i,!1))!==null;)if(r=i.textContent||"",0<r.length){/[ \t\n]$/.test(r)&&(t=t.slice(1)),n=!1;break}n&&(t=t.slice(1))}if(t[t.length-1]===" "){for(i=!0;e!==null&&(e=dy(e,!0))!==null;)if(0<(e.textContent||"").replace(/^( |\t|\r?\n)+/,"").length){i=!1;break}i&&(t=t.slice(0,t.length-1))}return t===""?{node:null}:{node:Re(t)}}let gb=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/,"i");function dy(e,t){for(;;){for(var n=void 0;(n=t?e.nextSibling:e.previousSibling)===null;)if(e=e.parentElement,e===null)return null;if(e=n,e.nodeType===1&&(n=e.style.display,n===""&&e.nodeName.match(gb)===null||n!==""&&!n.startsWith("inline")))return null;for(;(n=t?e.firstChild:e.lastChild)!==null;)e=n;if(e.nodeType===3)return e;if(e.nodeName==="BR")return null}}let yb={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Qn(e){let t=yb[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:n=>(A(n)&&!n.hasFormat(t)&&n.toggleFormat(t),n),node:null}}function Re(e=""){return es(new oi(e))}function A(e){return e instanceof oi}class co extends oi{static getType(){return"tab"}static clone(t){let n=new co(t.__key);return n.__text=t.__text,n.__format=t.__format,n.__style=t.__style,n}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}static importJSON(t){let n=Vu();return n.setFormat(t.format),n.setStyle(t.style),n}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(){k(126)}setDetail(){k(127)}setMode(){k(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function Vu(){return es(new co)}class _n{constructor(t,n,r){this._selection=null,this.key=t,this.offset=n,this.type=r}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){let n=this.getNode(),r=t.getNode(),i=this.offset;if(t=t.offset,O(n)){var o=n.getDescendantByIndex(i);n=o??n}return O(r)&&(o=r.getDescendantByIndex(t),r=o??r),n===r?i<t:n.isBefore(r)}getNode(){let t=Ae(this.key);return t===null&&k(20),t}set(t,n,r){let i=this._selection,o=this.key;this.key=t,this.offset=n,this.type=r,ho()||(or()===o&&Ue(t),i!==null&&(i._cachedNodes=null,i.dirty=!0))}}function Yc(e,t){let n=t.__key,r=e.offset,i="element";if(A(t))i="text",t=t.getTextContentSize(),r>t&&(r=t);else if(!O(t)){var o=t.getNextSibling();A(o)?(n=o.__key,r=0,i="text"):(o=t.getParent())&&(n=o.__key,r=t.getIndexWithinParent()+1)}e.set(n,r,i)}function fy(e,t){if(O(t)){let n=t.getLastDescendant();O(n)||A(n)?Yc(e,n):Yc(e,t)}else Yc(e,t)}function py(e,t,n,r){let i=e.getNode(),o=i.getChildAtIndex(e.offset),l=Re(),s=at(i)?ti().append(l):l;l.setFormat(n),l.setStyle(r),o===null?i.append(s):(o.insertBefore(s),t.type==="element"&&t.key===e.key&&t.offset!==e.offset&&t.set(t.key,t.offset+1,"element")),e.is(t)&&t.set(l.__key,0,"text"),e.set(l.__key,0,"text")}function Xn(e,t,n,r){e.key=t,e.offset=n,e.type=r}class Ku{constructor(t){this.dirty=!1,this._nodes=t,this._cachedNodes=null}is(t){if(!fo(t))return!1;let n=this._nodes,r=t._nodes;return n.size===r.size&&Array.from(n).every(i=>r.has(i))}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new Ku(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(t,n){let r=this.getNodes(),i=r.length;var o=r[i-1];if(A(o))o=o.select();else{let l=o.getIndexWithinParent()+1;o=o.getParentOrThrow().select(l,l)}for(o.insertNodes(t,n),t=0;t<i;t++)r[t].remove();return!0}getNodes(){var t=this._cachedNodes;if(t!==null)return t;var n=this._nodes;t=[];for(let r of n)n=Ae(r),n!==null&&t.push(n);return ho()||(this._cachedNodes=t),t}getTextContent(){let t=this.getNodes(),n="";for(let r=0;r<t.length;r++)n+=t[r].getTextContent();return n}}function H(e){return e instanceof li}function Pf(e){let[t,,n]=N_(e);e=n.getChildren();let r=e.length;var i=e[0].getChildren().length;let o=Array(r);for(var l=0;l<r;l++)o[l]=Array(i);for(i=0;i<r;i++){l=e[i].getChildren();let s=0;for(let a=0;a<l.length;a++){for(;o[i][s];)s++;let u=l[a],f=u.__rowSpan||1,d=u.__colSpan||1;for(let p=0;p<f;p++)for(let h=0;h<d;h++)o[i+p][s+h]=u;if(t===u)return{colSpan:d,columnIndex:s,rowIndex:i,rowSpan:f};s+=d}}return null}class Gu{constructor(t,n,r){this.gridKey=t,this.anchor=n,this.focus=r,this.dirty=!1,this._cachedNodes=null,n._selection=this,r._selection=this}is(t){return jh(t)?this.gridKey===t.gridKey&&this.anchor.is(t.anchor)&&this.focus.is(t.focus):!1}set(t,n,r){this.dirty=!0,this.gridKey=t,this.anchor.key=n,this.focus.key=r,this._cachedNodes=null}clone(){return new Gu(this.gridKey,this.anchor,this.focus)}isCollapsed(){return!1}isBackward(){return this.focus.isBefore(this.anchor)}getCharacterOffsets(){return Xs(this)}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(t,n){let r=this.focus.getNode();return Sh(r.select(0,r.getChildrenSize())).insertNodes(t,n)}getShape(){var t=Ae(this.anchor.key);if(Ft(t)||k(103),t=Pf(t),t===null)throw Error("getCellRect: expected to find AnchorNode");var n=Ae(this.focus.key);Ft(n)||k(104);let r=Pf(n);if(r===null)throw Error("getCellRect: expected to find focusCellNode");n=Math.min(t.columnIndex,r.columnIndex);let i=Math.max(t.columnIndex,r.columnIndex),o=Math.min(t.rowIndex,r.rowIndex);return t=Math.max(t.rowIndex,r.rowIndex),{fromX:Math.min(n,i),fromY:Math.min(o,t),toX:Math.max(n,i),toY:Math.max(o,t)}}getNodes(){function t(_){let{cell:v,startColumn:y,startRow:x}=_;a=Math.min(a,y),u=Math.min(u,x),f=Math.max(f,y+v.__colSpan-1),d=Math.max(d,x+v.__rowSpan-1)}var n=this._cachedNodes;if(n!==null)return n;var r=this.anchor.getNode();n=this.focus.getNode(),r=Da(r,Ft);var i=Da(n,Ft);Ft(r)||k(103),Ft(i)||k(104),n=r.getParent(),zl(n)||k(105),n=n.getParent(),Lh(n)||k(106);let[o,l,s]=C_(n,r,i),a=Math.min(l.startColumn,s.startColumn),u=Math.min(l.startRow,s.startRow),f=Math.max(l.startColumn+l.cell.__colSpan-1,s.startColumn+s.cell.__colSpan-1),d=Math.max(l.startRow+l.cell.__rowSpan-1,s.startRow+s.cell.__rowSpan-1);r=a,i=u;for(var p=a,h=u;a<r||u<i||f>p||d>h;){if(a<r){var m=h-i;--r;for(var g=0;g<=m;g++)t(o[i+g][r])}if(u<i)for(m=p-r,--i,g=0;g<=m;g++)t(o[i][r+g]);if(f>p)for(m=h-i,p+=1,g=0;g<=m;g++)t(o[i+g][p]);if(d>h)for(m=p-r,h+=1,g=0;g<=m;g++)t(o[h][r+g])}for(n=[n],r=null,i=u;i<=d;i++)for(p=a;p<=f;p++)({cell:h}=o[i][p]),m=h.getParent(),zl(m)||k(107),m!==r&&n.push(m),n.push(h,...tb(h)),r=m;return ho()||(this._cachedNodes=n),n}getTextContent(){let t=this.getNodes(),n="";for(let r=0;r<t.length;r++)n+=t[r].getTextContent();return n}}function jh(e){return e instanceof Gu}class li{constructor(t,n,r,i){this.anchor=t,this.focus=n,this.dirty=!1,this.format=r,this.style=i,this._cachedNodes=null,t._selection=this,n._selection=this}is(t){return H(t)?this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style:!1}isBackward(){return this.focus.isBefore(this.anchor)}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){var t=this._cachedNodes;if(t!==null)return t;t=this.anchor;var n=this.focus,r=t.isBefore(n),i=r?t:n;r=r?n:t,t=i.getNode(),n=r.getNode();let o=i.offset;return i=r.offset,O(t)&&(r=t.getDescendantByIndex(o),t=r??t),O(n)&&(r=n.getDescendantByIndex(i),r!==null&&r!==t&&n.getChildAtIndex(i)===r&&(r=r.getPreviousSibling()),n=r??n),t=t.is(n)?O(t)&&0<t.getChildrenSize()?[]:[t]:t.getNodesBetween(n),ho()||(this._cachedNodes=t),t}setTextNodeRange(t,n,r,i){Xn(this.anchor,t.__key,n,"text"),Xn(this.focus,r.__key,i,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){let t=this.getNodes();if(t.length===0)return"";let n=t[0],r=t[t.length-1],i=this.anchor,o=this.focus,l=i.isBefore(o),[s,a]=Xs(this),u="",f=!0;for(let d=0;d<t.length;d++){let p=t[d];if(O(p)&&!p.isInline())f||(u+=`
`),f=!p.isEmpty();else if(f=!1,A(p)){let h=p.getTextContent();p===n?p===r?(i.type!=="element"||o.type!=="element"||o.offset===i.offset)&&(h=s<a?h.slice(s,a):h.slice(a,s)):h=l?h.slice(s):h.slice(a):p===r&&(h=l?h.slice(0,a):h.slice(0,s)),u+=h}else!ae(p)&&!Dl(p)||p===r&&this.isCollapsed()||(u+=p.getTextContent())}return u}applyDOMRange(t){let n=xe(),r=n.getEditorState()._selection;if(t=S_(t.startContainer,t.startOffset,t.endContainer,t.endOffset,n,r),t!==null){var[i,o]=t;Xn(this.anchor,i.key,i.offset,i.type),Xn(this.focus,o.key,o.offset,o.type),this._cachedNodes=null}}clone(){let t=this.anchor,n=this.focus;return new li(new _n(t.key,t.offset,t.type),new _n(n.key,n.offset,n.type),this.format,this.style)}toggleFormat(t){this.format=Qx(this.format,t,null),this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){return(this.format&Ur[t])!==0}insertRawText(t){t=t.split(/(\r?\n|\t)/);let n=[],r=t.length;for(let i=0;i<r;i++){let o=t[i];o===`
`||o===`\r
`?n.push(eo()):o==="	"?n.push(Vu()):n.push(Re(o))}this.insertNodes(n)}insertText(t){var n=this.anchor,r=this.focus,i=this.isCollapsed()||n.isBefore(r),o=this.format,l=this.style;i&&n.type==="element"?py(n,r,o,l):i||r.type!=="element"||py(r,n,o,l);var s=this.getNodes(),a=s.length,u=i?r:n;r=(i?n:r).offset;var f=u.offset;n=s[0],A(n)||k(26),i=n.getTextContent().length;var d=n.getParentOrThrow(),p=s[a-1];if(this.isCollapsed()&&r===i&&(n.isSegmented()||n.isToken()||!n.canInsertTextAfter()||!d.canInsertTextAfter()&&n.getNextSibling()===null)){var h=n.getNextSibling();if(A(h)&&h.canInsertTextBefore()&&!gf(h)||(h=Re(),h.setFormat(o),d.canInsertTextAfter()?n.insertAfter(h):d.insertAfter(h)),h.select(0,0),n=h,t!==""){this.insertText(t);return}}else if(this.isCollapsed()&&r===0&&(n.isSegmented()||n.isToken()||!n.canInsertTextBefore()||!d.canInsertTextBefore()&&n.getPreviousSibling()===null)){if(h=n.getPreviousSibling(),(!A(h)||gf(h))&&(h=Re(),h.setFormat(o),d.canInsertTextBefore()?n.insertBefore(h):d.insertBefore(h)),h.select(),n=h,t!==""){this.insertText(t);return}}else if(n.isSegmented()&&r!==i)d=Re(n.getTextContent()),d.setFormat(o),n.replace(d),n=d;else if(!(this.isCollapsed()||t===""||(h=p.getParent(),d.canInsertTextBefore()&&d.canInsertTextAfter()&&(!O(h)||h.canInsertTextBefore()&&h.canInsertTextAfter())))){this.insertText(""),__(this.anchor,this.focus,null),this.insertText(t);return}if(a===1)if(n.isToken())t=Re(t),t.select(),n.replace(t);else{if(s=n.getFormat(),a=n.getStyle(),r===f&&(s!==o||a!==l))if(n.getTextContent()==="")n.setFormat(o),n.setStyle(l);else{s=Re(t),s.setFormat(o),s.setStyle(l),s.select(),r===0?n.insertBefore(s,!1):([a]=n.splitText(r),a.insertAfter(s,!1)),s.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);return}n=n.spliceText(r,f-r,t,!0),n.getTextContent()===""?n.remove():this.anchor.type==="text"&&(n.isComposing()?this.anchor.offset-=t.length:(this.format=s,this.style=a))}else{if(o=new Set([...n.getParentKeys(),...p.getParentKeys()]),h=O(n)?n:n.getParentOrThrow(),l=O(p)?p:p.getParentOrThrow(),d=p,!h.is(l)&&l.isInline())do d=l,l=l.getParentOrThrow();while(l.isInline());if(u.type==="text"&&(f!==0||p.getTextContent()==="")||u.type==="element"&&p.getIndexWithinParent()<f)if(A(p)&&!p.isToken()&&f!==p.getTextContentSize()){if(p.isSegmented()){var m=Re(p.getTextContent());p.replace(m),p=m}at(u.getNode())||(p=p.spliceText(0,f,"")),o.add(p.__key)}else u=p.getParentOrThrow(),u.canBeEmpty()||u.getChildrenSize()!==1?p.remove():u.remove();else o.add(p.__key);for(u=l.getChildren(),f=new Set(s),p=h.is(l),h=h.isInline()&&n.getNextSibling()===null?h:n,m=u.length-1;0<=m;m--){let g=u[m];if(g.is(n)||O(g)&&g.isParentOf(n))break;g.isAttached()&&(!f.has(g)||g.is(d)?p||h.insertAfter(g,!1):g.remove())}if(!p)for(u=l,f=null;u!==null;)l=u.getChildren(),p=l.length,(p===0||l[p-1].is(f))&&(o.delete(u.__key),f=u),u=u.getParent();for(n.isToken()?r===i?n.select():(t=Re(t),t.select(),n.replace(t)):(n=n.spliceText(r,i-r,t,!0),n.getTextContent()===""?n.remove():n.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length)),t=1;t<a;t++)n=s[t],o.has(n.__key)||n.remove()}}removeText(){this.insertText("")}formatText(t){if(this.isCollapsed())this.toggleFormat(t),Ue(null);else{var n=this.getNodes(),r=[];for(var i of n)A(i)&&r.push(i);var o=r.length;if(o===0)this.toggleFormat(t),Ue(null);else{i=this.anchor;var l=this.focus,s=this.isBackward();n=s?l:i,i=s?i:l;var a=0,u=r[0];if(l=n.type==="element"?0:n.offset,n.type==="text"&&l===u.getTextContentSize()&&(a=1,u=r[1],l=0),u!=null){s=u.getFormatFlags(t,null);var f=o-1,d=r[f];if(o=i.type==="text"?i.offset:d.getTextContentSize(),u.is(d))l!==o&&(l===0&&o===u.getTextContentSize()?u.setFormat(s):(t=u.splitText(l,o),t=l===0?t[0]:t[1],t.setFormat(s),n.type==="text"&&n.set(t.__key,0,"text"),i.type==="text"&&i.set(t.__key,o-l,"text")),this.format=s);else{l!==0&&([,u]=u.splitText(l),l=0),u.setFormat(s);var p=d.getFormatFlags(t,s);for(0<o&&(o!==d.getTextContentSize()&&([d]=d.splitText(o)),d.setFormat(p)),a+=1;a<f;a++){let h=r[a];if(!h.isToken()){let m=h.getFormatFlags(t,p);h.setFormat(m)}}n.type==="text"&&n.set(u.__key,l,"text"),i.type==="text"&&i.set(d.__key,o,"text"),this.format=s|p}}}}}insertNodes(t,n){if(!this.isCollapsed()){var r=this.isBackward()?this.anchor:this.focus,i=r.getNode().getNextSibling();if(i=i?i.getKey():null,r=(r=r.getNode().getPreviousSibling())?r.getKey():null,this.removeText(),this.isCollapsed()&&this.focus.type==="element"){if(this.focus.key===i&&this.focus.offset===0){var o=Re();this.focus.getNode().insertBefore(o)}else this.focus.key===r&&this.focus.offset===this.focus.getNode().getChildrenSize()&&(o=Re(),this.focus.getNode().insertAfter(o));o&&(this.focus.set(o.__key,0,"text"),this.anchor.set(o.__key,0,"text"))}}o=this.anchor,r=o.offset;var l=o.getNode();i=l,o.type==="element"&&(o=o.getNode(),i=o.getChildAtIndex(r-1),i=i===null?o:i),o=[];var s=l.getNextSiblings(),a=rn(l)?null:l.getTopLevelElementOrThrow();if(A(l))if(i=l.getTextContent().length,r===0&&i!==0)i=l.getPreviousSibling(),i=i!==null?i:l.getParentOrThrow(),o.push(l);else if(r===i)i=l;else{if(l.isToken())return!1;[i,l]=l.splitText(r),o.push(l)}l=i,o.push(...s),s=t[0];var u=!1,f=null;for(let m=0;m<t.length;m++){var d=t[m];if(rn(i)||ae(i)||!O(d)||d.isInline())u&&!O(d)&&!ae(d)&&rn(i.getParent())&&k(28);else{if(d.is(s)){if(O(i)&&i.isEmpty()&&i.canReplaceWith(d)){i.replace(d),i=d,u=!0;continue}if(u=d.getFirstDescendant(),Jx(u)){for(var p=u.getParentOrThrow();p.isInline();)p=p.getParentOrThrow();if(f=p.getChildren(),u=f.length,O(i)){var h=i.getFirstChild();for(let g=0;g<u;g++){let _=f[g];h===null?i.append(_):h.insertAfter(_),h=_}}else{for(h=u-1;0<=h;h--)i.insertAfter(f[h]);i=i.getParentOrThrow()}if(f=f[u-1],p.remove(),u=!0,p.is(d))continue}}A(i)&&(a===null&&k(27),i=a)}u=!1,O(i)&&!i.isInline()?(f=d,ae(d)&&!d.isInline()?i=t.length===1&&i.canBeEmpty()&&i.isEmpty()?i.insertBefore(d,!1):i.insertAfter(d,!1):O(d)?(d.canBeEmpty()||!d.isEmpty())&&(at(i)?(p=i.getChildAtIndex(r),p!==null?p.insertBefore(d):i.append(d),i=d):d.isInline()?(i.append(d),i=d):i=i.insertAfter(d,!1)):(p=i.getFirstChild(),p!==null?p.insertBefore(d):i.append(d),i=d)):!O(d)||O(d)&&d.isInline()||ae(i)&&!i.isInline()?(f=d,H(this)&&ae(d)&&(O(i)||A(i))&&!d.isInline()?(A(i)?(p=i.getParentOrThrow(),[i]=i.splitText(r),i=i.getIndexWithinParent()+1):(p=i,i=r),[,i]=o_(p,i),i=i.insertBefore(d)):i=i.insertAfter(d,!1)):(d=i.getParentOrThrow(),Dl(i)&&i.remove(),i=d,m--)}if(n&&(A(l)?l.select():(t=i.getPreviousSibling(),A(t)?t.select():(t=i.getIndexWithinParent(),i.getParentOrThrow().select(t,t)))),O(i)){if(t=A(f)?f:O(f)&&f.isInline()?f.getLastDescendant():i.getLastDescendant(),n||(t===null?i.select():A(t)?t.getTextContent()===""?t.selectPrevious():t.select():t.selectNext()),o.length!==0)for(n=i,t=o.length-1;0<=t;t--)r=o[t],a=r.getParentOrThrow(),!O(i)||kf(r)||ae(r)&&(!r.isInline()||r.isIsolated())?O(i)||kf(r)?O(r)&&!r.canInsertAfter(i)?(l=a.constructor.clone(a),O(l)||k(29),l.append(r),i.insertAfter(l)):i.insertAfter(r):(i.insertBefore(r),i=r):(n===i?i.append(r):i.insertBefore(r),i=r),a.isEmpty()&&!a.canBeEmpty()&&a.remove()}else n||(A(i)?i.select():(n=i.getParentOrThrow(),t=i.getIndexWithinParent()+1,n.select(t,t)));return!0}insertParagraph(){this.isCollapsed()||this.removeText();var t=this.anchor,n=t.offset,r=[];if(t.type==="text"){var i=t.getNode(),o=i.getNextSiblings().reverse(),l=i.getParentOrThrow(),s=l.isInline(),a=s?l.getTextContentSize():i.getTextContentSize();n===0?o.push(i):(s&&(r=l.getNextSiblings()),n===a||s&&n===i.getTextContentSize()||([,i]=i.splitText(n),o.push(i)))}else{if(l=t.getNode(),rn(l)){o=ti(),r=l.getChildAtIndex(n),o.select(),r!==null?r.insertBefore(o,!1):l.append(o);return}o=l.getChildren().slice(n).reverse()}if(i=o.length,n===0&&0<i&&l.isInline()){if(r=l.getParentOrThrow(),o=r.insertNewAfter(this,!1),O(o))for(r=r.getChildren(),l=0;l<r.length;l++)o.append(r[l])}else if(s=l.insertNewAfter(this,!1),s===null)this.insertLineBreak();else if(O(s))if(a=l.getFirstChild(),n===0&&(l.is(t.getNode())||a&&a.is(t.getNode()))&&0<i)l.insertBefore(s);else{if(l=null,n=r.length,t=s.getParentOrThrow(),0<n)for(a=0;a<n;a++)t.append(r[a]);if(i!==0)for(r=0;r<i;r++)n=o[r],l===null?s.append(n):l.insertBefore(n),l=n;s.canBeEmpty()||s.getChildrenSize()!==0?s.selectStart():(s.selectPrevious(),s.remove())}}insertLineBreak(t){let n=eo();var r=this.anchor;r.type==="element"&&(r=r.getNode(),at(r)&&this.insertParagraph()),t?this.insertNodes([n],!0):this.insertNodes([n])&&n.selectNext(0,0)}getCharacterOffsets(){return Xs(this)}extract(){var t=this.getNodes(),n=t.length,r=n-1,i=this.anchor;let o=this.focus;var l=t[0];let s=t[r],[a,u]=Xs(this);return n===0?[]:n===1?A(l)&&!this.isCollapsed()?(t=a>u?u:a,r=l.splitText(t,a>u?a:u),t=t===0?r[0]:r[1],t!=null?[t]:[]):[l]:(n=i.isBefore(o),A(l)&&(i=n?a:u,i===l.getTextContentSize()?t.shift():i!==0&&([,l]=l.splitText(i),t[0]=l)),A(s)&&(l=s.getTextContent().length,n=n?u:a,n===0?t.pop():n!==l&&([s]=s.splitText(n),t[r]=s)),t)}modify(t,n,r){var i=this.focus,o=this.anchor,l=t==="move",s=yf(i,n);if(ae(s)&&!s.isIsolated())l&&s.isKeyboardSelectable()?(n=$f(),n.add(s.__key),xn(n)):(t=n?s.getPreviousSibling():s.getNextSibling(),A(t)?(s=t.__key,n=n?t.getTextContent().length:0,i.set(s,n,"text"),l&&o.set(s,n,"text")):(r=s.getParentOrThrow(),O(t)?(r=t.__key,s=n?t.getChildrenSize():0):(s=s.getIndexWithinParent(),r=r.__key,n||s++),i.set(r,s,"element"),l&&o.set(r,s,"element")));else if(o=xe(),i=wn(o._window)){var a=o._blockCursorElement,u=o._rootElement;if(u===null||a===null||!O(s)||s.isInline()||s.canBeEmpty()||vf(a,o,u),i.modify(t,n?"backward":"forward",r),0<i.rangeCount&&(s=i.getRangeAt(0),o=this.anchor.getNode(),o=at(o)?o:r_(o),this.applyDOMRange(s),this.dirty=!0,!l)){for(l=this.getNodes(),t=[],r=!1,a=0;a<l.length;a++)u=l[a],Ia(u,o)?t.push(u):r=!0;r&&0<t.length&&(n?(n=t[0],O(n)?n.selectStart():n.getParentOrThrow().selectStart()):(n=t[t.length-1],O(n)?n.selectEnd():n.getParentOrThrow().selectEnd())),(i.anchorNode!==s.startContainer||i.anchorOffset!==s.startOffset)&&(n=this.focus,l=this.anchor,i=l.key,s=l.offset,o=l.type,Xn(l,n.key,n.offset,n.type),Xn(n,i,s,o),this._cachedNodes=null)}}}deleteCharacter(t){let n=this.isCollapsed();if(this.isCollapsed()){var r=this.anchor,i=this.focus,o=r.getNode();if(!t&&(r.type==="element"&&O(o)&&r.offset===o.getChildrenSize()||r.type==="text"&&r.offset===o.getTextContentSize())){var l=o.getParent();if(l=o.getNextSibling()||(l===null?null:l.getNextSibling()),O(l)&&l.isShadowRoot())return}if(l=yf(i,t),ae(l)&&!l.isIsolated()){l.isKeyboardSelectable()&&O(o)&&o.getChildrenSize()===0?(o.remove(),t=$f(),t.add(l.__key),xn(t)):(l.remove(),xe().dispatchCommand(Du,void 0));return}if(!t&&O(l)&&O(o)&&o.isEmpty()){o.remove(),l.selectStart();return}if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&r.offset===0&&(r.type==="element"?r.getNode():r.getNode().getParentOrThrow()).collapseAtStart(this))return}else{if(l=i.type==="text"?i.getNode():null,o=r.type==="text"?r.getNode():null,l!==null&&l.isSegmented()){if(r=i.offset,i=l.getTextContentSize(),l.is(o)||t&&r!==i||!t&&r!==0){my(l,t,r);return}}else if(o!==null&&o.isSegmented()&&(r=r.offset,i=o.getTextContentSize(),o.is(l)||t&&r!==0||!t&&r!==i)){my(o,t,r);return}if(o=this.anchor,l=this.focus,r=o.getNode(),i=l.getNode(),r===i&&o.type==="text"&&l.type==="text"){var s=o.offset,a=l.offset;let u=s<a;i=u?s:a,a=u?a:s,s=a-1,i!==s&&(r=r.getTextContent().slice(i,a),e_(r)||(t?l.offset=s:o.offset=s))}}}this.removeText(),t&&!n&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0&&(t=this.anchor.getNode(),t.isEmpty()&&at(t.getParent())&&t.getIndexWithinParent()===0&&t.collapseAtStart(this))}deleteLine(t){this.isCollapsed()&&(this.anchor.type==="text"&&this.modify("extend",t,"lineboundary"),(t?this.focus:this.anchor).offset===0&&this.modify("extend",t,"character")),this.removeText()}deleteWord(t){this.isCollapsed()&&this.modify("extend",t,"word"),this.removeText()}}function fo(e){return e instanceof Ku}function hy(e){let t=e.offset;return e.type==="text"?t:(e=e.getNode(),t===e.getChildrenSize()?e.getTextContent().length:0)}function Xs(e){let t=e.anchor;return e=e.focus,t.type==="element"&&e.type==="element"&&t.key===e.key&&t.offset===e.offset?[0,0]:[hy(t),hy(e)]}function my(e,t,n){let r=e.getTextContent().split(/(?=\s)/g),i=r.length,o=0,l=0;for(let s=0;s<i;s++){let a=r[s],u=s===i-1;if(l=o,o+=a.length,t&&o===n||o>n||u){r.splice(s,1),u&&(l=void 0);break}}t=r.join("").trim(),t===""?e.remove():(e.setTextContent(t),e.select(l,l))}function gy(e,t,n,r){var i=t;if(e.nodeType===1){let s=!1;var o=e.childNodes,l=o.length;i===l&&(s=!0,i=l-1);let a=o[i];if(l=!1,a===r._blockCursorElement?(a=o[i+1],l=!0):r._blockCursorElement!==null&&i--,r=bi(a),A(r))i=s?r.getTextContentSize():0;else{if(o=bi(e),o===null)return null;if(O(o)?(e=o.getChildAtIndex(i),(t=O(e))&&(t=e.getParent(),t=n===null||t===null||!t.canBeEmpty()||t!==n.getNode()),t&&(n=s?e.getLastDescendant():e.getFirstDescendant(),n===null?(o=e,i=0):(e=n,o=O(e)?e:e.getParentOrThrow())),A(e)?(r=e,o=null,i=s?e.getTextContentSize():0):e!==o&&s&&!l&&i++):(i=o.getIndexWithinParent(),i=t===0&&ae(o)&&bi(e)===o?i:i+1,o=o.getParentOrThrow()),O(o))return new _n(o.__key,i,"element")}}else r=bi(e);return A(r)?new _n(r.__key,i,"text"):null}function yy(e,t,n){var r=e.offset,i=e.getNode();r===0?(r=i.getPreviousSibling(),i=i.getParent(),t?(n||!t)&&r===null&&O(i)&&i.isInline()&&(t=i.getPreviousSibling(),A(t)&&(e.key=t.__key,e.offset=t.getTextContent().length)):O(r)&&!n&&r.isInline()?(e.key=r.__key,e.offset=r.getChildrenSize(),e.type="element"):A(r)&&(e.key=r.__key,e.offset=r.getTextContent().length)):r===i.getTextContent().length&&(r=i.getNextSibling(),i=i.getParent(),t&&O(r)&&r.isInline()?(e.key=r.__key,e.offset=0,e.type="element"):(n||t)&&r===null&&O(i)&&i.isInline()&&!i.canInsertTextAfter()&&(t=i.getNextSibling(),A(t)&&(e.key=t.__key,e.offset=0)))}function __(e,t,n){if(e.type==="text"&&t.type==="text"){var r=e.isBefore(t);let i=e.is(t);yy(e,r,i),yy(t,!r,i),i&&(t.key=e.key,t.offset=e.offset,t.type=e.type),r=xe(),r.isComposing()&&r._compositionKey!==e.key&&H(n)&&(r=n.anchor,n=n.focus,Xn(e,r.key,r.offset,r.type),Xn(t,n.key,n.offset,n.type))}}function S_(e,t,n,r,i,o){return e===null||n===null||!Xl(i,e,n)||(t=gy(e,t,H(o)?o.anchor:null,i),t===null)||(r=gy(n,r,H(o)?o.focus:null,i),r===null||t.type==="element"&&r.type==="element"&&(e=bi(e),n=bi(n),ae(e)&&ae(n)))?null:(__(t,r,o),[t,r])}function kf(e){return O(e)&&!e.isInline()}function w_(e,t,n,r,i,o){let l=Cn();return e=new li(new _n(e,t,i),new _n(n,r,o),0,""),e.dirty=!0,l._selection=e}function $f(){return new Ku(new Set)}function vb(e){let t=e.getEditorState()._selection,n=wn(e._window);return fo(t)||jh(t)?t.clone():Ph(t,n,e)}function Ph(e,t,n){var r=n._window;if(r===null)return null;var i=r.event,o=i?i.type:void 0;r=o==="selectionchange",i=!mf&&(r||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&i&&i.detail===3||o==="drop"||o===void 0);let l;if(!H(e)||i){if(t===null)return null;if(i=t.anchorNode,o=t.focusNode,l=t.anchorOffset,t=t.focusOffset,r&&H(e)&&!Xl(n,i,o))return e.clone()}else return e.clone();if(n=S_(i,l,o,t,n,e),n===null)return null;let[s,a]=n;return new li(s,a,H(e)?e.format:0,H(e)?e.style:"")}function ue(){return Cn()._selection}function po(){return xe()._editorState._selection}function za(e,t,n,r=1){var i=e.anchor,o=e.focus,l=i.getNode(),s=o.getNode();if(t.is(l)||t.is(s)){if(l=t.__key,e.isCollapsed())t=i.offset,(n<=t&&0<r||n<t&&0>r)&&(n=Math.max(0,t+r),i.set(l,n,"element"),o.set(l,n,"element"),vy(e));else{let u=e.isBackward();s=u?o:i;var a=s.getNode();i=u?i:o,o=i.getNode(),t.is(a)&&(a=s.offset,(n<=a&&0<r||n<a&&0>r)&&s.set(l,Math.max(0,a+r),"element")),t.is(o)&&(t=i.offset,(n<=t&&0<r||n<t&&0>r)&&i.set(l,Math.max(0,t+r),"element"))}vy(e)}}function vy(e){var t=e.anchor,n=t.offset;let r=e.focus;var i=r.offset,o=t.getNode(),l=r.getNode();if(e.isCollapsed())O(o)&&(l=o.getChildrenSize(),l=(i=n>=l)?o.getChildAtIndex(l-1):o.getChildAtIndex(n),A(l)&&(n=0,i&&(n=l.getTextContentSize()),t.set(l.__key,n,"text"),r.set(l.__key,n,"text")));else{if(O(o)){let s=o.getChildrenSize();n=(e=n>=s)?o.getChildAtIndex(s-1):o.getChildAtIndex(n),A(n)&&(o=0,e&&(o=n.getTextContentSize()),t.set(n.__key,o,"text"))}O(l)&&(n=l.getChildrenSize(),i=(t=i>=n)?l.getChildAtIndex(n-1):l.getChildAtIndex(i),A(i)&&(l=0,t&&(l=i.getTextContentSize()),r.set(i.__key,l,"text")))}}function xb(e,t){if(t=t.getEditorState()._selection,e=e._selection,H(e)){var n=e.anchor;let r=e.focus,i;n.type==="text"&&(i=n.getNode(),i.selectionTransform(t,e)),r.type==="text"&&(n=r.getNode(),i!==n&&n.selectionTransform(t,e))}}function Ba(e,t,n,r,i){let o=null,l=0,s=null;r!==null?(o=r.__key,A(r)?(l=r.getTextContentSize(),s="text"):O(r)&&(l=r.getChildrenSize(),s="element")):i!==null&&(o=i.__key,A(i)?s="text":O(i)&&(s="element")),o!==null&&s!==null?e.set(o,l,s):(l=t.getIndexWithinParent(),l===-1&&(l=n.getChildrenSize()),e.set(n.__key,l,"element"))}function xy(e,t,n,r,i){e.type==="text"?(e.key=n,t||(e.offset+=i)):e.offset>r.getIndexWithinParent()&&--e.offset}function C_(e,t,n){let r=[],i=null,o=null;e=e.getChildren();for(let f=0;f<e.length;f++){var l=e[f];zl(l)||k(108);var s=l.getChildren();l=0;for(let d of s){for(Ft(d)||k(109);r[f]!==void 0&&r[f][l]!==void 0;)l++;s=f;var a=l,u=d;let p={cell:u,startColumn:a,startRow:s},h=u.__rowSpan,m=u.__colSpan;for(let g=0;g<h;g++){r[s+g]===void 0&&(r[s+g]=[]);for(let _=0;_<m;_++)r[s+g][a+_]=p}t.is(u)&&(i=p),n.is(u)&&(o=p),l+=d.__colSpan}}return i===null&&k(110),o===null&&k(111),[r,i,o]}function N_(e){e instanceof Rh||(e instanceof ts?(e=Da(e,Ft),Ft(e)||k(114)):(e=Da(e.getNode(),Ft),Ft(e)||k(114)));let t=e.getParent();zl(t)||k(115);let n=t.getParent();return Lh(n)||k(116),[e,t,n]}let Me=null,Ie=null,vt=!1,Qc=!1,Fl=0,_y={characterData:!0,childList:!0,subtree:!0};function ho(){return vt||Me!==null&&Me._readOnly}function st(){vt&&k(13)}function Cn(){return Me===null&&k(15),Me}function xe(){return Ie===null&&k(16),Ie}function Sy(e,t,n){var r=t.__type;let i=e._nodes.get(r);for(i===void 0&&k(30,r),e=n.get(r),e===void 0&&(e=Array.from(i.transforms),n.set(r,e)),n=e.length,r=0;r<n&&(e[r](t),t.isAttached());r++);}function _b(e,t){t=t._dirtyLeaves,e=e._nodeMap;for(let n of t)t=e.get(n),A(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&Yx(t)}function Sb(e,t){let n=t._dirtyLeaves,r=t._dirtyElements;e=e._nodeMap;let i=or(),o=new Map;var l=n;let s=l.size;for(var a=r,u=a.size;0<s||0<u;){if(0<s){t._dirtyLeaves=new Set;for(let f of l)l=e.get(f),A(l)&&l.isAttached()&&l.isSimpleText()&&!l.isUnmergeable()&&Yx(l),l!==void 0&&l!==void 0&&l.__key!==i&&l.isAttached()&&Sy(t,l,o),n.add(f);if(l=t._dirtyLeaves,s=l.size,0<s){Fl++;continue}}t._dirtyLeaves=new Set,t._dirtyElements=new Map;for(let f of a)a=f[0],u=f[1],(a==="root"||u)&&(l=e.get(a),l!==void 0&&l!==void 0&&l.__key!==i&&l.isAttached()&&Sy(t,l,o),r.set(a,u));l=t._dirtyLeaves,s=l.size,a=t._dirtyElements,u=a.size,Fl++}t._dirtyLeaves=n,t._dirtyElements=r}function kh(e,t){var n=e.type,r=t.get(n);if(r===void 0&&k(17,n),n=r.klass,e.type!==n.getType()&&k(18,n.name),n=n.importJSON(e),e=e.children,O(n)&&Array.isArray(e))for(r=0;r<e.length;r++){let i=kh(e[r],t);n.append(i)}return n}function wy(e,t){let n=Me,r=vt,i=Ie;Me=e,vt=!0,Ie=null;try{return t()}finally{Me=n,vt=r,Ie=i}}function Kr(e,t){let n=e._pendingEditorState,r=e._rootElement,i=e._headless||r===null;if(n!==null){var o=e._editorState,l=o._selection,s=n._selection,a=e._dirtyType!==0,u=Me,f=vt,d=Ie,p=e._updating,h=e._observer,m=null;if(e._pendingEditorState=null,e._editorState=n,!i&&a&&h!==null){Ie=e,Me=n,vt=!1,e._updating=!0;try{let ge=e._dirtyType,nt=e._dirtyElements,rt=e._dirtyLeaves;h.disconnect();var g=ge,_=nt,v=rt;lt=jn=Pe="",s_=g===2,Qs=null,et=e,Cr=e._config,Al=e._nodes,Uu=et._listeners.mutation,xf=_,_f=v,ei=o._nodeMap,Nr=n._nodeMap,bh=n._readOnly,Sf=new Map(e._keyToDOMMap);let cn=new Map;Ml=cn,Ho("root",null),Ml=Sf=Cr=Nr=ei=_f=xf=Al=et=void 0,m=cn}catch(ge){if(ge instanceof Error&&e._onError(ge),Qc)throw ge;b_(e,null,r,n),Gx(e),e._dirtyType=2,Qc=!0,Kr(e,o),Qc=!1;return}finally{h.observe(r,_y),e._updating=p,Me=u,vt=f,Ie=d}}n._readOnly||(n._readOnly=!0);var y=e._dirtyLeaves,x=e._dirtyElements,S=e._normalizedNodes,C=e._updateTags,T=e._deferred;a&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set);var N=e._decorators,b=e._pendingDecorators||N,z=n._nodeMap,L;for(L in b)z.has(L)||(b===N&&(b=Zx(e)),delete b[L]);var G=i?null:wn(e._window);if(e._editable&&G!==null&&(a||s===null||s.dirty)){Ie=e,Me=n;try{if(h!==null&&h.disconnect(),a||s===null||s.dirty){let ge=e._blockCursorElement;ge!==null&&vf(ge,e,r);e:{let nt=G.anchorNode,rt=G.focusNode,cn=G.anchorOffset,So=G.focusOffset,Rt=document.activeElement;if(!(C.has("collaboration")&&Rt!==r||Rt!==null&&wh(Rt)))if(H(s)){var Be=s.anchor,Yt=s.focus,_o=Be.key,Ju=Yt.key,ai=Ma(e,_o),ui=Ma(e,Ju),R=Be.offset,W=Yt.offset,V=s.format,oe=s.style,we=s.isCollapsed(),un=ai,$t=ui,Pr=!1;if(Be.type==="text"){un=Ra(ai);let Lt=Be.getNode();Pr=Lt.getFormat()!==V||Lt.getStyle()!==oe}else H(l)&&l.anchor.type==="text"&&(Pr=!0);if(Yt.type==="text"&&($t=Ra(ui)),un!==null&&$t!==null){if(we&&(l===null||Pr||H(l)&&(l.format!==V||l.style!==oe))){var Nn=performance.now();m_=[V,oe,R,_o,Nn]}if(cn===R&&So===W&&nt===un&&rt===$t&&(G.type!=="Range"||!we)&&(Rt!==null&&r.contains(Rt)||r.focus({preventScroll:!0}),Be.type!=="element"))break e;try{G.setBaseAndExtent(un,R,$t,W)}catch{}if(!C.has("skip-scroll-into-view")&&s.isCollapsed()&&r!==null&&r===document.activeElement){let Lt=s instanceof li&&s.anchor.type==="element"?un.childNodes[R]||null:0<G.rangeCount?G.getRangeAt(0):null;if(Lt!==null){let At;if(Lt instanceof Text){let xt=document.createRange();xt.selectNode(Lt),At=xt.getBoundingClientRect()}else At=Lt.getBoundingClientRect();let Gn=r.ownerDocument,kr=Gn.defaultView;if(kr!==null)for(var{top:Vn,bottom:qu}=At,is,os,Kn=r;Kn!==null;){let xt=Kn===Gn.body;if(xt)is=0,os=Wu(e).innerHeight;else{let ls=Kn.getBoundingClientRect();is=ls.top,os=ls.bottom}let $r=0;if(Vn<is?$r=-(is-Vn):qu>os&&($r=qu-os),$r!==0)if(xt)kr.scrollBy(0,$r);else{let ls=Kn.scrollTop;Kn.scrollTop+=$r;let Vh=Kn.scrollTop-ls;Vn-=Vh,qu-=Vh}if(xt)break;Kn=Bu(Kn)}}}Tf=!0}}else l!==null&&Xl(e,nt,rt)&&G.removeAllRanges()}}e:{let ge=e._blockCursorElement;if(H(s)&&s.isCollapsed()&&s.anchor.type==="element"&&r.contains(document.activeElement)){let nt=s.anchor,rt=nt.getNode(),cn=nt.offset,So=rt.getChildrenSize(),Rt=!1,Lt=null;if(cn===So){let At=rt.getChildAtIndex(cn-1);Wc(At)&&(Rt=!0)}else{let At=rt.getChildAtIndex(cn);if(Wc(At)){let Gn=At.getPreviousSibling();(Gn===null||Wc(Gn))&&(Rt=!0,Lt=e.getElementByKey(At.__key))}}if(Rt){let At=e.getElementByKey(rt.__key);if(ge===null){let Gn=e._config.theme,kr=document.createElement("div");kr.contentEditable="false",kr.setAttribute("data-lexical-cursor","true");let xt=Gn.blockCursor;if(xt!==void 0){if(typeof xt=="string"){let $r=xt.split(" ");xt=Gn.blockCursor=$r}xt!==void 0&&kr.classList.add(...xt)}e._blockCursorElement=ge=kr}r.style.caretColor="transparent",Lt===null?At.appendChild(ge):At.insertBefore(ge,Lt);break e}}ge!==null&&vf(ge,e,r)}h!==null&&h.observe(r,_y)}finally{Ie=d,Me=u}}if(m!==null){var pS=m;let ge=Array.from(e._listeners.mutation),nt=ge.length;for(let rt=0;rt<nt;rt++){let[cn,So]=ge[rt],Rt=pS.get(So);Rt!==void 0&&cn(Rt,{dirtyLeaves:y,prevEditorState:o,updateTags:C})}}H(s)||s===null||l!==null&&l.is(s)||e.dispatchCommand(Du,void 0);var Xu=e._pendingDecorators;Xu!==null&&(e._decorators=Xu,e._pendingDecorators=null,ll("decorator",e,!0,Xu));var hS=oy(t||o),Hh=oy(n);if(hS!==Hh&&ll("textcontent",e,!0,Hh),ll("update",e,!0,{dirtyElements:x,dirtyLeaves:y,editorState:n,normalizedNodes:S,prevEditorState:t||o,tags:C}),e._deferred=[],T.length!==0){let ge=e._updating;e._updating=!0;try{for(let nt=0;nt<T.length;nt++)T[nt]()}finally{e._updating=ge}}var Uh=e._updates;if(Uh.length!==0){let ge=Uh.shift();if(ge){let[nt,rt]=ge;E_(e,nt,rt)}}}}function ll(e,t,n,...r){let i=t._updating;t._updating=n;try{let o=Array.from(t._listeners[e]);for(e=0;e<o.length;e++)o[e].apply(null,r)}finally{t._updating=i}}function $(e,t,n){if(e._updating===!1||Ie!==e){let o=!1;return e.update(()=>{o=$(e,t,n)}),o}let r=Nh(e);for(let o=4;0<=o;o--)for(let l=0;l<r.length;l++){var i=r[l]._commands.get(t);if(i!==void 0&&(i=i[o],i!==void 0)){i=Array.from(i);let s=i.length;for(let a=0;a<s;a++)if(i[a](n,e)===!0)return!0}}return!1}function Cy(e,t){let n=e._updates;for(t=t||!1;n.length!==0;){var r=n.shift();if(r){let[i,o]=r,l;o!==void 0&&(r=o.onUpdate,l=o.tag,o.skipTransforms&&(t=!0),r&&e._deferred.push(r),l&&e._updateTags.add(l)),i()}}return t}function E_(e,t,n){let r=e._updateTags;var i,o=i=!1;if(n!==void 0){var l=n.onUpdate;i=n.tag,i!=null&&r.add(i),i=n.skipTransforms||!1,o=n.discrete||!1}l&&e._deferred.push(l),n=e._editorState,l=e._pendingEditorState;let s=!1;(l===null||l._readOnly)&&(l=e._pendingEditorState=new Yu(new Map((l||n)._nodeMap)),s=!0),l._flushSync=o,o=Me;let a=vt,u=Ie,f=e._updating;Me=l,vt=!1,e._updating=!0,Ie=e;try{s&&(e._headless?n._selection!=null&&(l._selection=n._selection.clone()):l._selection=vb(e));let d=e._compositionKey;t(),i=Cy(e,i),xb(l,e),e._dirtyType!==0&&(i?_b(l,e):Sb(l,e),Cy(e),nb(n,l,e._dirtyLeaves,e._dirtyElements)),d!==e._compositionKey&&(l._flushSync=!0);let p=l._selection;if(H(p)){let h=l._nodeMap,m=p.focus.key;h.get(p.anchor.key)!==void 0&&h.get(m)!==void 0||k(19)}else fo(p)&&p._nodes.size===0&&(l._selection=null)}catch(d){d instanceof Error&&e._onError(d),e._pendingEditorState=n,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),Kr(e);return}finally{Me=o,vt=a,Ie=u,e._updating=f,Fl=0}e._dirtyType!==0||wb(l,e)?l._flushSync?(l._flushSync=!1,Kr(e)):s&&XO(()=>{Kr(e)}):(l._flushSync=!1,s&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function bt(e,t,n){e._updating?e._updates.push([t,n]):E_(e,t,n)}class T_ extends ts{constructor(t){super(t)}decorate(){k(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function ae(e){return e instanceof T_}class si extends ts{constructor(t){super(t),this.__last=this.__first=null,this.__indent=this.__format=this.__size=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){let t=this.getFormat();return KO[t]||""}getIndent(){return this.getLatest().__indent}getChildren(){let t=[],n=this.getFirstChild();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getChildrenKeys(){let t=[],n=this.getFirstChild();for(;n!==null;)t.push(n.__key),n=n.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){let t=xe()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){let t=this.getLatest(),n=this.getParentOrThrow().getLastChild();return n!==null&&n.is(t)}getAllTextNodes(){let t=[],n=this.getFirstChild();for(;n!==null;){if(A(n)&&t.push(n),O(n)){let r=n.getAllTextNodes();t.push(...r)}n=n.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;t!==null;){if(O(t)){let n=t.getFirstChild();if(n!==null){t=n;continue}}break}return t}getLastDescendant(){let t=this.getLastChild();for(;t!==null;){if(O(t)){let n=t.getLastChild();if(n!==null){t=n;continue}}break}return t}getDescendantByIndex(t){let n=this.getChildren(),r=n.length;return t>=r?(t=n[r-1],O(t)&&t.getLastDescendant()||t||null):(t=n[t],O(t)&&t.getFirstDescendant()||t||null)}getFirstChild(){let t=this.getLatest().__first;return t===null?null:Ae(t)}getFirstChildOrThrow(){let t=this.getFirstChild();return t===null&&k(45,this.__key),t}getLastChild(){let t=this.getLatest().__last;return t===null?null:Ae(t)}getLastChildOrThrow(){let t=this.getLastChild();return t===null&&k(96,this.__key),t}getChildAtIndex(t){var n=this.getChildrenSize();let r;if(t<n/2){for(r=this.getFirstChild(),n=0;r!==null&&n<=t;){if(n===t)return r;r=r.getNextSibling(),n++}return null}for(r=this.getLastChild(),--n;r!==null&&n>=t;){if(n===t)return r;r=r.getPreviousSibling(),n--}return null}getTextContent(){let t="",n=this.getChildren(),r=n.length;for(let i=0;i<r;i++){let o=n[i];t+=o.getTextContent(),O(o)&&i!==r-1&&!o.isInline()&&(t+=`

`)}return t}getTextContentSize(){let t=0,n=this.getChildren(),r=n.length;for(let i=0;i<r;i++){let o=n[i];t+=o.getTextContentSize(),O(o)&&i!==r-1&&!o.isInline()&&(t+=2)}return t}getDirection(){return this.getLatest().__dir}hasFormat(t){return t!==""?(t=ty[t],(this.getFormat()&t)!==0):!1}select(t,n){st();let r=ue(),i=t,o=n;var l=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&n===0){if(t=this.getFirstChild(),A(t)||O(t))return t.select(0,0)}else if(!(t!==void 0&&t!==l||n!==void 0&&n!==l)&&(t=this.getLastChild(),A(t)||O(t)))return t.select()}if(i===void 0&&(i=l),o===void 0&&(o=l),l=this.__key,H(r))r.anchor.set(l,i,"element"),r.focus.set(l,o,"element"),r.dirty=!0;else return w_(l,i,l,o,"element","element");return r}selectStart(){let t=this.getFirstDescendant();return O(t)||A(t)?t.select(0,0):t!==null?t.selectPrevious():this.select(0,0)}selectEnd(){let t=this.getLastDescendant();return O(t)||A(t)?t.select():t!==null?t.selectNext():this.select()}clear(){let t=this.getWritable();return this.getChildren().forEach(n=>n.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){let n=this.getWritable();return n.__dir=t,n}setFormat(t){return this.getWritable().__format=t!==""?ty[t]:0,this}setIndent(t){return this.getWritable().__indent=t,this}splice(t,n,r){let i=r.length,o=this.getChildrenSize(),l=this.getWritable(),s=l.__key;var a=[],u=[];let f=this.getChildAtIndex(t+n),d=null,p=o-n+i;if(t!==0)if(t===o)d=this.getLastChild();else{var h=this.getChildAtIndex(t);h!==null&&(d=h.getPreviousSibling())}if(0<n){var m=d===null?this.getFirstChild():d.getNextSibling();for(h=0;h<n;h++){m===null&&k(100);var g=m.getNextSibling(),_=m.__key;m=m.getWritable(),Vr(m),u.push(_),m=g}}for(h=d,g=0;g<i;g++){_=r[g],h!==null&&_.is(h)&&(d=h=h.getPreviousSibling()),m=_.getWritable(),m.__parent===s&&p--,Vr(m);let v=_.__key;h===null?(l.__first=v,m.__prev=null):(h=h.getWritable(),h.__next=v,m.__prev=h.__key),_.__key===s&&k(76),m.__parent=s,a.push(v),h=_}if(t+n===o?h!==null&&(h.getWritable().__next=null,l.__last=h.__key):f!==null&&(t=f.getWritable(),h!==null?(n=h.getWritable(),t.__prev=h.__key,n.__next=f.__key):t.__prev=null),l.__size=p,u.length&&(t=ue(),H(t))){u=new Set(u),a=new Set(a);let{anchor:v,focus:y}=t;Ny(v,u,a)&&Ba(v,v.getNode(),this,d,f),Ny(y,u,a)&&Ba(y,y.getNode(),this,d,f),p!==0||this.canBeEmpty()||rn(this)||this.remove()}return l}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(){return null}canIndent(){return!0}collapseAtStart(){return!1}excludeFromCopy(){return!1}canExtractContents(){return!0}canReplaceWith(){return!0}canInsertAfter(){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(){return!1}extractWithChild(){return!1}}function O(e){return e instanceof si}function Ny(e,t,n){for(e=e.getNode();e;){let r=e.__key;if(t.has(r)&&!n.has(r))return!0;e=e.getParent()}return!1}class mo extends si{static getType(){return"root"}static clone(){return new mo}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){k(51)}getTextContent(){let t=this.__cachedText;return!ho()&&xe()._dirtyType!==0||t===null?super.getTextContent():t}remove(){k(52)}replace(){k(53)}insertBefore(){k(54)}insertAfter(){k(55)}updateDOM(){return!1}append(...t){for(let n=0;n<t.length;n++){let r=t[n];O(r)||ae(r)||k(56)}return super.append(...t)}static importJSON(t){let n=Sn();return n.setFormat(t.format),n.setIndent(t.indent),n.setDirection(t.direction),n}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function at(e){return e instanceof mo}function wb(e,t){if(t=t.getEditorState()._selection,e=e._selection,e!==null){if(e.dirty||!e.is(t))return!0}else if(t!==null)return!0;return!1}function $h(){return new Yu(new Map([["root",new mo]]))}function O_(e){let t=e.exportJSON();var n=e.constructor;t.type!==n.getType()&&k(130,n.name);let r=t.children;if(O(e))for(Array.isArray(r)||k(59,n.name),e=e.getChildren(),n=0;n<e.length;n++){let i=O_(e[n]);r.push(i)}return t}class Yu{constructor(t,n){this._nodeMap=t,this._selection=n||null,this._readOnly=this._flushSync=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t){return wy(this,t)}clone(t){return t=new Yu(this._nodeMap,t===void 0?this._selection:t),t._readOnly=!0,t}toJSON(){return wy(this,()=>({root:O_(Sn())}))}}class go extends si{static getType(){return"paragraph"}static clone(t){return new go(t.__key)}createDOM(t){let n=document.createElement("p");return t=rl(t.theme,"paragraph"),t!==void 0&&n.classList.add(...t),n}updateDOM(){return!1}static importDOM(){return{p:()=>({conversion:Cb,priority:0})}}exportDOM(t){if({element:t}=super.exportDOM(t),t&&Hu(t)){this.isEmpty()&&t.append(document.createElement("br"));var n=this.getFormatType();t.style.textAlign=n,(n=this.getDirection())&&(t.dir=n),n=this.getIndent(),0<n&&(t.style.textIndent=`${20*n}px`)}return{element:t}}static importJSON(t){let n=ti();return n.setFormat(t.format),n.setIndent(t.indent),n.setDirection(t.direction),n}exportJSON(){return{...super.exportJSON(),type:"paragraph",version:1}}insertNewAfter(t,n){t=ti();let r=this.getDirection();return t.setDirection(r),this.insertAfter(t,n),t}collapseAtStart(){let t=this.getChildren();if(t.length===0||A(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function Cb(e){let t=ti();return e.style&&(t.setFormat(e.style.textAlign),e=parseInt(e.style.textIndent,10)/20,0<e&&t.setIndent(e)),{node:t}}function ti(){return es(new go)}function b_(e,t,n,r){let i=e._keyToDOMMap;i.clear(),e._editorState=$h(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null,r=e._observer,r!==null&&(r.disconnect(),e._observer=null),t!==null&&(t.textContent=""),n!==null&&(n.textContent="",i.set("root",n))}function Nb(e){let t=new Map,n=new Set;return e.forEach(r=>{if(r=r.klass.importDOM!=null?r.klass.importDOM.bind(r.klass):null,r!=null&&!n.has(r)){n.add(r);var i=r();i!==null&&Object.keys(i).forEach(o=>{let l=t.get(o);l===void 0&&(l=[],t.set(o,l)),l.push(i[o])})}}),t}class Eb{constructor(t,n,r,i,o,l,s){this._parentEditor=n,this._rootElement=null,this._editorState=t,this._compositionKey=this._pendingEditorState=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=t_(),this._onError=o,this._htmlConversions=l,this._editable=s,this._headless=n!==null&&n._headless,this._blockCursorElement=this._window=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){let n=this._listeners.update;return n.add(t),()=>{n.delete(t)}}registerEditableListener(t){let n=this._listeners.editable;return n.add(t),()=>{n.delete(t)}}registerDecoratorListener(t){let n=this._listeners.decorator;return n.add(t),()=>{n.delete(t)}}registerTextContentListener(t){let n=this._listeners.textcontent;return n.add(t),()=>{n.delete(t)}}registerRootListener(t){let n=this._listeners.root;return t(this._rootElement,null),n.add(t),()=>{t(null,this._rootElement),n.delete(t)}}registerCommand(t,n,r){r===void 0&&k(35);let i=this._commands;i.has(t)||i.set(t,[new Set,new Set,new Set,new Set,new Set]);let o=i.get(t);o===void 0&&k(36,String(t));let l=o[r];return l.add(n),()=>{l.delete(n),o.every(s=>s.size===0)&&i.delete(t)}}registerMutationListener(t,n){this._nodes.get(t.getType())===void 0&&k(37,t.name);let r=this._listeners.mutation;return r.set(n,t),()=>{r.delete(n)}}registerNodeTransformToKlass(t,n){var r=t.getType();return r=this._nodes.get(r),r===void 0&&k(37,t.name),r.transforms.add(n),r}registerNodeTransform(t,n){var r=this.registerNodeTransformToKlass(t,n);let i=[r];return r=r.replaceWithKlass,r!=null&&(r=this.registerNodeTransformToKlass(r,n),i.push(r)),ZO(this,t.getType()),()=>{i.forEach(o=>o.transforms.delete(n))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,n){return $(this,t,n)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){let n=this._rootElement;if(t!==n){let l=rl(this._config.theme,"root");var r=this._pendingEditorState||this._editorState;if(this._rootElement=t,b_(this,n,t,r),n!==null){if(!this._config.disableEvents){il!==0&&(il--,il===0&&n.ownerDocument.removeEventListener("selectionchange",x_));var i=n.__lexicalEditor;if(i!=null){if(i._parentEditor!==null){var o=Nh(i);o=o[o.length-1]._key,Wi.get(o)===i&&Wi.delete(o)}else Wi.delete(i._key);n.__lexicalEditor=null}for(i=v_(n),o=0;o<i.length;o++)i[o]();n.__lexicalEventHandles=[]}l!=null&&n.classList.remove(...l)}t!==null?(r=(r=t.ownerDocument)&&r.defaultView||null,i=t.style,i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=r,this._dirtyType=2,Gx(this),this._updateTags.add("history-merge"),Kr(this),this._config.disableEvents||db(t,this),l!=null&&t.classList.add(...l)):(this._editorState=r,this._window=this._pendingEditorState=null),ll("root",this,!1,t,n)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,n){t.isEmpty()&&k(38),Kx(this);let r=this._pendingEditorState,i=this._updateTags;n=n!==void 0?n.tag:null,r===null||r.isEmpty()||(n!=null&&i.add(n),Kr(this)),this._pendingEditorState=t,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,n!=null&&i.add(n),Kr(this)}parseEditorState(t,n){t=typeof t=="string"?JSON.parse(t):t;let r=$h(),i=Me,o=vt,l=Ie,s=this._dirtyElements,a=this._dirtyLeaves,u=this._cloneNotNeeded,f=this._dirtyType;this._dirtyElements=new Map,this._dirtyLeaves=new Set,this._cloneNotNeeded=new Set,this._dirtyType=0,Me=r,vt=!1,Ie=this;try{kh(t.root,this._nodes),n&&n(),r._readOnly=!0}catch(d){d instanceof Error&&this._onError(d)}finally{this._dirtyElements=s,this._dirtyLeaves=a,this._cloneNotNeeded=u,this._dirtyType=f,Me=i,vt=o,Ie=l}return r}update(t,n){bt(this,t,n)}focus(t,n={}){let r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),bt(this,()=>{let i=ue(),o=Sn();i!==null?i.dirty=!0:o.getChildrenSize()!==0&&(n.defaultSelection==="rootStart"?o.selectStart():o.selectEnd())},{onUpdate:()=>{r.removeAttribute("autocapitalize"),t&&t()},tag:"focus"}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){var t=this._rootElement;t!==null&&t.blur(),t=wn(this._window),t!==null&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,ll("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}class Rh extends si{constructor(t,n){super(n),this.__colSpan=t,this.__rowSpan=1}exportJSON(){return{...super.exportJSON(),colSpan:this.__colSpan,rowSpan:this.__rowSpan}}getColSpan(){return this.__colSpan}setColSpan(t){return this.getWritable().__colSpan=t,this}getRowSpan(){return this.__rowSpan}setRowSpan(t){return this.getWritable().__rowSpan=t,this}}function Ft(e){return e instanceof Rh}class j_ extends si{}function Lh(e){return e instanceof j_}class P_ extends si{}function zl(e){return e instanceof P_}E.$addUpdateTag=function(e){st(),xe()._updateTags.add(e)};E.$applyNodeReplacement=es;E.$copyNode=i_;E.$createLineBreakNode=eo;E.$createNodeSelection=$f;E.$createParagraphNode=ti;E.$createRangeSelection=function(){let e=new _n("root",0,"element"),t=new _n("root",0,"element");return new li(e,t,0,"")};E.$createTabNode=Vu;E.$createTextNode=Re;E.$getAdjacentNode=yf;E.$getNearestNodeFromDOMNode=Zl;E.$getNearestRootOrShadowRoot=r_;E.$getNodeByKey=Ae;E.$getPreviousSelection=po;E.$getRoot=Sn;E.$getSelection=ue;E.$getTextContent=function(){let e=ue();return e===null?"":e.getTextContent()};E.$hasAncestor=Ia;E.$hasUpdateTag=function(e){return xe()._updateTags.has(e)};E.$insertNodes=function(e,t){let n=ue()||po();return n===null&&(n=Sn().selectEnd()),n.insertNodes(e,t)};E.$isBlockElementNode=kf;E.$isDecoratorNode=ae;E.$isElementNode=O;E.$isInlineElementOrDecoratorNode=function(e){return O(e)&&e.isInline()||ae(e)&&e.isInline()};E.$isLeafNode=Jx;E.$isLineBreakNode=Dl;E.$isNodeSelection=fo;E.$isParagraphNode=function(e){return e instanceof go};E.$isRangeSelection=H;E.$isRootNode=at;E.$isRootOrShadowRoot=rn;E.$isTabNode=function(e){return e instanceof co};E.$isTextNode=A;E.$nodesOfType=function(e){var t=Cn();let n=t._readOnly,r=e.getType();t=t._nodeMap;let i=[];for(let[,o]of t)o instanceof e&&o.__type===r&&(n||o.isAttached())&&i.push(o);return i};E.$normalizeSelection__EXPERIMENTAL=Sh;E.$parseSerializedNode=function(e){return kh(e,xe()._nodes)};E.$selectAll=function(){var e=Sn();e=e.select(0,e.getChildrenSize()),xn(Sh(e))};E.$setCompositionKey=Ue;E.$setSelection=xn;E.$splitNode=o_;E.BLUR_COMMAND=Hx;E.CAN_REDO_COMMAND={};E.CAN_UNDO_COMMAND={};E.CLEAR_EDITOR_COMMAND={};E.CLEAR_HISTORY_COMMAND={};E.CLICK_COMMAND=Ex;E.COMMAND_PRIORITY_CRITICAL=4;E.COMMAND_PRIORITY_EDITOR=0;E.COMMAND_PRIORITY_HIGH=3;E.COMMAND_PRIORITY_LOW=1;E.COMMAND_PRIORITY_NORMAL=2;E.CONTROLLED_TEXT_INSERTION_COMMAND=Bi;E.COPY_COMMAND=gh;E.CUT_COMMAND=yh;E.DELETE_CHARACTER_COMMAND=$l;E.DELETE_LINE_COMMAND=Ll;E.DELETE_WORD_COMMAND=Rl;E.DEPRECATED_$computeGridMap=C_;E.DEPRECATED_$createGridSelection=function(){let e=new _n("root",0,"element"),t=new _n("root",0,"element");return new Gu("root",e,t)};E.DEPRECATED_$getGridCellNodeRect=Pf;E.DEPRECATED_$getNodeTriplet=N_;E.DEPRECATED_$isGridCellNode=Ft;E.DEPRECATED_$isGridNode=Lh;E.DEPRECATED_$isGridRowNode=zl;E.DEPRECATED_$isGridSelection=jh;E.DEPRECATED_GridCellNode=Rh;E.DEPRECATED_GridNode=j_;E.DEPRECATED_GridRowNode=P_;E.DRAGEND_COMMAND=Bx;E.DRAGOVER_COMMAND=zx;E.DRAGSTART_COMMAND=Fx;E.DROP_COMMAND=Dx;E.DecoratorNode=T_;E.ElementNode=si;E.FOCUS_COMMAND=Wx;E.FORMAT_ELEMENT_COMMAND={};E.FORMAT_TEXT_COMMAND=ir;E.INDENT_CONTENT_COMMAND={};E.INSERT_LINE_BREAK_COMMAND=nl;E.INSERT_PARAGRAPH_COMMAND=ff;E.INSERT_TAB_COMMAND={};E.KEY_ARROW_DOWN_COMMAND=$x;E.KEY_ARROW_LEFT_COMMAND=jx;E.KEY_ARROW_RIGHT_COMMAND=Ox;E.KEY_ARROW_UP_COMMAND=kx;E.KEY_BACKSPACE_COMMAND=Lx;E.KEY_DELETE_COMMAND=Mx;E.KEY_DOWN_COMMAND=Tx;E.KEY_ENTER_COMMAND=ka;E.KEY_ESCAPE_COMMAND=Ax;E.KEY_MODIFIER_COMMAND=Ux;E.KEY_SPACE_COMMAND=Rx;E.KEY_TAB_COMMAND=Ix;E.LineBreakNode=uo;E.MOVE_TO_END=bx;E.MOVE_TO_START=Px;E.OUTDENT_CONTENT_COMMAND={};E.PASTE_COMMAND=ph;E.ParagraphNode=go;E.REDO_COMMAND=mh;E.REMOVE_TEXT_COMMAND=pf;E.RootNode=mo;E.SELECTION_CHANGE_COMMAND=Du;E.SELECT_ALL_COMMAND=hf;E.TabNode=co;E.TextNode=oi;E.UNDO_COMMAND=hh;E.createCommand=function(){return{}};E.createEditor=function(e){var t=e||{},n=Ie,r=t.theme||{};let i=e===void 0?n:t.parentEditor||null,o=t.disableEvents||!1,l=$h(),s=t.namespace||(i!==null?i._config.namespace:t_()),a=t.editorState,u=[mo,oi,uo,co,go,...t.nodes||[]],f=t.onError;if(t=t.editable!==void 0?t.editable:!0,e===void 0&&n!==null)e=n._nodes;else for(e=new Map,n=0;n<u.length;n++){let p=u[n],h=null;var d=null;typeof p!="function"&&(d=p,p=d.replace,h=d.with,d=d.withKlass?d.withKlass:null);let m=p.getType(),g=p.transform(),_=new Set;g!==null&&_.add(g),e.set(m,{klass:p,replace:h,replaceWithKlass:d,transforms:_})}return r=new Eb(l,i,e,{disableEvents:o,namespace:s,theme:r},f||console.error,Nb(e),t),a!==void 0&&(r._pendingEditorState=a,r._dirtyType=2),r};E.getNearestEditorFromDOMNode=Ch;E.isHTMLAnchorElement=function(e){return Hu(e)&&e.tagName==="A"};E.isHTMLElement=Hu;E.isSelectionCapturedInDecoratorInput=wh;E.isSelectionWithinEditor=Xl;const Tb=E;var D=Tb,Ey=Wn,Vo=D,Wa=w;let k_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";var Ob=k_?Wa.useLayoutEffect:Wa.useEffect;let Ps={tag:"history-merge"};function bb(e,t){if(t!==null){if(t===void 0)e.update(()=>{var n=Vo.$getRoot();if(n.isEmpty()){let r=Vo.$createParagraphNode();n.append(r),n=k_?document.activeElement:null,(Vo.$getSelection()!==null||n!==null&&n===e.getRootElement())&&r.select()}},Ps);else if(t!==null)switch(typeof t){case"string":let n=e.parseEditorState(t);e.setEditorState(n,Ps);break;case"object":e.setEditorState(t,Ps);break;case"function":e.update(()=>{Vo.$getRoot().isEmpty()&&t(e)},Ps)}}}wx.LexicalComposer=function({initialConfig:e,children:t}){let n=Wa.useMemo(()=>{const{theme:r,namespace:i,editor__DEPRECATED:o,nodes:l,onError:s,editorState:a}=e,u=Ey.createLexicalComposerContext(null,r);let f=o||null;if(f===null){const d=Vo.createEditor({editable:e.editable,namespace:i,nodes:l,onError:p=>s(p,d),theme:r});bb(d,a),f=d}return[f,u]},[]);return Ob(()=>{let r=e.editable,[i]=n;i.setEditable(r!==void 0?r:!0)},[]),Wa.createElement(Ey.LexicalComposerContext.Provider,{value:n},t)};const jb=wx;var Pb=jb,$_={},kb=Wn,Ao=D,Ty=w,$b=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Ty.useLayoutEffect:Ty.useEffect;$_.ClearEditorPlugin=function({onClear:e}){let[t]=kb.useLexicalComposerContext();return $b(()=>t.registerCommand(Ao.CLEAR_EDITOR_COMMAND,()=>(t.update(()=>{if(e==null){let n=Ao.$getRoot(),r=Ao.$getSelection(),i=Ao.$createParagraphNode();n.clear(),n.append(i),r!==null&&i.select()}else e()}),!0),Ao.COMMAND_PRIORITY_EDITOR),[t,e]),null};const Rb=$_;var Lb=Rb,R_={},Ab=Wn,sl=w,Mb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?sl.useLayoutEffect:sl.useEffect;function Ib(e){let[t]=Ab.useLexicalComposerContext(),n=sl.useMemo(()=>e(t),[t,e]),r=sl.useRef(n.initialValueFn()),[i,o]=sl.useState(r.current);return Mb(()=>{let{initialValueFn:l,subscribe:s}=n,a=l();return r.current!==a&&(r.current=a,o(a)),s(u=>{r.current=u,o(u)})},[n,e]),i}function Db(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}var Fb=function(){return Ib(Db)};const zb=Fb;var Bb=zb,jr={},ot=D;function Ah(e,t=!0){return e?!1:(e=L_(),t&&(e=e.trim()),e==="")}function L_(){return ot.$getRoot().getTextContent()}function A_(e){if(!Ah(e,!1))return!1;e=ot.$getRoot().getChildren();let t=e.length;if(1<t)return!1;for(let r=0;r<t;r++){var n=e[r];if(ot.$isDecoratorNode(n))return!1;if(ot.$isElementNode(n)){if(!ot.$isParagraphNode(n)||n.__indent!==0)return!1;n=n.getChildren();let i=n.length;for(let o=0;o<i;o++)if(!ot.$isTextNode(n[r]))return!1}}return!0}jr.$canShowPlaceholder=A_;jr.$canShowPlaceholderCurry=function(e){return()=>A_(e)};jr.$findTextIntersectionFromCharacters=function(e,t){var n=e.getFirstChild();e=0;e:for(;n!==null;){if(ot.$isElementNode(n)){var r=n.getFirstChild();if(r!==null){n=r;continue}}else if(ot.$isTextNode(n)){if(r=n.getTextContentSize(),e+r>t)return{node:n,offset:t-e};e+=r}if(r=n.getNextSibling(),r!==null)n=r;else{for(n=n.getParent();n!==null;){if(r=n.getNextSibling(),r!==null){n=r;continue e}n=n.getParent()}break}}return null};jr.$isRootTextContentEmpty=Ah;jr.$isRootTextContentEmptyCurry=function(e,t){return()=>Ah(e,t)};jr.$rootTextContent=L_;jr.registerLexicalTextEntity=function(e,t,n,r){let i=l=>{const s=ot.$createTextNode(l.getTextContent());s.setFormat(l.getFormat()),l.replace(s)},o=e.registerNodeTransform(ot.TextNode,l=>{if(l.isSimpleText()){var s=l.getPreviousSibling(),a=l.getTextContent(),u=l;if(ot.$isTextNode(s)){var f=s.getTextContent(),d=t(f+a);if(s instanceof n){if(d===null||s.getLatest().__mode!==0){i(s);return}if(d=d.end-f.length,0<d){u=a.slice(0,d),u=f+u,s.select(),s.setTextContent(u),d===a.length?l.remove():(s=a.slice(d),l.setTextContent(s));return}}else if(d===null||d.start<f.length)return}for(;;){if(l=t(a),a=d=l===null?"":a.slice(l.end),d===""){if(f=u.getNextSibling(),ot.$isTextNode(f)){if(d=u.getTextContent()+f.getTextContent(),d=t(d),d===null){f instanceof n?i(f):f.markDirty();break}else if(d.start!==0)break}}else if(f=t(d),f!==null&&f.start===0)break;if(l===null)break;if(l.start===0&&ot.$isTextNode(s)&&s.isTextEntity())continue;let p;if(l.start===0?[p,u]=u.splitText(l.end):[,p,u]=u.splitText(l.start,l.end),l=r(p),l.setFormat(p.getFormat()),p.replace(l),u==null)break}}});return e=e.registerNodeTransform(n,l=>{var s=l.getTextContent();const a=t(s);a===null||a.start!==0?i(l):s.length>a.end?l.splitText(a.end):(s=l.getPreviousSibling(),ot.$isTextNode(s)&&s.isTextEntity()&&(i(s),i(l)),s=l.getNextSibling(),ot.$isTextNode(s)&&s.isTextEntity()&&(i(s),l instanceof n&&i(l)))}),[o,e]};const Wb=jr;var Hb=Wb,je={},ze={},I=D;let Ha=new Map;function Oy(e){for(;e!=null;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function by(e){let t=e.parentNode;if(t==null)throw Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(e)]}function M_(e){let t={};e=e.split(";");for(let n of e)if(n!==""){let[r,i]=n.split(/:([^]+)/);t[r.trim()]=i.trim()}return t}function Ua(e){let t=Ha.get(e);return t===void 0&&(t=M_(e),Ha.set(e,t)),t}function Ub(e){let t="";for(let n in e)n&&(t+=`${n}: ${e[n]};`);return t}function fi(e,t){var n=Ua("getStyle"in e?e.getStyle():e.style);t=Object.entries(t).reduce((r,[i,o])=>(o===null?delete r[i]:r[i]=o,r),{...n}),n=Ub(t),e.setStyle(n),Ha.set(n,t)}function I_(e,t){var n=e.getNodes(),r=n.length;if(I.DEPRECATED_$isGridSelection(e)){for(var i=I.$createRangeSelection(),o=i.anchor,l=i.focus,s=0;s<r;s++){var a=n[s];I.DEPRECATED_$isGridCellNode(a)&&(o.set(a.getKey(),0,"element"),l.set(a.getKey(),a.getChildrenSize(),"element"),I_(I.$normalizeSelection__EXPERIMENTAL(i),t))}I.$setSelection(e)}else if(--r,i=n[0],o=n[r],e.isCollapsed())fi(e,t);else{var u=e.anchor,f=e.focus;s=i.getTextContent().length,a=f.offset;var d=u.offset,p=u.isBefore(f);l=p?d:a,e=p?a:d;var h=p?u.type:f.type,m=p?f.type:u.type;if(u=p?f.key:u.key,I.$isTextNode(i)&&l===s&&(f=i.getNextSibling(),I.$isTextNode(f)&&(l=d=0,i=f)),n.length===1)I.$isTextNode(i)&&(l=h==="element"?0:d>a?a:d,e=m==="element"?s:d>a?d:a,l!==e&&(l===0&&e===s?(fi(i,t),i.select(l,e)):(n=i.splitText(l,e),n=l===0?n[0]:n[1],fi(n,t),n.select(0,e-l))));else for(I.$isTextNode(i)&&l<i.getTextContentSize()&&(l!==0&&(i=i.splitText(l)[1]),fi(i,t)),I.$isTextNode(o)&&(l=o.getTextContent().length,o.__key!==u&&e!==0&&(e=l),e!==l&&([o]=o.splitText(e)),e!==0&&fi(o,t)),e=1;e<r;e++)l=n[e],s=l.getKey(),I.$isTextNode(l)&&s!==i.getKey()&&s!==o.getKey()&&!l.isToken()&&fi(l,t)}}function Vb(e){for(;e!==null&&!I.$isRootOrShadowRoot(e);){let t=e.getLatest(),n=e.getParent();t.getChildrenSize()===0&&e.remove(!0),e=n}}function Jc(e,t,n,r,i=null){if(t.length!==0){var o=t[0],l=new Map,s=[];o=I.$isElementNode(o)?o:o.getParentOrThrow(),o.isInline()&&(o=o.getParentOrThrow());for(var a=!1;o!==null;){var u=o.getPreviousSibling();if(u!==null){o=u,a=!0;break}if(o=o.getParentOrThrow(),I.$isRootOrShadowRoot(o))break}u=new Set;for(var f=0;f<n;f++){var d=t[f];I.$isElementNode(d)&&d.getChildrenSize()===0&&u.add(d.getKey())}var p=new Set;for(f=0;f<n;f++){d=t[f];var h=d.getParent();if(h!==null&&h.isInline()&&(h=h.getParent()),h!==null&&I.$isLeafNode(d)&&!p.has(d.getKey())){if(d=h.getKey(),l.get(d)===void 0){let m=r();m.setFormat(h.getFormatType()),m.setIndent(h.getIndent()),s.push(m),l.set(d,m),h.getChildren().forEach(g=>{m.append(g),p.add(g.getKey()),I.$isElementNode(g)&&g.getChildrenKeys().forEach(_=>p.add(_))}),Vb(h)}}else u.has(d.getKey())&&(h=r(),h.setFormat(d.getFormatType()),h.setIndent(d.getIndent()),s.push(h),d.remove(!0))}if(i!==null)for(t=0;t<s.length;t++)i.append(s[t]);if(t=null,I.$isRootOrShadowRoot(o))if(a)if(i!==null)o.insertAfter(i);else for(i=s.length-1;0<=i;i--)o.insertAfter(s[i]);else if(a=o.getFirstChild(),I.$isElementNode(a)&&(o=a),a===null)if(i)o.append(i);else for(i=0;i<s.length;i++)a=s[i],o.append(a),t=a;else if(i!==null)a.insertBefore(i);else for(o=0;o<s.length;o++)i=s[o],a.insertBefore(i),t=i;else if(i)o.insertAfter(i);else for(i=s.length-1;0<=i;i--)a=s[i],o.insertAfter(a),t=a;s=I.$getPreviousSelection(),I.$isRangeSelection(s)&&s.anchor.getNode().isAttached()&&s.focus.getNode().isAttached()?I.$setSelection(s.clone()):t!==null?t.selectEnd():e.dirty=!0}}function D_(e,t,n,r){e.modify(t?"extend":"move",n,r)}function F_(e){return e=e.anchor.getNode(),(I.$isRootNode(e)?e:e.getParentOrThrow()).getDirection()==="rtl"}ze.$addNodeStyle=function(e){e=e.getStyle();let t=M_(e);Ha.set(e,t)};ze.$cloneWithProperties=function(e){let t=e.constructor.clone(e);return t.__parent=e.__parent,t.__next=e.__next,t.__prev=e.__prev,I.$isElementNode(e)&&I.$isElementNode(t)?(t.__first=e.__first,t.__last=e.__last,t.__size=e.__size,t.__format=e.__format,t.__indent=e.__indent,t.__dir=e.__dir,t):(I.$isTextNode(e)&&I.$isTextNode(t)&&(t.__format=e.__format,t.__style=e.__style,t.__mode=e.__mode,t.__detail=e.__detail),t)};ze.$getSelectionStyleValueForProperty=function(e,t,n=""){let r=null,i=e.getNodes();var o=e.anchor,l=e.focus,s=e.isBackward();let a=s?l.offset:o.offset;if(o=s?l.getNode():o.getNode(),e.style!==""&&(e=Ua(e.style),e!==null&&t in e))return e[t];for(e=0;e<i.length;e++){var u=i[e];if((e===0||a!==0||!u.is(o))&&I.$isTextNode(u)){if(l=t,s=n,u=u.getStyle(),u=Ua(u),l=u!==null&&u[l]||s,r===null)r=l;else if(r!==l){r="";break}}}return r===null?n:r};ze.$isAtNodeEnd=function(e){return e.type==="text"?e.offset===e.getNode().getTextContentSize():e.offset===e.getNode().getChildrenSize()};ze.$isParentElementRTL=F_;ze.$moveCaretSelection=D_;ze.$moveCharacter=function(e,t,n){let r=F_(e);D_(e,t,n?!r:r,"character")};ze.$patchStyleText=I_;ze.$selectAll=function(e){let t=e.anchor;e=e.focus;var n=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();let r=n.getFirstDescendant();n=n.getLastDescendant();let i="element",o="element",l=0;I.$isTextNode(r)?i="text":I.$isElementNode(r)||r===null||(r=r.getParentOrThrow()),I.$isTextNode(n)?(o="text",l=n.getTextContentSize()):I.$isElementNode(n)||n===null||(n=n.getParentOrThrow()),r&&n&&(t.set(r.getKey(),0,i),e.set(n.getKey(),l,o))};ze.$setBlocksType=function(e,t){if(e.anchor.key==="root"){t=t();var n=I.$getRoot();(e=n.getFirstChild())?e.replace(t,!0):n.append(t)}else for(n=e.getNodes(),e=e.anchor.getNode().getParentOrThrow(),n.indexOf(e)===-1&&n.push(e),e.isInline()&&(e=e.getParentOrThrow(),n.indexOf(e)===-1&&n.push(e)),e=0;e<n.length;e++){let o=n[e];var r=o;if(!I.$isElementNode(r)||I.$isRootOrShadowRoot(r))r=!1;else{var i=r.getFirstChild();i=i===null||I.$isLineBreakNode(i)||I.$isTextNode(i)||i.isInline(),r=!r.isInline()&&r.canBeEmpty()!==!1&&i}r&&(r=t(),r.setFormat(o.getFormatType()),r.setIndent(o.getIndent()),o.replace(r,!0))}};ze.$shouldOverrideDefaultCharacterSelection=function(e,t){return e=I.$getAdjacentNode(e.focus,t),I.$isDecoratorNode(e)&&!e.isIsolated()||I.$isElementNode(e)&&!e.isInline()&&!e.canBeEmpty()};ze.$sliceSelectedTextNodeContent=function(e,t){if(t.isSelected()&&!t.isSegmented()&&!t.isToken()&&(I.$isRangeSelection(e)||I.DEPRECATED_$isGridSelection(e))){var n=e.anchor.getNode(),r=e.focus.getNode(),i=t.is(n),o=t.is(r);if(i||o){i=e.isBackward();let[l,s]=e.getCharacterOffsets();e=n.is(r),o=t.is(i?r:n),r=t.is(i?n:r),n=0;let a;e?(n=l>s?s:l,a=l>s?l:s):o?(n=i?s:l,a=void 0):r&&(i=i?l:s,n=0,a=i),t.__text=t.__text.slice(n,a)}}return t};ze.$wrapNodes=function(e,t,n=null){var r=e.getNodes();let i=r.length;var o=e.anchor;if(i===0||i===1&&o.type==="element"&&o.getNode().getChildrenSize()===0){e=o.type==="text"?o.getNode().getParentOrThrow():o.getNode(),r=e.getChildren();let s=t();s.setFormat(e.getFormatType()),s.setIndent(e.getIndent()),r.forEach(a=>s.append(a)),n&&(s=n.append(s)),e.replace(s)}else{o=null;var l=[];for(let s=0;s<i;s++){let a=r[s];I.$isRootOrShadowRoot(a)?(Jc(e,l,l.length,t,n),l=[],o=a):o===null||o!==null&&I.$hasAncestor(a,o)?l.push(a):(Jc(e,l,l.length,t,n),l=[a])}Jc(e,l,l.length,t,n)}};ze.createDOMRange=function(e,t,n,r,i){let o=t.getKey(),l=r.getKey(),s=document.createRange(),a=e.getElementByKey(o);if(e=e.getElementByKey(l),I.$isTextNode(t)&&(a=Oy(a)),I.$isTextNode(r)&&(e=Oy(e)),t===void 0||r===void 0||a===null||e===null)return null;a.nodeName==="BR"&&([a,n]=by(a)),e.nodeName==="BR"&&([e,i]=by(e)),t=a.firstChild,a===e&&t!=null&&t.nodeName==="BR"&&n===0&&i===0&&(i=1);try{s.setStart(a,n),s.setEnd(e,i)}catch{return null}return!s.collapsed||n===i&&o===l||(s.setStart(e,i),s.setEnd(a,n)),s};ze.createRectsFromDOMRange=function(e,t){var n=e.getRootElement();if(n===null)return[];e=n.getBoundingClientRect(),n=getComputedStyle(n),n=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),t=Array.from(t.getClientRects());let r=t.length;t.sort((o,l)=>{let s=o.top-l.top;return 3>=Math.abs(s)?o.left-l.left:s});let i;for(let o=0;o<r;o++){let l=t[o],s=l.width+n===e.width;i&&i.top<=l.top&&i.top+i.height>l.top&&i.left+i.width>l.left||s?(t.splice(o--,1),r--):i=l}return t};ze.getStyleObjectFromCSS=Ua;ze.trimTextContentFromAnchor=function(e,t,n){let r=t.getNode();if(I.$isElementNode(r)){var i=r.getDescendantByIndex(t.offset);i!==null&&(r=i)}for(;0<n&&r!==null;){var o=r.getPreviousSibling(),l=0;if(o===null){i=r.getParentOrThrow();for(var s=i.getPreviousSibling();s===null;){if(i=i.getParent(),i===null){o=null;break}s=i.getPreviousSibling()}i!==null&&(l=i.isInline()?0:2,o=I.$isElementNode(s)?s.getLastDescendant():s)}if(s=r.getTextContent(),s===""&&I.$isElementNode(r)&&!r.isInline()&&(s=`

`),i=s.length,!I.$isTextNode(r)||n>=i)s=r.getParent(),r.remove(),s==null||s.getChildrenSize()!==0||I.$isRootNode(s)||s.remove(),n-=i+l,r=o;else{let a=r.getKey();l=e.getEditorState().read(()=>{const f=I.$getNodeByKey(a);return I.$isTextNode(f)&&f.isSimpleText()?f.getTextContent():null}),o=i-n;let u=s.slice(0,o);l!==null&&l!==s?(n=I.$getPreviousSelection(),i=r,r.isSimpleText()?r.setTextContent(l):(i=I.$createTextNode(l),r.replace(i)),I.$isRangeSelection(n)&&n.isCollapsed()&&(n=n.anchor.offset,i.select(n,n))):r.isSimpleText()?(l=t.key===a,s=t.offset,s<n&&(s=i),n=l?s-n:0,i=l?s:o,l&&n===0?([n]=r.splitText(n,i),n.remove()):([,n]=r.splitText(n,i),n.remove())):(n=I.$createTextNode(u),r.replace(n)),n=0}}};const Kb=ze;var Qu=Kb,Gb=Qu,Ce=D;function Yb(e){let t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function z_(e,t){for(let n of t)if(e.type.startsWith(n))return!0;return!1}function B_(e,t){for(;e!==Ce.$getRoot()&&e!=null;){if(t(e))return e;e=e.getParent()}return null}je.$splitNode=Ce.$splitNode;je.isHTMLAnchorElement=Ce.isHTMLAnchorElement;je.isHTMLElement=Ce.isHTMLElement;je.$dfs=function(e,t){let n=[];e=(e||Ce.$getRoot()).getLatest(),t=t||(Ce.$isElementNode(e)?e.getLastDescendant():e);for(var r=e,i=0;(r=r.getParent())!==null;)i++;for(r=i;e!==null&&!e.is(t);)if(n.push({depth:r,node:e}),Ce.$isElementNode(e)&&0<e.getChildrenSize())e=e.getFirstChild(),r++;else for(i=null;i===null&&e!==null;)i=e.getNextSibling(),i===null?(e=e.getParent(),r--):e=i;return e!==null&&e.is(t)&&n.push({depth:r,node:e}),n};je.$filter=function(e,t){let n=[];for(let r=0;r<e.length;r++){let i=t(e[r]);i!==null&&n.push(i)}return n};je.$findMatchingParent=B_;je.$getNearestBlockElementAncestorOrThrow=function(e){let t=B_(e,n=>Ce.$isElementNode(n)&&!n.isInline());return Ce.$isElementNode(t)||Yb(4,e.__key),t};je.$getNearestNodeOfType=function(e,t){for(;e!=null;){if(e instanceof t)return e;e=e.getParent()}return null};je.$insertFirst=function(e,t){let n=e.getFirstChild();n!==null?n.insertBefore(t):e.append(t)};je.$insertNodeToNearestRoot=function(e){var t=Ce.$getSelection()||Ce.$getPreviousSelection();if(Ce.$isRangeSelection(t)){var{focus:n}=t;if(t=n.getNode(),n=n.offset,Ce.$isRootOrShadowRoot(t))n=t.getChildAtIndex(n),n==null?t.append(e):n.insertBefore(e),e.selectNext();else{let r,i;Ce.$isTextNode(t)?(r=t.getParentOrThrow(),i=t.getIndexWithinParent(),0<n&&(i+=1,t.splitText(n))):(r=t,i=n),[,t]=Ce.$splitNode(r,i),t.insertBefore(e),t.selectStart()}}else Ce.$isNodeSelection(t)||Ce.DEPRECATED_$isGridSelection(t)?(t=t.getNodes(),t[t.length-1].getTopLevelElementOrThrow().insertAfter(e)):Ce.$getRoot().append(e),t=Ce.$createParagraphNode(),e.insertAfter(t),t.select();return e.getLatest()};je.$restoreEditorState=function(e,t){let n=new Map,r=e._pendingEditorState;for(let[i,o]of t._nodeMap){let l=Gb.$cloneWithProperties(o);Ce.$isTextNode(l)&&(l.__text=o.__text),n.set(i,l)}r&&(r._nodeMap=n),e._dirtyType=2,e=t._selection,Ce.$setSelection(e===null?null:e.clone())};je.$wrapNodeInElement=function(e,t){return t=t(),e.replace(t),t.append(e),t};je.addClassNamesToElement=function(e,...t){t.forEach(n=>{typeof n=="string"&&(n=n.split(" ").filter(r=>r!==""),e.classList.add(...n))})};je.isMimeType=z_;je.mediaFileReader=function(e,t){let n=e[Symbol.iterator]();return new Promise((r,i)=>{let o=[],l=()=>{const{done:s,value:a}=n.next();if(s)return r(o);const u=new FileReader;u.addEventListener("error",i),u.addEventListener("load",()=>{const f=u.result;typeof f=="string"&&o.push({file:a,result:f}),l()}),z_(a,t)?u.readAsDataURL(a):l()};l()})};je.mergeRegister=function(...e){return()=>{e.forEach(t=>t())}};je.objectKlassEquals=function(e,t){return e!==null?Object.getPrototypeOf(e).constructor.name===t.name:!1};je.registerNestedElementResolver=function(e,t,n,r){return e.registerNodeTransform(t,i=>{e:{for(var o=i.getChildren(),l=0;l<o.length;l++)if(o[l]instanceof t){o=null;break e}for(o=i;o!==null;)if(l=o,o=o.getParent(),o instanceof t){o={child:l,parent:o};break e}o=null}if(o!==null){const{child:s,parent:a}=o;if(s.is(i)){if(r(a,i),i=s.getNextSiblings(),o=i.length,a.insertAfter(s),o!==0){l=n(a),s.insertAfter(l);for(let u=0;u<o;u++)l.append(i[u])}a.canBeEmpty()||a.getChildrenSize()!==0||a.remove()}}})};je.removeClassNamesFromElement=function(e,...t){t.forEach(n=>{typeof n=="string"&&e.classList.remove(...n.split(" "))})};const Qb=je;var ns=Qb,W_={},ks=D;W_.registerDragonSupport=function(e){let t=window.location.origin,n=r=>{if(r.origin===t){var i=e.getRootElement();if(document.activeElement===i&&(i=r.data,typeof i=="string")){try{var o=JSON.parse(i)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"&&(o=o.payload)&&o.functionId==="makeChanges"&&(o=o.args)){const[l,s,a,u,f]=o;e.update(()=>{const d=ks.$getSelection();if(ks.$isRangeSelection(d)){var p=d.anchor;let h=p.getNode(),m=0,g=0;ks.$isTextNode(h)&&0<=l&&0<=s&&(m=l,g=l+s,d.setTextNodeRange(h,m,h,g)),(m!==g||a!=="")&&(d.insertRawText(a),h=p.getNode()),ks.$isTextNode(h)&&(m=u,g=u+f,p=h.getTextContentSize(),m=m>p?p:m,g=g>p?p:g,d.setTextNodeRange(h,m,h,g)),r.stopImmediatePropagation()}})}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}};const Jb=W_;var qb=Jb,H_={},Un={},Mh={},jy=Qu,Xb=ns,ji=D;function U_(e,t,n,r=null){let i=r!=null?t.isSelected(r):!0,o=ji.$isElementNode(t)&&t.excludeFromCopy("html");var l=t;r!==null&&(l=jy.$cloneWithProperties(t),l=ji.$isTextNode(l)&&r!=null?jy.$sliceSelectedTextNodeContent(r,l):l);let s=ji.$isElementNode(l)?l.getChildren():[],{element:a,after:u}=l.exportDOM(e);if(!a)return!1;let f=document.createDocumentFragment();for(let d=0;d<s.length;d++){let p=s[d],h=U_(e,p,f,r);!i&&ji.$isElementNode(t)&&h&&t.extractWithChild(p,r,"html")&&(i=!0)}return i&&!o?(Xb.isHTMLElement(a)&&a.append(f),n.append(a),u&&(e=u.call(l,a))&&a.replaceWith(e)):n.append(f),i}let V_=new Set(["STYLE","SCRIPT"]);function K_(e,t,n=new Map,r){let i=[];if(V_.has(e.nodeName))return i;let o=null;var l,{nodeName:s}=e,a=t._htmlConversions.get(s.toLowerCase());if(s=null,a!==void 0)for(l of a)a=l(e),a!==null&&(s===null||s.priority<a.priority)&&(s=a);if(s=(l=s!==null?s.conversion:null)?l(e):null,l=null,s!==null){if(l=s.after,a=s.node,o=Array.isArray(a)?a[a.length-1]:a,o!==null){for(var[,u]of n)if(o=u(o,r),!o)break;o&&i.push(...Array.isArray(a)?a:[o])}s.forChild!=null&&n.set(e.nodeName,s.forChild)}for(e=e.childNodes,r=[],u=0;u<e.length;u++)r.push(...K_(e[u],t,new Map(n),o));return l!=null&&(r=l(r)),o==null?i=i.concat(r):ji.$isElementNode(o)&&o.append(...r),i}Mh.$generateHtmlFromNodes=function(e,t){if(typeof document>"u"||typeof window>"u")throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let n=document.createElement("div"),r=ji.$getRoot().getChildren();for(let i=0;i<r.length;i++)U_(e,r[i],n,t);return n.innerHTML};Mh.$generateNodesFromDOM=function(e,t){t=t.body?t.body.childNodes:[];let n=[];for(let i=0;i<t.length;i++){var r=t[i];V_.has(r.nodeName)||(r=K_(r,e),r!==null&&(n=n.concat(r)))}return n};const Zb=Mh;var e3=Zb,G_=e3,Rf=Qu,Hi=ns,B=D;function Pn(e){let t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let Y_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Q_(e){let t=B.$getSelection();if(t==null)throw Error("Expected valid LexicalSelection");return B.$isRangeSelection(t)&&t.isCollapsed()||t.getNodes().length===0?"":G_.$generateHtmlFromNodes(e,t)}function J_(e){let t=B.$getSelection();if(t==null)throw Error("Expected valid LexicalSelection");return B.$isRangeSelection(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(X_(e,t))}function Lf(e,t,n){(B.DEPRECATED_$isGridSelection(n)||Hi.$findMatchingParent(n.anchor.getNode(),r=>B.DEPRECATED_$isGridCellNode(r))!==null&&Hi.$findMatchingParent(n.focus.getNode(),r=>B.DEPRECATED_$isGridCellNode(r))!==null)&&t.length===1&&B.DEPRECATED_$isGridNode(t[0])?n3(t,n,!1,e):t3(t,n)}function t3(e,t){let n=[],r=null;for(let i=0;i<e.length;i++){let o=e[i],l=B.$isLineBreakNode(o);if(l||B.$isDecoratorNode(o)&&o.isInline()||B.$isElementNode(o)&&o.isInline()||B.$isTextNode(o)||o.isParentRequired()){if(r===null&&(r=o.createParentElementNode(),n.push(r),l))continue;r!==null&&r.append(o)}else n.push(o),r=null}B.$isRangeSelection(t)?t.insertNodes(n):B.DEPRECATED_$isGridSelection(t)&&(e=t.anchor.getNode(),B.DEPRECATED_$isGridCellNode(e)||Pn(41),e.append(...n))}function n3(e,t,n,r){e.length===1&&B.DEPRECATED_$isGridNode(e[0])||Pn(42);var i=e[0];e=i.getChildren(),n=i.getFirstChildOrThrow().getChildrenSize();var o=i.getChildrenSize(),l=Hi.$findMatchingParent(t.anchor.getNode(),h=>B.DEPRECATED_$isGridCellNode(h));t=(i=l&&Hi.$findMatchingParent(l,h=>B.DEPRECATED_$isGridRowNode(h)))&&Hi.$findMatchingParent(i,h=>B.DEPRECATED_$isGridNode(h)),B.DEPRECATED_$isGridCellNode(l)&&B.DEPRECATED_$isGridRowNode(i)&&B.DEPRECATED_$isGridNode(t)||Pn(43);var s=i.getIndexWithinParent(),a=Math.min(t.getChildrenSize()-1,s+o-1);o=l.getIndexWithinParent(),l=Math.min(i.getChildrenSize()-1,o+n-1),n=Math.min(o,l),i=Math.min(s,a),o=Math.max(o,l),s=Math.max(s,a),a=t.getChildren(),l=0;let u,f;for(let h=i;h<=s;h++){var d=a[h];B.DEPRECATED_$isGridRowNode(d)||Pn(24);var p=e[l];B.DEPRECATED_$isGridRowNode(p)||Pn(24),d=d.getChildren(),p=p.getChildren();let m=0;for(let g=n;g<=o;g++){let _=d[g];B.DEPRECATED_$isGridCellNode(_)||Pn(25);let v=p[m];B.DEPRECATED_$isGridCellNode(v)||Pn(25),h===i&&g===n?u=_.getKey():h===s&&g===o&&(f=_.getKey());let y=_.getChildren();v.getChildren().forEach(x=>{B.$isTextNode(x)&&B.$createParagraphNode().append(x),_.append(x)}),y.forEach(x=>x.remove()),m++}l++}u&&f&&(e=B.DEPRECATED_$createGridSelection(),e.set(t.getKey(),u,f),B.$setSelection(e),r.dispatchCommand(B.SELECTION_CHANGE_COMMAND,void 0))}function q_(e,t,n,r=[]){let i=t!=null?n.isSelected(t):!0,o=B.$isElementNode(n)&&n.excludeFromCopy("html");var l=n;if(t!==null){var s=Rf.$cloneWithProperties(n);l=s=B.$isTextNode(s)&&t!=null?Rf.$sliceSelectedTextNodeContent(t,s):s}let a=B.$isElementNode(l)?l.getChildren():[];var u=l;s=u.exportJSON();var f=u.constructor;s.type!==f.getType()&&Pn(58,f.name);let d=s.children;for(B.$isElementNode(u)&&(Array.isArray(d)||Pn(59,f.name)),B.$isTextNode(l)&&(l=l.__text,0<l.length?s.text=l:i=!1),l=0;l<a.length;l++)u=a[l],f=q_(e,t,u,s.children),!i&&B.$isElementNode(n)&&f&&n.extractWithChild(u,t,"clone")&&(i=!0);if(i&&!o)r.push(s);else if(Array.isArray(s.children))for(e=0;e<s.children.length;e++)r.push(s.children[e]);return i}function X_(e,t){let n=[],r=B.$getRoot().getChildren();for(let i=0;i<r.length;i++)q_(e,t,r[i],n);return{namespace:e._config.namespace,nodes:n}}function Z_(e){let t=[];for(let n=0;n<e.length;n++){let r=B.$parseSerializedNode(e[n]);B.$isTextNode(r)&&Rf.$addNodeStyle(r),t.push(r)}return t}let pi=null;function Py(e,t){var n=Y_?(e._window||window).getSelection():null;if(!n)return!1;var r=n.anchorNode;if(n=n.focusNode,r!==null&&n!==null&&!B.isSelectionWithinEditor(e,r,n)||(t.preventDefault(),t=t.clipboardData,r=B.$getSelection(),t===null||r===null))return!1;n=Q_(e),e=J_(e);let i="";return r!==null&&(i=r.getTextContent()),n!==null&&t.setData("text/html",n),e!==null&&t.setData("application/x-lexical-editor",e),t.setData("text/plain",i),!0}Un.$generateJSONFromSelectedNodes=X_;Un.$generateNodesFromSerializedNodes=Z_;Un.$getHtmlContent=Q_;Un.$getLexicalContent=J_;Un.$insertDataTransferForPlainText=function(e,t){e=e.getData("text/plain")||e.getData("text/uri-list"),e!=null&&t.insertRawText(e)};Un.$insertDataTransferForRichText=function(e,t,n){var r=e.getData("application/x-lexical-editor");if(r)try{let l=JSON.parse(r);if(l.namespace===n._config.namespace&&Array.isArray(l.nodes)){let s=Z_(l.nodes);return Lf(n,s,t)}}catch{}if(r=e.getData("text/html"))try{var i=new DOMParser().parseFromString(r,"text/html"),o=G_.$generateNodesFromDOM(n,i);return Lf(n,o,t)}catch{}if(e=e.getData("text/plain")||e.getData("text/uri-list"),e!=null)if(B.$isRangeSelection(t))for(e=e.split(/(\r?\n|\t)/),n=e.length,i=0;i<n;i++)o=e[i],o===`
`||o===`\r
`?t.insertParagraph():o==="	"?t.insertNodes([B.$createTabNode()]):t.insertText(o);else t.insertRawText(e)};Un.$insertGeneratedNodes=Lf;Un.copyToClipboard=async function(e,t){if(pi!==null)return!1;if(t!==null)return new Promise(l=>{e.update(()=>{l(Py(e,t))})});var n=e.getRootElement();let r=e._window==null?window.document:e._window.document,i=Y_?(e._window||window).getSelection():null;if(n===null||i===null)return!1;let o=r.createElement("span");return o.style.cssText="position: fixed; top: -1000px;",o.append(r.createTextNode("#")),n.append(o),n=new Range,n.setStart(o,0),n.setEnd(o,1),i.removeAllRanges(),i.addRange(n),new Promise(l=>{let s=e.registerCommand(B.COPY_COMMAND,a=>(Hi.objectKlassEquals(a,ClipboardEvent)&&(s(),pi!==null&&(window.clearTimeout(pi),pi=null),l(Py(e,a))),!0),B.COMMAND_PRIORITY_CRITICAL);pi=window.setTimeout(()=>{s(),pi=null,l(!1)},50),r.execCommand("copy"),o.remove()})};const r3=Un;var i3=r3,Ih=i3,$s=Qu,o3=ns,P=D;let yo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",l3=yo&&"documentMode"in document?document.documentMode:null,s3=yo&&"InputEvent"in window&&!l3?"getTargetRanges"in new window.InputEvent("input"):!1,a3=yo&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),u3=yo&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,c3=yo&&/^(?=.*Chrome).*/i.test(navigator.userAgent),d3=yo&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!c3;function eS(e,t){t.update(()=>{if(e!==null){let n=e instanceof KeyboardEvent?null:e.clipboardData,r=P.$getSelection();if(r!==null&&n!=null){e.preventDefault();let i=Ih.$getHtmlContent(t);i!==null&&n.setData("text/html",i),n.setData("text/plain",r.getTextContent())}}})}function f3(e,t){e.preventDefault(),t.update(()=>{let n=P.$getSelection(),{clipboardData:r}=e;r!=null&&P.$isRangeSelection(n)&&Ih.$insertDataTransferForPlainText(r,n)},{tag:"paste"})}function p3(e,t){eS(e,t),t.update(()=>{let n=P.$getSelection();P.$isRangeSelection(n)&&n.removeText()})}H_.registerPlainText=function(e){return o3.mergeRegister(e.registerCommand(P.DELETE_CHARACTER_COMMAND,t=>{const n=P.$getSelection();return P.$isRangeSelection(n)?(n.deleteCharacter(t),!0):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.DELETE_WORD_COMMAND,t=>{const n=P.$getSelection();return P.$isRangeSelection(n)?(n.deleteWord(t),!0):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.DELETE_LINE_COMMAND,t=>{const n=P.$getSelection();return P.$isRangeSelection(n)?(n.deleteLine(t),!0):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.CONTROLLED_TEXT_INSERTION_COMMAND,t=>{const n=P.$getSelection();if(!P.$isRangeSelection(n))return!1;if(typeof t=="string")n.insertText(t);else{const r=t.dataTransfer;r!=null?Ih.$insertDataTransferForPlainText(r,n):(t=t.data)&&n.insertText(t)}return!0},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.REMOVE_TEXT_COMMAND,()=>{const t=P.$getSelection();return P.$isRangeSelection(t)?(t.removeText(),!0):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.INSERT_LINE_BREAK_COMMAND,t=>{const n=P.$getSelection();return P.$isRangeSelection(n)?(n.insertLineBreak(t),!0):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.INSERT_PARAGRAPH_COMMAND,()=>{const t=P.$getSelection();return P.$isRangeSelection(t)?(t.insertLineBreak(),!0):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.KEY_ARROW_LEFT_COMMAND,t=>{const n=P.$getSelection();if(!P.$isRangeSelection(n))return!1;const r=t.shiftKey;return $s.$shouldOverrideDefaultCharacterSelection(n,!0)?(t.preventDefault(),$s.$moveCharacter(n,r,!0),!0):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.KEY_ARROW_RIGHT_COMMAND,t=>{const n=P.$getSelection();if(!P.$isRangeSelection(n))return!1;const r=t.shiftKey;return $s.$shouldOverrideDefaultCharacterSelection(n,!1)?(t.preventDefault(),$s.$moveCharacter(n,r,!1),!0):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.KEY_BACKSPACE_COMMAND,t=>{const n=P.$getSelection();return P.$isRangeSelection(n)?(t.preventDefault(),e.dispatchCommand(P.DELETE_CHARACTER_COMMAND,!0)):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.KEY_DELETE_COMMAND,t=>{const n=P.$getSelection();return P.$isRangeSelection(n)?(t.preventDefault(),e.dispatchCommand(P.DELETE_CHARACTER_COMMAND,!1)):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.KEY_ENTER_COMMAND,t=>{const n=P.$getSelection();if(!P.$isRangeSelection(n))return!1;if(t!==null){if((u3||a3||d3)&&s3)return!1;t.preventDefault()}return e.dispatchCommand(P.INSERT_LINE_BREAK_COMMAND,!1)},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.SELECT_ALL_COMMAND,()=>(P.$selectAll(),!0),P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.COPY_COMMAND,t=>{const n=P.$getSelection();return P.$isRangeSelection(n)?(eS(t,e),!0):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.CUT_COMMAND,t=>{const n=P.$getSelection();return P.$isRangeSelection(n)?(p3(t,e),!0):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.PASTE_COMMAND,t=>{const n=P.$getSelection();return P.$isRangeSelection(n)?(f3(t,e),!0):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.DROP_COMMAND,t=>{const n=P.$getSelection();return P.$isRangeSelection(n)?(t.preventDefault(),!0):!1},P.COMMAND_PRIORITY_EDITOR),e.registerCommand(P.DRAGSTART_COMMAND,t=>{const n=P.$getSelection();return P.$isRangeSelection(n)?(t.preventDefault(),!0):!1},P.COMMAND_PRIORITY_EDITOR))};const h3=H_;var m3=h3,tS=Wn,g3=Bb,zt=w,y3=Hb,nS=ns,ky=Mp,v3=qb,x3=m3,Dh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?zt.useLayoutEffect:zt.useEffect;function $y(e){return e.getEditorState().read(y3.$canShowPlaceholderCurry(e.isComposing()))}function _3(e){let[t,n]=zt.useState(()=>$y(e));return Dh(()=>{function r(){let i=$y(e);n(i)}return r(),nS.mergeRegister(e.registerUpdateListener(()=>{r()}),e.registerEditableListener(()=>{r()}))},[e]),t}function S3(e,t){let[n,r]=zt.useState(()=>e.getDecorators());return Dh(()=>e.registerDecoratorListener(i=>{ky.flushSync(()=>{r(i)})}),[e]),zt.useEffect(()=>{r(e.getDecorators())},[e]),zt.useMemo(()=>{let i=[],o=Object.keys(n);for(let l=0;l<o.length;l++){let s=o[l],a=zt.createElement(t,{onError:f=>e._onError(f)},zt.createElement(zt.Suspense,{fallback:null},n[s])),u=e.getElementByKey(s);u!==null&&i.push(ky.createPortal(a,u,s))}return i},[t,n,e])}function w3(e){Dh(()=>nS.mergeRegister(x3.registerPlainText(e),v3.registerDragonSupport(e)),[e])}function C3({content:e}){var[t]=tS.useLexicalComposerContext();t=_3(t);let n=g3();return t?typeof e=="function"?e(n):e:null}R_.PlainTextPlugin=function({contentEditable:e,placeholder:t,ErrorBoundary:n}){let[r]=tS.useLexicalComposerContext();return n=S3(r,n),w3(r),zt.createElement(zt.Fragment,null,e,zt.createElement(C3,{content:t}),n)};const N3=R_;var E3=N3,rS={},T3=Wn,al=w;function Af(){return Af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t],r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Af.apply(this,arguments)}var O3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?al.useLayoutEffect:al.useEffect;rS.ContentEditable=function({ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:n,ariaDescribedBy:r,ariaExpanded:i,ariaLabel:o,ariaLabelledBy:l,ariaMultiline:s,ariaOwns:a,ariaRequired:u,autoCapitalize:f,className:d,id:p,role:h="textbox",spellCheck:m=!0,style:g,tabIndex:_,"data-testid":v,...y}){let[x]=T3.useLexicalComposerContext(),[S,C]=al.useState(!1),T=al.useCallback(N=>{x.setRootElement(N)},[x]);return O3(()=>(C(x.isEditable()),x.registerEditableListener(N=>{C(N)})),[x]),al.createElement("div",Af({},y,{"aria-activedescendant":S?e:void 0,"aria-autocomplete":S?t:"none","aria-controls":S?n:void 0,"aria-describedby":r,"aria-expanded":S&&h==="combobox"?!!i:void 0,"aria-label":o,"aria-labelledby":l,"aria-multiline":s,"aria-owns":S?a:void 0,"aria-readonly":S?void 0:!0,"aria-required":u,autoCapitalize:f,className:d,contentEditable:S,"data-testid":v,id:p,ref:T,role:h,spellCheck:m,style:g,tabIndex:_}))};const b3=rS;var j3=b3,Fh={},zh={},P3=ns,re=D;function k3(e,t,n,r,i){if(e===null||n.size===0&&r.size===0&&!i)return 0;var o=t._selection,l=e._selection;if(i)return 1;if(!(re.$isRangeSelection(o)&&re.$isRangeSelection(l)&&l.isCollapsed()&&o.isCollapsed()))return 0;i=t._nodeMap;let s=[];for(let a of n)n=i.get(a),n!==void 0&&s.push(n);for(let[a,u]of r)u&&(r=i.get(a),r===void 0||re.$isRootNode(r)||s.push(r));return s.length===0?0:1<s.length?(r=t._nodeMap,t=r.get(o.anchor.key),l=r.get(l.anchor.key),t&&l&&!e._nodeMap.has(t.__key)&&re.$isTextNode(t)&&t.__text.length===1&&o.anchor.offset===1?2:0):(t=s[0],e=e._nodeMap.get(t.__key),!re.$isTextNode(e)||!re.$isTextNode(t)||e.__mode!==t.__mode||(e=e.__text,t=t.__text,e===t)||(o=o.anchor,l=l.anchor,o.key!==l.key||o.type!=="text")?0:(o=o.offset,l=l.offset,e=t.length-e.length,e===1&&l===o-1?2:e===-1&&l===o+1?3:e===-1&&l===o?4:0))}function $3(e,t){let n=Date.now(),r=0;return(i,o,l,s,a,u)=>{let f=Date.now();if(u.has("historic"))return r=0,n=f,2;let d=k3(i,o,s,a,e.isComposing()),p=(()=>{var h=l===null||l.editor===e,m=u.has("history-push");if(!m&&h&&u.has("history-merge"))return 0;if(i===null)return 1;var g=o._selection;if(!(0<s.size||0<a.size))return g!==null?0:2;if(m===!1&&d!==0&&d===r&&f<n+t&&h)return 0;if(s.size===1){{m=Array.from(s)[0],h=i._nodeMap.get(m),m=o._nodeMap.get(m),g=i._selection;let _=o._selection,v=!1;re.$isRangeSelection(g)&&re.$isRangeSelection(_)&&(v=g.anchor.type==="element"&&g.focus.type==="element"&&_.anchor.type==="text"&&_.focus.type==="text"),h=!v&&re.$isTextNode(h)&&re.$isTextNode(m)?h.__type===m.__type&&h.__text===m.__text&&h.__mode===m.__mode&&h.__detail===m.__detail&&h.__style===m.__style&&h.__format===m.__format&&h.__parent===m.__parent:!1}if(h)return 0}return 1})();return n=f,r=d,p}}zh.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]}};zh.registerHistory=function(e,t,n){let r=$3(e,n);n=({editorState:l,prevEditorState:s,dirtyLeaves:a,dirtyElements:u,tags:f})=>{const d=t.current,p=t.redoStack,h=t.undoStack,m=d===null?null:d.editorState;if(d===null||l!==m){if(s=r(s,l,d,a,u,f),s===1)p.length!==0&&(t.redoStack=[],e.dispatchCommand(re.CAN_REDO_COMMAND,!1)),d!==null&&(h.push({...d}),e.dispatchCommand(re.CAN_UNDO_COMMAND,!0));else if(s===2)return;t.current={editor:e,editorState:l}}};let i=P3.mergeRegister(e.registerCommand(re.UNDO_COMMAND,()=>{let l=t.redoStack,s=t.undoStack;if(s.length!==0){let a=t.current,u=s.pop();a!==null&&(l.push(a),e.dispatchCommand(re.CAN_REDO_COMMAND,!0)),s.length===0&&e.dispatchCommand(re.CAN_UNDO_COMMAND,!1),t.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:"historic"})}return!0},re.COMMAND_PRIORITY_EDITOR),e.registerCommand(re.REDO_COMMAND,()=>{let l=t.redoStack;var s=t.undoStack;if(l.length!==0){let a=t.current;a!==null&&(s.push(a),e.dispatchCommand(re.CAN_UNDO_COMMAND,!0)),s=l.pop(),l.length===0&&e.dispatchCommand(re.CAN_REDO_COMMAND,!1),t.current=s||null,s&&s.editor.setEditorState(s.editorState,{tag:"historic"})}return!0},re.COMMAND_PRIORITY_EDITOR),e.registerCommand(re.CLEAR_EDITOR_COMMAND,()=>(t.undoStack=[],t.redoStack=[],t.current=null,!1),re.COMMAND_PRIORITY_EDITOR),e.registerCommand(re.CLEAR_HISTORY_COMMAND,()=>(t.undoStack=[],t.redoStack=[],t.current=null,e.dispatchCommand(re.CAN_REDO_COMMAND,!1),e.dispatchCommand(re.CAN_UNDO_COMMAND,!1),!0),re.COMMAND_PRIORITY_EDITOR),e.registerUpdateListener(n)),o=e.registerUpdateListener(n);return()=>{i(),o()}};const R3=zh;var L3=R3,A3=Wn,Mf=L3,Ry=w;function M3(e,t,n=1e3){let r=Ry.useMemo(()=>t||Mf.createEmptyHistoryState(),[t]);Ry.useEffect(()=>Mf.registerHistory(e,r,n),[n,e,r])}Fh.createEmptyHistoryState=Mf.createEmptyHistoryState;Fh.HistoryPlugin=function({externalHistoryState:e}){let[t]=A3.useLexicalComposerContext();return M3(t,e),null};const I3=Fh;var D3=I3,iS={},F3=Wn,Ly=w,z3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Ly.useLayoutEffect:Ly.useEffect;iS.OnChangePlugin=function({ignoreHistoryMergeTagChange:e=!0,ignoreSelectionChange:t=!1,onChange:n}){let[r]=F3.useLexicalComposerContext();return z3(()=>{if(n)return r.registerUpdateListener(({editorState:i,dirtyElements:o,dirtyLeaves:l,prevEditorState:s,tags:a})=>{t&&o.size===0&&l.size===0||e&&a.has("history-merge")||s.isEmpty()||n(i,r,a)})},[r,e,t,n]),null};const B3=iS;var W3=B3,ul=w;function If(e,t){return If=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},If(e,t)}function H3(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,If(e,t)}function U3(e,t){return e===void 0&&(e=[]),t===void 0&&(t=[]),e.length!==t.length||e.some(function(n,r){return!Object.is(n,t[r])})}var Ay={error:null},V3=function(e){function t(){for(var r,i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=e.call.apply(e,[this].concat(o))||this,r.state=Ay,r.resetErrorBoundary=function(){for(var s,a=arguments.length,u=Array(a),f=0;f<a;f++)u[f]=arguments[f];r.props.onReset==null||(s=r.props).onReset.apply(s,u),r.reset()},r}H3(t,e),t.getDerivedStateFromError=function(r){return{error:r}};var n=t.prototype;return n.reset=function(){this.setState(Ay)},n.componentDidCatch=function(r,i){var o,l;(o=(l=this.props).onError)==null||o.call(l,r,i)},n.componentDidUpdate=function(r,i){var o=this.props.resetKeys;if(this.state.error!==null&&i.error!==null&&U3(r.resetKeys,o)){var l,s;(l=(s=this.props).onResetKeysChange)==null||l.call(s,r.resetKeys,o),this.reset()}},n.render=function(){var r=this.state.error,i=this.props,o=i.fallbackRender,l=i.FallbackComponent;if(i=i.fallback,r!==null){if(r={error:r,resetErrorBoundary:this.resetErrorBoundary},ul.isValidElement(i))return i;if(typeof o=="function")return o(r);if(l)return ul.createElement(l,r);throw Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(ul.Component),K3=function({children:e,onError:t}){return ul.createElement(V3,{fallback:ul.createElement("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"}},"An error was thrown."),onError:t},e)};const G3=K3;var Y3=G3;const Q3=no(Y3);class Ge extends D.ElementNode{constructor(n,r){super(n);Kh(this,"actionId");this.actionId=r}static getType(){return"action"}static clone(n){return new Ge(n.__key,n.actionId)}getActionId(){return this.actionId}createDOM(){const n=document.createElement("div");return n.className=`action paragraph action-${this.actionId??"prompt"}`,n}updateDOM(){return!1}static importJSON(n){const r=J3();return r.setFormat(n.format),r.setIndent(n.indent),r.setDirection(n.direction),r}exportJSON(){return{...super.exportJSON(),type:"paragraph",version:1}}isInline(){return!1}}function oS(e){return(e==null?void 0:e.getType())==="action"}function J3(e){return D.$applyNodeReplacement(new Ge(void 0,e))}class vo extends D.ElementNode{static getType(){return"story"}static clone(t){return new vo(t.__key)}createDOM(){const t=document.createElement("p");return t.className="story",t}isShadowRoot(){return!0}updateDOM(){return!1}static importJSON(t){const n=q3();return n.setFormat(t.format),n.setIndent(t.indent),n.setDirection(t.direction),n}exportJSON(){return{...super.exportJSON(),type:"paragraph",version:1}}isInline(){return!1}}function q3(){return D.$applyNodeReplacement(new vo)}function to(){return D.$nodesOfType(vo)[0]}function Df(e){return(e==null?void 0:e.getType())==="story"}const X3=e=>t=>{var a,u,f,d,p;const{koboldConfig:n,lastNodeCount:r,loadState:i}=Ee.getState().config;if((a=n.system)!=null&&a.aibusy)return;const o=((u=n.story)==null?void 0:u.actions)||[],l=o.filter(h=>h==null?void 0:h.action["Selected Text"].length),s=((p=(d=(f=n.story)==null?void 0:f.prompt_wi_highlighted_text)==null?void 0:d[0])==null?void 0:p.text)||"";t.read(()=>{var v;const h=D.$getSelection(),m=D.$nodesOfType(Ge).filter(y=>Df(y.getParent())),g=((v=h==null?void 0:h.getNodes()[0].getTopLevelElement())==null?void 0:v.getIndexWithinParent())||0,_=Math.max(g,0);typeof _<"u"&&[-1,1].forEach(y=>{var x,S,C,T;for(let N=_;N<Math.max(r,m.length)&&N>=0;N+=y){const b=N===_;if(y===-1&&b)continue;const z=m[N],L=((x=z==null?void 0:z.getLatest())==null?void 0:x.getTextContent())||"";if(N===0){if(!i.prompt)continue;if(L!==s){const{ownActions:G}=Ee.getState().config;Ee.dispatch(Pa([...G,{id:void 0,text:L,timestamp:Date.now()}])),e==null||e.varChange("story_prompt",L)}}else{if(!o.length)continue;const G=((S=l[N-1])==null?void 0:S.id)??(z==null?void 0:z.getActionId()),Be=(T=(C=l[N-1])==null?void 0:C.action)==null?void 0:T["Selected Text"];if(L.length&&L===Be&&!b)break;if(typeof Be<"u"&&L!==Be){const{ownActions:Yt}=Ee.getState().config;Ee.dispatch(Pa([...Yt,{id:G,text:L,timestamp:Date.now()}])),e==null||e.setSelectedText(G,L)}}}}),Ee.dispatch(h4(m.length))})};class rs extends D.ParagraphNode{static getType(){return"tempreinsert"}static clone(t){return new rs(t.__key)}createDOM(){const t=document.createElement("p");return t.className="action temp-action paragraph",t}updateDOM(){return!1}static importJSON(t){const n=lS();return n.setFormat(t.format),n.setIndent(t.indent),n.setDirection(t.direction),n}exportJSON(){return{...super.exportJSON(),type:"tempreinsert",version:1}}isInline(){return!0}exportDOM(t){const{element:n}=super.exportDOM(t);if(n instanceof HTMLElement){const r=this.getFormatType();n.style.textAlign=r;const i=this.getIndent();i>0&&(n.style.textIndent=`${i*20}px`)}return{element:n,after:r=>r}}}function lS(){return D.$applyNodeReplacement(new rs)}function Z3(e){return(e==null?void 0:e.getType())==="tempreinsert"}class xo extends D.ParagraphNode{static getType(){return"tempstream"}static clone(t){return new xo(t.__key)}createDOM(){const t=document.createElement("p");return t.className="action temp-action paragraph",t}updateDOM(){return!1}static importJSON(t){const n=sS();return n.setFormat(t.format),n.setIndent(t.indent),n.setDirection(t.direction),n}exportJSON(){return{...super.exportJSON(),type:"tempstream",version:1}}isInline(){return!0}exportDOM(t){const{element:n}=super.exportDOM(t);if(n instanceof HTMLElement){const r=this.getFormatType();n.style.textAlign=r;const i=this.getIndent();i>0&&(n.style.textIndent=`${i*20}px`)}return{element:n,after:r=>r}}}function sS(){return D.$applyNodeReplacement(new xo)}function ej(e){return(e==null?void 0:e.getType())==="tempstream"}const tj=()=>{const e=D.$nodesOfType(Ge),n=e.filter(i=>i.getTextContentSize()>0)[0]||e[0],r=to().getChildren().filter(i=>!oS(i)&&!Z3(i)&&!ej(i));r.length&&r.forEach(i=>{const o=i.getPreviousSiblings().filter(u=>u.getType()==="action"&&(u.getTextContentSize()||u.getIndexWithinParent()===0&&!D.$getRoot().getTextContentSize()))[0],l=i.getNextSiblings().filter(u=>u.getType()==="action"&&(u.getTextContentSize()||u.getIndexWithinParent()===0&&!D.$getRoot().getTextContentSize()))[0],s=i.getIndexWithinParent()<((n==null?void 0:n.getIndexWithinParent())||0),a=s?l:o;a==null||a.splice(s?0:a.getChildrenSize(),0,[i])})},nj=(e,t,n,r)=>{t.payload===!0&&e.update(()=>{var o;n(ah(!1));const{reinsertHistory:i}=Ee.getState().config;if(i!==null){const l=D.$createRangeSelection(),u=(i.anchor.isAction?to():to().getChildAtIndex(i.anchor.parentIdx)).getChildAtIndex(i.anchor.nodeIdx),f=!D.$isTextNode(u),d=u.getKey(),p=i.anchor.offset;(o=l==null?void 0:l.anchor)==null||o.set(d,p,f?"element":"text");const h=D.$nodesOfType(D.TextNode).pop();h&&l.focus.set(h.getKey(),h==null?void 0:h.getTextContentSize(),D.$isLineBreakNode(h)?"element":"text"),l.removeText(),n($u(i.reinsertQueue))}else r==null||r.retry()})},rj=(e,t)=>{var n,r;if(e.payload===!0){t(sh(!1));const i=D.$getSelection(),o=D.$nodesOfType(Ge).filter(s=>s.getTextContentSize()>0).pop(),l=o==null?void 0:o.getAllTextNodes().pop();if(l&&D.$isRangeSelection(i)){const s=i==null?void 0:i.clone(),a=i.anchor.getNode();s.setTextNodeRange(a,s.anchor.offset,l,l.getTextContentSize());const u=s.getNodes(),f=u.filter(y=>y.getType()==="text"),d=u.findIndex(y=>y.getType()==="text"),p=u.slice(0,d).filter(y=>y.getType()==="linebreak"),h=i==null?void 0:i.clone(),m=(n=a.getTopLevelElement())==null?void 0:n.getAllTextNodes().pop(),g=m.getNextSiblings();h.setTextNodeRange(a,h.anchor.offset,m,(m==null?void 0:m.getTextContentSize())||0);const _=h.getTextContent()+g.map(y=>y.getTextContent()).join(""),v=s.getNodes().reduce((y,x,S)=>{const C=x.getTopLevelElement();return(C==null?void 0:C.getType())==="action"?y.some(T=>T.key===C.getActionId())?y:[...y,{key:C.getActionId(),text:S===0?_:C.getTextContent()}]:y},[]);t(uh({reinsertQueue:v,anchor:{parentIdx:((r=a.getParent())==null?void 0:r.getIndexWithinParent())||0,nodeIdx:a.getIndexWithinParent(),offset:s.anchor.offset,isAction:oS(a)}})),p.length>0&&(p.forEach(y=>{y.remove()}),f.length>0&&s.setTextNodeRange(f[0],0,l,l.getTextContentSize())),s.removeText(),t($u(v))}}},ij=e=>{D.$nodesOfType(Ge).forEach((t,n)=>{n!==0&&t.remove()}),e(uh(null))},aS=(e,t)=>{const n=new Ge(void 0,e);n.append(new D.TextNode(t));const r=D.$nodesOfType(Ge).filter(i=>(i.getActionId()??0)<(e??0)).pop()||to().getFirstChild();return r==null||r.insertAfter(n),n},oj=(e,t,n,r,i)=>{var h,m,g,_,v;const{audioOutEnabled:o,koboldConfig:l,ghostpadConfig:s,utteranceStart:a}=Ee.getState().config,u=(h=l.story)==null?void 0:h.chatmode,f=(m=l.story)==null?void 0:m.chatname,d=(g=l.story)==null?void 0:g.botname,p=typeof((_=t.model)==null?void 0:_.numseqs)=="number"&&t.model.numseqs>1;if(e.payload.value===!0){const y=(((v=t.story)==null?void 0:v.actions)||[]).filter(x=>x.action["Selected Text"].length>0);if(i(Jg(y.length+1)),p){const x=y==null?void 0:y[y.length-1];i(me({name:"selectOption",data:{actionId:x?x.id+1:0}}))}r.setEditable(!1)}else{r.setEditable(!0);const y=D.$nodesOfType(Ge).filter(N=>N.getTextContentSize()>0),x=y.length-1,S=y[x],C=S==null?void 0:S.getActionId(),T=(S==null?void 0:S.getTextContent())||"";if(o&&a!==null&&x>=a){const N=u?T.replace(`${f}:`,"").replace(`${d}:`,""):T,b=new SpeechSynthesisUtterance(N);i(qg(!0));const L=typeof window<"u"&&"speechSynthesis"in window?speechSynthesis.getVoices():[];if(s!=null&&s.speechSynthesisVoice){const G=L.find(Be=>Be.voiceURI===s.speechSynthesisVoice);G&&(b.voice=G)}speechSynthesis.speak(b),b.addEventListener("end",()=>{i(qg(!1))})}if(i(Lu()),i(Jg(null)),n.length){const N=n[n.length-1].key;if(typeof C=="number"&&C>(N||0)){S==null||S.clear();const b=y.pop();b==null||b.append(new D.TextNode(T))}n.forEach(b=>{const z=D.$nodesOfType(Ge).find(L=>L.getActionId()===b.key);if(!z)aS(b.key,b.text);else{const L=new D.TextNode(b.text);z.append(L)}}),i($u([]))}else i(uh(null))}},Bh=e=>{const t=[],n=/(:?\r\n|\r|\n)/g;return e.split(n).forEach(i=>{if(i==="")return;if(n.test(i)){const l=D.$createLineBreakNode();t.push(l);return}const o=D.$createTextNode(i);t.push(o)}),t},lj=(e,t)=>{const n=e.payload.value,r=Array.isArray(n),i=r?n:[n];i.forEach(l=>{var _;const{ownActions:s}=Ee.getState().config,a=Number(l.id),u=s.findIndex(v=>{var y;return v.id===a&&v.text===((y=l.action)==null?void 0:y["Selected Text"])}),f=((_=l.action)==null?void 0:_["Selected Text"])||"",d=D.$nodesOfType(Ge).find(v=>{const y=Df(v.getParent()),x=v.getActionId()===a;return y&&x});if(!f||u>-1){if(f||d&&d.remove(),u>-1){const v=[...s];v.splice(u,1),Ee.dispatch(Pa(v))}return}const p=d==null?void 0:d.getLatest().getTextContent();if(f===p)return;const h=d||aS(a,f),m=Bh(f),g=h.getChildren();if((g==null?void 0:g.length)>m.length)for(let v=0;v<g.length-m.length;v++)g[m.length+v].remove();Ee.dispatch(Lu()),m.forEach((v,y)=>{var x,S,C;g[y]?g[y].getType()!==v.getType()?(g[y].replace(v),(S=t.getElementByKey(v.getKey()))==null||S.scrollIntoView()):g[y].getTextContent()!==v.getTextContent()&&(g[y].setTextContent(v.getTextContent()),(C=t.getElementByKey(g[y].getKey()))==null||C.scrollIntoView()):(h.append(v),(x=t.getElementByKey(v.getKey()))==null||x.scrollIntoView())})});const o=D.$nodesOfType(Ge).filter(l=>Df(l.getParent()));r&&o.length>i.length+1&&f4(i.length+1,o.length).forEach(l=>{o[l].remove()})},sj=(e,t,n)=>{var u,f,d;const r=((f=(u=e.story)==null?void 0:u.prompt_wi_highlighted_text)==null?void 0:f[0].text)||"",i=Bh(r),{ownActions:o}=Ee.getState().config,l=o.findIndex(p=>{var h,m;return p.id===void 0&&p.text===r&&p.timestamp>(((m=(h=t.story)==null?void 0:h.actions)==null?void 0:m[0])||0)});if(l>-1){const p=[...o];p.splice(l,1),Ee.dispatch(Pa(p));return}const s=to(),a=D.$nodesOfType(Ge).filter(p=>s.isParentOf(p))[0];a instanceof Ge&&r!==(a==null?void 0:a.getLatest().getTextContent())&&(a.clear(),Ee.dispatch(Lu()),a.append(...i),(d=n.getElementByKey(a.getKey()))==null||d.scrollIntoView())},aj=(e,t,n)=>{const{koboldConfig:r,reinsertQueue:i,timestamps:o}=Ee.getState().config,l=t.payload.classname==="story"&&t.payload.name==="actions",s=t.payload.classname==="story"&&t.payload.name==="prompt_wi_highlighted_text";t.payload.classname==="system"&&t.payload.name==="aibusy"&&oj(t,r,i,e,n),!(s&&t.payload.old_value!==null)&&(l?lj(t,e):s&&sj(r,o,e))},uj=(e,t)=>{var r;const n=e.payload;if(D.$nodesOfType(rs).forEach(i=>{i.remove()}),n.forEach(i=>{const o=lS(),l=Bh(i.text);o.append(...l),to().append(o)}),n.length){const i=((r=document.querySelector("#user-input"))==null?void 0:r.textContent)||"";setTimeout(()=>{t==null||t.submit(i)},0)}},cj=()=>{D.$nodesOfType(xo).forEach(t=>{t.remove()})},dj=e=>{var l;const{koboldConfig:t}=Ee.getState().config;if(!((l=t.system)!=null&&l.aibusy))return;const n=e.payload;if(!(n!=null&&n.length))return;const r=n.map(s=>{const a=sS(),u=D.$createTextNode(s);return a.append(u),a}),i=D.$nodesOfType(xo),[o]=i.length?i.slice(-1):D.$nodesOfType(Ge).slice(-1);o==null||o.append(...r)},My=()=>{let e=document.getElementById("report-container");return e===null&&(e=document.createElement("div"),e.id="report-container",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.fontSize="32px",e.style.transform="translate(-50%, -50px)",e.style.padding="20px",e.style.background="rgba(240, 240, 240, 0.4)",e.style.borderRadius="20px",document.body&&document.body.appendChild(e)),e};function fj(){const e=w.useRef(null),t=w.useCallback(()=>{e!==null&&clearTimeout(e.current),document.body&&document.body.removeChild(My())},[]);return w.useEffect(()=>t,[t]),w.useCallback(n=>{const r=My();return clearTimeout(e.current),r.innerHTML=n,e.current=setTimeout(t,1e3),e.current},[t])}const uS=D.createCommand("SPEECH_TO_TEXT_COMMAND"),pj="SpeechRecognition"in window||"webkitSpeechRecognition"in window;function hj(){const[e]=Wn.useLexicalComposerContext(),[t,n]=w.useState(!1),r=w.useContext(J),i=window.SpeechRecognition||window.webkitSpeechRecognition,o=w.useRef(null),l=fj(),s=F(a=>a.config.utteranceInProgress);return w.useEffect(()=>{const a=u=>{const f=u.results.item(u.resultIndex),{transcript:d}=f.item(0);s||(l(d),f.isFinal&&e.update(()=>{const p=D.$getSelection();D.$isRangeSelection(p)&&(r==null||r.submit(d+`
`))}))};return t&&o.current===null&&(o.current=new i,o.current.continuous=!0,o.current.interimResults=!0,o.current.addEventListener("result",a)),o.current&&(t?o.current.start():o.current.stop()),()=>{var u;o.current!==null&&o.current.stop(),(u=o.current)==null||u.removeEventListener("result",a),o.current=null}},[i,e,t,l,s,r]),w.useEffect(()=>e.registerCommand(uS,a=>(n(a),!0),D.COMMAND_PRIORITY_EDITOR),[e]),null}const mj=pj?hj:()=>null,gj=()=>{const[e]=Wn.useLexicalComposerContext(),t=X(),n=w.useContext(J);return w.useEffect(()=>{const r=e.registerMutationListener(vo,()=>{e.update(tj)}),i=qt.startListening({actionCreator:ah,effect:h=>{nj(e,h,t,n)}}),o=qt.startListening({actionCreator:sh,effect:h=>{e.update(()=>{rj(h,t)})}}),l=qt.startListening({actionCreator:ox,effect:()=>{e.update(()=>{ij(t)})}}),s=qt.startListening({actionCreator:ax,effect:h=>{e.update(()=>{dj(h)})}}),a=qt.startListening({actionCreator:Lu,effect:()=>{e.update(()=>{cj()})}}),u=qt.startListening({actionCreator:Ru,effect:h=>{e.update(()=>{aj(e,h,t)})}}),f=qt.startListening({actionCreator:$u,effect:h=>{e.update(()=>{uj(h,n)})}}),d=qt.startListening({actionCreator:lx,effect:h=>{e.dispatchCommand(uS,h.payload)}}),{socketState:p}=Ee.getState().connection;return p===wt.LOADING&&t(tl({socketState:wt.READY_TO_CONNECT})),()=>{s(),a(),r(),f(),u(),o(),i(),l(),d()}},[e,t,n]),null},yj={root:"min-h-full p-4 editor-root",ltr:"ltr",rtl:"rtl",placeholder:"editor-placeholder",paragraph:"paragraph"},vj=`{
    "root": {
      "children": [
        {
          "children":[
            {
              "children":[],
              "direction":null,
              "format":"",
              "indent":0,
              "type":"action",
              "version":1
            }
          ],
          "direction":null,
          "format":"",
          "indent":0,
          "type":"story",
          "version":1
        }
      ],
      "direction":null,
      "format":"",
      "indent":0,
      "type":"root",
      "version":1
    }
  }`;function xj(e){console.error(e)}const _j={namespace:"KoboldEditor",editorState:vj,editable:!0,theme:yj,onError:xj,nodes:[Ge,vo,rs,xo]};function Sj(){const e=w.useContext(J);return c.jsx("div",{className:"overflow-auto flex-1 bg-base-200",children:c.jsxs(Pb.LexicalComposer,{initialConfig:_j,children:[c.jsx(E3.PlainTextPlugin,{contentEditable:c.jsx(j3.ContentEditable,{}),placeholder:c.jsx(c.Fragment,{}),ErrorBoundary:Q3}),c.jsx(W3.OnChangePlugin,{onChange:X3(e)}),c.jsx(Lb.ClearEditorPlugin,{}),c.jsx(D3.HistoryPlugin,{}),c.jsx(gj,{}),c.jsx(mj,{})]})})}const wj=()=>{const[e,t]=w.useState(!1),n=F(r=>r.worldInfo.storyCommentary);return w.useEffect(()=>{n&&t(!0)},[n]),!n||!e?null:c.jsxs("div",{className:"commentary-box p-4 flex",children:[c.jsxs("div",{className:"mr-4",children:[n.who,": ",n.review]}),c.jsx("button",{className:"btn btn-neutral",onClick:()=>{t(!1)},children:c.jsx(ao,{size:"1.5em"})})]})};function Cj(e){return K({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 0 0-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM632 577c0 3.8-3.4 7-7.5 7H540v84.9c0 3.9-3.2 7.1-7 7.1h-42c-3.8 0-7-3.2-7-7.1V584h-84.5c-4.1 0-7.5-3.2-7.5-7v-42c0-3.8 3.4-7 7.5-7H484v-84.9c0-3.9 3.2-7.1 7-7.1h42c3.8 0 7 3.2 7 7.1V528h84.5c4.1 0 7.5 3.2 7.5 7v42z"}}]})(e)}function Nj(e){return K({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 0 0-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32z"}}]})(e)}function Ej(e){return K({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L534.6 93.4a31.93 31.93 0 0 0-45.2 0L77.5 505c-12 12-18.8 28.3-18.8 45.3 0 35.3 28.7 64 64 64h43.4V908c0 17.7 14.3 32 32 32H448V716h112v224h265.9c17.7 0 32-14.3 32-32V614.3h43.4c17 0 33.3-6.7 45.3-18.8 24.9-25 24.9-65.5-.1-90.5z"}}]})(e)}function Tj(e){return K({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1a110.96 110.96 0 0 0-79.1-32.8zm412.3 235.5l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9a32.03 32.03 0 0 0 9.3-35.2l-.9-2.6a442.5 442.5 0 0 0-79.6-137.7l-1.8-2.1a32.12 32.12 0 0 0-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9a32.05 32.05 0 0 0-25.8-25.7l-2.7-.5c-52-9.4-106.8-9.4-158.8 0l-2.7.5a32.05 32.05 0 0 0-25.8 25.7l-15.8 85.3a353.44 353.44 0 0 0-98.9 57.3l-81.8-29.1a32 32 0 0 0-35.1 9.5l-1.8 2.1a445.93 445.93 0 0 0-79.6 137.7l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5a32.03 32.03 0 0 0-9.3 35.2l.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1a32.12 32.12 0 0 0 35.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3a32.05 32.05 0 0 0 25.8 25.7l2.7.5a448.27 448.27 0 0 0 158.8 0l2.7-.5a32.05 32.05 0 0 0 25.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9a32 32 0 0 0 35.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l.9-2.6c4.3-12.4.6-26.3-9.5-35zm-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"}}]})(e)}function Gt(){let e,t="",n=0;for(;n<arguments.length;)(e=arguments[n++])&&typeof e=="string"&&(t&&(t+=" "),t+=e);return t}var Er=(e=>(e.LoadStory="Home.LoadStory",e.LoadModel="Home.LoadModel",e))(Er||{});const ni=({children:e,onClick:t,className:n="",innerClassName:r=""})=>c.jsx("li",{className:n,children:c.jsx("a",{className:Gt("px-6 py-3",r),onClick:t,children:e})}),Oj=()=>{const e=X(),t=w.useCallback(async()=>{const a=await(await fetch("https://huggingface.co/api/models?filter=text-generation&limit=30&sort=downloads&config=true&direction=-1")).json();e(x4(a))},[e]),n=w.useContext(J),[r,i,o]=F(s=>[s.ui.sidebarState.hfDefaultResults,s.ui.sidebarState.hfSearchResults,s.ui.sidebarState.selectedModel]);w.useEffect(()=>{n==null||n.selectModel({...Va,id:"customhuggingface",label:"Load custom model from Hugging Face",name:"customhuggingface",plugin:void 0}),r!=null&&r.length||t()},[e,t,r==null?void 0:r.length,n]);const l=i||r;return c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"px-6 py-3 font-bold text-center",children:"Hugging Face Models"}),c.jsx("ul",{className:"menu menu-md p-0",children:c.jsxs(ni,{onClick:()=>{e(ch(Er.LoadModel)),e(gr(null))},children:[c.jsx(Mu,{className:"inline",size:"1.5em"}),"Back"]})}),c.jsx("div",{className:"flex flex-col px-6",children:c.jsx("input",{type:"text",className:"input input-bordered input-md bg-base-200 my-2",placeholder:"Search Hugging Face",onChange:fh(async s=>{const a=s.target.value;if(a.length){const f=await(await fetch(`https://huggingface.co/api/models?filter=text-generation&sort=downloads&config=true&direction=-1&search=${a}`)).json();e(Zg(f))}else e(Zg(null))},500)})}),c.jsx("div",{className:"relative flex-grow",children:c.jsx("ul",{className:"menu menu-md p-0 flex-grow absolute inset-0 flex-nowrap overflow-y-auto",children:!!l&&l.map(s=>{var a;return c.jsx("li",{children:c.jsxs("div",{className:Gt((o==null?void 0:o.label)===s.modelId&&"active","flex flex-row break-all px-6"),onClick:u=>{const f=u.currentTarget.querySelector("a");f!=null&&f.contains(u.target)||((o==null?void 0:o.label)===s.modelId?e(gr(null)):(e(gr({...Ff,label:s.modelId,name:"customhuggingface"})),n==null||n.resubmitModelInfo({...Va,custom_model_name:s.modelId,id:"customhuggingface",label:"Load custom model from Hugging Face",name:"customhuggingface",plugin:"Huggingface",valid_backends:["Huggingface","Basic Huggingface"]})))},children:[c.jsx("div",{className:"flex-grow",children:c.jsxs("div",{className:"block",children:[c.jsx("div",{children:s.modelId}),c.jsx("div",{className:"m-2 ml-0",children:c.jsx("span",{className:"text-gray-800 text-xs bg-gray-200 rounded-md px-2 py-1",children:((a=s.config)==null?void 0:a.model_type)||"Unknown"})})]})}),c.jsx("a",{className:"btn",href:`https://huggingface.co/${s.modelId}`,target:"_blank",rel:"noreferrer",children:c.jsx(Y4,{size:"1.5em"})})]})},s.id)})})})]})},bj=()=>{const e=w.useContext(J),t=X(),{localModels:n,selectedModel:r}=F(i=>({localModels:i.ui.sidebarState.localModels,selectedModel:i.ui.sidebarState.selectedModel}),an);return w.useEffect(()=>{e==null||e.selectModel({class:"model",id:"NeoCustom",ismenu:"true",label:"Load a model from its directory",menu:"mainmenu",name:"NeoCustom",path:"./models",size:"",isdirectory:"true",isdownloaded:"false"})},[e]),c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"px-6 py-3 font-bold text-center",children:"Load Local Model"}),c.jsx("ul",{className:"menu menu-md p-0",children:c.jsxs(ni,{onClick:()=>{t(ch(Er.LoadModel)),t(gr(null))},children:[c.jsx(Mu,{className:"inline",size:"1.5em"}),"Back"]})}),c.jsxs("div",{className:"relative flex-grow overflow-y-auto min-h-[128px]",children:[!(n!=null&&n.length)&&c.jsx("div",{className:"text-center mt-6",children:"No models found."}),!!(n!=null&&n.length)&&c.jsx("ul",{className:"menu menu-md flex-grow inset-0 flex-nowrap",children:n==null?void 0:n.map(i=>c.jsx("li",{onClick:()=>{(r==null?void 0:r.name)===i.name?t(gr(null)):(t(gr(i)),e==null||e.selectModel({class:"model",id:i.name,ismenu:"false",label:i.label,menu:i.menu,name:i.name,path:i.path,size:""}))},children:c.jsx("a",{className:Gt((r==null?void 0:r.label)===i.label&&"active"),children:i.name})},i.label))})]})]})};var Bl=(e=>(e.Local="Home.LoadModel.Local",e.HuggingFace="Home.LoadModel.HuggingFace",e))(Bl||{});const Ui=({subsection:e,children:t})=>{const n=X();return c.jsx(ni,{onClick:()=>n(ch(e)),children:t})},Ff={isMenu:!1,isDirectory:!1,isDownloaded:!1,label:"Read-Only (No AI)",menu:"mainmenu",name:"ReadOnly",size:""},Va={class:"model",id:"ReadOnly",isdirectory:"false",isdownloaded:"false",ismenu:"false",label:"Read-Only (No AI)",menu:"mainmenu",name:"ReadOnly",plugin:"Read Only",size:""},jj=()=>{const e=F(i=>i.ui.sidebarState.selectedModel),t=X(),n=w.useContext(J),r=()=>{e===Ff?t(gr(null)):(t(gr(Ff)),n==null||n.selectModel(Va))};return c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"px-6 py-3 font-bold text-center",children:"Load Model"}),c.jsxs("ul",{className:"menu menu-md p-0 flex-grow",children:[c.jsxs(Ui,{subsection:null,children:[c.jsx(Mu,{className:"inline",size:"1.5em"}),"Main Menu"]}),c.jsx(Ui,{subsection:Bl.Local,children:"Local Model"}),c.jsx(Ui,{subsection:Bl.HuggingFace,children:"Hugging Face"}),c.jsx(ni,{onClick:r,innerClassName:(e==null?void 0:e.name)==="ReadOnly"?"active":"",children:"Read-Only (No AI)"})]})]})},Pj=()=>{const{selectedModel:e,selectedModelBackends:t,selectedSubsection:n,aibusy:r}=F(d=>{var p,h;return{selectedModel:d.ui.sidebarState.selectedModel,selectedModelBackends:d.ui.sidebarState.selectedModelBackends,selectedSubsection:d.ui.sidebarState.selectedSubsection,aibusy:((h=(p=d.config.koboldConfig)==null?void 0:p.system)==null?void 0:h.aibusy)||!1}},an),[i,o]=w.useState(null),[l,s]=w.useState({}),a=i!==null?t==null?void 0:t[i]:null,u=Object.entries(l).reduce((d,[p,h])=>a!=null&&a.layerSliders.includes(p)?d+Number(h):d,0),f=w.useContext(J);return w.useEffect(()=>{(t==null?void 0:t.length)>0?(o(0),s(t[0].loadParameterControls.reduce((d,p)=>({...d,[p.id]:p.default}),{}))):(s({}),o(null))},[t]),c.jsxs("div",{className:"flex flex-col flex-grow overflow-y-auto",children:[n===Er.LoadModel&&c.jsx(jj,{}),n===Bl.Local&&c.jsx(bj,{}),n===Bl.HuggingFace&&c.jsx(Oj,{}),c.jsxs("div",{className:"border-t border-neutral drop-shadow",children:[a&&e&&c.jsx("div",{className:Gt(!!a.loadParameterControls.length&&"mt-2 px-6 py-3"),children:e&&a.loadParameterControls.map(d=>{var p;return c.jsxs(w.Fragment,{children:[d.uitype==="slider"&&c.jsxs("div",{className:"flex flex-col mb-2",children:[c.jsxs("div",{className:"flex justify-between mb-2",children:[c.jsx("span",{className:"text-sm",children:d.label}),c.jsx("span",{className:"text-sm",children:l[d.id]})]}),c.jsx("input",{type:"range",min:0,max:d.max,className:"range range-primary",onChange:h=>{s({...l,[d.id]:parseInt(h.target.value)})},value:l[d.id]})]}),d.uitype==="toggle"&&c.jsxs("div",{className:"inline-flex flex-col w-1/2 mb-2",children:[c.jsx("div",{className:"flex mb-2",children:c.jsx("span",{className:"text-sm",children:d.label})}),c.jsx("input",{type:"checkbox",className:"toggle",onChange:h=>{s({...l,[d.id]:h.target.checked})},checked:l[d.id]})]}),d.uitype==="dropdown"&&c.jsxs("div",{className:"flex flex-col mb-2",children:[c.jsx("div",{className:"flex mb-2",children:c.jsx("span",{className:"text-sm",children:d.label})}),c.jsx("select",{className:"select select-bordered",value:l[d.id]||"",onChange:h=>{s({...l,[d.id]:h.target.value})},children:(p=d.children)==null?void 0:p.map(h=>c.jsx("option",{value:h.value,children:h.text},h.value))})]})]},d.id)})}),c.jsxs("div",{className:"text-right px-6 py-3",children:[e&&(t==null?void 0:t.length)>0&&c.jsx("select",{value:i||0,disabled:(t==null?void 0:t.length)===1,onChange:d=>{const p=parseInt(d.target.value);o(p),s(t[p].loadParameterControls.reduce((h,m)=>({...h,[m.id]:m.default}),{}))},className:"select select-md mr-2",children:t==null?void 0:t.map((d,p)=>c.jsx("option",{value:p,children:d.name},d.name))}),c.jsxs("button",{disabled:t.length&&u!==(a==null?void 0:a.totalLayers)||r||!e,className:"btn",onClick:()=>{if(e){const d=e.name==="customhuggingface";f==null||f.loadModel({...Va,...l,id:e.name,label:d?"Load custom model from Hugging Face":e.label,menu:d?"mainmenu":"Custom",name:e.name,...d?{custom_model_name:e.label}:{path:e.path},plugin:a==null?void 0:a.name})}},children:["Load"," ",!!(a!=null&&a.totalLayers)&&`(${u}/${a==null?void 0:a.totalLayers})`]})]})]})]})};function kj(e){return K({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M54.8,119.49A35.06,35.06,0,0,1,49.05,128a35.06,35.06,0,0,1,5.75,8.51C60,147.24,60,159.83,60,172c0,25.94,1.84,32,20,32a12,12,0,0,1,0,24c-19.14,0-32.2-6.9-38.8-20.51C36,196.76,36,184.17,36,172c0-25.94-1.84-32-20-32a12,12,0,0,1,0-24c18.16,0,20-6.06,20-32,0-12.17,0-24.76,5.2-35.49C47.8,34.9,60.86,28,80,28a12,12,0,0,1,0,24c-18.16,0-20,6.06-20,32C60,96.17,60,108.76,54.8,119.49ZM240,116c-18.16,0-20-6.06-20-32,0-12.17,0-24.76-5.2-35.49C208.2,34.9,195.14,28,176,28a12,12,0,0,0,0,24c18.16,0,20,6.06,20,32,0,12.17,0,24.76,5.2,35.49A35.06,35.06,0,0,0,207,128a35.06,35.06,0,0,0-5.75,8.51C196,147.24,196,159.83,196,172c0,25.94-1.84,32-20,32a12,12,0,0,0,0,24c19.14,0,32.2-6.9,38.8-20.51C220,196.76,220,184.17,220,172c0-25.94,1.84-32,20-32a12,12,0,0,0,0-24Z"}}]})(e)}function $j(e){return K({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M228,152v56a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V152a12,12,0,0,1,24,0v52H204V152a12,12,0,0,1,24,0ZM96.49,88.49,116,69v83a12,12,0,0,0,24,0V69l19.51,19.52a12,12,0,0,0,17-17l-40-40a12,12,0,0,0-17,0l-40,40a12,12,0,0,0,17,17Z"}}]})(e)}function Rj(e){return K({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,56C48,56,16,128,16,128s32,72,112,72,112-72,112-72S208,56,128,56Zm0,112a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z",opacity:"0.2"}},{tag:"path",attr:{d:"M247.31,124.76c-.35-.79-8.82-19.58-27.65-38.41C194.57,61.26,162.88,48,128,48S61.43,61.26,36.34,86.35C17.51,105.18,9,124,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208s66.57-13.26,91.66-38.34c18.83-18.83,27.3-37.61,27.65-38.4A8,8,0,0,0,247.31,124.76ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.47,133.47,0,0,1,25,128,133.33,133.33,0,0,1,48.07,97.25C70.33,75.19,97.22,64,128,64s57.67,11.19,79.93,33.25A133.46,133.46,0,0,1,231.05,128C223.84,141.46,192.43,192,128,192Zm0-112a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Z"}}]})(e)}function Lj(e){return K({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,56C48,56,16,128,16,128s32,72,112,72,112-72,112-72S208,56,128,56Zm0,112a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z",opacity:"0.2"}},{tag:"path",attr:{d:"M53.92,34.62A8,8,0,1,0,42.08,45.38L61.32,66.55C25,88.84,9.38,123.2,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208a127.11,127.11,0,0,0,52.07-10.83l22,24.21a8,8,0,1,0,11.84-10.76Zm47.33,75.84,41.67,45.85a32,32,0,0,1-41.67-45.85ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.16,133.16,0,0,1,25,128c4.69-8.79,19.66-33.39,47.35-49.38l18,19.75a48,48,0,0,0,63.66,70l14.73,16.2A112,112,0,0,1,128,192Zm6-95.43a8,8,0,0,1,3-15.72,48.16,48.16,0,0,1,38.77,42.64,8,8,0,0,1-7.22,8.71,6.39,6.39,0,0,1-.75,0,8,8,0,0,1-8-7.26A32.09,32.09,0,0,0,134,96.57Zm113.28,34.69c-.42.94-10.55,23.37-33.36,43.8a8,8,0,1,1-10.67-11.92A132.77,132.77,0,0,0,231.05,128a133.15,133.15,0,0,0-23.12-30.77C185.67,75.19,158.78,64,128,64a118.37,118.37,0,0,0-19.36,1.57A8,8,0,1,1,106,49.79,134,134,0,0,1,128,48c34.88,0,66.57,13.26,91.66,38.35,18.83,18.83,27.3,37.62,27.65,38.41A8,8,0,0,1,247.31,131.26Z"}}]})(e)}function Aj(e){return K({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM152,88V44l44,44Z"}}]})(e)}const Mj=({story:e,setEditingStory:t})=>{const n=w.useContext(J),r=w.useRef(null),[i,o]=w.useState(e.name);return w.useEffect(()=>{var l;(l=r.current)==null||l.focus()},[]),c.jsxs(c.Fragment,{children:[c.jsx("input",{className:"input input-sm bg-base-200 py-0 pl-4 border-0 max-w-none w-full !cursor-text",type:"text",value:i,onChange:l=>o(l.target.value),ref:r}),c.jsx("button",{className:"px-4 py-2",onClick:()=>{t(null)},children:c.jsx(ao,{size:"1.5em"})}),c.jsx("button",{className:"px-4 py-2",onClick:()=>{i.length&&(n==null||n.renameStory(e.path,i)),t(null)},children:c.jsx(dh,{size:"1.5em"})})]})},Ij=()=>{const e=w.useContext(J);return c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"file",className:"hidden",id:"story-upload",name:"story-upload",accept:"application/json",onChange:t=>{const{files:n}=t.target;if(n)for(const r of n){const i=new FileReader;i.onload=o=>{var l;if((l=o==null?void 0:o.target)!=null&&l.result){const s=o.target.result;e==null||e.uploadFile(r.name,s)}},i.readAsArrayBuffer(r)}}}),c.jsx("label",{htmlFor:"story-upload",children:c.jsxs(ni,{children:[c.jsx($j,{size:"1.5em"}),"Upload Story"]})})]})},Dj=()=>{const{savedStories:e}=F(o=>o.ui.sidebarState),[t,n]=w.useState(null),r=w.useContext(J),i=X();return w.useEffect(()=>{r==null||r.loadStoryList()},[r]),c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"px-6 my-3 font-bold text-center",children:"Load Story"}),c.jsxs("ul",{className:"menu menu-md p-0",children:[c.jsxs(Ui,{subsection:null,children:[c.jsx(Mu,{className:"inline",size:"1.5em"}),"Main Menu"]}),c.jsx(Ij,{})]}),!e.length&&c.jsx("div",{className:"text-center mt-6",children:"No stories found."}),!!e.length&&c.jsx("ul",{className:"menu menu-md overflow-y-auto flex-nowrap",children:e.map(o=>c.jsxs("li",{className:"flex flex-row w-full h-10 items-center flex-nowrap my-1",children:[t===o.path&&c.jsx(Mj,{story:o,setEditingStory:n}),t!==o.path&&c.jsxs(c.Fragment,{children:[c.jsx("a",{onClick:()=>{r==null||r.loadStory(o.path),i(ux())},title:o.name,className:"flex-grow block py-0 h-10 leading-10 content-center whitespace-nowrap overflow-hidden overflow-ellipsis",children:o.name}),c.jsx("button",{onClick:()=>{n(o.path)},children:c.jsx(gx,{size:"1.5em"})}),c.jsx("button",{onClick:()=>{i(me({name:"confirmDeleteStory",data:o}))},children:c.jsx(Au,{size:"1.5em"})})]})]},o.path))})]})},lr=({value:e,timestamp:t,onChange:n,className:r,label:i,title:o,inputClassname:l,...s})=>{const[a,u]=w.useState(e),[f,d]=w.useState(0),p=t>f+500?e:a;return c.jsxs("div",{className:r,title:o,children:[i&&c.jsx("div",{className:"flex mb-2",children:c.jsx("span",{className:"text-sm",children:i})}),c.jsx("input",{type:"text",value:p,onChange:h=>{n==null||n(h,a),u(h.target.value);const m=Date.now();d(m)},className:l||"input input-sm input-bordered bg-base-200 text-sm w-full placeholder:italic",...s})]})},Fj=({value:e,timestamp:t,onChange:n,className:r,label:i,title:o,...l})=>{const[s,a]=w.useState(e),[u,f]=w.useState(0),d=(t>u+500?e:s).join(", ");return c.jsxs("div",{className:r,title:o,children:[i&&c.jsx("div",{className:"flex mb-2",children:c.jsx("span",{className:"text-sm",children:i})}),c.jsx("input",{type:"text",value:d,onChange:p=>{n==null||n(p,s),a([p.target.value]);const h=Date.now();f(h)},className:"input input-sm input-bordered bg-base-200 text-sm w-full placeholder:italic",...l})]})},cS=({value:e,timestamp:t,onChange:n,className:r,label:i,title:o,...l})=>{const[s,a]=w.useState(e),[u,f]=w.useState(0),d=t>u+500?e:s;return c.jsxs("div",{className:r,title:o,children:[i&&c.jsx("div",{className:"flex justify-between mb-2",children:c.jsx("span",{className:"text-sm",children:i})}),c.jsx("input",{type:"checkbox",checked:d,onChange:p=>{n==null||n(p,s),a(p.target.checked);const h=Date.now();f(h)},className:"toggle mb-2",...l})]})},Wl=({varName:e,label:t,title:n,type:r})=>{var h,m;const i=F(g=>g.config.timestamps),o=w.useContext(J),l=F(g=>g.config.koboldConfig),[s,...a]=e.split("_"),u=a.join("_"),f=((h=l[s])==null?void 0:h[u])||"",d=(m=i[s])==null?void 0:m[u],p=Array.isArray(f);if(!["string","number"].includes(typeof f)&&!p)throw new Error("Expected value type");return p?c.jsx(Fj,{className:"py-2 flex-1 min-w-1/2",title:n,label:t,value:f,type:r,timestamp:d,onChange:g=>{o==null||o.varChange(e,[g.target.value])}}):c.jsx(lr,{className:"py-2 flex-1 min-w-1/2",label:t,title:n,value:f,type:r,timestamp:d,onChange:g=>{o==null||o.varChange(e,g.target.value)}})},zj=()=>{const e=F(n=>n.ui.sidebarState.selectedSubsection),t=(e==null?void 0:e.split(".").slice(0,2).join("."))||null;return c.jsxs(c.Fragment,{children:[t===null&&c.jsx(Bj,{}),t===Er.LoadModel&&c.jsx(Pj,{}),t===Er.LoadStory&&c.jsx(Dj,{})]})},Bj=()=>{var a,u,f,d,p,h;const e=X(),t=F(m=>m.config.koboldConfig),n=w.useContext(J),r=["Story","Adventure","Chat"],[i,o]=w.useState(!1),l=()=>{var g,_;if(i||(o(!0),typeof((g=t.story)==null?void 0:g.storymode)!="number"))return;const m=(((_=t.story)==null?void 0:_.storymode)+1)%3;n==null||n.varChangeWithCallback("story_storymode",m,()=>{m===1?n==null||n.varChangeWithCallback("story_actionmode",1,()=>{o(!1)}):o(!1)})},s=(a=t.story)==null?void 0:a.context.reduce((m,g)=>m+g.tokens.length,0);return c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"px-6 py-3 font-bold text-center",children:"Main Menu"}),c.jsxs("ul",{className:"menu menu-md p-0",children:[c.jsx(Ui,{subsection:Er.LoadModel,children:"Load Model"}),c.jsx(Ui,{subsection:Er.LoadStory,children:"Load Story"}),c.jsx(ni,{onClick:()=>e(me({name:"saveStory"})),children:"Save Story"}),c.jsxs(ni,{className:Gt(i&&"disabled"),onClick:l,children:["Mode: ",r[((u=t.story)==null?void 0:u.storymode)??0]]})]}),((f=t.story)==null?void 0:f.storymode)===2&&c.jsxs("div",{className:"p-6",children:[c.jsx(Wl,{varName:"story_chatname",label:"User Name"}),c.jsx(Wl,{varName:"story_botname",label:"Bot Name"})]}),!((d=t.system)!=null&&d.noai)&&c.jsxs("div",{className:"px-6",children:[c.jsx("progress",{className:"progress progress-primary w-full",value:s,max:(p=t.model)==null?void 0:p.max_length}),c.jsxs("span",{className:"text-sm",children:[s," / ",(h=t.model)==null?void 0:h.max_length," Tokens In Use"]})]})]})},Te=({varName:e,label:t,title:n,className:r})=>{var p,h;const i=w.useContext(J),{koboldConfig:o,timestamps:l}=F(m=>m.config),[s,...a]=e.split("_"),u=a.join("_"),f=((p=l[s])==null?void 0:p[u])||0,d=((h=o[s])==null?void 0:h[u])||!1;return c.jsx(cS,{className:Gt("p-2 flex-grow min-w-1/2",r),title:n,label:t,value:!!d,timestamp:f,onChange:m=>{i==null||i.debouncedVarChange(e,m.target.checked)}})},Xe=({varName:e,min:t,max:n,step:r,label:i,title:o})=>{var x,S;const l=w.useContext(J),{koboldConfig:s,timestamps:a}=F(C=>C.config),[u,...f]=e.split("_"),d=f.join("_"),p=((x=a[u])==null?void 0:x[d])||0,h=((S=s[u])==null?void 0:S[d])||0,[m,g]=w.useState(h),[_,v]=w.useState(0),y=p>_?h:m;return c.jsxs("div",{className:"p-2 flex-grow min-w-1/2",title:o,children:[c.jsxs("div",{className:"flex justify-between mb-2",children:[c.jsx("span",{className:"text-sm",children:i}),c.jsx("span",{className:"text-sm",children:y})]}),c.jsx("input",{type:"range",step:r,min:typeof t=="number"?t:0,max:typeof n=="number"?n:100,value:y,onChange:C=>{g(C.target.valueAsNumber);const T=Date.now();v(T),l==null||l.debouncedVarChange(e,C.target.value)},className:"range range-primary"})]})},qc=({preset:e})=>c.jsxs(c.Fragment,{children:[c.jsx("option",{children:e.preset}),e.description&&c.jsx("option",{disabled:!0,className:"italic",children:e.description})]}),Wj=()=>{var l,s,a,u,f,d,p,h,m,g,_,v,y,x,S,C,T;const{koboldConfig:e}=F(N=>N.config),t=(l=e.model)==null?void 0:l.presets,n=(s=e.model)==null?void 0:s.selected_preset,r=w.useContext(J),i=X(),o={Recommended:[...((a=t==null?void 0:t.Recommended)==null?void 0:a.Official)||[],...((u=t==null?void 0:t.Recommended)==null?void 0:u.Custom)||[]],"Same Class":[...((f=t==null?void 0:t["Same Class"])==null?void 0:f.Official)||[],...((d=t==null?void 0:t["Same Class"])==null?void 0:d.Custom)||[]],Other:[...((p=t==null?void 0:t.Other)==null?void 0:p.Official)||[],...((h=t==null?void 0:t.Other)==null?void 0:h.Custom)||[]]};return c.jsxs("div",{className:"px-6 py-3",children:[c.jsx("h2",{className:"px-6 pb-3 font-bold text-center",children:"Model Settings"}),c.jsxs("div",{className:"text-center mb-2",children:[c.jsx("label",{className:"label",children:"Preset"}),c.jsxs("select",{value:n,onChange:N=>{r==null||r.varChange("model_selected_preset",N.target.value)},className:"select select-bordered bg-base-200 w-full",children:[((m=o.Recommended)==null?void 0:m.length)>0&&c.jsxs(c.Fragment,{children:[c.jsx("option",{className:"font-bold",disabled:!0,children:"‣ Recommended"}),(g=o.Recommended)==null?void 0:g.map(N=>c.jsx(qc,{preset:N},N.preset))]}),((_=o["Same Class"])==null?void 0:_.length)>0&&c.jsxs(c.Fragment,{children:[c.jsx("option",{className:"font-bold",disabled:!0,children:"‣ Same Class"}),(v=o["Same Class"])==null?void 0:v.map(N=>c.jsx(qc,{preset:N},N.preset))]}),((y=o.Other)==null?void 0:y.length)>0&&c.jsxs(c.Fragment,{children:[c.jsx("option",{className:"font-bold",disabled:!0,children:"‣ Other"}),(x=o.Other)==null?void 0:x.map(N=>c.jsx(qc,{preset:N},N.preset))]})]}),c.jsx("button",{className:"btn btn-md btn-primary mt-4 mb-2 mx-2",onClick:()=>{i(me({name:"savePreset"}))},children:"Save Preset"})]}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mt-4",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0}),c.jsx("div",{className:"collapse-title h-8 text-md",children:"Generation"}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx(Xe,{label:"Output Length",varName:"model_genamt",min:16,max:512,step:1,title:"Number of tokens to be generated. Higher values will take longer to generate."}),c.jsx(Xe,{label:"Temperature",varName:"model_temp",min:.1,max:2,step:.01,title:"Randomness of sampling. Higher values can increase creativity, but make the output less meaningful. Lower values will make the output more predictable, but it may become more repetitive."}),c.jsx(Xe,{label:"Context Tokens",varName:"model_max_length",min:512,max:8192,step:1,title:"Number of context tokens to submit to the AI for sampling. Make sure this is higher than Output Length. Higher values increase VRAM/RAM usage."}),c.jsx(Xe,{label:"Gens Per Action",varName:"model_numseqs",min:1,max:5,step:1,title:"Number of generated output choices. Increases VRAM/RAM usage."})]})]}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mt-4",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0}),c.jsx("div",{className:"collapse-title h-8 text-md",children:"Sampling"}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx(Xe,{label:"Top P Sampling",varName:"model_top_p",min:0,max:1,step:.01,title:"Used to discard unlikely text in the sampling process. Lower values will make the output more predictable, but also repetitive. (Put this value on 1 to disable its effect)"}),c.jsx(Xe,{label:"Top K Sampling",varName:"model_top_k",min:0,max:100,step:1,title:"Alternative sampling method. Can be combined with top_p."}),c.jsx(Xe,{label:"Tail Free Sampling",varName:"model_tfs",min:0,max:1,step:.01,title:"Alternative sampling method. It is recommended to disable (set to 0) top_p and top_k if this setting is used. 0.95 is a suggested value for this setting. (Put this value on 1 to disable its effect)"}),c.jsx(Xe,{label:"Typical Sampling",varName:"model_typical",min:0,max:1,step:.01,title:'Alternative sampling method. Described in the paper "Typical Decoding for Natural Language Generation" (10.48550/ARXIV.2202.00666). The paper indicates 0.2 as a suggested value for this setting. (Put this value on 1 to disable its effect)'}),c.jsx(Xe,{label:"Top A Sampling",varName:"model_top_a",min:0,max:1,step:.01,title:"Alternative sampling method. Reduces the randomness of the AI whenever the probability of one token is much higher than all the others. Higher values have a stronger effect. (Put this value on 0 to disable its effect)"}),c.jsx("div",{className:"min-w-1/2 p-2",children:c.jsx("button",{onClick:()=>{i(me({name:"samplerOrder"}))},title:"Changes the order of the samplers to have a considerably different effect than just leaving the samplers at their default order.",className:"btn btn-primary w-full",children:"Sampler Order"})})]})]}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mt-4",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0}),c.jsx("div",{className:"collapse-title h-8 text-md",children:"Repetition"}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx(Xe,{label:"Repetition Penalty",varName:"model_rep_pen",min:1,max:3,step:.01,title:"Used to penalize words that were already generated or belong to the context."}),c.jsx(Xe,{label:"Rep Pen Range",varName:"model_rep_pen_range",min:0,max:4096,step:1,title:"Repetition penalty range. If set higher than 0, only applies repetition penalty to the last few tokens of the story rather than applying it to the entire story. The slider controls the amount of tokens at the end of your story to apply it to."}),c.jsx(Xe,{label:"Rep Pen Slope",varName:"model_rep_pen_slope",min:0,max:10,step:.1,title:"Repetition penalty slope. If both this setting and Rep Penalty Range are set higher than 0, will use sigmoid interpolation to apply repetition penalty more strongly on tokens that are closer to the end of the story. Higher values will result in the repetition penalty difference between the start and end of your story being more apparent. (Setting this to 1 uses linear interpolation; setting this to 0 disables interpolation)"}),c.jsx(Te,{label:"Alt Rep Pen",varName:"model_use_alt_rep_pen",title:"Applies repetition penalty as a logarithmic modifier rather than a linear modifier."})]})]}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mt-4",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0}),c.jsx("div",{className:"collapse-title h-8 text-md",children:"Other"}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx(Te,{label:"Contextual Prompt",title:"Whether the prompt should be sent in the context of every action.",varName:"story_useprompt"}),c.jsx(Te,{label:"No Prompt Gen",title:"If enabled, the AI does not generate a continuation of the entered prompt. Instead, you must perform an action first.",varName:"user_nopromptgen"}),c.jsx(Te,{label:"Prefilled Memory",title:"If enabled, the Memory box in Random Story will be filled with the memory of the current story instead of being empty.",varName:"user_rngpersist"}),c.jsx(Te,{label:"Alt Text Gen",title:"Inserts World Info entries behind text that first triggers them for better context with unlimited depth.",varName:"system_alt_gen"}),c.jsx(Te,{label:"Alt Multi Gen",title:"Runs Gens per Action one at a time so you can select one if you like it without having to wait.",varName:"model_alt_multi_gen"}),c.jsx(Te,{label:"Full Determinism",varName:"system_full_determinism",title:"Causes generation to be fully deterministic. The model will always generate the same thing as long as your story, settings and RNG seed are the same. If disabled, only the sequence of outputs the model generates is deterministic."}),c.jsx(Te,{label:"Use Seed",title:"If enabled, a specific seed will be used for the random generator on text generation",varName:"system_seed_specified"}),c.jsx(Te,{label:"Token Streaming",title:"Shows tokens as they are generated.",varName:"user_output_streaming"}),((S=e.system)==null?void 0:S.seed_specified)&&c.jsx(Wl,{label:"Seed",varName:"system_seed",type:"number"})]})]}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mt-4",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0}),c.jsx("div",{className:"collapse-title h-8 text-md",children:"Modifiers"}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx("div",{className:"min-w-1/2 p-2",children:c.jsx("button",{title:"Influence the likelihood for the AI to output certain phrases.",onClick:()=>{i(me({name:"biasing"}))},className:"btn btn-primary w-full",children:"Biasing"})}),c.jsx("div",{className:"min-w-1/2 p-2",children:c.jsx("button",{title:"Automatically replaces phrases that you or the AI insert.",onClick:()=>{i(me({name:"substitutions"}))},className:"btn btn-primary w-full",children:"Substitutions"})}),c.jsx("div",{className:"min-w-1/2 p-2",children:c.jsx("button",{title:"Allows to activate userscripts that modify the game's functionality.",onClick:()=>{r==null||r.loadUserscriptsList(),i(me({name:"addUserscript"}))},className:"btn btn-primary w-full",children:"Add Userscript"})}),c.jsx(Te,{title:"Disables the userscripts' ability to edit output.",label:"No Genmod",varName:"user_nogenmod"}),c.jsx("ul",{className:"w-full",children:(T=(C=e.system)==null?void 0:C.userscripts)==null?void 0:T.map(N=>c.jsxs("li",{className:"flex justify-between p-2 rounded bg-base-200",children:[c.jsx("span",{className:"self-center",children:N})," ",c.jsx("button",{className:"btn btn-error",onClick:()=>{r==null||r.removeUserscript(N)},children:c.jsx(ao,{size:"1.5em"})})]},N))})]})]}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mt-4",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0}),c.jsx("div",{className:"collapse-title h-8 text-md",children:"Formatting"}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx(Te,{label:"Trim Sentences",varName:"user_frmttriminc",title:"Deletes the text after the last sentence closure. If no closure is found, all tokens are returned."}),c.jsx(Te,{label:"No Blank Lines",varName:"user_frmtrmblln",title:"Replaces double newlines (\\n\\n) with single ones to avoid blank lines."}),c.jsx(Te,{label:"No Special Chars",varName:"user_frmtrmspch",title:"Removes special characters (@,#,%,^, etc)."}),c.jsx(Te,{label:"Auto Spacing",varName:"user_frmtadsnsp",title:"Adds spaces automatically if necessary."}),c.jsx(Te,{label:"Single Line",varName:"user_singleline",title:"Allows the AI to generate an output only before the enter."}),c.jsx(Te,{label:"No Double Spaces",varName:"user_remove_double_space",title:"Removes any double spaces in the output."})]})]})]})},Hj=e=>fetch("/ghostpad/api/update_config",{method:"POST",body:JSON.stringify({configUpdate:e})}),dS=w.createContext({voicesByLanguage:{},speechSynthesisSupported:!1}),Uj=({children:e})=>{const[t,n]=w.useState(!1),[r,i]=w.useState({});return w.useEffect(()=>{const o=typeof window<"u"&&"speechSynthesis"in window,l=()=>{const s=o?speechSynthesis.getVoices():[];i(s.reduce((a,u)=>(u.lang in a?a[u.lang].push(u):a[u.lang]=[u],a),{}))};return n(o),o&&speechSynthesis.addEventListener("voiceschanged",l),()=>{o&&speechSynthesis.removeEventListener("voiceschanged",l)}},[]),c.jsx(dS.Provider,{value:{speechSynthesisSupported:t,voicesByLanguage:r},children:e})},Vj=["acid","aqua","autumn","black","bumblebee","business","corporate","cupcake","dark","dracula","emerald","fantasy","garden","halloween","lemonade","light","lofi","night","retro","synthwave","valentine","winter","wireframe"],Kj=[{name:"Serif",items:[{linkFamily:"Rasa",cssFamily:"Rasa"},{linkFamily:"Lora",cssFamily:"Lora"},{linkFamily:"Alegreya",cssFamily:"Alegreya"},{linkFamily:"Roboto+Slab",cssFamily:"Roboto Slab"},{linkFamily:"Merriweather",cssFamily:"Merriweather"},{linkFamily:"PT+Serif",cssFamily:"PT Serif"},{linkFamily:"Noto+Serif",cssFamily:"Noto Serif"},{linkFamily:"Libre+Baskerville",cssFamily:"Libre Baskerville"},{linkFamily:"Source+Serif+Pro",cssFamily:"Source Serif Pro"},{linkFamily:"Bitter",cssFamily:"Bitter"},{linkFamily:"EB+Garamond",cssFamily:"EB Garamond"},{linkFamily:"Crimson+Text",cssFamily:"Crimson Text"}]},{name:"Sans-Serif",items:[{linkFamily:"Roboto",cssFamily:"Roboto"},{linkFamily:"Lato",cssFamily:"Lato"},{linkFamily:"Manrope",cssFamily:"Manrope"},{linkFamily:"Geologica",cssFamily:"Geologica"},{linkFamily:"Open+Sans",cssFamily:"Open Sans"},{linkFamily:"Source+Sans+Pro",cssFamily:"Source Sans Pro"},{linkFamily:"Inter",cssFamily:"Inter"},{linkFamily:"Noto+Sans",cssFamily:"Noto Sans"},{linkFamily:"Rubik",cssFamily:"Rubik"},{linkFamily:"Heebo",cssFamily:"Heebo"},{linkFamily:"IBM+Plex+Sans",cssFamily:"IBM Plex Sans"}]},{name:"Monospaced",items:[{linkFamily:"Inconsolata",cssFamily:"Inconsolata"},{linkFamily:"VT323",cssFamily:"VT323"},{linkFamily:"Anonymous+Pro",cssFamily:"Anonymous Pro"},{linkFamily:"Roboto+Mono",cssFamily:"Roboto Mono"},{linkFamily:"Fira+Code",cssFamily:"Fira Code"},{linkFamily:"Source+Code+Pro",cssFamily:"Source Code Pro"},{linkFamily:"IBM+Plex+Mono",cssFamily:"IBM Plex Mono"},{linkFamily:"Cousine",cssFamily:"Cousine"},{linkFamily:"Courier+Prime",cssFamily:"Courier Prime"},{linkFamily:"JetBrains+Mono",cssFamily:"JetBrains Mono"},{linkFamily:"Noto+Sans+Mono",cssFamily:"Noto Sans Mono"}]}],Gj=fh(async(e,t)=>{const r=await(await Hj(e)).json();t(lh(r)),e.host&&t(tl({socketState:wt.READY_TO_CONNECT}))},500),Yj=()=>{var d;const{speechSynthesisSupported:e,voicesByLanguage:t}=w.useContext(dS),n=F(p=>p.config.ghostpadConfig),r=X(),i=async p=>{r(lh({...n,...p})),await Gj(p,r)},o=async p=>{await i({host:p.target.value})},l=async p=>{await i({editorLocalFont:p.target.value})},s=p=>{i({theme:p.target.value})},a=p=>{var h;i({editorGoogleFont:{linkFamily:p.target.value,cssFamily:((h=p.target.options[p.target.selectedIndex])==null?void 0:h.text)||""}})},u=p=>{i({useGoogleFont:p.target.checked})},f=p=>{i({editorFontSize:parseInt(p.target.value)})};return c.jsxs("div",{className:"px-6 py-3",children:[c.jsx("h2",{className:"px-6 pb-3 font-bold text-center",children:"Ghostpad Settings"}),c.jsxs("div",{className:"form-control w-full max-w-xs mb-2",title:"Switch between different DaisyUI themes.",children:[c.jsx("label",{className:"label pt-0 pl-0",children:c.jsx("span",{className:"label-text",children:"Theme"})}),c.jsx("select",{onChange:s,className:"select select-bordered bg-base-200 w-full max-w-xs",value:n.theme,children:Vj.map(p=>c.jsx("option",{children:p},p))})]}),c.jsxs("div",{className:"form-control w-full max-w-xs mb-2",children:[c.jsxs("div",{title:"When enabled, you will be presented with a curated list of Google Fonts. When disabled, you will instead see a text input where you can enter a local font name.",children:[c.jsx("label",{className:"label pt-0 pl-0",children:c.jsx("span",{className:"label-text",children:"Enable Google Fonts"})}),c.jsx("input",{type:"checkbox",defaultChecked:n.useGoogleFont,onChange:u,className:"toggle mb-2 ml-1"})]}),c.jsx("label",{className:"label pt-0 pl-0",children:c.jsx("span",{className:"label-text",children:"Editor Font"})}),n.useGoogleFont&&c.jsx("select",{title:"Select a font from a curated list of Google Fonts.",onChange:a,value:n.editorGoogleFont.linkFamily,className:"select select-bordered bg-base-200 w-full max-w-xs",children:Kj.map(p=>c.jsxs(w.Fragment,{children:[c.jsx("option",{className:"font-bold italic",disabled:!0,children:p.name}),p.items.map(h=>c.jsx("option",{value:h.linkFamily,children:h.cssFamily},h.linkFamily))]},p.name))}),!n.useGoogleFont&&c.jsx("input",{title:"Enter the name of a font installed on your system.",type:"text",className:"input input-bordered input-md w-full bg-base-200",defaultValue:n.editorLocalFont,onChange:l})]}),c.jsxs("div",{className:"form-control w-full max-w-xs mb-2",title:"The size of the text in the story editor, defined in px.",children:[c.jsx("label",{className:"label pt-0 pl-0",htmlFor:"settings-fontsize",children:c.jsx("span",{className:"label-text",children:"Editor Font Size"})}),c.jsx("input",{id:"settings-fontsize",type:"number",min:1,max:99,step:1,defaultValue:n.editorFontSize,className:"input input-bordered bg-base-200",onChange:f})]}),c.jsxs("div",{className:"form-control w-full mb-2",children:[c.jsx("label",{className:"label pt-0 pl-0",children:c.jsx("span",{className:"label-text",children:"Font Preview"})}),c.jsx("p",{className:"border border-neutral rounded p-4 bg-base-200",children:c.jsx("span",{className:"font-preview",children:"The quick brown fox jumps over the lazy dog."})})]}),e&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-2",children:[c.jsx("label",{className:"label pt-0 pl-0",children:c.jsx("span",{className:"label-text",children:"Speech Synthesis Language"})}),c.jsxs("select",{className:"select select-bordered bg-base-200 w-full max-w-xs",value:n.speechSynthesisLanguage||"",onChange:p=>i({speechSynthesisLanguage:p.target.value}),children:[c.jsx("option",{value:"",children:"None"}),Object.entries(t).sort().map(([p])=>c.jsx("option",{value:p,children:p},p))]})]}),n.speechSynthesisLanguage&&c.jsxs("div",{className:"mb-2",children:[c.jsx("label",{className:"label pt-0 pl-0",children:c.jsx("span",{className:"label-text",children:"Speech Synthesis Voice"})}),c.jsxs("select",{className:"select select-bordered bg-base-200 w-full max-w-xs",value:n.speechSynthesisVoice||"",onChange:p=>i({speechSynthesisVoice:p.target.value}),children:[c.jsx("option",{value:"",children:"None"}),(d=t[n.speechSynthesisLanguage])==null?void 0:d.map(p=>c.jsxs("option",{value:p.voiceURI,children:[!p.localService&&"[Non-Local] ",p.name]},p.voiceURI))]})]}),c.jsxs("div",{className:"form-control w-full max-w-xs mb-2",title:'The hostname of the currently running KoboldAI server, specified in the format "host:port"',children:[c.jsx("label",{className:"label pt-0 pl-0",htmlFor:"settings-hostname",children:c.jsx("span",{className:"label-text",children:"Hostname Override"})}),c.jsx("input",{id:"settings-hostname",className:"input input-bordered input-md w-full bg-base-200",type:"text",defaultValue:n.host,onChange:o})]})]})]})};function Qj(e){return K({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V288H216c-13.3 0-24 10.7-24 24s10.7 24 24 24H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM384 336V288H494.1l-39-39c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l80 80c9.4 9.4 9.4 24.6 0 33.9l-80 80c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l39-39H384zm0-208H256V0L384 128z"}}]})(e)}function Jj(e){return K({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M128 64c0-35.3 28.7-64 64-64H352V128c0 17.7 14.3 32 32 32H512V448c0 35.3-28.7 64-64 64H192c-35.3 0-64-28.7-64-64V336H302.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39H128V64zm0 224v48H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H128zM512 128H384V0L512 128z"}}]})(e)}function qj(e){return K({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 0c17.7 0 32 14.3 32 32V96H472c39.8 0 72 32.2 72 72V440c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72H288V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H208zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H304zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H400zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224H64V416H48c-26.5 0-48-21.5-48-48V272c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H576V224h16z"}}]})(e)}const zf=({value:e,timestamp:t,onChange:n,label:r,disabled:i,title:o})=>{const[l,s]=w.useState(e),[a,u]=w.useState(0),f=t>a+500?e:l;return c.jsxs("div",{className:"mb-2 flex-grow min-w-1/2",title:o,children:[r&&c.jsx("div",{className:"flex mb-2",children:c.jsx("span",{className:"text-sm",children:r})}),c.jsx("textarea",{disabled:i,value:f,onChange:d=>{n==null||n(d),s(d.target.value);const p=Date.now();u(p)},className:"textarea textarea-bordered h-24 bg-base-200 min-w-full max-w-lg p-3 text-sm"})]})},Xj=({timestamp:e,value:t,worldInfoEntry:n})=>{const[r,i]=w.useState([]),[o,l]=w.useState([]),[s,a]=w.useState(0),u=e>s+500?r:o,f=w.useMemo(()=>Object.keys(t),[t]),d=w.useContext(J);w.useEffect(()=>{const g=f.map(_=>[_,t[_]]);i(g),l(g)},[f,t]);const p=(g,_)=>v=>{const y=v.target.value,x=Object.entries(t),S=Object.fromEntries(_<r.length?x.map(([T,N],b)=>[b===_?y:T,N]):[...x,[y,[]]]),C=o.map(([T,N])=>[T===g?y:T,N]);l(C),a(Date.now()),!t[y]&&(d==null||d.editWorldInfoEntry({...n,wpp:{...n.wpp,attributes:S}}))},h=(g,_)=>v=>{const y=v.target.value,x=n.wpp.attributes[g],S=_<=x.length-1?x.map((N,b)=>b===_?y:N):[...x,y],C=Object.fromEntries(Object.entries(t).map(([N,b])=>[N,N===g?S:b])),T=o.map(([N,b])=>[N,N===g?S:b]);l(T),a(Date.now()),d==null||d.editWorldInfoEntry({...n,wpp:{...n.wpp,attributes:C}})},m=()=>{const g=o.filter(([_])=>_.length).map(([_,v])=>[_,v.filter(y=>y.length)]);l(g),a(Date.now()),JSON.stringify(g)!==JSON.stringify(o)&&(d==null||d.editWorldInfoEntry({...n,wpp:{...n.wpp,attributes:Object.fromEntries(g)}}))};return c.jsx(c.Fragment,{children:[...u,["",[]]].map(([g,_],v)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex my-4",children:[c.jsx(D4,{size:"1.5em",className:"self-center mr-2"}),c.jsx(lr,{placeholder:"New Key",className:"flex-grow font-bold",timestamp:e,value:g,onBlur:m,onChange:p(g,v)})]}),c.jsx("div",{className:"space-y-2",children:(v<u.length?[..._,""]:_).map((y,x)=>c.jsx(lr,{className:"my-2 ml-8",placeholder:"New Value",timestamp:e,value:y,onBlur:m,onChange:h(g,x)},x))})]},v))})},Zj=({worldInfoEntry:e})=>{var u;const t=w.useContext(J),n=X(),{timestamps:r}=F(f=>f.config),{hiddenEntries:i,loadedFile:o,isGeneratingWI:l}=F(f=>f.ui.sidebarState),s=((u=r.story)==null?void 0:u.worldinfo)||0,a=i.includes(e.uid);return w.useEffect(()=>{if(o&&(o==null?void 0:o.target)===`wi-${e.uid}`){if(o.fileType==="text"){const{manual_text:f}=e;t==null||t.editWorldInfoEntry({...e,manual_text:f+(f.length?`

`:"")+o.content})}else if(o.fileType==="wi"){const{attributes:f}=e.wpp,d=i4(VT,f,o.content.wpp.attributes);t==null||t.editWorldInfoEntry({...e,wpp:{...e.wpp,attributes:d}})}n(kl(null))}},[n,o,t,e]),c.jsxs("li",{className:"bg-base-300/80 p-4 mx-4 border border-neutral-focus rounded-lg",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("div",{className:"ml-2 dropdown dropdown-bottom dropdown-end order-3",children:[c.jsx("label",{tabIndex:0,className:"btn btn-sm",children:c.jsx(vx,{size:"1.5em"})}),c.jsxs("ul",{tabIndex:0,className:"dropdown-content menu menu-md p-2 shadow rounded-box w-52 bg-base-100 z-[1]",children:[c.jsx("li",{children:c.jsxs("button",{className:"flex flex-row justify-start",onClick:()=>{document.activeElement.blur(),n(dx(e.uid))},children:[c.jsx(B4,{size:"1.5em"})," Move Entry"]})}),c.jsx("li",{children:c.jsxs("button",{className:"flex flex-row justify-start",onClick:()=>{document.activeElement.blur(),n(me({name:"confirmDeleteEntry",data:e}))},children:[c.jsx(Au,{size:"1.5em"})," Delete Entry"]})})]})]}),c.jsx("button",{className:"btn btn-sm btn-ghost px-0",onClick:()=>{n(v4(e.uid))},children:a?c.jsx(Lj,{size:"1.5em",className:"self-center"}):c.jsx(Rj,{size:"1.5em",className:"self-center"})}),c.jsx(lr,{timestamp:s,value:e.title,className:"flex-grow ml-2 font-semibold",inputClassname:"input input-sm bg-transparent border-0 text-sm w-full",onChange:f=>{t==null||t.editWorldInfoEntry({...e,title:f.target.value,wpp:{...e.wpp,name:f.target.value}})}})]}),!a&&c.jsxs("div",{children:[c.jsx(lr,{className:"my-2",timestamp:s,value:e.object_type||e.wpp.type||"",label:"Type",onChange:f=>{t==null||t.editWorldInfoEntry({...e,object_type:f.target.value,wpp:{...e.wpp,type:f.target.value}})}}),c.jsx("div",{className:"flex mb-2",children:c.jsx("span",{className:"text-sm",children:"Trigger"})}),c.jsx("select",{className:"select select-sm select-bordered bg-base-200 w-full max-w-xs",onChange:f=>{t==null||t.editWorldInfoEntry({...e,constant:f.target.value!=="wi",type:f.target.value})},value:e.type,children:[["constant","Always On"],["chatcharacter","Chat Character"],["wi","Keywords"],["commentator","Commentator"]].map(f=>c.jsx("option",{value:f[0],children:f[1]},f[0]))}),c.jsxs("button",{onClick:()=>{n(me({name:"saveToLibrary",data:{fileType:"wi",content:e}}))},className:"btn btn-sm btn-primary w-full mt-4",children:[c.jsx(yx,{size:"1.5em"})," Save Entry"]}),c.jsxs("div",{className:"mt-4 flex",children:[c.jsx(cS,{label:"Use WPP",className:"flex-1",value:e.use_wpp,timestamp:s,onChange:f=>{t==null||t.editWorldInfoEntry({...e,use_wpp:f.target.checked})}}),c.jsx("div",{className:"flex flex-1",children:c.jsxs("div",{className:"w-full mb-4",children:[c.jsx("div",{className:"mb-2",children:c.jsx("span",{className:"text-sm",children:"Format"})}),c.jsxs("select",{className:"select select-bordered bg-base-200 select-sm w-full max-w-full",value:e.wpp.format,onChange:f=>{t==null||t.editWorldInfoEntry({...e,wpp:{...e.wpp,format:f.target.value}})},children:[c.jsx("option",{value:"W++",children:"W++"}),c.jsx("option",{value:"Square Bracket Format (SBF)",children:"SBF"})]})]})})]}),e.type==="wi"&&c.jsxs("div",{className:"space-y-4 py-2",children:[c.jsx(lr,{label:"Primary Keywords (Comma Separated)",value:e.key.join(","),timestamp:s,onChange:f=>{t==null||t.editWorldInfoEntry({...e,key:f.target.value.split(",")})}}),c.jsx(lr,{label:"Secondary Keywords (Comma Separated)",value:e.keysecondary.join(","),timestamp:s,onChange:f=>{t==null||t.editWorldInfoEntry({...e,keysecondary:f.target.value.split(",")})}})]}),!e.use_wpp&&c.jsxs(c.Fragment,{children:[c.jsx(zf,{value:e.manual_text,timestamp:s,disabled:e.use_wpp,onChange:f=>{t==null||t.editWorldInfoEntry({...e,manual_text:f.target.value})},label:"Text"}),c.jsxs("div",{className:"flex space-y-4 mb-2 flex-wrap",children:[c.jsx("button",{onClick:()=>{n(cx(!0)),t==null||t.generateWI(e)},className:"btn btn-sm btn-neutral w-full flex-grow",disabled:l,children:l?c.jsx("span",{className:"loading loading-spinner loading-md"}):c.jsxs(c.Fragment,{children:[c.jsx(qj,{size:"1.5em"})," Generate Text"]})}),c.jsxs("button",{onClick:()=>{n(me({name:"loadFromLibrary",data:{fileType:"text",target:`wi-${e.uid}`}}))},className:"btn btn-sm btn-neutral w-full flex-grow",children:[c.jsx(zr,{size:"1.5em"})," Load Text"]}),c.jsxs("button",{onClick:()=>{n(me({name:"saveToLibrary",data:{fileType:"text",content:e.manual_text}}))},className:"btn btn-sm btn-neutral w-full flex-grow",children:[c.jsx(zr,{size:"1.5em"})," Save Text"]})]})]}),e.use_wpp&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>{t==null||t.editWorldInfoEntry({...e,manual_text:`${e.content}

${e.manual_text}`,use_wpp:!1})},disabled:!e.use_wpp,className:"btn btn-sm btn-neutral w-full mb-4",children:"Insert WPP In Text"}),c.jsx("div",{className:"flex space-x-2 mb-4",children:c.jsxs("button",{onClick:()=>{n(me({name:"loadFromLibrary",data:{fileType:"wi",target:`wi-${e.uid}`}}))},className:"btn btn-sm btn-neutral flex-1",children:[c.jsx(kj,{size:"1.5em"})," Load WPP"]})}),c.jsx(Xj,{timestamp:s,value:e.wpp.attributes,worldInfoEntry:e})]}),c.jsx(zf,{value:e.comment,timestamp:s,onChange:f=>{t==null||t.editWorldInfoEntry({...e,comment:f.target.value})},label:"Comment"})]})]})},eP=({uids:e,worldInfoEntries:t,folderName:n})=>c.jsxs("ul",{className:"my-2 space-y-2",children:[(e==null?void 0:e.length)===0&&n!=="root"&&c.jsx("div",{className:"p-4 pb-4 text-center",children:"No entries."}),e==null?void 0:e.map(r=>{const i=t[r];return i?c.jsx(Zj,{worldInfoEntry:i},i.uid):null})]}),tP=({folderName:e,folderUid:t,uids:n,worldInfoEntries:r})=>{var d;const i=w.useContext(J),o=X(),{timestamps:l}=F(p=>p.config),{movingWIEntry:s,loadedFile:a}=F(p=>p.ui.sidebarState),u=F(p=>p.config.ghostpadConfig),f=((d=l.story)==null?void 0:d.worldinfo)||0;return w.useEffect(()=>{a&&(a==null?void 0:a.target)===`wifolder-${t}`&&(i==null||i.createWorldInfoEntry({...a.content,folder:e}),o(kl(null)))},[o,e,t,a,i]),c.jsxs("details",{className:"collapse collapse-arrow bg-base-200 mb-2 relative overflow-visible border border-neutral",open:!0,children:[s!==null&&c.jsx("button",{className:"absolute inset-0 p-2 bg-black/70 text-center z-50",onClick:()=>{i==null||i.moveWorldInfoEntry(s,e),o(dx(null))},children:c.jsx(A4,{className:"inline text-white",size:"4.5em"})}),c.jsxs("summary",{onKeyUp:p=>{p.key===" "&&document.querySelectorAll("input:focus").length&&p.preventDefault()},className:"collapse-title !flex items-center",children:[c.jsx(Nj,{size:"1.5em",className:"inline pr-2 flex-shrink-0"}),c.jsx(lr,{timestamp:f,disabled:t==="-1",value:t==="-1"?"Main Entries":e,onChange:t==="-1"?void 0:(p,h)=>{i==null||i.renameWorldInfoFolder(h,p.target.value)}})]}),c.jsxs("div",{className:"collapse-content px-0 pt-8 border-t border-neutral",children:[c.jsxs("div",{className:"flex px-4 mb-4 space-x-2",children:[c.jsxs("button",{className:"btn btn-sm btn-neutral align-middle flex-1",title:"Load a world info entry from the library.",onClick:()=>{o(me({name:"loadFromLibrary",data:{fileType:"wi",target:`wifolder-${t}`}}))},children:[c.jsx(yx,{size:"1.5em"})," Load"]}),c.jsxs("div",{className:"dropdown dropdown-bottom dropdown-end flex-1",title:"Import or export JSON files containing world info folders.",children:[c.jsxs("label",{tabIndex:1,className:"btn btn-sm btn-neutral mb-2 w-full",children:[c.jsx(Aj,{size:"1.5em"})," File"]}),c.jsx("ul",{tabIndex:0,className:"dropdown-content menu menu-md p-2 shadow rounded-box w-52 bg-base-100 z-[1]",children:c.jsxs("li",{children:[c.jsxs("label",{htmlFor:`json-import-${t}`,className:"flex flex-row justify-start",children:[c.jsx(Jj,{size:"1.5em"})," Import"]}),c.jsx("input",{type:"file",className:"hidden",id:`json-import-${t}`,name:`json-import-${t}`,accept:"application/json",onChange:p=>{const{files:h}=p.target;if(h)for(const m of h){const g=new FileReader;g.onload=_=>{var v;(v=_==null?void 0:_.target)!=null&&v.result&&(i==null||i.uploadWorldInfoFolder(e,m.name,_.target.result))},g.readAsArrayBuffer(m)}}}),c.jsxs("button",{onClick:()=>{document.location.href=`//${u==null?void 0:u.host}/export_world_info_folder?folder=${e}`},className:"flex flex-row justify-start",children:[c.jsx(Qj,{size:"1.5em"})," Export"]})]})})]})]}),c.jsx("div",{className:"text-center space-x-2 px-4 mb-4",children:c.jsxs("button",{className:"btn btn-sm btn-primary px-4 w-3/4",title:"Create a new world info entry.",onClick:()=>{i==null||i.createWorldInfoEntry({folder:e,type:"constant",constant:!0})},children:[c.jsx(J4,{size:"1.5em"}),"New Entry"]})}),c.jsx("div",{className:"flex space-x-2 px-4 mb-4"}),c.jsx(eP,{folderName:e,uids:n,worldInfoEntries:r}),t!=="-1"&&c.jsx("div",{className:"flex space-x-2 px-4 mt-4",children:c.jsxs("button",{className:"btn btn-sm bg-error/40 flex-1",onClick:()=>{i==null||i.deleteWorldInfoFolder(e)},children:[c.jsx(Au,{size:"1.5em"})," Delete Folder And Entries"]})})]})]})},nP=()=>{const{wiFolderInfo:e,wiFolderIds:t}=F(s=>{var a,u;return{wiFolderInfo:(a=s.config.koboldConfig.story)==null?void 0:a.wifolders_d,wiFolderIds:(u=s.config.koboldConfig.story)==null?void 0:u.wifolders_l}},an),{worldInfoFolders:n,worldInfoEntries:r}=F(s=>s.worldInfo),i=w.useContext(J),o=w.useMemo(()=>Object.keys(n),[n]),l=w.useMemo(()=>Object.keys(r).length,[r]);return c.jsxs("div",{className:"px-6 py-3",children:[c.jsx("h2",{className:"px-6 pb-3 font-bold text-center",children:"World Info"}),c.jsxs("div",{className:"collapse collapse-arrow border border-neutral bg-base-200 rounded-box mb-3",children:[c.jsx("input",{type:"checkbox"}),c.jsx("div",{className:"collapse-title h-8",children:c.jsx("span",{className:"text-sm",children:"World Info Settings"})}),c.jsxs("div",{className:"collapse-content flex flex-row flex-wrap justify-center gp-range-group",children:[c.jsx(Xe,{label:"WI Depth",varName:"user_widepth",min:1,max:5,step:1,title:"Number of actions from the end of the story to scan for World Info keys."}),c.jsx(Te,{label:"Dynamic WI Scan",varName:"story_dynamicscan",title:"Scans the AI's output for World Info keys as it is generating one."}),c.jsx(Xe,{label:"WI Gen Amount",varName:"user_wigen_amount",min:25,max:125,step:1,title:"How many tokens the World Info Generator creates."}),c.jsx(Te,{label:"Native WI Gen",varName:"user_wigen_use_own_wi",title:"Uses your existing applicable (has title,type,content) World Info entries as inspiration for generated ones."}),c.jsx(Xe,{label:"Story Commentary Chance",varName:"story_commentary_chance",min:0,max:100,step:1,title:"Chance that the AI will add commentary to the story."}),c.jsx(Te,{label:"Story Commentary Enabled",varName:"story_commentary_enabled",title:"Allow custom characters to comment on the story."})]})]}),c.jsx("div",{className:"flex px-4 mb-3 space-x-2",children:c.jsxs("button",{onClick:()=>{i==null||i.createWorldInfoFolder()},className:"btn btn-sm btn-primary flex-1",title:"Create a folder to group world info entries.",children:[c.jsx(Cj,{size:"1.5em"})," New Folder"]})}),l===0&&o.length===1&&c.jsx("div",{className:"p-4 pb-4 text-center",children:"No entries."}),[-1,...t||[]].map(s=>{var u;const a=s===-1?"root":(u=e==null?void 0:e[s])==null?void 0:u.name;return typeof a!="string"?null:c.jsx("div",{className:"pb-4",children:c.jsx(tP,{folderUid:`${s}`,folderName:a,uids:n[a],worldInfoEntries:r})},a==="root"?"-1":s)})]})},Xc=({varName:e,label:t,title:n})=>{var d,p;const r=w.useContext(J),{koboldConfig:i,timestamps:o}=F(h=>h.config),[l,...s]=e.split("_"),a=s.join("_"),u=((d=o[l])==null?void 0:d[a])||0,f=((p=i[l])==null?void 0:p[a])||"";return c.jsx(zf,{value:f,timestamp:u,onChange:h=>{r==null||r.varChange(e,h.target.value)},label:t,title:n})},rP=()=>{const e=X(),t=w.useContext(J),{memory:n,authornote:r,loadedFile:i}=F(o=>{var l,s;return{memory:((l=o.config.koboldConfig.story)==null?void 0:l.memory)||"",authornote:((s=o.config.koboldConfig.story)==null?void 0:s.authornote)||"",loadedFile:o.ui.sidebarState.loadedFile}},an);return w.useEffect(()=>{i&&((i==null?void 0:i.target)==="memory"&&(t==null||t.varChange("story_memory",n+(n.length?`

`:"")+i.content),e(kl(null))),(i==null?void 0:i.target)==="authornote"&&(t==null||t.varChange("story_authornote",r+(r.length?`

`:"")+i.content),e(kl(null))))},[r,e,i,n,t]),c.jsxs("div",{className:"flex-grow px-6 py-3",children:[c.jsx("h2",{className:"px-6 pb-3 font-bold text-center",children:"Story Settings"}),c.jsx(Xc,{varName:"story_memory",label:"Memory",title:"Important information the AI should always keep in mind."}),c.jsxs("div",{className:"flex justify-between space-x-2",children:[c.jsxs("button",{className:"btn flex-1",onClick:()=>{e(me({name:"loadFromLibrary",data:{fileType:"text",target:"memory"}}))},title:"Load a memory from the text library. This will append it to the current text, so you can combine multiple items.",children:[c.jsx(zr,{size:"1.5em"}),"Load"]}),c.jsxs("button",{className:"btn flex-1",onClick:()=>{e(me({name:"saveToLibrary",data:{fileType:"text",content:n}}))},title:"Save the memory to the text library.",children:[c.jsx(zr,{size:"1.5em"}),"Save"]})]}),c.jsx(Wl,{varName:"story_authornotetemplate",label:"Author's Note Template",title:"This is how your author's note will be formatted when it is submitted to the AI. Use <|> as a placeholder for the author's note itself."}),c.jsx(Xc,{varName:"story_authornote",label:"Author's Note",title:"Notes to influence the writing style, story plot, or AI behavior."}),c.jsxs("div",{className:"flex justify-between space-x-2",children:[c.jsxs("button",{className:"btn flex-1",onClick:()=>{e(me({name:"loadFromLibrary",data:{fileType:"text",target:"authornote"}}))},title:"Load an author's note from the text library. This will append it to the current text, so you can combine multiple items.",children:[c.jsx(zr,{size:"1.5em"}),"Load"]}),c.jsxs("button",{className:"btn flex-1",onClick:()=>{e(me({name:"saveToLibrary",data:{fileType:"text",content:r}}))},title:"Save the author's note to the text library.",children:[c.jsx(zr,{size:"1.5em"}),"Save"]})]}),c.jsx(Xe,{max:5,min:1,step:1,varName:"story_andepth",label:"Author's Note Depth",title:"Number of actions from the end of the story to insert Author's Note info."}),c.jsx(Wl,{title:"Styles the AI will attempt to imitate. Effectiveness depends on model.",varName:"story_genres",label:"Genres (Comma Separated)"}),c.jsx(Xc,{varName:"story_notes",label:"Personal Notes (Not Read By AI)"}),c.jsx(Te,{className:"!p-0",varName:"story_autosave",label:"Auto Save",title:"Whether the story is saved after each action."})]})},Mo=({section:e,Icon:t})=>{const n=F(i=>i.ui.sidebarState.selectedSection),r=X();return c.jsx("button",{className:`btn btn-ghost btn-sm rounded-btn px-0 flex-grow ${e===n?"text-secondary":""}`,onClick:()=>r(fx(e)),children:c.jsx(t,{size:"2em"})})},Iy={[St.Home]:zj,[St.ModelSettings]:Wj,[St.Settings]:Yj,[St.WorldInfo]:nP,[St.Memory]:rP},iP=()=>{var n;const[e,t]=F(r=>[r.config.koboldConfig,r.connection.socketState],an);return c.jsxs("div",{className:"text-center py-3",children:[c.jsx("span",{className:Gt("inline-block rounded w-2 h-2 mx-2",t===wt.CONNECTED&&"bg-success",t===wt.DISCONNECTED&&"bg-error",t===wt.READY_TO_CONNECT&&"bg-warning")}),t===wt.CONNECTED?(n=e.model)==null?void 0:n.model:"[Not Connected]"]})},oP=()=>{const e=F(r=>r.ui.sidebarState.selectedSection),t=Object.keys(Iy).includes(e)?Iy[e]:null,n=X();return c.jsxs("div",{className:"drawer-side",children:[c.jsx("label",{className:"drawer-overlay",onClick:()=>{n(ux()),n(fx(St.Home))}}),c.jsxs("div",{className:"w-[88%] min-h-full h-full bg-base-100 text-base-content flex flex-col max-w-md",children:[c.jsx(iP,{}),c.jsxs("div",{className:"px-4 drawer-subnav text-center py-2 border-y border-neutral flex flex-wrap",children:[c.jsx(Mo,{section:St.Home,Icon:Ej}),c.jsx(Mo,{section:St.ModelSettings,Icon:K4}),c.jsx(Mo,{section:St.WorldInfo,Icon:X4}),c.jsx(Mo,{section:St.Memory,Icon:zr}),c.jsx(Mo,{section:St.Settings,Icon:Tj})]}),t&&c.jsx("div",{className:"overflow-y-auto flex flex-col flex-grow",children:c.jsx(t,{})})]})]})},lP=()=>{const e=F(l=>l.config.koboldConfig.story),t=F(l=>l.ui.modalState),n=(e==null?void 0:e.story_name)||"New Story",r=w.useContext(J),[,i]=w.useState(n),o=X();return t.saveStory.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"save-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Save Story"}),c.jsx("p",{className:"py-4",children:c.jsx("input",{type:"text",onChange:l=>{i(l.target.value),r==null||r.varChange("story_story_name",l.target.value)},className:"input input-bordered w-full",placeholder:"Story Name",defaultValue:n})}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{o(te("saveStory"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{r==null||r.saveStoryWithCallback(l=>{l==="overwrite?"&&o(me({name:"overwriteStory"})),o(te("saveStory"))})},className:"btn",children:"Save"})]})]})})]}):null},sP=()=>{const e=w.useContext(J),t=F(r=>r.ui.modalState),n=X();return t.overwriteStory.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"overwrite-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Save Story"}),c.jsx("p",{className:"py-4",children:"A story with this name already exists. Do you want to overwrite it?"}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{n(te("overwriteStory"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{e==null||e.overwriteStory(),n(te("overwriteStory"))},className:"btn",children:"Overwrite"})]})]})})]}):null},aP=()=>{var i;const e=w.useContext(J),t=F(o=>o.ui.modalState),n=X(),r=(i=t.confirmDeleteStory)==null?void 0:i.data;return t.confirmDeleteStory.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"confirm-delete-story-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Delete Story?"}),c.jsxs("p",{className:"py-4",children:["Please confirm that you would like to permanently delete"," ",c.jsx("i",{children:r==null?void 0:r.name}),"."]}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{n(te("confirmDeleteStory"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{e==null||e.deleteStory(r.path),n(te("confirmDeleteStory"))},className:"btn",children:"Delete"})]})]})})]}):null},uP=()=>{const e=F(s=>s.ui.modalState),t=w.useContext(J),n=X(),[r,i]=w.useState(""),[o,l]=w.useState("");return e.savePreset.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"save-preset-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("input",{type:"text",className:"input input-bordered w-full mb-4",placeholder:"Name",onChange:s=>{i(s.target.value)}}),c.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Description",onChange:s=>{l(s.target.value)}}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>n(te("savePreset")),className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{t==null||t.saveNewPreset(r,o),n(te("savePreset"))},className:"btn",children:"Save"})]})]})})]}):null},cP=()=>{const e=F(d=>d.ui.modalState),t=F(d=>d.config.koboldConfig),n=w.useContext(J),r=X(),i=["Top K","Top A","Top P","Tail Free Sampling","Typical Sampling","Temperature","Repetition Penalty"],{sampler_order:o}=t.model||{},[l,s]=w.useState(null),[a,u]=w.useState(null),f=l===null?o:l;return e.samplerOrder.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"sampler-order-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box flex flex-col",children:[c.jsx("ul",{className:"menu overflow-auto flex-row",children:f==null?void 0:f.map(d=>c.jsx("li",{className:"justify-between flex flex-row w-full",onClick:()=>{u(a===d?null:d)},children:c.jsx("a",{className:Gt(a===d&&"active","flex items-center text-lg w-full py-4"),children:i[d]})},d))}),c.jsxs("div",{className:"modal-action justify-between",children:[c.jsxs("div",{className:"text-right space-x-2",children:[c.jsx("button",{className:"btn",onClick:()=>{if(a===null)return;const d=[...l||o||[]],p=d.indexOf(a),h=p===0?d.length-1:p-1;[d[p],d[h]]=[d[h],d[p]],s(d)},children:c.jsx(G4,{size:"1.5em"})}),c.jsx("button",{className:"btn",onClick:()=>{if(a===null)return;const d=[...l||o||[]],p=d.indexOf(a),h=p===d.length-1?0:p+1;[d[p],d[h]]=[d[h],d[p]],s(d)},children:c.jsx(M4,{size:"1.5em"})})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("label",{onClick:()=>{r(te("samplerOrder")),s(null),u(null)},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{l!==null&&(n==null||n.varChange("model_sampler_order",l)),r(te("samplerOrder")),s(null),u(null)},className:"btn",children:"Save"})]})]})]})})]}):null},dP=()=>{var a;const e=F(u=>u.ui.modalState),t=w.useContext(J),n=X(),r=e.selectOption.data,i=F(u=>{var f;return(f=u.config.koboldConfig.story)==null?void 0:f.actions}),o=!(i!=null&&i.length)||typeof(r==null?void 0:r.actionId)!="number"?[]:((a=i[r.actionId])==null?void 0:a.action.Options)||[],l=F(u=>{var f;return(f=u.config.koboldConfig.system)==null?void 0:f.aibusy}),s=u=>{l&&(t==null||t.abort()),t==null||t.useOptionText(r.actionId,u),n(te("selectOption"))};return e.selectOption.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"first-run-modal",className:"modal-toggle"}),c.jsx("div",{className:Gt("modal",e.selectOption.active&&"modal-open"),children:c.jsxs("div",{className:"modal-box flex flex-col",children:[c.jsx("ul",{className:"menu overflow-auto flex-row",children:o.map((u,f)=>c.jsx("li",{className:"w-full border border-neutral rounded mb-2",children:c.jsx("a",{onClick:()=>s(f),children:u.text})},f))}),c.jsx("div",{className:"modal-action",children:c.jsx("label",{onClick:()=>{n(te("selectOption"))},className:"btn",children:"Cancel"})})]})})]}):null},fP=()=>{const e=w.useContext(J),{modalState:t,availableUserscripts:n}=F(l=>({modalState:l.ui.modalState,availableUserscripts:l.ui.availableUserscripts}),an),r=X(),[i,o]=w.useState(null);return t.addUserscript.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"add-userscript-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box flex flex-col",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Add Userscript"}),n.length===0&&c.jsx("div",{className:"text-center mt-6",children:"No userscripts found."}),!!n.length&&c.jsx("ul",{className:"menu menu-md overflow-auto flex-row",children:n.map(l=>c.jsx("li",{className:Gt("w-full",l.path===i&&"bg-primary text-primary-content"),onClick:()=>{const s=i===l.path?null:l.path;o(s)},children:c.jsxs("div",{className:"block",children:[c.jsx("div",{className:"font-bold",children:l.name}),c.jsx("div",{children:l.description})]})},l.path))}),c.jsxs("div",{className:"modal-action",children:[c.jsx("button",{onClick:()=>{r(te("addUserscript"))},className:"btn",children:"Cancel"}),c.jsx("button",{disabled:!i,onClick:()=>{e==null||e.addUserscript(i),r(te("addUserscript"))},className:"btn btn-primary",children:"Add"})]})]})})]}):null},pP=e=>e.reduce((t,n)=>n.phrase.length?{...t,[n.phrase]:[n.bias,n.completionThreshold]}:t,{}),hP=e=>e?Object.entries(e).map(([t,[n,r]])=>({phrase:t,bias:n,completionThreshold:r})):[],mP=({phrase:e,bias:t,completionThreshold:n,onClose:r,onChange:i})=>c.jsxs("li",{className:"p-4 space-y-2 border border-neutral rounded my-2",children:[c.jsxs("div",{className:"flex flex-row",children:[c.jsx("input",{placeholder:"Phrase",className:"input input-bordered input-md mr-2 w-full",type:"text",onChange:o=>{i("phrase",o)},value:e}),c.jsx("button",{onClick:r,className:"btn btn-md btn-error",children:c.jsx(ao,{size:"1.5em"})})]}),c.jsxs("div",{className:"form-control",children:[c.jsx("label",{className:"label",children:c.jsx("span",{className:"label-text",children:"Bias"})}),c.jsx("input",{type:"range",step:.01,min:-50,max:50,value:t,onChange:o=>{i("bias",o)},className:"range range-primary"})]}),c.jsxs("div",{className:"form-control",children:[c.jsx("label",{className:"label",children:c.jsx("span",{className:"label-text",children:"Completion Threshold"})}),c.jsx("input",{type:"range",step:1,min:0,max:10,value:n,onChange:o=>{i("completionThreshold",o)},className:"range range-primary"})]})]}),Dy=(e,t)=>{t==null||t.phraseBiasUpdate(pP(e))},gP=()=>{var u;const{socket:e}=w.useContext(ql),t=w.useContext(J),n=X(),[r,i]=w.useState(null),{modalState:o,timestamps:l,biases:s,localBiases:a}=F(f=>{var d;return{timestamps:f.config.timestamps,modalState:f.ui.modalState,biases:(d=f.config.koboldConfig.story)==null?void 0:d.biases,localBiases:f.ui.localBiases}},an);return w.useEffect(()=>{const f=qt.startListening({actionCreator:Ru,effect:d=>{var p;if(d.payload.classname==="story"&&d.payload.name==="biases"&&(((p=l.story)==null?void 0:p.biases)??0)>=(r||0)){const g=hP(d.payload.value);a.reduce((v,y,x)=>(y.phrase===""&&v.push({bias:y,idx:x}),v),[]).forEach(({bias:v,idx:y})=>{g.splice(y,0,v)}),n(bs(g)),i(Date.now())}}});return()=>{f()}},[s,n,a,r,(u=l.story)==null?void 0:u.biases]),!e||!o.biasing.active?null:c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"biasing-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box flex flex-col",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Biasing"}),!a.length&&c.jsx("div",{className:"text-center mt-6",children:"No biases."}),!!a.length&&c.jsx("ul",{className:"overflow-auto flex-row",children:a.map((f,d)=>c.jsx(mP,{onChange:(p,h)=>{const m=[...a.map(g=>({...g}))];p==="phrase"?m[d].phrase=h.target.value:p==="bias"?m[d].bias=parseFloat(h.target.value):p==="completionThreshold"&&(m[d].completionThreshold=parseInt(h.target.value)),n(bs(m)),i(Date.now()),Dy(m,t)},onClose:()=>{const p=a.filter((h,m)=>m!==d);n(bs(p)),i(Date.now()),Dy(p,t)},...f},d))}),c.jsxs("div",{className:"modal-action",children:[c.jsx("button",{onClick:()=>{n(te("biasing"))},className:"btn",children:"Close"}),c.jsx("button",{onClick:()=>{n(bs([...a,{phrase:"",bias:0,completionThreshold:10}])),i(Date.now())},className:"btn btn-primary",children:"Add New"})]})]})})]})},yP=()=>{const{socket:e}=w.useContext(ql),t=w.useContext(J),{timestamps:n,modalState:r,substitutions:i,localSubstitutions:o}=F(p=>{var h,m;return{timestamps:p.config.timestamps,modalState:p.ui.modalState,substitutions:(m=(h=p.config.koboldConfig)==null?void 0:h.story)==null?void 0:m.substitutions,localSubstitutions:p.ui.localSubstitutions}},an),l=X(),[s,a]=w.useState(null);w.useEffect(()=>{const p=qt.startListening({actionCreator:Ru,effect:h=>{var m;if(h.payload.classname==="story"&&h.payload.name==="substitutions"&&(((m=n.story)==null?void 0:m.substitutions)??0)>=(s||0)){const v=[...h.payload.value||[]];o.reduce((x,S,C)=>(S.target===""&&x.push({substitution:S,idx:C}),x),[]).forEach(({substitution:x,idx:S})=>{v.splice(S,0,x)}),l(Lo(v)),a(Date.now())}}});return()=>{p()}},[l,o,s,i,n.story]);const u=(p,h,m)=>{if(!e)return;const g=o.map(v=>({...v}));p==="target"?g[h].trueTarget=g[h].target=(m==null?void 0:m.target.value)||"":p==="substitution"?g[h].substitution=(m==null?void 0:m.target.value)||"":p==="enabled"&&(g[h].enabled=(m==null?void 0:m.target.checked)||!1),l(Lo(g)),a(Date.now());const _=g.filter(v=>v.target!=="");t==null||t.substitutionUpdate(_)},f=p=>{if(!e)return;const h=o.map(g=>({...g}));h.splice(p,1),l(Lo(h)),a(Date.now());const m=h.filter(g=>g.target!=="");t==null||t.substitutionUpdate(m)},d=p=>{if(!e)return;const h=o.map(g=>({...g}));h[p].enabled=!h[p].enabled,l(Lo(h)),a(Date.now());const m=h.filter(g=>g.target!=="");t==null||t.substitutionUpdate(m)};return r.substitutions.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"substitutions-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box flex flex-col",children:[c.jsx("h3",{className:"font-bold text-lg mb-6",children:"Substitutions"}),c.jsxs("div",{className:"overflow-y-auto",children:[!o.length&&c.jsx("div",{className:"text-center",children:"No substitutions."}),o.map((p,h)=>c.jsxs("div",{className:"w-full rounded mb-2 flex space-x-2",children:[c.jsx("button",{className:"btn btn-ghost",onClick:()=>d(h),children:c.jsx(dh,{size:"1.5em",className:p.enabled?"text-primary":"text-error"})}),c.jsx("input",{className:"input input-bordered w-full",type:"text",placeholder:"Target",value:p.target,onChange:m=>u("target",h,m)}),c.jsx("input",{className:"input input-bordered w-full",type:"text",placeholder:"Substitution",value:p.substitution,onChange:m=>u("substitution",h,m)}),c.jsx("button",{className:"btn btn-error",onClick:()=>f(h),children:c.jsx(ao,{size:"1.5em"})})]},h))]}),c.jsxs("div",{className:"modal-action",children:[c.jsx("button",{onClick:()=>{l(te("substitutions"))},className:"btn",children:"Close"}),c.jsx("button",{onClick:()=>{l(Lo([...o,{target:"",trueTarget:"",substitution:"",enabled:!0}]))},className:"btn btn-primary",children:"Add New"})]})]})})]}):null},vP=()=>{const e=w.useContext(J),t=F(r=>r.ui.modalState),n=X();return t.confirmResetEditor.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"confirm-reset-editor-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Clear story?"}),c.jsx("p",{className:"py-4",children:"Please confirm that you would like to clear the story. Unsaved changes will be lost."}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{n(te("confirmResetEditor"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{e==null||e.newStory(),n(te("confirmResetEditor"))},className:"btn",children:"Delete"})]})]})})]}):null},xP=()=>{var i;const e=w.useContext(J),t=F(o=>o.ui.modalState),n=X(),r=(i=t.confirmDeleteEntry)==null?void 0:i.data;return t.confirmDeleteEntry.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"confirm-delete-entry-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Delete entry?"}),c.jsxs("p",{className:"py-4",children:["Please confirm that you would like to permanently delete"," ",c.jsx("i",{children:r==null?void 0:r.title}),"."]}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{n(te("confirmDeleteEntry"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:()=>{e==null||e.deleteWorldInfoEntry(r.uid),n(te("confirmDeleteEntry"))},className:"btn",children:"Delete"})]})]})})]}):null},Bf=e=>e.replace(/[/\\?%*:|"<>]/g,"-"),fS=(e,t,n,r)=>fetch("/ghostpad/api/library/save",{method:"POST",body:JSON.stringify({filename:e,fileType:t,content:n,overwrite:r})}),_P=()=>{const e=F(l=>l.ui.modalState),t=X(),n=e.saveToLibrary.data,[r,i]=w.useState("");if(w.useEffect(()=>{(n==null?void 0:n.fileType)==="wi"&&typeof n.content!="string"?i(`${Bf(n.content.title)}`):i("")},[n==null?void 0:n.content,n==null?void 0:n.fileType]),!n)return null;const o=typeof n.content=="string"?n.content:JSON.stringify(n.content,null,2);return e.saveToLibrary.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"save-to-library-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("input",{type:"text",className:"input input-bordered w-full mb-4",placeholder:"Filename (No extension)",value:r,onChange:l=>{i(Bf(l.target.value))}}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>t(te("saveToLibrary")),className:"btn",children:"Cancel"}),c.jsx("label",{onClick:async()=>{const l=await fS(r,n.fileType,o,!1);l.status===409?t(me({name:"confirmOverwriteLibraryFile",data:{filename:r,content:o,fileType:n.fileType}})):l.status!==200&&console.error("Failed to save to library"),t(te("saveToLibrary"))},className:"btn",children:"Save"})]})]})})]}):null},SP=()=>{var o;const e=F(l=>l.ui.modalState),t=X();if(!e.confirmOverwriteLibraryFile.data)return null;const{filename:n,content:r,fileType:i}=(o=e.confirmOverwriteLibraryFile)==null?void 0:o.data;return e.confirmOverwriteLibraryFile.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"confirm-overwrite-library-file-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Overwrite existing file?"}),c.jsxs("p",{className:"py-4",children:["Please confirm that you would like to overwrite ",c.jsx("i",{children:n}),"."]}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{t(te("confirmOverwriteLibraryFile"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:async()=>{(await fS(n,i,r,!0)).status!==200&&alert("Error overwriting file."),t(te("confirmOverwriteLibraryFile"))},className:"btn",children:"Overwrite"})]})]})})]}):null},wP=e=>fetch(`/ghostpad/api/library/list?${new URLSearchParams({fileType:e})}`,{method:"GET"}),Wh=async e=>{if(!e)return;const n=await(await wP(e)).json();Ee.dispatch(S4(n))},CP=(e,t,n)=>fetch("/ghostpad/api/library/rename",{method:"POST",body:JSON.stringify({filename:e,newName:t,fileType:n})}),NP=(e,t)=>fetch(`/ghostpad/api/library/load?${new URLSearchParams({fileType:e,filename:t})}`,{method:"GET"}),EP=({item:e,fileType:t,setEditingItem:n})=>{const r=w.useRef(null),[i,o]=w.useState(e.name);return w.useEffect(()=>{var l;(l=r.current)==null||l.focus()},[]),c.jsxs(c.Fragment,{children:[c.jsx("input",{className:"input input-sm bg-base-200 py-0 pl-4 border-0 max-w-none w-full !cursor-text",type:"text",value:i,onChange:l=>o(Bf(l.target.value)),ref:r}),c.jsx("button",{className:"px-4 py-2",onClick:()=>{n(null)},children:c.jsx(ao,{size:"1.5em"})}),c.jsx("button",{className:"px-4 py-2",onClick:async()=>{i.length&&(await CP(e.filename,i,t)).status==200&&Wh(t).catch(s=>{console.error(s)}),n(null)},children:c.jsx(dh,{size:"1.5em"})})]})},TP=()=>{const{modalState:e,libraryItems:t}=F(u=>({modalState:u.ui.modalState,libraryItems:u.ui.libraryItems}),an),n=X(),[r,i]=w.useState(null),[o,l]=w.useState(null),{fileType:s,target:a}={...e.loadFromLibrary.data?e.loadFromLibrary.data:{}};return w.useEffect(()=>{Wh(s).catch(u=>{console.error(u)})},[s]),!s||!a?null:e.loadFromLibrary.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"load-from-library-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box flex flex-col",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Load From Library"}),!t.length&&c.jsx("div",{className:"text-center mt-6",children:"No entries found."}),!!t.length&&c.jsx("ul",{className:"menu menu-md overflow-y-auto flex-nowrap ",children:t.map(u=>c.jsxs("li",{className:"w-full flex flex-row flex-nowrap h-10 items-center",children:[r===u.filename&&c.jsx(EP,{item:u,fileType:s,setEditingItem:i},u.filename),r!==u.filename&&c.jsxs(c.Fragment,{children:[c.jsx("label",{onClick:()=>{l(o===u?null:u)},className:Gt("flex-grow block py-0 h-10 leading-10 content-center whitespace-nowrap overflow-hidden overflow-ellipsis",o===u&&"active"),children:u.name}),c.jsx("button",{onClick:()=>{i(u.filename)},children:c.jsx(gx,{size:"1.5em"})}),c.jsx("button",{onClick:()=>{n(me({name:"confirmDeleteLibraryItem",data:{itemToDelete:u,fileType:s}}))},children:c.jsx(Au,{size:"1.5em"})})]})]},u.filename))}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{n(te("loadFromLibrary"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:async()=>{if(o&&s&&o.filename&&a){const u=await NP(s,o.filename);if(u.status!==200){console.error("Failed to load from library");return}const{fileContents:f}=await u.json();n(kl({name:o.name,filename:o.filename,content:f,fileType:s,target:a}))}n(te("loadFromLibrary"))},className:"btn",children:"Load"})]})]})})]}):null},OP=(e,t)=>fetch("/ghostpad/api/library/remove",{method:"POST",body:JSON.stringify({filename:e,fileType:t})}),bP=()=>{const e=F(i=>i.ui.modalState),t=X();if(!e.confirmDeleteLibraryItem.data)return null;const{itemToDelete:n,fileType:r}=e.confirmDeleteLibraryItem.data;return e.confirmDeleteLibraryItem.active?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",id:"confirm-delete-entry-modal",className:"modal-toggle"}),c.jsx("div",{className:"modal modal-open",children:c.jsxs("div",{className:"modal-box",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Delete entry?"}),c.jsxs("p",{className:"py-4",children:["Please confirm that you would like to permanently delete"," ",c.jsx("i",{children:n==null?void 0:n.name}),"."]}),c.jsxs("div",{className:"modal-action",children:[c.jsx("label",{onClick:()=>{t(te("confirmDeleteLibraryItem"))},className:"btn",children:"Cancel"}),c.jsx("label",{onClick:async()=>{(await OP(n.name,r)).status===200&&Wh(r).catch(o=>{console.error(o)}),t(te("confirmDeleteLibraryItem"))},className:"btn",children:"Delete"})]})]})})]}):null},jP=()=>c.jsxs(c.Fragment,{children:[c.jsx(gP,{}),c.jsx(dP,{}),c.jsx(lP,{}),c.jsx(sP,{}),c.jsx(aP,{}),c.jsx(uP,{}),c.jsx(cP,{}),c.jsx(fP,{}),c.jsx(yP,{}),c.jsx(xP,{}),c.jsx(vP,{}),c.jsx(_P,{}),c.jsx(SP,{}),c.jsx(TP,{}),c.jsx(bP,{})]}),PP=()=>{const e=F(t=>t.config.ghostpadConfig);return c.jsxs(Qd,{children:[c.jsx("title",{children:"GhostPad"}),";",c.jsx("meta",{name:"description",content:"AI text generation tool"}),c.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover, user-scalable=no, shrink-to-fit=no"}),c.jsx("meta",{name:"HandheldFriendly",content:"true"}),e&&c.jsx("style",{children:`
            :root {
              --editor-font: '${e.useGoogleFont?e.editorGoogleFont.cssFamily:e.editorLocalFont}';
              --editor-font-size: ${e.editorFontSize}px;
            }
          `})]})},kP=({textAreaRef:e})=>{const t=F(i=>i.config.koboldConfig.system),n=F(i=>i.config.koboldConfig.story),r=w.useContext(J);return c.jsx("button",{className:Gt("btn w-16 mx-4",(t==null?void 0:t.aibusy)&&"hover:bg-error-content"),onClick:()=>{var i,o;if(t!=null&&t.aibusy)r==null||r.abort();else{const l=e==null?void 0:e.current;if(l){const s=(n==null?void 0:n.prompt_wi_highlighted_text.length)==0,a=n==null?void 0:n.actions.filter(h=>(h==null?void 0:h.action["Selected Text"].length)>0),u=a==null?void 0:a[a.length-1],f=u?u==null?void 0:u.action["Selected Text"]:(i=n==null?void 0:n.prompt_wi_highlighted_text[0])==null?void 0:i.text,p=(((o=f==null?void 0:f.slice(-1))==null?void 0:o[0])||"")==`
`;(n==null?void 0:n.storymode)!==0||!l.value.length||s||p?r==null||r.submit(l.value):(f!=null&&f.endsWith(`

`)&&(r==null||r.submit(l.value.slice(0,-1))),r==null||r.submit(`
${l.value}`)),l.value=""}}},children:t!=null&&t.aibusy?c.jsx(W4,{size:"1.5em"}):c.jsx(H4,{size:"1.5em"})})},$P=()=>{const e=F(t=>t.ui);return c.jsx("input",{id:"sidebar-drawer",type:"checkbox",checked:e.sidebarState.active,className:"drawer-toggle",readOnly:!0})};function RP(){const e=X(),{socket:t}=w.useContext(ql),n=F(i=>i.config.ghostpadConfig),r=w.useRef(null);return w.useEffect(()=>{(async()=>await(await fetch("/ghostpad/api/config")).json())().then(o=>{e(lh(o))}).catch(o=>{console.error(o)})},[e]),w.useEffect(()=>{$4(e,t)},[t,e]),n?c.jsxs(c.Fragment,{children:[c.jsx(PP,{}),c.jsxs("main",{"data-theme":(n==null?void 0:n.theme)||"garden",children:[n.useGoogleFont&&c.jsxs(c.Fragment,{children:[c.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),c.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),c.jsx("link",{href:`https://fonts.googleapis.com/css2?family=${n.editorGoogleFont.linkFamily}&display=swap`,rel:"stylesheet"})]}),c.jsxs("div",{className:"drawer",children:[c.jsx($P,{}),c.jsxs("div",{className:"drawer-content h-screen-dvh flex flex-col",children:[c.jsx(IO,{}),c.jsx(Sj,{}),c.jsx(wj,{}),c.jsxs("div",{className:"h-36 flex justify-center items-center bg-base-300",children:[c.jsx("textarea",{ref:r,id:"user-input",className:"resize-none textarea textarea-bordered h-24 bg-base-200 w-full max-w-lg p-3 text-sm mx-4 my-2"}),c.jsx(kP,{textAreaRef:r})]})]}),c.jsx(oP,{}),c.jsx(jP,{})]})]})]}):null}Zc.createRoot(document.getElementById("root")).render(c.jsx(bN,{store:Ee,children:c.jsx(mT,{children:c.jsx(MO,{children:c.jsx(Uj,{children:c.jsx(RP,{})})})})}));
